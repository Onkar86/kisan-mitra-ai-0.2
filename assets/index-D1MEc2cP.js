(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();function jy(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var mg={exports:{}},ku={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JE;function wM(){if(JE)return ku;JE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,a){var u=null;if(a!==void 0&&(u=""+a),r.key!==void 0&&(u=""+r.key),"key"in r){a={};for(var d in r)d!=="key"&&(a[d]=r[d])}else a=r;return r=a.ref,{$$typeof:n,type:i,key:u,ref:r!==void 0?r:null,props:a}}return ku.Fragment=e,ku.jsx=t,ku.jsxs=t,ku}var KE;function CM(){return KE||(KE=1,mg.exports=wM()),mg.exports}var I=CM(),gg={exports:{}},Le={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YE;function IM(){if(YE)return Le;YE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),E=Symbol.iterator;function C(F){return F===null||typeof F!="object"?null:(F=E&&F[E]||F["@@iterator"],typeof F=="function"?F:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,P={};function $(F,ie,he){this.props=F,this.context=ie,this.refs=P,this.updater=he||M}$.prototype.isReactComponent={},$.prototype.setState=function(F,ie){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,ie,"setState")},$.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function H(){}H.prototype=$.prototype;function z(F,ie,he){this.props=F,this.context=ie,this.refs=P,this.updater=he||M}var X=z.prototype=new H;X.constructor=z,U(X,$.prototype),X.isPureReactComponent=!0;var ue=Array.isArray;function W(){}var N={H:null,A:null,T:null,S:null},D=Object.prototype.hasOwnProperty;function x(F,ie,he){var me=he.ref;return{$$typeof:n,type:F,key:ie,ref:me!==void 0?me:null,props:he}}function L(F,ie){return x(F.type,ie,F.props)}function k(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function q(F){var ie={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(he){return ie[he]})}var V=/\/+/g;function ke(F,ie){return typeof F=="object"&&F!==null&&F.key!=null?q(""+F.key):ie.toString(36)}function xe(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(W,W):(F.status="pending",F.then(function(ie){F.status==="pending"&&(F.status="fulfilled",F.value=ie)},function(ie){F.status==="pending"&&(F.status="rejected",F.reason=ie)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function Z(F,ie,he,me,Ce){var De=typeof F;(De==="undefined"||De==="boolean")&&(F=null);var Pe=!1;if(F===null)Pe=!0;else switch(De){case"bigint":case"string":case"number":Pe=!0;break;case"object":switch(F.$$typeof){case n:case e:Pe=!0;break;case _:return Pe=F._init,Z(Pe(F._payload),ie,he,me,Ce)}}if(Pe)return Ce=Ce(F),Pe=me===""?"."+ke(F,0):me,ue(Ce)?(he="",Pe!=null&&(he=Pe.replace(V,"$&/")+"/"),Z(Ce,ie,he,"",function(Oi){return Oi})):Ce!=null&&(k(Ce)&&(Ce=L(Ce,he+(Ce.key==null||F&&F.key===Ce.key?"":(""+Ce.key).replace(V,"$&/")+"/")+Pe)),ie.push(Ce)),1;Pe=0;var wt=me===""?".":me+":";if(ue(F))for(var $e=0;$e<F.length;$e++)me=F[$e],De=wt+ke(me,$e),Pe+=Z(me,ie,he,De,Ce);else if($e=C(F),typeof $e=="function")for(F=$e.call(F),$e=0;!(me=F.next()).done;)me=me.value,De=wt+ke(me,$e++),Pe+=Z(me,ie,he,De,Ce);else if(De==="object"){if(typeof F.then=="function")return Z(xe(F),ie,he,me,Ce);throw ie=String(F),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return Pe}function ce(F,ie,he){if(F==null)return F;var me=[],Ce=0;return Z(F,me,"","",function(De){return ie.call(he,De,Ce++)}),me}function fe(F){if(F._status===-1){var ie=F._result;ie=ie(),ie.then(function(he){(F._status===0||F._status===-1)&&(F._status=1,F._result=he)},function(he){(F._status===0||F._status===-1)&&(F._status=2,F._result=he)}),F._status===-1&&(F._status=0,F._result=ie)}if(F._status===1)return F._result.default;throw F._result}var be=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},ze={map:ce,forEach:function(F,ie,he){ce(F,function(){ie.apply(this,arguments)},he)},count:function(F){var ie=0;return ce(F,function(){ie++}),ie},toArray:function(F){return ce(F,function(ie){return ie})||[]},only:function(F){if(!k(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return Le.Activity=T,Le.Children=ze,Le.Component=$,Le.Fragment=t,Le.Profiler=r,Le.PureComponent=z,Le.StrictMode=i,Le.Suspense=p,Le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,Le.__COMPILER_RUNTIME={__proto__:null,c:function(F){return N.H.useMemoCache(F)}},Le.cache=function(F){return function(){return F.apply(null,arguments)}},Le.cacheSignal=function(){return null},Le.cloneElement=function(F,ie,he){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var me=U({},F.props),Ce=F.key;if(ie!=null)for(De in ie.key!==void 0&&(Ce=""+ie.key),ie)!D.call(ie,De)||De==="key"||De==="__self"||De==="__source"||De==="ref"&&ie.ref===void 0||(me[De]=ie[De]);var De=arguments.length-2;if(De===1)me.children=he;else if(1<De){for(var Pe=Array(De),wt=0;wt<De;wt++)Pe[wt]=arguments[wt+2];me.children=Pe}return x(F.type,Ce,me)},Le.createContext=function(F){return F={$$typeof:u,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:a,_context:F},F},Le.createElement=function(F,ie,he){var me,Ce={},De=null;if(ie!=null)for(me in ie.key!==void 0&&(De=""+ie.key),ie)D.call(ie,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(Ce[me]=ie[me]);var Pe=arguments.length-2;if(Pe===1)Ce.children=he;else if(1<Pe){for(var wt=Array(Pe),$e=0;$e<Pe;$e++)wt[$e]=arguments[$e+2];Ce.children=wt}if(F&&F.defaultProps)for(me in Pe=F.defaultProps,Pe)Ce[me]===void 0&&(Ce[me]=Pe[me]);return x(F,De,Ce)},Le.createRef=function(){return{current:null}},Le.forwardRef=function(F){return{$$typeof:d,render:F}},Le.isValidElement=k,Le.lazy=function(F){return{$$typeof:_,_payload:{_status:-1,_result:F},_init:fe}},Le.memo=function(F,ie){return{$$typeof:h,type:F,compare:ie===void 0?null:ie}},Le.startTransition=function(F){var ie=N.T,he={};N.T=he;try{var me=F(),Ce=N.S;Ce!==null&&Ce(he,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(W,be)}catch(De){be(De)}finally{ie!==null&&he.types!==null&&(ie.types=he.types),N.T=ie}},Le.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},Le.use=function(F){return N.H.use(F)},Le.useActionState=function(F,ie,he){return N.H.useActionState(F,ie,he)},Le.useCallback=function(F,ie){return N.H.useCallback(F,ie)},Le.useContext=function(F){return N.H.useContext(F)},Le.useDebugValue=function(){},Le.useDeferredValue=function(F,ie){return N.H.useDeferredValue(F,ie)},Le.useEffect=function(F,ie){return N.H.useEffect(F,ie)},Le.useEffectEvent=function(F){return N.H.useEffectEvent(F)},Le.useId=function(){return N.H.useId()},Le.useImperativeHandle=function(F,ie,he){return N.H.useImperativeHandle(F,ie,he)},Le.useInsertionEffect=function(F,ie){return N.H.useInsertionEffect(F,ie)},Le.useLayoutEffect=function(F,ie){return N.H.useLayoutEffect(F,ie)},Le.useMemo=function(F,ie){return N.H.useMemo(F,ie)},Le.useOptimistic=function(F,ie){return N.H.useOptimistic(F,ie)},Le.useReducer=function(F,ie,he){return N.H.useReducer(F,ie,he)},Le.useRef=function(F){return N.H.useRef(F)},Le.useState=function(F){return N.H.useState(F)},Le.useSyncExternalStore=function(F,ie,he){return N.H.useSyncExternalStore(F,ie,he)},Le.useTransition=function(){return N.H.useTransition()},Le.version="19.2.4",Le}var WE;function Zy(){return WE||(WE=1,gg.exports=IM()),gg.exports}var He=Zy();const bM=jy(He);var yg={exports:{}},Vu={},_g={exports:{}},vg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QE;function RM(){return QE||(QE=1,(function(n){function e(Z,ce){var fe=Z.length;Z.push(ce);e:for(;0<fe;){var be=fe-1>>>1,ze=Z[be];if(0<r(ze,ce))Z[be]=ce,Z[fe]=ze,fe=be;else break e}}function t(Z){return Z.length===0?null:Z[0]}function i(Z){if(Z.length===0)return null;var ce=Z[0],fe=Z.pop();if(fe!==ce){Z[0]=fe;e:for(var be=0,ze=Z.length,F=ze>>>1;be<F;){var ie=2*(be+1)-1,he=Z[ie],me=ie+1,Ce=Z[me];if(0>r(he,fe))me<ze&&0>r(Ce,he)?(Z[be]=Ce,Z[me]=fe,be=me):(Z[be]=he,Z[ie]=fe,be=ie);else if(me<ze&&0>r(Ce,fe))Z[be]=Ce,Z[me]=fe,be=me;else break e}}return ce}function r(Z,ce){var fe=Z.sortIndex-ce.sortIndex;return fe!==0?fe:Z.id-ce.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var p=[],h=[],_=1,T=null,E=3,C=!1,M=!1,U=!1,P=!1,$=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function X(Z){for(var ce=t(h);ce!==null;){if(ce.callback===null)i(h);else if(ce.startTime<=Z)i(h),ce.sortIndex=ce.expirationTime,e(p,ce);else break;ce=t(h)}}function ue(Z){if(U=!1,X(Z),!M)if(t(p)!==null)M=!0,W||(W=!0,q());else{var ce=t(h);ce!==null&&xe(ue,ce.startTime-Z)}}var W=!1,N=-1,D=5,x=-1;function L(){return P?!0:!(n.unstable_now()-x<D)}function k(){if(P=!1,W){var Z=n.unstable_now();x=Z;var ce=!0;try{e:{M=!1,U&&(U=!1,H(N),N=-1),C=!0;var fe=E;try{t:{for(X(Z),T=t(p);T!==null&&!(T.expirationTime>Z&&L());){var be=T.callback;if(typeof be=="function"){T.callback=null,E=T.priorityLevel;var ze=be(T.expirationTime<=Z);if(Z=n.unstable_now(),typeof ze=="function"){T.callback=ze,X(Z),ce=!0;break t}T===t(p)&&i(p),X(Z)}else i(p);T=t(p)}if(T!==null)ce=!0;else{var F=t(h);F!==null&&xe(ue,F.startTime-Z),ce=!1}}break e}finally{T=null,E=fe,C=!1}ce=void 0}}finally{ce?q():W=!1}}}var q;if(typeof z=="function")q=function(){z(k)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,ke=V.port2;V.port1.onmessage=k,q=function(){ke.postMessage(null)}}else q=function(){$(k,0)};function xe(Z,ce){N=$(function(){Z(n.unstable_now())},ce)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Z){Z.callback=null},n.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<Z?Math.floor(1e3/Z):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_next=function(Z){switch(E){case 1:case 2:case 3:var ce=3;break;default:ce=E}var fe=E;E=ce;try{return Z()}finally{E=fe}},n.unstable_requestPaint=function(){P=!0},n.unstable_runWithPriority=function(Z,ce){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var fe=E;E=Z;try{return ce()}finally{E=fe}},n.unstable_scheduleCallback=function(Z,ce,fe){var be=n.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?be+fe:be):fe=be,Z){case 1:var ze=-1;break;case 2:ze=250;break;case 5:ze=1073741823;break;case 4:ze=1e4;break;default:ze=5e3}return ze=fe+ze,Z={id:_++,callback:ce,priorityLevel:Z,startTime:fe,expirationTime:ze,sortIndex:-1},fe>be?(Z.sortIndex=fe,e(h,Z),t(p)===null&&Z===t(h)&&(U?(H(N),N=-1):U=!0,xe(ue,fe-be))):(Z.sortIndex=ze,e(p,Z),M||C||(M=!0,W||(W=!0,q()))),Z},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(Z){var ce=E;return function(){var fe=E;E=ce;try{return Z.apply(this,arguments)}finally{E=fe}}}})(vg)),vg}var XE;function xM(){return XE||(XE=1,_g.exports=RM()),_g.exports}var Tg={exports:{}},yn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jE;function NM(){if(jE)return yn;jE=1;var n=Zy();function e(p){var h="https://react.dev/errors/"+p;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)h+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+p+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(p,h,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:T==null?null:""+T,children:p,containerInfo:h,implementation:_}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,h){if(p==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return yn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,yn.createPortal=function(p,h){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(p,h,null,_)},yn.flushSync=function(p){var h=u.T,_=i.p;try{if(u.T=null,i.p=2,p)return p()}finally{u.T=h,i.p=_,i.d.f()}},yn.preconnect=function(p,h){typeof p=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(p,h))},yn.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},yn.preinit=function(p,h){if(typeof p=="string"&&h&&typeof h.as=="string"){var _=h.as,T=d(_,h.crossOrigin),E=typeof h.integrity=="string"?h.integrity:void 0,C=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;_==="style"?i.d.S(p,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:T,integrity:E,fetchPriority:C}):_==="script"&&i.d.X(p,{crossOrigin:T,integrity:E,fetchPriority:C,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},yn.preinitModule=function(p,h){if(typeof p=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var _=d(h.as,h.crossOrigin);i.d.M(p,{crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(p)},yn.preload=function(p,h){if(typeof p=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var _=h.as,T=d(_,h.crossOrigin);i.d.L(p,_,{crossOrigin:T,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},yn.preloadModule=function(p,h){if(typeof p=="string")if(h){var _=d(h.as,h.crossOrigin);i.d.m(p,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(p)},yn.requestFormReset=function(p){i.d.r(p)},yn.unstable_batchedUpdates=function(p,h){return p(h)},yn.useFormState=function(p,h,_){return u.H.useFormState(p,h,_)},yn.useFormStatus=function(){return u.H.useHostTransitionStatus()},yn.version="19.2.4",yn}var ZE;function MM(){if(ZE)return Tg.exports;ZE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Tg.exports=NM(),Tg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eS;function DM(){if(eS)return Vu;eS=1;var n=xM(),e=Zy(),t=MM();function i(s){var o="https://react.dev/errors/"+s;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var o=s,l=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(l=o.return),s=o.return;while(s)}return o.tag===3?l:null}function u(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function d(s){if(s.tag===31){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function p(s){if(a(s)!==s)throw Error(i(188))}function h(s){var o=s.alternate;if(!o){if(o=a(s),o===null)throw Error(i(188));return o!==s?null:s}for(var l=s,c=o;;){var y=l.return;if(y===null)break;var v=y.alternate;if(v===null){if(c=y.return,c!==null){l=c;continue}break}if(y.child===v.child){for(v=y.child;v;){if(v===l)return p(y),s;if(v===c)return p(y),o;v=v.sibling}throw Error(i(188))}if(l.return!==c.return)l=y,c=v;else{for(var A=!1,b=y.child;b;){if(b===l){A=!0,l=y,c=v;break}if(b===c){A=!0,c=y,l=v;break}b=b.sibling}if(!A){for(b=v.child;b;){if(b===l){A=!0,l=v,c=y;break}if(b===c){A=!0,c=v,l=y;break}b=b.sibling}if(!A)throw Error(i(189))}}if(l.alternate!==c)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?s:o}function _(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s;for(s=s.child;s!==null;){if(o=_(s),o!==null)return o;s=s.sibling}return null}var T=Object.assign,E=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),M=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),H=Symbol.for("react.consumer"),z=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),ue=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function q(s){return s===null||typeof s!="object"?null:(s=k&&s[k]||s["@@iterator"],typeof s=="function"?s:null)}var V=Symbol.for("react.client.reference");function ke(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===V?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case U:return"Fragment";case $:return"Profiler";case P:return"StrictMode";case ue:return"Suspense";case W:return"SuspenseList";case x:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case M:return"Portal";case z:return s.displayName||"Context";case H:return(s._context.displayName||"Context")+".Consumer";case X:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case N:return o=s.displayName||null,o!==null?o:ke(s.type)||"Memo";case D:o=s._payload,s=s._init;try{return ke(s(o))}catch{}}return null}var xe=Array.isArray,Z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe={pending:!1,data:null,method:null,action:null},be=[],ze=-1;function F(s){return{current:s}}function ie(s){0>ze||(s.current=be[ze],be[ze]=null,ze--)}function he(s,o){ze++,be[ze]=s.current,s.current=o}var me=F(null),Ce=F(null),De=F(null),Pe=F(null);function wt(s,o){switch(he(De,o),he(Ce,s),he(me,null),o.nodeType){case 9:case 11:s=(s=o.documentElement)&&(s=s.namespaceURI)?mE(s):0;break;default:if(s=o.tagName,o=o.namespaceURI)o=mE(o),s=gE(o,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ie(me),he(me,s)}function $e(){ie(me),ie(Ce),ie(De)}function Oi(s){s.memoizedState!==null&&he(Pe,s);var o=me.current,l=gE(o,s.type);o!==l&&(he(Ce,s),he(me,l))}function On(s){Ce.current===s&&(ie(me),ie(Ce)),Pe.current===s&&(ie(Pe),Nu._currentValue=fe)}var Qo,Xo;function Fi(s){if(Qo===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);Qo=o&&o[1]||"",Xo=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Qo+s+Xo}var Nl=!1;function jr(s,o){if(!s||Nl)return"";Nl=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(o){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(te){var j=te}Reflect.construct(s,[],re)}else{try{re.call()}catch(te){j=te}s.call(re.prototype)}}else{try{throw Error()}catch(te){j=te}(re=s())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(te){if(te&&j&&typeof te.stack=="string")return[te.stack,j.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=c.DetermineComponentFrameRoot(),A=v[0],b=v[1];if(A&&b){var O=A.split(`
`),Y=b.split(`
`);for(y=c=0;c<O.length&&!O[c].includes("DetermineComponentFrameRoot");)c++;for(;y<Y.length&&!Y[y].includes("DetermineComponentFrameRoot");)y++;if(c===O.length||y===Y.length)for(c=O.length-1,y=Y.length-1;1<=c&&0<=y&&O[c]!==Y[y];)y--;for(;1<=c&&0<=y;c--,y--)if(O[c]!==Y[y]){if(c!==1||y!==1)do if(c--,y--,0>y||O[c]!==Y[y]){var ne=`
`+O[c].replace(" at new "," at ");return s.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",s.displayName)),ne}while(1<=c&&0<=y);break}}}finally{Nl=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?Fi(l):""}function Ml(s,o){switch(s.tag){case 26:case 27:case 5:return Fi(s.type);case 16:return Fi("Lazy");case 13:return s.child!==o&&o!==null?Fi("Suspense Fallback"):Fi("Suspense");case 19:return Fi("SuspenseList");case 0:case 15:return jr(s.type,!1);case 11:return jr(s.type.render,!1);case 1:return jr(s.type,!0);case 31:return Fi("Activity");default:return""}}function Dl(s){try{var o="",l=null;do o+=Ml(s,l),l=s,s=s.return;while(s);return o}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Pt=Object.prototype.hasOwnProperty,Jt=n.unstable_scheduleCallback,Zs=n.unstable_cancelCallback,yp=n.unstable_shouldYield,Oc=n.unstable_requestPaint,Sn=n.unstable_now,Zr=n.unstable_getCurrentPriorityLevel,Pl=n.unstable_ImmediatePriority,kl=n.unstable_UserBlockingPriority,er=n.unstable_NormalPriority,_p=n.unstable_LowPriority,Fc=n.unstable_IdlePriority,Bc=n.log,qc=n.unstable_setDisableYieldValue,gi=null,rn=null;function jn(s){if(typeof Bc=="function"&&qc(s),rn&&typeof rn.setStrictMode=="function")try{rn.setStrictMode(gi,s)}catch{}}var Rt=Math.clz32?Math.clz32:Hc,Gc=Math.log,jo=Math.LN2;function Hc(s){return s>>>=0,s===0?32:31-(Gc(s)/jo|0)|0}var Bi=256,eo=262144,kt=4194304;function qi(s){var o=s&42;if(o!==0)return o;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Gi(s,o,l){var c=s.pendingLanes;if(c===0)return 0;var y=0,v=s.suspendedLanes,A=s.pingedLanes;s=s.warmLanes;var b=c&134217727;return b!==0?(c=b&~v,c!==0?y=qi(c):(A&=b,A!==0?y=qi(A):l||(l=b&~s,l!==0&&(y=qi(l))))):(b=c&~v,b!==0?y=qi(b):A!==0?y=qi(A):l||(l=c&~s,l!==0&&(y=qi(l)))),y===0?0:o!==0&&o!==y&&(o&v)===0&&(v=y&-y,l=o&-o,v>=l||v===32&&(l&4194048)!==0)?o:y}function yi(s,o){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&o)===0}function vp(s,o){switch(s){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zc(){var s=kt;return kt<<=1,(kt&62914560)===0&&(kt=4194304),s}function Hi(s){for(var o=[],l=0;31>l;l++)o.push(s);return o}function to(s,o){s.pendingLanes|=o,o!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Tp(s,o,l,c,y,v){var A=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var b=s.entanglements,O=s.expirationTimes,Y=s.hiddenUpdates;for(l=A&~l;0<l;){var ne=31-Rt(l),re=1<<ne;b[ne]=0,O[ne]=-1;var j=Y[ne];if(j!==null)for(Y[ne]=null,ne=0;ne<j.length;ne++){var te=j[ne];te!==null&&(te.lane&=-536870913)}l&=~re}c!==0&&no(s,c,0),v!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=v&~(A&~o))}function no(s,o,l){s.pendingLanes|=o,s.suspendedLanes&=~o;var c=31-Rt(o);s.entangledLanes|=o,s.entanglements[c]=s.entanglements[c]|1073741824|l&261930}function Vl(s,o){var l=s.entangledLanes|=o;for(s=s.entanglements;l;){var c=31-Rt(l),y=1<<c;y&o|s[c]&o&&(s[c]|=o),l&=~y}}function Ul(s,o){var l=o&-o;return l=(l&42)!==0?1:io(l),(l&(s.suspendedLanes|o))!==0?0:l}function io(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function vs(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function $c(){var s=ce.p;return s!==0?s:(s=window.event,s===void 0?32:FE(s.type))}function _i(s,o){var l=ce.p;try{return ce.p=s,o()}finally{ce.p=l}}var vi=Math.random().toString(36).slice(2),Vt="__reactFiber$"+vi,Xt="__reactProps$"+vi,zi="__reactContainer$"+vi,Zo="__reactEvents$"+vi,Ep="__reactListeners$"+vi,Jc="__reactHandles$"+vi,Kc="__reactResources$"+vi,$i="__reactMarker$"+vi;function ea(s){delete s[Vt],delete s[Xt],delete s[Zo],delete s[Ep],delete s[Jc]}function Ji(s){var o=s[Vt];if(o)return o;for(var l=s.parentNode;l;){if(o=l[zi]||l[Vt]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(s=AE(s);s!==null;){if(l=s[Vt])return l;s=AE(s)}return o}s=l,l=s.parentNode}return null}function Zn(s){if(s=s[Vt]||s[zi]){var o=s.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return s}return null}function Fn(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s.stateNode;throw Error(i(33))}function Ki(s){var o=s[Kc];return o||(o=s[Kc]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Ut(s){s[$i]=!0}var Ll=new Set,Ol={};function Yi(s,o){Wi(s,o),Wi(s+"Capture",o)}function Wi(s,o){for(Ol[s]=o,s=0;s<o.length;s++)Ll.add(o[s])}var Fl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Bl={},ql={};function Yc(s){return Pt.call(ql,s)?!0:Pt.call(Bl,s)?!1:Fl.test(s)?ql[s]=!0:(Bl[s]=!0,!1)}function ta(s,o,l){if(Yc(o))if(l===null)s.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(o);return;case"boolean":var c=o.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(o);return}}s.setAttribute(o,""+l)}}function Bn(s,o,l){if(l===null)s.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttribute(o,""+l)}}function Lt(s,o,l,c){if(c===null)s.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(o,l,""+c)}}function jt(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function tr(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Gl(s,o,l){var c=Object.getOwnPropertyDescriptor(s.constructor.prototype,o);if(!s.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,v=c.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return y.call(this)},set:function(A){l=""+A,v.call(this,A)}}),Object.defineProperty(s,o,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(A){l=""+A},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function at(s){if(!s._valueTracker){var o=tr(s)?"checked":"value";s._valueTracker=Gl(s,o,""+s[o])}}function so(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var l=o.getValue(),c="";return s&&(c=tr(s)?s.checked?"true":"false":s.value),s=c,s!==l?(o.setValue(s),!0):!1}function Qi(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var ro=/[\n"\\]/g;function Rn(s){return s.replace(ro,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function na(s,o,l,c,y,v,A,b){s.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?s.type=A:s.removeAttribute("type"),o!=null?A==="number"?(o===0&&s.value===""||s.value!=o)&&(s.value=""+jt(o)):s.value!==""+jt(o)&&(s.value=""+jt(o)):A!=="submit"&&A!=="reset"||s.removeAttribute("value"),o!=null?Hl(s,A,jt(o)):l!=null?Hl(s,A,jt(l)):c!=null&&s.removeAttribute("value"),y==null&&v!=null&&(s.defaultChecked=!!v),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?s.name=""+jt(b):s.removeAttribute("name")}function Wc(s,o,l,c,y,v,A,b){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(s.type=v),o!=null||l!=null){if(!(v!=="submit"&&v!=="reset"||o!=null)){at(s);return}l=l!=null?""+jt(l):"",o=o!=null?""+jt(o):l,b||o===s.value||(s.value=o),s.defaultValue=o}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=b?s.checked:!!c,s.defaultChecked=!!c,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(s.name=A),at(s)}function Hl(s,o,l){o==="number"&&Qi(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function nr(s,o,l,c){if(s=s.options,o){o={};for(var y=0;y<l.length;y++)o["$"+l[y]]=!0;for(l=0;l<s.length;l++)y=o.hasOwnProperty("$"+s[l].value),s[l].selected!==y&&(s[l].selected=y),y&&c&&(s[l].defaultSelected=!0)}else{for(l=""+jt(l),o=null,y=0;y<s.length;y++){if(s[y].value===l){s[y].selected=!0,c&&(s[y].defaultSelected=!0);return}o!==null||s[y].disabled||(o=s[y])}o!==null&&(o.selected=!0)}}function Qc(s,o,l){if(o!=null&&(o=""+jt(o),o!==s.value&&(s.value=o),l==null)){s.defaultValue!==o&&(s.defaultValue=o);return}s.defaultValue=l!=null?""+jt(l):""}function ir(s,o,l,c){if(o==null){if(c!=null){if(l!=null)throw Error(i(92));if(xe(c)){if(1<c.length)throw Error(i(93));c=c[0]}l=c}l==null&&(l=""),o=l}l=jt(o),s.defaultValue=l,c=s.textContent,c===l&&c!==""&&c!==null&&(s.value=c),at(s)}function xn(s,o){if(o){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=o;return}}s.textContent=o}var Xc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function zl(s,o,l){var c=o.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="":c?s.setProperty(o,l):typeof l!="number"||l===0||Xc.has(o)?o==="float"?s.cssFloat=l:s[o]=(""+l).trim():s[o]=l+"px"}function $l(s,o,l){if(o!=null&&typeof o!="object")throw Error(i(62));if(s=s.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||o!=null&&o.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var y in o)c=o[y],o.hasOwnProperty(y)&&l[y]!==c&&zl(s,y,c)}else for(var v in o)o.hasOwnProperty(v)&&zl(s,v,o[v])}function ia(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),sr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function sa(s){return sr.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Ti(){}var Jl=null;function ei(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var rr=null,Xi=null;function oo(s){var o=Zn(s);if(o&&(s=o.stateNode)){var l=s[Xt]||null;e:switch(s=o.stateNode,o.type){case"input":if(na(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),o=l.name,l.type==="radio"&&o!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Rn(""+o)+'"][type="radio"]'),o=0;o<l.length;o++){var c=l[o];if(c!==s&&c.form===s.form){var y=c[Xt]||null;if(!y)throw Error(i(90));na(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(o=0;o<l.length;o++)c=l[o],c.form===s.form&&so(c)}break e;case"textarea":Qc(s,l.value,l.defaultValue);break e;case"select":o=l.value,o!=null&&nr(s,!!l.multiple,o,!1)}}}var ra=!1;function or(s,o,l){if(ra)return s(o,l);ra=!0;try{var c=s(o);return c}finally{if(ra=!1,(rr!==null||Xi!==null)&&($d(),rr&&(o=rr,s=Xi,Xi=rr=null,oo(o),s)))for(o=0;o<s.length;o++)oo(s[o])}}function Ei(s,o){var l=s.stateNode;if(l===null)return null;var c=l[Xt]||null;if(c===null)return null;l=c[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(i(231,o,typeof l));return l}var ti=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ao=!1;if(ti)try{var ct={};Object.defineProperty(ct,"passive",{get:function(){ao=!0}}),window.addEventListener("test",ct,ct),window.removeEventListener("test",ct,ct)}catch{ao=!1}var ji=null,Kl=null,lo=null;function Yl(){if(lo)return lo;var s,o=Kl,l=o.length,c,y="value"in ji?ji.value:ji.textContent,v=y.length;for(s=0;s<l&&o[s]===y[s];s++);var A=l-s;for(c=1;c<=A&&o[l-c]===y[v-c];c++);return lo=y.slice(s,1<c?1-c:void 0)}function uo(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function Ts(){return!0}function Si(){return!1}function on(s){function o(l,c,y,v,A){this._reactName=l,this._targetInst=y,this.type=c,this.nativeEvent=v,this.target=A,this.currentTarget=null;for(var b in s)s.hasOwnProperty(b)&&(l=s[b],this[b]=l?l(v):v[b]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Ts:Si,this.isPropagationStopped=Si,this}return T(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Ts)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Ts)},persist:function(){},isPersistent:Ts}),o}var Es={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zi=on(Es),ar=T({},Es,{view:0,detail:0}),Wl=on(ar),lr,oa,es,aa=T({},ar,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ur,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==es&&(es&&s.type==="mousemove"?(lr=s.screenX-es.screenX,oa=s.screenY-es.screenY):oa=lr=0,es=s),lr)},movementY:function(s){return"movementY"in s?s.movementY:oa}}),Ql=on(aa),co=T({},aa,{dataTransfer:0}),Zc=on(co),ed=T({},ar,{relatedTarget:0}),fo=on(ed),Xl=T({},Es,{animationName:0,elapsedTime:0,pseudoElement:0}),td=on(Xl),la=T({},Es,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),nd=on(la),id=T({},Es,{data:0}),ts=on(id),sd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ad(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=od[s])?!!o[s]:!1}function ur(){return ad}var An=T({},ar,{key:function(s){if(s.key){var o=sd[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=uo(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?rd[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ur,charCode:function(s){return s.type==="keypress"?uo(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?uo(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),ld=on(An),ud=T({},aa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ss=on(ud),g=T({},ar,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ur}),S=on(g),w=T({},Es,{propertyName:0,elapsedTime:0,pseudoElement:0}),R=on(w),J=T({},aa,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),ee=on(J),de=T({},Es,{newState:0,oldState:0}),Fe=on(de),xt=[9,13,27,32],st=ti&&"CompositionEvent"in window,vt=null;ti&&"documentMode"in document&&(vt=document.documentMode);var ni=ti&&"TextEvent"in window&&!vt,ns=ti&&(!st||vt&&8<vt&&11>=vt),Ai=" ",wi=!1;function ho(s,o){switch(s){case"keyup":return xt.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ua(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ca=!1;function YN(s,o){switch(s){case"compositionend":return ua(o);case"keypress":return o.which!==32?null:(wi=!0,Ai);case"textInput":return s=o.data,s===Ai&&wi?null:s;default:return null}}function WN(s,o){if(ca)return s==="compositionend"||!st&&ho(s,o)?(s=Yl(),lo=Kl=ji=null,ca=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return ns&&o.locale!=="ko"?null:o.data;default:return null}}var QN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Iv(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!QN[s.type]:o==="textarea"}function bv(s,o,l,c){rr?Xi?Xi.push(c):Xi=[c]:rr=c,o=jd(o,"onChange"),0<o.length&&(l=new Zi("onChange","change",null,l,c),s.push({event:l,listeners:o}))}var jl=null,Zl=null;function XN(s){uE(s,0)}function cd(s){var o=Fn(s);if(so(o))return s}function Rv(s,o){if(s==="change")return o}var xv=!1;if(ti){var Sp;if(ti){var Ap="oninput"in document;if(!Ap){var Nv=document.createElement("div");Nv.setAttribute("oninput","return;"),Ap=typeof Nv.oninput=="function"}Sp=Ap}else Sp=!1;xv=Sp&&(!document.documentMode||9<document.documentMode)}function Mv(){jl&&(jl.detachEvent("onpropertychange",Dv),Zl=jl=null)}function Dv(s){if(s.propertyName==="value"&&cd(Zl)){var o=[];bv(o,Zl,s,ei(s)),or(XN,o)}}function jN(s,o,l){s==="focusin"?(Mv(),jl=o,Zl=l,jl.attachEvent("onpropertychange",Dv)):s==="focusout"&&Mv()}function ZN(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return cd(Zl)}function e1(s,o){if(s==="click")return cd(o)}function t1(s,o){if(s==="input"||s==="change")return cd(o)}function n1(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var qn=typeof Object.is=="function"?Object.is:n1;function eu(s,o){if(qn(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var l=Object.keys(s),c=Object.keys(o);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var y=l[c];if(!Pt.call(o,y)||!qn(s[y],o[y]))return!1}return!0}function Pv(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function kv(s,o){var l=Pv(s);s=0;for(var c;l;){if(l.nodeType===3){if(c=s+l.textContent.length,s<=o&&c>=o)return{node:l,offset:o-s};s=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Pv(l)}}function Vv(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?Vv(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function Uv(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var o=Qi(s.document);o instanceof s.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)s=o.contentWindow;else break;o=Qi(s.document)}return o}function wp(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}var i1=ti&&"documentMode"in document&&11>=document.documentMode,da=null,Cp=null,tu=null,Ip=!1;function Lv(s,o,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Ip||da==null||da!==Qi(c)||(c=da,"selectionStart"in c&&wp(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),tu&&eu(tu,c)||(tu=c,c=jd(Cp,"onSelect"),0<c.length&&(o=new Zi("onSelect","select",null,o,l),s.push({event:o,listeners:c}),o.target=da)))}function po(s,o){var l={};return l[s.toLowerCase()]=o.toLowerCase(),l["Webkit"+s]="webkit"+o,l["Moz"+s]="moz"+o,l}var fa={animationend:po("Animation","AnimationEnd"),animationiteration:po("Animation","AnimationIteration"),animationstart:po("Animation","AnimationStart"),transitionrun:po("Transition","TransitionRun"),transitionstart:po("Transition","TransitionStart"),transitioncancel:po("Transition","TransitionCancel"),transitionend:po("Transition","TransitionEnd")},bp={},Ov={};ti&&(Ov=document.createElement("div").style,"AnimationEvent"in window||(delete fa.animationend.animation,delete fa.animationiteration.animation,delete fa.animationstart.animation),"TransitionEvent"in window||delete fa.transitionend.transition);function mo(s){if(bp[s])return bp[s];if(!fa[s])return s;var o=fa[s],l;for(l in o)if(o.hasOwnProperty(l)&&l in Ov)return bp[s]=o[l];return s}var Fv=mo("animationend"),Bv=mo("animationiteration"),qv=mo("animationstart"),s1=mo("transitionrun"),r1=mo("transitionstart"),o1=mo("transitioncancel"),Gv=mo("transitionend"),Hv=new Map,Rp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Rp.push("scrollEnd");function Ci(s,o){Hv.set(s,o),Yi(o,[s])}var dd=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},ii=[],ha=0,xp=0;function fd(){for(var s=ha,o=xp=ha=0;o<s;){var l=ii[o];ii[o++]=null;var c=ii[o];ii[o++]=null;var y=ii[o];ii[o++]=null;var v=ii[o];if(ii[o++]=null,c!==null&&y!==null){var A=c.pending;A===null?y.next=y:(y.next=A.next,A.next=y),c.pending=y}v!==0&&zv(l,y,v)}}function hd(s,o,l,c){ii[ha++]=s,ii[ha++]=o,ii[ha++]=l,ii[ha++]=c,xp|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function Np(s,o,l,c){return hd(s,o,l,c),pd(s)}function go(s,o){return hd(s,null,null,o),pd(s)}function zv(s,o,l){s.lanes|=l;var c=s.alternate;c!==null&&(c.lanes|=l);for(var y=!1,v=s.return;v!==null;)v.childLanes|=l,c=v.alternate,c!==null&&(c.childLanes|=l),v.tag===22&&(s=v.stateNode,s===null||s._visibility&1||(y=!0)),s=v,v=v.return;return s.tag===3?(v=s.stateNode,y&&o!==null&&(y=31-Rt(l),s=v.hiddenUpdates,c=s[y],c===null?s[y]=[o]:c.push(o),o.lane=l|536870912),v):null}function pd(s){if(50<Au)throw Au=0,Fm=null,Error(i(185));for(var o=s.return;o!==null;)s=o,o=s.return;return s.tag===3?s.stateNode:null}var pa={};function a1(s,o,l,c){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(s,o,l,c){return new a1(s,o,l,c)}function Mp(s){return s=s.prototype,!(!s||!s.isReactComponent)}function As(s,o){var l=s.alternate;return l===null?(l=Gn(s.tag,o,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=o,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,o=s.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function $v(s,o){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=o,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,o=l.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s}function md(s,o,l,c,y,v){var A=0;if(c=s,typeof s=="function")Mp(s)&&(A=1);else if(typeof s=="string")A=fM(s,l,me.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case x:return s=Gn(31,l,o,y),s.elementType=x,s.lanes=v,s;case U:return yo(l.children,y,v,o);case P:A=8,y|=24;break;case $:return s=Gn(12,l,o,y|2),s.elementType=$,s.lanes=v,s;case ue:return s=Gn(13,l,o,y),s.elementType=ue,s.lanes=v,s;case W:return s=Gn(19,l,o,y),s.elementType=W,s.lanes=v,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case z:A=10;break e;case H:A=9;break e;case X:A=11;break e;case N:A=14;break e;case D:A=16,c=null;break e}A=29,l=Error(i(130,s===null?"null":typeof s,"")),c=null}return o=Gn(A,l,o,y),o.elementType=s,o.type=c,o.lanes=v,o}function yo(s,o,l,c){return s=Gn(7,s,c,o),s.lanes=l,s}function Dp(s,o,l){return s=Gn(6,s,null,o),s.lanes=l,s}function Jv(s){var o=Gn(18,null,null,0);return o.stateNode=s,o}function Pp(s,o,l){return o=Gn(4,s.children!==null?s.children:[],s.key,o),o.lanes=l,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}var Kv=new WeakMap;function si(s,o){if(typeof s=="object"&&s!==null){var l=Kv.get(s);return l!==void 0?l:(o={value:s,source:o,stack:Dl(o)},Kv.set(s,o),o)}return{value:s,source:o,stack:Dl(o)}}var ma=[],ga=0,gd=null,nu=0,ri=[],oi=0,cr=null,is=1,ss="";function ws(s,o){ma[ga++]=nu,ma[ga++]=gd,gd=s,nu=o}function Yv(s,o,l){ri[oi++]=is,ri[oi++]=ss,ri[oi++]=cr,cr=s;var c=is;s=ss;var y=32-Rt(c)-1;c&=~(1<<y),l+=1;var v=32-Rt(o)+y;if(30<v){var A=y-y%5;v=(c&(1<<A)-1).toString(32),c>>=A,y-=A,is=1<<32-Rt(o)+y|l<<y|c,ss=v+s}else is=1<<v|l<<y|c,ss=s}function kp(s){s.return!==null&&(ws(s,1),Yv(s,1,0))}function Vp(s){for(;s===gd;)gd=ma[--ga],ma[ga]=null,nu=ma[--ga],ma[ga]=null;for(;s===cr;)cr=ri[--oi],ri[oi]=null,ss=ri[--oi],ri[oi]=null,is=ri[--oi],ri[oi]=null}function Wv(s,o){ri[oi++]=is,ri[oi++]=ss,ri[oi++]=cr,is=o.id,ss=o.overflow,cr=s}var an=null,gt=null,Ze=!1,dr=null,ai=!1,Up=Error(i(519));function fr(s){var o=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw iu(si(o,s)),Up}function Qv(s){var o=s.stateNode,l=s.type,c=s.memoizedProps;switch(o[Vt]=s,o[Xt]=c,l){case"dialog":Ke("cancel",o),Ke("close",o);break;case"iframe":case"object":case"embed":Ke("load",o);break;case"video":case"audio":for(l=0;l<Cu.length;l++)Ke(Cu[l],o);break;case"source":Ke("error",o);break;case"img":case"image":case"link":Ke("error",o),Ke("load",o);break;case"details":Ke("toggle",o);break;case"input":Ke("invalid",o),Wc(o,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Ke("invalid",o);break;case"textarea":Ke("invalid",o),ir(o,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||o.textContent===""+l||c.suppressHydrationWarning===!0||hE(o.textContent,l)?(c.popover!=null&&(Ke("beforetoggle",o),Ke("toggle",o)),c.onScroll!=null&&Ke("scroll",o),c.onScrollEnd!=null&&Ke("scrollend",o),c.onClick!=null&&(o.onclick=Ti),o=!0):o=!1,o||fr(s,!0)}function Xv(s){for(an=s.return;an;)switch(an.tag){case 5:case 31:case 13:ai=!1;return;case 27:case 3:ai=!0;return;default:an=an.return}}function ya(s){if(s!==an)return!1;if(!Ze)return Xv(s),Ze=!0,!1;var o=s.tag,l;if((l=o!==3&&o!==27)&&((l=o===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||eg(s.type,s.memoizedProps)),l=!l),l&&gt&&fr(s),Xv(s),o===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));gt=SE(s)}else if(o===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));gt=SE(s)}else o===27?(o=gt,Ir(s.type)?(s=rg,rg=null,gt=s):gt=o):gt=an?ui(s.stateNode.nextSibling):null;return!0}function _o(){gt=an=null,Ze=!1}function Lp(){var s=dr;return s!==null&&(Pn===null?Pn=s:Pn.push.apply(Pn,s),dr=null),s}function iu(s){dr===null?dr=[s]:dr.push(s)}var Op=F(null),vo=null,Cs=null;function hr(s,o,l){he(Op,o._currentValue),o._currentValue=l}function Is(s){s._currentValue=Op.current,ie(Op)}function Fp(s,o,l){for(;s!==null;){var c=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,c!==null&&(c.childLanes|=o)):c!==null&&(c.childLanes&o)!==o&&(c.childLanes|=o),s===l)break;s=s.return}}function Bp(s,o,l,c){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var v=y.dependencies;if(v!==null){var A=y.child;v=v.firstContext;e:for(;v!==null;){var b=v;v=y;for(var O=0;O<o.length;O++)if(b.context===o[O]){v.lanes|=l,b=v.alternate,b!==null&&(b.lanes|=l),Fp(v.return,l,s),c||(A=null);break e}v=b.next}}else if(y.tag===18){if(A=y.return,A===null)throw Error(i(341));A.lanes|=l,v=A.alternate,v!==null&&(v.lanes|=l),Fp(A,l,s),A=null}else A=y.child;if(A!==null)A.return=y;else for(A=y;A!==null;){if(A===s){A=null;break}if(y=A.sibling,y!==null){y.return=A.return,A=y;break}A=A.return}y=A}}function _a(s,o,l,c){s=null;for(var y=o,v=!1;y!==null;){if(!v){if((y.flags&524288)!==0)v=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var A=y.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var b=y.type;qn(y.pendingProps.value,A.value)||(s!==null?s.push(b):s=[b])}}else if(y===Pe.current){if(A=y.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(Nu):s=[Nu])}y=y.return}s!==null&&Bp(o,s,l,c),o.flags|=262144}function yd(s){for(s=s.firstContext;s!==null;){if(!qn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function To(s){vo=s,Cs=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function ln(s){return jv(vo,s)}function _d(s,o){return vo===null&&To(s),jv(s,o)}function jv(s,o){var l=o._currentValue;if(o={context:o,memoizedValue:l,next:null},Cs===null){if(s===null)throw Error(i(308));Cs=o,s.dependencies={lanes:0,firstContext:o},s.flags|=524288}else Cs=Cs.next=o;return l}var l1=typeof AbortController<"u"?AbortController:function(){var s=[],o=this.signal={aborted:!1,addEventListener:function(l,c){s.push(c)}};this.abort=function(){o.aborted=!0,s.forEach(function(l){return l()})}},u1=n.unstable_scheduleCallback,c1=n.unstable_NormalPriority,Ot={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function qp(){return{controller:new l1,data:new Map,refCount:0}}function su(s){s.refCount--,s.refCount===0&&u1(c1,function(){s.controller.abort()})}var ru=null,Gp=0,va=0,Ta=null;function d1(s,o){if(ru===null){var l=ru=[];Gp=0,va=$m(),Ta={status:"pending",value:void 0,then:function(c){l.push(c)}}}return Gp++,o.then(Zv,Zv),o}function Zv(){if(--Gp===0&&ru!==null){Ta!==null&&(Ta.status="fulfilled");var s=ru;ru=null,va=0,Ta=null;for(var o=0;o<s.length;o++)(0,s[o])()}}function f1(s,o){var l=[],c={status:"pending",value:null,reason:null,then:function(y){l.push(y)}};return s.then(function(){c.status="fulfilled",c.value=o;for(var y=0;y<l.length;y++)(0,l[y])(o)},function(y){for(c.status="rejected",c.reason=y,y=0;y<l.length;y++)(0,l[y])(void 0)}),c}var e0=Z.S;Z.S=function(s,o){LT=Sn(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&d1(s,o),e0!==null&&e0(s,o)};var Eo=F(null);function Hp(){var s=Eo.current;return s!==null?s:pt.pooledCache}function vd(s,o){o===null?he(Eo,Eo.current):he(Eo,o.pool)}function t0(){var s=Hp();return s===null?null:{parent:Ot._currentValue,pool:s}}var Ea=Error(i(460)),zp=Error(i(474)),Td=Error(i(542)),Ed={then:function(){}};function n0(s){return s=s.status,s==="fulfilled"||s==="rejected"}function i0(s,o,l){switch(l=s[l],l===void 0?s.push(o):l!==o&&(o.then(Ti,Ti),o=l),o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,r0(s),s;default:if(typeof o.status=="string")o.then(Ti,Ti);else{if(s=pt,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=o,s.status="pending",s.then(function(c){if(o.status==="pending"){var y=o;y.status="fulfilled",y.value=c}},function(c){if(o.status==="pending"){var y=o;y.status="rejected",y.reason=c}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,r0(s),s}throw Ao=o,Ea}}function So(s){try{var o=s._init;return o(s._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Ao=l,Ea):l}}var Ao=null;function s0(){if(Ao===null)throw Error(i(459));var s=Ao;return Ao=null,s}function r0(s){if(s===Ea||s===Td)throw Error(i(483))}var Sa=null,ou=0;function Sd(s){var o=ou;return ou+=1,Sa===null&&(Sa=[]),i0(Sa,s,o)}function au(s,o){o=o.props.ref,s.ref=o!==void 0?o:null}function Ad(s,o){throw o.$$typeof===E?Error(i(525)):(s=Object.prototype.toString.call(o),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s)))}function o0(s){function o(G,B){if(s){var K=G.deletions;K===null?(G.deletions=[B],G.flags|=16):K.push(B)}}function l(G,B){if(!s)return null;for(;B!==null;)o(G,B),B=B.sibling;return null}function c(G){for(var B=new Map;G!==null;)G.key!==null?B.set(G.key,G):B.set(G.index,G),G=G.sibling;return B}function y(G,B){return G=As(G,B),G.index=0,G.sibling=null,G}function v(G,B,K){return G.index=K,s?(K=G.alternate,K!==null?(K=K.index,K<B?(G.flags|=67108866,B):K):(G.flags|=67108866,B)):(G.flags|=1048576,B)}function A(G){return s&&G.alternate===null&&(G.flags|=67108866),G}function b(G,B,K,se){return B===null||B.tag!==6?(B=Dp(K,G.mode,se),B.return=G,B):(B=y(B,K),B.return=G,B)}function O(G,B,K,se){var Se=K.type;return Se===U?ne(G,B,K.props.children,se,K.key):B!==null&&(B.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===D&&So(Se)===B.type)?(B=y(B,K.props),au(B,K),B.return=G,B):(B=md(K.type,K.key,K.props,null,G.mode,se),au(B,K),B.return=G,B)}function Y(G,B,K,se){return B===null||B.tag!==4||B.stateNode.containerInfo!==K.containerInfo||B.stateNode.implementation!==K.implementation?(B=Pp(K,G.mode,se),B.return=G,B):(B=y(B,K.children||[]),B.return=G,B)}function ne(G,B,K,se,Se){return B===null||B.tag!==7?(B=yo(K,G.mode,se,Se),B.return=G,B):(B=y(B,K),B.return=G,B)}function re(G,B,K){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=Dp(""+B,G.mode,K),B.return=G,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case C:return K=md(B.type,B.key,B.props,null,G.mode,K),au(K,B),K.return=G,K;case M:return B=Pp(B,G.mode,K),B.return=G,B;case D:return B=So(B),re(G,B,K)}if(xe(B)||q(B))return B=yo(B,G.mode,K,null),B.return=G,B;if(typeof B.then=="function")return re(G,Sd(B),K);if(B.$$typeof===z)return re(G,_d(G,B),K);Ad(G,B)}return null}function j(G,B,K,se){var Se=B!==null?B.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return Se!==null?null:b(G,B,""+K,se);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case C:return K.key===Se?O(G,B,K,se):null;case M:return K.key===Se?Y(G,B,K,se):null;case D:return K=So(K),j(G,B,K,se)}if(xe(K)||q(K))return Se!==null?null:ne(G,B,K,se,null);if(typeof K.then=="function")return j(G,B,Sd(K),se);if(K.$$typeof===z)return j(G,B,_d(G,K),se);Ad(G,K)}return null}function te(G,B,K,se,Se){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return G=G.get(K)||null,b(B,G,""+se,Se);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case C:return G=G.get(se.key===null?K:se.key)||null,O(B,G,se,Se);case M:return G=G.get(se.key===null?K:se.key)||null,Y(B,G,se,Se);case D:return se=So(se),te(G,B,K,se,Se)}if(xe(se)||q(se))return G=G.get(K)||null,ne(B,G,se,Se,null);if(typeof se.then=="function")return te(G,B,K,Sd(se),Se);if(se.$$typeof===z)return te(G,B,K,_d(B,se),Se);Ad(B,se)}return null}function ve(G,B,K,se){for(var Se=null,tt=null,Te=B,qe=B=0,We=null;Te!==null&&qe<K.length;qe++){Te.index>qe?(We=Te,Te=null):We=Te.sibling;var nt=j(G,Te,K[qe],se);if(nt===null){Te===null&&(Te=We);break}s&&Te&&nt.alternate===null&&o(G,Te),B=v(nt,B,qe),tt===null?Se=nt:tt.sibling=nt,tt=nt,Te=We}if(qe===K.length)return l(G,Te),Ze&&ws(G,qe),Se;if(Te===null){for(;qe<K.length;qe++)Te=re(G,K[qe],se),Te!==null&&(B=v(Te,B,qe),tt===null?Se=Te:tt.sibling=Te,tt=Te);return Ze&&ws(G,qe),Se}for(Te=c(Te);qe<K.length;qe++)We=te(Te,G,qe,K[qe],se),We!==null&&(s&&We.alternate!==null&&Te.delete(We.key===null?qe:We.key),B=v(We,B,qe),tt===null?Se=We:tt.sibling=We,tt=We);return s&&Te.forEach(function(Mr){return o(G,Mr)}),Ze&&ws(G,qe),Se}function Ie(G,B,K,se){if(K==null)throw Error(i(151));for(var Se=null,tt=null,Te=B,qe=B=0,We=null,nt=K.next();Te!==null&&!nt.done;qe++,nt=K.next()){Te.index>qe?(We=Te,Te=null):We=Te.sibling;var Mr=j(G,Te,nt.value,se);if(Mr===null){Te===null&&(Te=We);break}s&&Te&&Mr.alternate===null&&o(G,Te),B=v(Mr,B,qe),tt===null?Se=Mr:tt.sibling=Mr,tt=Mr,Te=We}if(nt.done)return l(G,Te),Ze&&ws(G,qe),Se;if(Te===null){for(;!nt.done;qe++,nt=K.next())nt=re(G,nt.value,se),nt!==null&&(B=v(nt,B,qe),tt===null?Se=nt:tt.sibling=nt,tt=nt);return Ze&&ws(G,qe),Se}for(Te=c(Te);!nt.done;qe++,nt=K.next())nt=te(Te,G,qe,nt.value,se),nt!==null&&(s&&nt.alternate!==null&&Te.delete(nt.key===null?qe:nt.key),B=v(nt,B,qe),tt===null?Se=nt:tt.sibling=nt,tt=nt);return s&&Te.forEach(function(AM){return o(G,AM)}),Ze&&ws(G,qe),Se}function ht(G,B,K,se){if(typeof K=="object"&&K!==null&&K.type===U&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case C:e:{for(var Se=K.key;B!==null;){if(B.key===Se){if(Se=K.type,Se===U){if(B.tag===7){l(G,B.sibling),se=y(B,K.props.children),se.return=G,G=se;break e}}else if(B.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===D&&So(Se)===B.type){l(G,B.sibling),se=y(B,K.props),au(se,K),se.return=G,G=se;break e}l(G,B);break}else o(G,B);B=B.sibling}K.type===U?(se=yo(K.props.children,G.mode,se,K.key),se.return=G,G=se):(se=md(K.type,K.key,K.props,null,G.mode,se),au(se,K),se.return=G,G=se)}return A(G);case M:e:{for(Se=K.key;B!==null;){if(B.key===Se)if(B.tag===4&&B.stateNode.containerInfo===K.containerInfo&&B.stateNode.implementation===K.implementation){l(G,B.sibling),se=y(B,K.children||[]),se.return=G,G=se;break e}else{l(G,B);break}else o(G,B);B=B.sibling}se=Pp(K,G.mode,se),se.return=G,G=se}return A(G);case D:return K=So(K),ht(G,B,K,se)}if(xe(K))return ve(G,B,K,se);if(q(K)){if(Se=q(K),typeof Se!="function")throw Error(i(150));return K=Se.call(K),Ie(G,B,K,se)}if(typeof K.then=="function")return ht(G,B,Sd(K),se);if(K.$$typeof===z)return ht(G,B,_d(G,K),se);Ad(G,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,B!==null&&B.tag===6?(l(G,B.sibling),se=y(B,K),se.return=G,G=se):(l(G,B),se=Dp(K,G.mode,se),se.return=G,G=se),A(G)):l(G,B)}return function(G,B,K,se){try{ou=0;var Se=ht(G,B,K,se);return Sa=null,Se}catch(Te){if(Te===Ea||Te===Td)throw Te;var tt=Gn(29,Te,null,G.mode);return tt.lanes=se,tt.return=G,tt}finally{}}}var wo=o0(!0),a0=o0(!1),pr=!1;function $p(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Jp(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function mr(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function gr(s,o,l){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,(rt&2)!==0){var y=c.pending;return y===null?o.next=o:(o.next=y.next,y.next=o),c.pending=o,o=pd(s),zv(s,null,l),o}return hd(s,c,o,l),pd(s)}function lu(s,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194048)!==0)){var c=o.lanes;c&=s.pendingLanes,l|=c,o.lanes=l,Vl(s,l)}}function Kp(s,o){var l=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var y=null,v=null;if(l=l.firstBaseUpdate,l!==null){do{var A={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};v===null?y=v=A:v=v.next=A,l=l.next}while(l!==null);v===null?y=v=o:v=v.next=o}else y=v=o;l={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:v,shared:c.shared,callbacks:c.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=o:s.next=o,l.lastBaseUpdate=o}var Yp=!1;function uu(){if(Yp){var s=Ta;if(s!==null)throw s}}function cu(s,o,l,c){Yp=!1;var y=s.updateQueue;pr=!1;var v=y.firstBaseUpdate,A=y.lastBaseUpdate,b=y.shared.pending;if(b!==null){y.shared.pending=null;var O=b,Y=O.next;O.next=null,A===null?v=Y:A.next=Y,A=O;var ne=s.alternate;ne!==null&&(ne=ne.updateQueue,b=ne.lastBaseUpdate,b!==A&&(b===null?ne.firstBaseUpdate=Y:b.next=Y,ne.lastBaseUpdate=O))}if(v!==null){var re=y.baseState;A=0,ne=Y=O=null,b=v;do{var j=b.lane&-536870913,te=j!==b.lane;if(te?(Ye&j)===j:(c&j)===j){j!==0&&j===va&&(Yp=!0),ne!==null&&(ne=ne.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var ve=s,Ie=b;j=o;var ht=l;switch(Ie.tag){case 1:if(ve=Ie.payload,typeof ve=="function"){re=ve.call(ht,re,j);break e}re=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=Ie.payload,j=typeof ve=="function"?ve.call(ht,re,j):ve,j==null)break e;re=T({},re,j);break e;case 2:pr=!0}}j=b.callback,j!==null&&(s.flags|=64,te&&(s.flags|=8192),te=y.callbacks,te===null?y.callbacks=[j]:te.push(j))}else te={lane:j,tag:b.tag,payload:b.payload,callback:b.callback,next:null},ne===null?(Y=ne=te,O=re):ne=ne.next=te,A|=j;if(b=b.next,b===null){if(b=y.shared.pending,b===null)break;te=b,b=te.next,te.next=null,y.lastBaseUpdate=te,y.shared.pending=null}}while(!0);ne===null&&(O=re),y.baseState=O,y.firstBaseUpdate=Y,y.lastBaseUpdate=ne,v===null&&(y.shared.lanes=0),Er|=A,s.lanes=A,s.memoizedState=re}}function l0(s,o){if(typeof s!="function")throw Error(i(191,s));s.call(o)}function u0(s,o){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)l0(l[s],o)}var Aa=F(null),wd=F(0);function c0(s,o){s=Vs,he(wd,s),he(Aa,o),Vs=s|o.baseLanes}function Wp(){he(wd,Vs),he(Aa,Aa.current)}function Qp(){Vs=wd.current,ie(Aa),ie(wd)}var Hn=F(null),li=null;function yr(s){var o=s.alternate;he(Nt,Nt.current&1),he(Hn,s),li===null&&(o===null||Aa.current!==null||o.memoizedState!==null)&&(li=s)}function Xp(s){he(Nt,Nt.current),he(Hn,s),li===null&&(li=s)}function d0(s){s.tag===22?(he(Nt,Nt.current),he(Hn,s),li===null&&(li=s)):_r()}function _r(){he(Nt,Nt.current),he(Hn,Hn.current)}function zn(s){ie(Hn),li===s&&(li=null),ie(Nt)}var Nt=F(0);function Cd(s){for(var o=s;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||ig(l)||sg(l)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var bs=0,Be=null,dt=null,Ft=null,Id=!1,wa=!1,Co=!1,bd=0,du=0,Ca=null,h1=0;function Ct(){throw Error(i(321))}function jp(s,o){if(o===null)return!1;for(var l=0;l<o.length&&l<s.length;l++)if(!qn(s[l],o[l]))return!1;return!0}function Zp(s,o,l,c,y,v){return bs=v,Be=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Z.H=s===null||s.memoizedState===null?Y0:pm,Co=!1,v=l(c,y),Co=!1,wa&&(v=h0(o,l,c,y)),f0(s),v}function f0(s){Z.H=pu;var o=dt!==null&&dt.next!==null;if(bs=0,Ft=dt=Be=null,Id=!1,du=0,Ca=null,o)throw Error(i(300));s===null||Bt||(s=s.dependencies,s!==null&&yd(s)&&(Bt=!0))}function h0(s,o,l,c){Be=s;var y=0;do{if(wa&&(Ca=null),du=0,wa=!1,25<=y)throw Error(i(301));if(y+=1,Ft=dt=null,s.updateQueue!=null){var v=s.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}Z.H=W0,v=o(l,c)}while(wa);return v}function p1(){var s=Z.H,o=s.useState()[0];return o=typeof o.then=="function"?fu(o):o,s=s.useState()[0],(dt!==null?dt.memoizedState:null)!==s&&(Be.flags|=1024),o}function em(){var s=bd!==0;return bd=0,s}function tm(s,o,l){o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~l}function nm(s){if(Id){for(s=s.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}Id=!1}bs=0,Ft=dt=Be=null,wa=!1,du=bd=0,Ca=null}function wn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ft===null?Be.memoizedState=Ft=s:Ft=Ft.next=s,Ft}function Mt(){if(dt===null){var s=Be.alternate;s=s!==null?s.memoizedState:null}else s=dt.next;var o=Ft===null?Be.memoizedState:Ft.next;if(o!==null)Ft=o,dt=s;else{if(s===null)throw Be.alternate===null?Error(i(467)):Error(i(310));dt=s,s={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},Ft===null?Be.memoizedState=Ft=s:Ft=Ft.next=s}return Ft}function Rd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function fu(s){var o=du;return du+=1,Ca===null&&(Ca=[]),s=i0(Ca,s,o),o=Be,(Ft===null?o.memoizedState:Ft.next)===null&&(o=o.alternate,Z.H=o===null||o.memoizedState===null?Y0:pm),s}function xd(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return fu(s);if(s.$$typeof===z)return ln(s)}throw Error(i(438,String(s)))}function im(s){var o=null,l=Be.updateQueue;if(l!==null&&(o=l.memoCache),o==null){var c=Be.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(o={data:c.data.map(function(y){return y.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),l===null&&(l=Rd(),Be.updateQueue=l),l.memoCache=o,l=o.data[o.index],l===void 0)for(l=o.data[o.index]=Array(s),c=0;c<s;c++)l[c]=L;return o.index++,l}function Rs(s,o){return typeof o=="function"?o(s):o}function Nd(s){var o=Mt();return sm(o,dt,s)}function sm(s,o,l){var c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=l;var y=s.baseQueue,v=c.pending;if(v!==null){if(y!==null){var A=y.next;y.next=v.next,v.next=A}o.baseQueue=y=v,c.pending=null}if(v=s.baseState,y===null)s.memoizedState=v;else{o=y.next;var b=A=null,O=null,Y=o,ne=!1;do{var re=Y.lane&-536870913;if(re!==Y.lane?(Ye&re)===re:(bs&re)===re){var j=Y.revertLane;if(j===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),re===va&&(ne=!0);else if((bs&j)===j){Y=Y.next,j===va&&(ne=!0);continue}else re={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},O===null?(b=O=re,A=v):O=O.next=re,Be.lanes|=j,Er|=j;re=Y.action,Co&&l(v,re),v=Y.hasEagerState?Y.eagerState:l(v,re)}else j={lane:re,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},O===null?(b=O=j,A=v):O=O.next=j,Be.lanes|=re,Er|=re;Y=Y.next}while(Y!==null&&Y!==o);if(O===null?A=v:O.next=b,!qn(v,s.memoizedState)&&(Bt=!0,ne&&(l=Ta,l!==null)))throw l;s.memoizedState=v,s.baseState=A,s.baseQueue=O,c.lastRenderedState=v}return y===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function rm(s){var o=Mt(),l=o.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var c=l.dispatch,y=l.pending,v=o.memoizedState;if(y!==null){l.pending=null;var A=y=y.next;do v=s(v,A.action),A=A.next;while(A!==y);qn(v,o.memoizedState)||(Bt=!0),o.memoizedState=v,o.baseQueue===null&&(o.baseState=v),l.lastRenderedState=v}return[v,c]}function p0(s,o,l){var c=Be,y=Mt(),v=Ze;if(v){if(l===void 0)throw Error(i(407));l=l()}else l=o();var A=!qn((dt||y).memoizedState,l);if(A&&(y.memoizedState=l,Bt=!0),y=y.queue,lm(y0.bind(null,c,y,s),[s]),y.getSnapshot!==o||A||Ft!==null&&Ft.memoizedState.tag&1){if(c.flags|=2048,Ia(9,{destroy:void 0},g0.bind(null,c,y,l,o),null),pt===null)throw Error(i(349));v||(bs&127)!==0||m0(c,o,l)}return l}function m0(s,o,l){s.flags|=16384,s={getSnapshot:o,value:l},o=Be.updateQueue,o===null?(o=Rd(),Be.updateQueue=o,o.stores=[s]):(l=o.stores,l===null?o.stores=[s]:l.push(s))}function g0(s,o,l,c){o.value=l,o.getSnapshot=c,_0(o)&&v0(s)}function y0(s,o,l){return l(function(){_0(o)&&v0(s)})}function _0(s){var o=s.getSnapshot;s=s.value;try{var l=o();return!qn(s,l)}catch{return!0}}function v0(s){var o=go(s,2);o!==null&&kn(o,s,2)}function om(s){var o=wn();if(typeof s=="function"){var l=s;if(s=l(),Co){jn(!0);try{l()}finally{jn(!1)}}}return o.memoizedState=o.baseState=s,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rs,lastRenderedState:s},o}function T0(s,o,l,c){return s.baseState=l,sm(s,dt,typeof c=="function"?c:Rs)}function m1(s,o,l,c,y){if(Pd(s))throw Error(i(485));if(s=o.action,s!==null){var v={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){v.listeners.push(A)}};Z.T!==null?l(!0):v.isTransition=!1,c(v),l=o.pending,l===null?(v.next=o.pending=v,E0(o,v)):(v.next=l.next,o.pending=l.next=v)}}function E0(s,o){var l=o.action,c=o.payload,y=s.state;if(o.isTransition){var v=Z.T,A={};Z.T=A;try{var b=l(y,c),O=Z.S;O!==null&&O(A,b),S0(s,o,b)}catch(Y){am(s,o,Y)}finally{v!==null&&A.types!==null&&(v.types=A.types),Z.T=v}}else try{v=l(y,c),S0(s,o,v)}catch(Y){am(s,o,Y)}}function S0(s,o,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){A0(s,o,c)},function(c){return am(s,o,c)}):A0(s,o,l)}function A0(s,o,l){o.status="fulfilled",o.value=l,w0(o),s.state=l,o=s.pending,o!==null&&(l=o.next,l===o?s.pending=null:(l=l.next,o.next=l,E0(s,l)))}function am(s,o,l){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do o.status="rejected",o.reason=l,w0(o),o=o.next;while(o!==c)}s.action=null}function w0(s){s=s.listeners;for(var o=0;o<s.length;o++)(0,s[o])()}function C0(s,o){return o}function I0(s,o){if(Ze){var l=pt.formState;if(l!==null){e:{var c=Be;if(Ze){if(gt){t:{for(var y=gt,v=ai;y.nodeType!==8;){if(!v){y=null;break t}if(y=ui(y.nextSibling),y===null){y=null;break t}}v=y.data,y=v==="F!"||v==="F"?y:null}if(y){gt=ui(y.nextSibling),c=y.data==="F!";break e}}fr(c)}c=!1}c&&(o=l[0])}}return l=wn(),l.memoizedState=l.baseState=o,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:C0,lastRenderedState:o},l.queue=c,l=$0.bind(null,Be,c),c.dispatch=l,c=om(!1),v=hm.bind(null,Be,!1,c.queue),c=wn(),y={state:o,dispatch:null,action:s,pending:null},c.queue=y,l=m1.bind(null,Be,y,v,l),y.dispatch=l,c.memoizedState=s,[o,l,!1]}function b0(s){var o=Mt();return R0(o,dt,s)}function R0(s,o,l){if(o=sm(s,o,C0)[0],s=Nd(Rs)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var c=fu(o)}catch(A){throw A===Ea?Td:A}else c=o;o=Mt();var y=o.queue,v=y.dispatch;return l!==o.memoizedState&&(Be.flags|=2048,Ia(9,{destroy:void 0},g1.bind(null,y,l),null)),[c,v,s]}function g1(s,o){s.action=o}function x0(s){var o=Mt(),l=dt;if(l!==null)return R0(o,l,s);Mt(),o=o.memoizedState,l=Mt();var c=l.queue.dispatch;return l.memoizedState=s,[o,c,!1]}function Ia(s,o,l,c){return s={tag:s,create:l,deps:c,inst:o,next:null},o=Be.updateQueue,o===null&&(o=Rd(),Be.updateQueue=o),l=o.lastEffect,l===null?o.lastEffect=s.next=s:(c=l.next,l.next=s,s.next=c,o.lastEffect=s),s}function N0(){return Mt().memoizedState}function Md(s,o,l,c){var y=wn();Be.flags|=s,y.memoizedState=Ia(1|o,{destroy:void 0},l,c===void 0?null:c)}function Dd(s,o,l,c){var y=Mt();c=c===void 0?null:c;var v=y.memoizedState.inst;dt!==null&&c!==null&&jp(c,dt.memoizedState.deps)?y.memoizedState=Ia(o,v,l,c):(Be.flags|=s,y.memoizedState=Ia(1|o,v,l,c))}function M0(s,o){Md(8390656,8,s,o)}function lm(s,o){Dd(2048,8,s,o)}function y1(s){Be.flags|=4;var o=Be.updateQueue;if(o===null)o=Rd(),Be.updateQueue=o,o.events=[s];else{var l=o.events;l===null?o.events=[s]:l.push(s)}}function D0(s){var o=Mt().memoizedState;return y1({ref:o,nextImpl:s}),function(){if((rt&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}function P0(s,o){return Dd(4,2,s,o)}function k0(s,o){return Dd(4,4,s,o)}function V0(s,o){if(typeof o=="function"){s=s();var l=o(s);return function(){typeof l=="function"?l():o(null)}}if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function U0(s,o,l){l=l!=null?l.concat([s]):null,Dd(4,4,V0.bind(null,o,s),l)}function um(){}function L0(s,o){var l=Mt();o=o===void 0?null:o;var c=l.memoizedState;return o!==null&&jp(o,c[1])?c[0]:(l.memoizedState=[s,o],s)}function O0(s,o){var l=Mt();o=o===void 0?null:o;var c=l.memoizedState;if(o!==null&&jp(o,c[1]))return c[0];if(c=s(),Co){jn(!0);try{s()}finally{jn(!1)}}return l.memoizedState=[c,o],c}function cm(s,o,l){return l===void 0||(bs&1073741824)!==0&&(Ye&261930)===0?s.memoizedState=o:(s.memoizedState=l,s=FT(),Be.lanes|=s,Er|=s,l)}function F0(s,o,l,c){return qn(l,o)?l:Aa.current!==null?(s=cm(s,l,c),qn(s,o)||(Bt=!0),s):(bs&42)===0||(bs&1073741824)!==0&&(Ye&261930)===0?(Bt=!0,s.memoizedState=l):(s=FT(),Be.lanes|=s,Er|=s,o)}function B0(s,o,l,c,y){var v=ce.p;ce.p=v!==0&&8>v?v:8;var A=Z.T,b={};Z.T=b,hm(s,!1,o,l);try{var O=y(),Y=Z.S;if(Y!==null&&Y(b,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var ne=f1(O,c);hu(s,o,ne,Kn(s))}else hu(s,o,c,Kn(s))}catch(re){hu(s,o,{then:function(){},status:"rejected",reason:re},Kn())}finally{ce.p=v,A!==null&&b.types!==null&&(A.types=b.types),Z.T=A}}function _1(){}function dm(s,o,l,c){if(s.tag!==5)throw Error(i(476));var y=q0(s).queue;B0(s,y,o,fe,l===null?_1:function(){return G0(s),l(c)})}function q0(s){var o=s.memoizedState;if(o!==null)return o;o={memoizedState:fe,baseState:fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rs,lastRenderedState:fe},next:null};var l={};return o.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rs,lastRenderedState:l},next:null},s.memoizedState=o,s=s.alternate,s!==null&&(s.memoizedState=o),o}function G0(s){var o=q0(s);o.next===null&&(o=s.alternate.memoizedState),hu(s,o.next.queue,{},Kn())}function fm(){return ln(Nu)}function H0(){return Mt().memoizedState}function z0(){return Mt().memoizedState}function v1(s){for(var o=s.return;o!==null;){switch(o.tag){case 24:case 3:var l=Kn();s=mr(l);var c=gr(o,s,l);c!==null&&(kn(c,o,l),lu(c,o,l)),o={cache:qp()},s.payload=o;return}o=o.return}}function T1(s,o,l){var c=Kn();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Pd(s)?J0(o,l):(l=Np(s,o,l,c),l!==null&&(kn(l,s,c),K0(l,o,c)))}function $0(s,o,l){var c=Kn();hu(s,o,l,c)}function hu(s,o,l,c){var y={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Pd(s))J0(o,y);else{var v=s.alternate;if(s.lanes===0&&(v===null||v.lanes===0)&&(v=o.lastRenderedReducer,v!==null))try{var A=o.lastRenderedState,b=v(A,l);if(y.hasEagerState=!0,y.eagerState=b,qn(b,A))return hd(s,o,y,0),pt===null&&fd(),!1}catch{}finally{}if(l=Np(s,o,y,c),l!==null)return kn(l,s,c),K0(l,o,c),!0}return!1}function hm(s,o,l,c){if(c={lane:2,revertLane:$m(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Pd(s)){if(o)throw Error(i(479))}else o=Np(s,l,c,2),o!==null&&kn(o,s,2)}function Pd(s){var o=s.alternate;return s===Be||o!==null&&o===Be}function J0(s,o){wa=Id=!0;var l=s.pending;l===null?o.next=o:(o.next=l.next,l.next=o),s.pending=o}function K0(s,o,l){if((l&4194048)!==0){var c=o.lanes;c&=s.pendingLanes,l|=c,o.lanes=l,Vl(s,l)}}var pu={readContext:ln,use:xd,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useLayoutEffect:Ct,useInsertionEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useSyncExternalStore:Ct,useId:Ct,useHostTransitionStatus:Ct,useFormState:Ct,useActionState:Ct,useOptimistic:Ct,useMemoCache:Ct,useCacheRefresh:Ct};pu.useEffectEvent=Ct;var Y0={readContext:ln,use:xd,useCallback:function(s,o){return wn().memoizedState=[s,o===void 0?null:o],s},useContext:ln,useEffect:M0,useImperativeHandle:function(s,o,l){l=l!=null?l.concat([s]):null,Md(4194308,4,V0.bind(null,o,s),l)},useLayoutEffect:function(s,o){return Md(4194308,4,s,o)},useInsertionEffect:function(s,o){Md(4,2,s,o)},useMemo:function(s,o){var l=wn();o=o===void 0?null:o;var c=s();if(Co){jn(!0);try{s()}finally{jn(!1)}}return l.memoizedState=[c,o],c},useReducer:function(s,o,l){var c=wn();if(l!==void 0){var y=l(o);if(Co){jn(!0);try{l(o)}finally{jn(!1)}}}else y=o;return c.memoizedState=c.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},c.queue=s,s=s.dispatch=T1.bind(null,Be,s),[c.memoizedState,s]},useRef:function(s){var o=wn();return s={current:s},o.memoizedState=s},useState:function(s){s=om(s);var o=s.queue,l=$0.bind(null,Be,o);return o.dispatch=l,[s.memoizedState,l]},useDebugValue:um,useDeferredValue:function(s,o){var l=wn();return cm(l,s,o)},useTransition:function(){var s=om(!1);return s=B0.bind(null,Be,s.queue,!0,!1),wn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,o,l){var c=Be,y=wn();if(Ze){if(l===void 0)throw Error(i(407));l=l()}else{if(l=o(),pt===null)throw Error(i(349));(Ye&127)!==0||m0(c,o,l)}y.memoizedState=l;var v={value:l,getSnapshot:o};return y.queue=v,M0(y0.bind(null,c,v,s),[s]),c.flags|=2048,Ia(9,{destroy:void 0},g0.bind(null,c,v,l,o),null),l},useId:function(){var s=wn(),o=pt.identifierPrefix;if(Ze){var l=ss,c=is;l=(c&~(1<<32-Rt(c)-1)).toString(32)+l,o="_"+o+"R_"+l,l=bd++,0<l&&(o+="H"+l.toString(32)),o+="_"}else l=h1++,o="_"+o+"r_"+l.toString(32)+"_";return s.memoizedState=o},useHostTransitionStatus:fm,useFormState:I0,useActionState:I0,useOptimistic:function(s){var o=wn();o.memoizedState=o.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=l,o=hm.bind(null,Be,!0,l),l.dispatch=o,[s,o]},useMemoCache:im,useCacheRefresh:function(){return wn().memoizedState=v1.bind(null,Be)},useEffectEvent:function(s){var o=wn(),l={impl:s};return o.memoizedState=l,function(){if((rt&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},pm={readContext:ln,use:xd,useCallback:L0,useContext:ln,useEffect:lm,useImperativeHandle:U0,useInsertionEffect:P0,useLayoutEffect:k0,useMemo:O0,useReducer:Nd,useRef:N0,useState:function(){return Nd(Rs)},useDebugValue:um,useDeferredValue:function(s,o){var l=Mt();return F0(l,dt.memoizedState,s,o)},useTransition:function(){var s=Nd(Rs)[0],o=Mt().memoizedState;return[typeof s=="boolean"?s:fu(s),o]},useSyncExternalStore:p0,useId:H0,useHostTransitionStatus:fm,useFormState:b0,useActionState:b0,useOptimistic:function(s,o){var l=Mt();return T0(l,dt,s,o)},useMemoCache:im,useCacheRefresh:z0};pm.useEffectEvent=D0;var W0={readContext:ln,use:xd,useCallback:L0,useContext:ln,useEffect:lm,useImperativeHandle:U0,useInsertionEffect:P0,useLayoutEffect:k0,useMemo:O0,useReducer:rm,useRef:N0,useState:function(){return rm(Rs)},useDebugValue:um,useDeferredValue:function(s,o){var l=Mt();return dt===null?cm(l,s,o):F0(l,dt.memoizedState,s,o)},useTransition:function(){var s=rm(Rs)[0],o=Mt().memoizedState;return[typeof s=="boolean"?s:fu(s),o]},useSyncExternalStore:p0,useId:H0,useHostTransitionStatus:fm,useFormState:x0,useActionState:x0,useOptimistic:function(s,o){var l=Mt();return dt!==null?T0(l,dt,s,o):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:im,useCacheRefresh:z0};W0.useEffectEvent=D0;function mm(s,o,l,c){o=s.memoizedState,l=l(c,o),l=l==null?o:T({},o,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var gm={enqueueSetState:function(s,o,l){s=s._reactInternals;var c=Kn(),y=mr(c);y.payload=o,l!=null&&(y.callback=l),o=gr(s,y,c),o!==null&&(kn(o,s,c),lu(o,s,c))},enqueueReplaceState:function(s,o,l){s=s._reactInternals;var c=Kn(),y=mr(c);y.tag=1,y.payload=o,l!=null&&(y.callback=l),o=gr(s,y,c),o!==null&&(kn(o,s,c),lu(o,s,c))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var l=Kn(),c=mr(l);c.tag=2,o!=null&&(c.callback=o),o=gr(s,c,l),o!==null&&(kn(o,s,l),lu(o,s,l))}};function Q0(s,o,l,c,y,v,A){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,v,A):o.prototype&&o.prototype.isPureReactComponent?!eu(l,c)||!eu(y,v):!0}function X0(s,o,l,c){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,c),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,c),o.state!==s&&gm.enqueueReplaceState(o,o.state,null)}function Io(s,o){var l=o;if("ref"in o){l={};for(var c in o)c!=="ref"&&(l[c]=o[c])}if(s=s.defaultProps){l===o&&(l=T({},l));for(var y in s)l[y]===void 0&&(l[y]=s[y])}return l}function j0(s){dd(s)}function Z0(s){console.error(s)}function eT(s){dd(s)}function kd(s,o){try{var l=s.onUncaughtError;l(o.value,{componentStack:o.stack})}catch(c){setTimeout(function(){throw c})}}function tT(s,o,l){try{var c=s.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function ym(s,o,l){return l=mr(l),l.tag=3,l.payload={element:null},l.callback=function(){kd(s,o)},l}function nT(s){return s=mr(s),s.tag=3,s}function iT(s,o,l,c){var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var v=c.value;s.payload=function(){return y(v)},s.callback=function(){tT(o,l,c)}}var A=l.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(s.callback=function(){tT(o,l,c),typeof y!="function"&&(Sr===null?Sr=new Set([this]):Sr.add(this));var b=c.stack;this.componentDidCatch(c.value,{componentStack:b!==null?b:""})})}function E1(s,o,l,c,y){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(o=l.alternate,o!==null&&_a(o,l,y,!0),l=Hn.current,l!==null){switch(l.tag){case 31:case 13:return li===null?Jd():l.alternate===null&&It===0&&(It=3),l.flags&=-257,l.flags|=65536,l.lanes=y,c===Ed?l.flags|=16384:(o=l.updateQueue,o===null?l.updateQueue=new Set([c]):o.add(c),Gm(s,c,y)),!1;case 22:return l.flags|=65536,c===Ed?l.flags|=16384:(o=l.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=o):(l=o.retryQueue,l===null?o.retryQueue=new Set([c]):l.add(c)),Gm(s,c,y)),!1}throw Error(i(435,l.tag))}return Gm(s,c,y),Jd(),!1}if(Ze)return o=Hn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=y,c!==Up&&(s=Error(i(422),{cause:c}),iu(si(s,l)))):(c!==Up&&(o=Error(i(423),{cause:c}),iu(si(o,l))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,c=si(c,l),y=ym(s.stateNode,c,y),Kp(s,y),It!==4&&(It=2)),!1;var v=Error(i(520),{cause:c});if(v=si(v,l),Su===null?Su=[v]:Su.push(v),It!==4&&(It=2),o===null)return!0;c=si(c,l),l=o;do{switch(l.tag){case 3:return l.flags|=65536,s=y&-y,l.lanes|=s,s=ym(l.stateNode,c,s),Kp(l,s),!1;case 1:if(o=l.type,v=l.stateNode,(l.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Sr===null||!Sr.has(v))))return l.flags|=65536,y&=-y,l.lanes|=y,y=nT(y),iT(y,s,l,c),Kp(l,y),!1}l=l.return}while(l!==null);return!1}var _m=Error(i(461)),Bt=!1;function un(s,o,l,c){o.child=s===null?a0(o,null,l,c):wo(o,s.child,l,c)}function sT(s,o,l,c,y){l=l.render;var v=o.ref;if("ref"in c){var A={};for(var b in c)b!=="ref"&&(A[b]=c[b])}else A=c;return To(o),c=Zp(s,o,l,A,v,y),b=em(),s!==null&&!Bt?(tm(s,o,y),xs(s,o,y)):(Ze&&b&&kp(o),o.flags|=1,un(s,o,c,y),o.child)}function rT(s,o,l,c,y){if(s===null){var v=l.type;return typeof v=="function"&&!Mp(v)&&v.defaultProps===void 0&&l.compare===null?(o.tag=15,o.type=v,oT(s,o,v,c,y)):(s=md(l.type,null,c,o,o.mode,y),s.ref=o.ref,s.return=o,o.child=s)}if(v=s.child,!Im(s,y)){var A=v.memoizedProps;if(l=l.compare,l=l!==null?l:eu,l(A,c)&&s.ref===o.ref)return xs(s,o,y)}return o.flags|=1,s=As(v,c),s.ref=o.ref,s.return=o,o.child=s}function oT(s,o,l,c,y){if(s!==null){var v=s.memoizedProps;if(eu(v,c)&&s.ref===o.ref)if(Bt=!1,o.pendingProps=c=v,Im(s,y))(s.flags&131072)!==0&&(Bt=!0);else return o.lanes=s.lanes,xs(s,o,y)}return vm(s,o,l,c,y)}function aT(s,o,l,c){var y=c.children,v=s!==null?s.memoizedState:null;if(s===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((o.flags&128)!==0){if(v=v!==null?v.baseLanes|l:l,s!==null){for(c=o.child=s.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~v}else c=0,o.child=null;return lT(s,o,v,l,c)}if((l&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},s!==null&&vd(o,v!==null?v.cachePool:null),v!==null?c0(o,v):Wp(),d0(o);else return c=o.lanes=536870912,lT(s,o,v!==null?v.baseLanes|l:l,l,c)}else v!==null?(vd(o,v.cachePool),c0(o,v),_r(),o.memoizedState=null):(s!==null&&vd(o,null),Wp(),_r());return un(s,o,y,l),o.child}function mu(s,o){return s!==null&&s.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function lT(s,o,l,c,y){var v=Hp();return v=v===null?null:{parent:Ot._currentValue,pool:v},o.memoizedState={baseLanes:l,cachePool:v},s!==null&&vd(o,null),Wp(),d0(o),s!==null&&_a(s,o,c,!0),o.childLanes=y,null}function Vd(s,o){return o=Ld({mode:o.mode,children:o.children},s.mode),o.ref=s.ref,s.child=o,o.return=s,o}function uT(s,o,l){return wo(o,s.child,null,l),s=Vd(o,o.pendingProps),s.flags|=2,zn(o),o.memoizedState=null,s}function S1(s,o,l){var c=o.pendingProps,y=(o.flags&128)!==0;if(o.flags&=-129,s===null){if(Ze){if(c.mode==="hidden")return s=Vd(o,c),o.lanes=536870912,mu(null,s);if(Xp(o),(s=gt)?(s=EE(s,ai),s=s!==null&&s.data==="&"?s:null,s!==null&&(o.memoizedState={dehydrated:s,treeContext:cr!==null?{id:is,overflow:ss}:null,retryLane:536870912,hydrationErrors:null},l=Jv(s),l.return=o,o.child=l,an=o,gt=null)):s=null,s===null)throw fr(o);return o.lanes=536870912,null}return Vd(o,c)}var v=s.memoizedState;if(v!==null){var A=v.dehydrated;if(Xp(o),y)if(o.flags&256)o.flags&=-257,o=uT(s,o,l);else if(o.memoizedState!==null)o.child=s.child,o.flags|=128,o=null;else throw Error(i(558));else if(Bt||_a(s,o,l,!1),y=(l&s.childLanes)!==0,Bt||y){if(c=pt,c!==null&&(A=Ul(c,l),A!==0&&A!==v.retryLane))throw v.retryLane=A,go(s,A),kn(c,s,A),_m;Jd(),o=uT(s,o,l)}else s=v.treeContext,gt=ui(A.nextSibling),an=o,Ze=!0,dr=null,ai=!1,s!==null&&Wv(o,s),o=Vd(o,c),o.flags|=4096;return o}return s=As(s.child,{mode:c.mode,children:c.children}),s.ref=o.ref,o.child=s,s.return=o,s}function Ud(s,o){var l=o.ref;if(l===null)s!==null&&s.ref!==null&&(o.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(s===null||s.ref!==l)&&(o.flags|=4194816)}}function vm(s,o,l,c,y){return To(o),l=Zp(s,o,l,c,void 0,y),c=em(),s!==null&&!Bt?(tm(s,o,y),xs(s,o,y)):(Ze&&c&&kp(o),o.flags|=1,un(s,o,l,y),o.child)}function cT(s,o,l,c,y,v){return To(o),o.updateQueue=null,l=h0(o,c,l,y),f0(s),c=em(),s!==null&&!Bt?(tm(s,o,v),xs(s,o,v)):(Ze&&c&&kp(o),o.flags|=1,un(s,o,l,v),o.child)}function dT(s,o,l,c,y){if(To(o),o.stateNode===null){var v=pa,A=l.contextType;typeof A=="object"&&A!==null&&(v=ln(A)),v=new l(c,v),o.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=gm,o.stateNode=v,v._reactInternals=o,v=o.stateNode,v.props=c,v.state=o.memoizedState,v.refs={},$p(o),A=l.contextType,v.context=typeof A=="object"&&A!==null?ln(A):pa,v.state=o.memoizedState,A=l.getDerivedStateFromProps,typeof A=="function"&&(mm(o,l,A,c),v.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(A=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),A!==v.state&&gm.enqueueReplaceState(v,v.state,null),cu(o,c,v,y),uu(),v.state=o.memoizedState),typeof v.componentDidMount=="function"&&(o.flags|=4194308),c=!0}else if(s===null){v=o.stateNode;var b=o.memoizedProps,O=Io(l,b);v.props=O;var Y=v.context,ne=l.contextType;A=pa,typeof ne=="object"&&ne!==null&&(A=ln(ne));var re=l.getDerivedStateFromProps;ne=typeof re=="function"||typeof v.getSnapshotBeforeUpdate=="function",b=o.pendingProps!==b,ne||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(b||Y!==A)&&X0(o,v,c,A),pr=!1;var j=o.memoizedState;v.state=j,cu(o,c,v,y),uu(),Y=o.memoizedState,b||j!==Y||pr?(typeof re=="function"&&(mm(o,l,re,c),Y=o.memoizedState),(O=pr||Q0(o,l,O,c,j,Y,A))?(ne||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(o.flags|=4194308)):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=c,o.memoizedState=Y),v.props=c,v.state=Y,v.context=A,c=O):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),c=!1)}else{v=o.stateNode,Jp(s,o),A=o.memoizedProps,ne=Io(l,A),v.props=ne,re=o.pendingProps,j=v.context,Y=l.contextType,O=pa,typeof Y=="object"&&Y!==null&&(O=ln(Y)),b=l.getDerivedStateFromProps,(Y=typeof b=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A!==re||j!==O)&&X0(o,v,c,O),pr=!1,j=o.memoizedState,v.state=j,cu(o,c,v,y),uu();var te=o.memoizedState;A!==re||j!==te||pr||s!==null&&s.dependencies!==null&&yd(s.dependencies)?(typeof b=="function"&&(mm(o,l,b,c),te=o.memoizedState),(ne=pr||Q0(o,l,ne,c,j,te,O)||s!==null&&s.dependencies!==null&&yd(s.dependencies))?(Y||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,te,O),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,te,O)),typeof v.componentDidUpdate=="function"&&(o.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof v.componentDidUpdate!="function"||A===s.memoizedProps&&j===s.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&j===s.memoizedState||(o.flags|=1024),o.memoizedProps=c,o.memoizedState=te),v.props=c,v.state=te,v.context=O,c=ne):(typeof v.componentDidUpdate!="function"||A===s.memoizedProps&&j===s.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&j===s.memoizedState||(o.flags|=1024),c=!1)}return v=c,Ud(s,o),c=(o.flags&128)!==0,v||c?(v=o.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:v.render(),o.flags|=1,s!==null&&c?(o.child=wo(o,s.child,null,y),o.child=wo(o,null,l,y)):un(s,o,l,y),o.memoizedState=v.state,s=o.child):s=xs(s,o,y),s}function fT(s,o,l,c){return _o(),o.flags|=256,un(s,o,l,c),o.child}var Tm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Em(s){return{baseLanes:s,cachePool:t0()}}function Sm(s,o,l){return s=s!==null?s.childLanes&~l:0,o&&(s|=Jn),s}function hT(s,o,l){var c=o.pendingProps,y=!1,v=(o.flags&128)!==0,A;if((A=v)||(A=s!==null&&s.memoizedState===null?!1:(Nt.current&2)!==0),A&&(y=!0,o.flags&=-129),A=(o.flags&32)!==0,o.flags&=-33,s===null){if(Ze){if(y?yr(o):_r(),(s=gt)?(s=EE(s,ai),s=s!==null&&s.data!=="&"?s:null,s!==null&&(o.memoizedState={dehydrated:s,treeContext:cr!==null?{id:is,overflow:ss}:null,retryLane:536870912,hydrationErrors:null},l=Jv(s),l.return=o,o.child=l,an=o,gt=null)):s=null,s===null)throw fr(o);return sg(s)?o.lanes=32:o.lanes=536870912,null}var b=c.children;return c=c.fallback,y?(_r(),y=o.mode,b=Ld({mode:"hidden",children:b},y),c=yo(c,y,l,null),b.return=o,c.return=o,b.sibling=c,o.child=b,c=o.child,c.memoizedState=Em(l),c.childLanes=Sm(s,A,l),o.memoizedState=Tm,mu(null,c)):(yr(o),Am(o,b))}var O=s.memoizedState;if(O!==null&&(b=O.dehydrated,b!==null)){if(v)o.flags&256?(yr(o),o.flags&=-257,o=wm(s,o,l)):o.memoizedState!==null?(_r(),o.child=s.child,o.flags|=128,o=null):(_r(),b=c.fallback,y=o.mode,c=Ld({mode:"visible",children:c.children},y),b=yo(b,y,l,null),b.flags|=2,c.return=o,b.return=o,c.sibling=b,o.child=c,wo(o,s.child,null,l),c=o.child,c.memoizedState=Em(l),c.childLanes=Sm(s,A,l),o.memoizedState=Tm,o=mu(null,c));else if(yr(o),sg(b)){if(A=b.nextSibling&&b.nextSibling.dataset,A)var Y=A.dgst;A=Y,c=Error(i(419)),c.stack="",c.digest=A,iu({value:c,source:null,stack:null}),o=wm(s,o,l)}else if(Bt||_a(s,o,l,!1),A=(l&s.childLanes)!==0,Bt||A){if(A=pt,A!==null&&(c=Ul(A,l),c!==0&&c!==O.retryLane))throw O.retryLane=c,go(s,c),kn(A,s,c),_m;ig(b)||Jd(),o=wm(s,o,l)}else ig(b)?(o.flags|=192,o.child=s.child,o=null):(s=O.treeContext,gt=ui(b.nextSibling),an=o,Ze=!0,dr=null,ai=!1,s!==null&&Wv(o,s),o=Am(o,c.children),o.flags|=4096);return o}return y?(_r(),b=c.fallback,y=o.mode,O=s.child,Y=O.sibling,c=As(O,{mode:"hidden",children:c.children}),c.subtreeFlags=O.subtreeFlags&65011712,Y!==null?b=As(Y,b):(b=yo(b,y,l,null),b.flags|=2),b.return=o,c.return=o,c.sibling=b,o.child=c,mu(null,c),c=o.child,b=s.child.memoizedState,b===null?b=Em(l):(y=b.cachePool,y!==null?(O=Ot._currentValue,y=y.parent!==O?{parent:O,pool:O}:y):y=t0(),b={baseLanes:b.baseLanes|l,cachePool:y}),c.memoizedState=b,c.childLanes=Sm(s,A,l),o.memoizedState=Tm,mu(s.child,c)):(yr(o),l=s.child,s=l.sibling,l=As(l,{mode:"visible",children:c.children}),l.return=o,l.sibling=null,s!==null&&(A=o.deletions,A===null?(o.deletions=[s],o.flags|=16):A.push(s)),o.child=l,o.memoizedState=null,l)}function Am(s,o){return o=Ld({mode:"visible",children:o},s.mode),o.return=s,s.child=o}function Ld(s,o){return s=Gn(22,s,null,o),s.lanes=0,s}function wm(s,o,l){return wo(o,s.child,null,l),s=Am(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function pT(s,o,l){s.lanes|=o;var c=s.alternate;c!==null&&(c.lanes|=o),Fp(s.return,o,l)}function Cm(s,o,l,c,y,v){var A=s.memoizedState;A===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:y,treeForkCount:v}:(A.isBackwards=o,A.rendering=null,A.renderingStartTime=0,A.last=c,A.tail=l,A.tailMode=y,A.treeForkCount=v)}function mT(s,o,l){var c=o.pendingProps,y=c.revealOrder,v=c.tail;c=c.children;var A=Nt.current,b=(A&2)!==0;if(b?(A=A&1|2,o.flags|=128):A&=1,he(Nt,A),un(s,o,c,l),c=Ze?nu:0,!b&&s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&pT(s,l,o);else if(s.tag===19)pT(s,l,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(y){case"forwards":for(l=o.child,y=null;l!==null;)s=l.alternate,s!==null&&Cd(s)===null&&(y=l),l=l.sibling;l=y,l===null?(y=o.child,o.child=null):(y=l.sibling,l.sibling=null),Cm(o,!1,y,l,v,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,y=o.child,o.child=null;y!==null;){if(s=y.alternate,s!==null&&Cd(s)===null){o.child=y;break}s=y.sibling,y.sibling=l,l=y,y=s}Cm(o,!0,l,null,v,c);break;case"together":Cm(o,!1,null,null,void 0,c);break;default:o.memoizedState=null}return o.child}function xs(s,o,l){if(s!==null&&(o.dependencies=s.dependencies),Er|=o.lanes,(l&o.childLanes)===0)if(s!==null){if(_a(s,o,l,!1),(l&o.childLanes)===0)return null}else return null;if(s!==null&&o.child!==s.child)throw Error(i(153));if(o.child!==null){for(s=o.child,l=As(s,s.pendingProps),o.child=l,l.return=o;s.sibling!==null;)s=s.sibling,l=l.sibling=As(s,s.pendingProps),l.return=o;l.sibling=null}return o.child}function Im(s,o){return(s.lanes&o)!==0?!0:(s=s.dependencies,!!(s!==null&&yd(s)))}function A1(s,o,l){switch(o.tag){case 3:wt(o,o.stateNode.containerInfo),hr(o,Ot,s.memoizedState.cache),_o();break;case 27:case 5:Oi(o);break;case 4:wt(o,o.stateNode.containerInfo);break;case 10:hr(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Xp(o),null;break;case 13:var c=o.memoizedState;if(c!==null)return c.dehydrated!==null?(yr(o),o.flags|=128,null):(l&o.child.childLanes)!==0?hT(s,o,l):(yr(o),s=xs(s,o,l),s!==null?s.sibling:null);yr(o);break;case 19:var y=(s.flags&128)!==0;if(c=(l&o.childLanes)!==0,c||(_a(s,o,l,!1),c=(l&o.childLanes)!==0),y){if(c)return mT(s,o,l);o.flags|=128}if(y=o.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),he(Nt,Nt.current),c)break;return null;case 22:return o.lanes=0,aT(s,o,l,o.pendingProps);case 24:hr(o,Ot,s.memoizedState.cache)}return xs(s,o,l)}function gT(s,o,l){if(s!==null)if(s.memoizedProps!==o.pendingProps)Bt=!0;else{if(!Im(s,l)&&(o.flags&128)===0)return Bt=!1,A1(s,o,l);Bt=(s.flags&131072)!==0}else Bt=!1,Ze&&(o.flags&1048576)!==0&&Yv(o,nu,o.index);switch(o.lanes=0,o.tag){case 16:e:{var c=o.pendingProps;if(s=So(o.elementType),o.type=s,typeof s=="function")Mp(s)?(c=Io(s,c),o.tag=1,o=dT(null,o,s,c,l)):(o.tag=0,o=vm(null,o,s,c,l));else{if(s!=null){var y=s.$$typeof;if(y===X){o.tag=11,o=sT(null,o,s,c,l);break e}else if(y===N){o.tag=14,o=rT(null,o,s,c,l);break e}}throw o=ke(s)||s,Error(i(306,o,""))}}return o;case 0:return vm(s,o,o.type,o.pendingProps,l);case 1:return c=o.type,y=Io(c,o.pendingProps),dT(s,o,c,y,l);case 3:e:{if(wt(o,o.stateNode.containerInfo),s===null)throw Error(i(387));c=o.pendingProps;var v=o.memoizedState;y=v.element,Jp(s,o),cu(o,c,null,l);var A=o.memoizedState;if(c=A.cache,hr(o,Ot,c),c!==v.cache&&Bp(o,[Ot],l,!0),uu(),c=A.element,v.isDehydrated)if(v={element:c,isDehydrated:!1,cache:A.cache},o.updateQueue.baseState=v,o.memoizedState=v,o.flags&256){o=fT(s,o,c,l);break e}else if(c!==y){y=si(Error(i(424)),o),iu(y),o=fT(s,o,c,l);break e}else{switch(s=o.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(gt=ui(s.firstChild),an=o,Ze=!0,dr=null,ai=!0,l=a0(o,null,c,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(_o(),c===y){o=xs(s,o,l);break e}un(s,o,c,l)}o=o.child}return o;case 26:return Ud(s,o),s===null?(l=bE(o.type,null,o.pendingProps,null))?o.memoizedState=l:Ze||(l=o.type,s=o.pendingProps,c=Zd(De.current).createElement(l),c[Vt]=o,c[Xt]=s,cn(c,l,s),Ut(c),o.stateNode=c):o.memoizedState=bE(o.type,s.memoizedProps,o.pendingProps,s.memoizedState),null;case 27:return Oi(o),s===null&&Ze&&(c=o.stateNode=wE(o.type,o.pendingProps,De.current),an=o,ai=!0,y=gt,Ir(o.type)?(rg=y,gt=ui(c.firstChild)):gt=y),un(s,o,o.pendingProps.children,l),Ud(s,o),s===null&&(o.flags|=4194304),o.child;case 5:return s===null&&Ze&&((y=c=gt)&&(c=Z1(c,o.type,o.pendingProps,ai),c!==null?(o.stateNode=c,an=o,gt=ui(c.firstChild),ai=!1,y=!0):y=!1),y||fr(o)),Oi(o),y=o.type,v=o.pendingProps,A=s!==null?s.memoizedProps:null,c=v.children,eg(y,v)?c=null:A!==null&&eg(y,A)&&(o.flags|=32),o.memoizedState!==null&&(y=Zp(s,o,p1,null,null,l),Nu._currentValue=y),Ud(s,o),un(s,o,c,l),o.child;case 6:return s===null&&Ze&&((s=l=gt)&&(l=eM(l,o.pendingProps,ai),l!==null?(o.stateNode=l,an=o,gt=null,s=!0):s=!1),s||fr(o)),null;case 13:return hT(s,o,l);case 4:return wt(o,o.stateNode.containerInfo),c=o.pendingProps,s===null?o.child=wo(o,null,c,l):un(s,o,c,l),o.child;case 11:return sT(s,o,o.type,o.pendingProps,l);case 7:return un(s,o,o.pendingProps,l),o.child;case 8:return un(s,o,o.pendingProps.children,l),o.child;case 12:return un(s,o,o.pendingProps.children,l),o.child;case 10:return c=o.pendingProps,hr(o,o.type,c.value),un(s,o,c.children,l),o.child;case 9:return y=o.type._context,c=o.pendingProps.children,To(o),y=ln(y),c=c(y),o.flags|=1,un(s,o,c,l),o.child;case 14:return rT(s,o,o.type,o.pendingProps,l);case 15:return oT(s,o,o.type,o.pendingProps,l);case 19:return mT(s,o,l);case 31:return S1(s,o,l);case 22:return aT(s,o,l,o.pendingProps);case 24:return To(o),c=ln(Ot),s===null?(y=Hp(),y===null&&(y=pt,v=qp(),y.pooledCache=v,v.refCount++,v!==null&&(y.pooledCacheLanes|=l),y=v),o.memoizedState={parent:c,cache:y},$p(o),hr(o,Ot,y)):((s.lanes&l)!==0&&(Jp(s,o),cu(o,null,null,l),uu()),y=s.memoizedState,v=o.memoizedState,y.parent!==c?(y={parent:c,cache:c},o.memoizedState=y,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=y),hr(o,Ot,c)):(c=v.cache,hr(o,Ot,c),c!==y.cache&&Bp(o,[Ot],l,!0))),un(s,o,o.pendingProps.children,l),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function Ns(s){s.flags|=4}function bm(s,o,l,c,y){if((o=(s.mode&32)!==0)&&(o=!1),o){if(s.flags|=16777216,(y&335544128)===y)if(s.stateNode.complete)s.flags|=8192;else if(HT())s.flags|=8192;else throw Ao=Ed,zp}else s.flags&=-16777217}function yT(s,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!DE(o))if(HT())s.flags|=8192;else throw Ao=Ed,zp}function Od(s,o){o!==null&&(s.flags|=4),s.flags&16384&&(o=s.tag!==22?zc():536870912,s.lanes|=o,Na|=o)}function gu(s,o){if(!Ze)switch(s.tailMode){case"hidden":o=s.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function yt(s){var o=s.alternate!==null&&s.alternate.child===s.child,l=0,c=0;if(o)for(var y=s.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=c,s.childLanes=l,o}function w1(s,o,l){var c=o.pendingProps;switch(Vp(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(o),null;case 1:return yt(o),null;case 3:return l=o.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),Is(Ot),$e(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(ya(o)?Ns(o):s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Lp())),yt(o),null;case 26:var y=o.type,v=o.memoizedState;return s===null?(Ns(o),v!==null?(yt(o),yT(o,v)):(yt(o),bm(o,y,null,c,l))):v?v!==s.memoizedState?(Ns(o),yt(o),yT(o,v)):(yt(o),o.flags&=-16777217):(s=s.memoizedProps,s!==c&&Ns(o),yt(o),bm(o,y,s,c,l)),null;case 27:if(On(o),l=De.current,y=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==c&&Ns(o);else{if(!c){if(o.stateNode===null)throw Error(i(166));return yt(o),null}s=me.current,ya(o)?Qv(o):(s=wE(y,c,l),o.stateNode=s,Ns(o))}return yt(o),null;case 5:if(On(o),y=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==c&&Ns(o);else{if(!c){if(o.stateNode===null)throw Error(i(166));return yt(o),null}if(v=me.current,ya(o))Qv(o);else{var A=Zd(De.current);switch(v){case 1:v=A.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:v=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":v=A.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":v=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":v=A.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof c.is=="string"?A.createElement("select",{is:c.is}):A.createElement("select"),c.multiple?v.multiple=!0:c.size&&(v.size=c.size);break;default:v=typeof c.is=="string"?A.createElement(y,{is:c.is}):A.createElement(y)}}v[Vt]=o,v[Xt]=c;e:for(A=o.child;A!==null;){if(A.tag===5||A.tag===6)v.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===o)break e;for(;A.sibling===null;){if(A.return===null||A.return===o)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}o.stateNode=v;e:switch(cn(v,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Ns(o)}}return yt(o),bm(o,o.type,s===null?null:s.memoizedProps,o.pendingProps,l),null;case 6:if(s&&o.stateNode!=null)s.memoizedProps!==c&&Ns(o);else{if(typeof c!="string"&&o.stateNode===null)throw Error(i(166));if(s=De.current,ya(o)){if(s=o.stateNode,l=o.memoizedProps,c=null,y=an,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}s[Vt]=o,s=!!(s.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||hE(s.nodeValue,l)),s||fr(o,!0)}else s=Zd(s).createTextNode(c),s[Vt]=o,o.stateNode=s}return yt(o),null;case 31:if(l=o.memoizedState,s===null||s.memoizedState!==null){if(c=ya(o),l!==null){if(s===null){if(!c)throw Error(i(318));if(s=o.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[Vt]=o}else _o(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;yt(o),s=!1}else l=Lp(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=l),s=!0;if(!s)return o.flags&256?(zn(o),o):(zn(o),null);if((o.flags&128)!==0)throw Error(i(558))}return yt(o),null;case 13:if(c=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=ya(o),c!==null&&c.dehydrated!==null){if(s===null){if(!y)throw Error(i(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[Vt]=o}else _o(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;yt(o),y=!1}else y=Lp(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return o.flags&256?(zn(o),o):(zn(o),null)}return zn(o),(o.flags&128)!==0?(o.lanes=l,o):(l=c!==null,s=s!==null&&s.memoizedState!==null,l&&(c=o.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),v=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==y&&(c.flags|=2048)),l!==s&&l&&(o.child.flags|=8192),Od(o,o.updateQueue),yt(o),null);case 4:return $e(),s===null&&Wm(o.stateNode.containerInfo),yt(o),null;case 10:return Is(o.type),yt(o),null;case 19:if(ie(Nt),c=o.memoizedState,c===null)return yt(o),null;if(y=(o.flags&128)!==0,v=c.rendering,v===null)if(y)gu(c,!1);else{if(It!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(v=Cd(s),v!==null){for(o.flags|=128,gu(c,!1),s=v.updateQueue,o.updateQueue=s,Od(o,s),o.subtreeFlags=0,s=l,l=o.child;l!==null;)$v(l,s),l=l.sibling;return he(Nt,Nt.current&1|2),Ze&&ws(o,c.treeForkCount),o.child}s=s.sibling}c.tail!==null&&Sn()>Hd&&(o.flags|=128,y=!0,gu(c,!1),o.lanes=4194304)}else{if(!y)if(s=Cd(v),s!==null){if(o.flags|=128,y=!0,s=s.updateQueue,o.updateQueue=s,Od(o,s),gu(c,!0),c.tail===null&&c.tailMode==="hidden"&&!v.alternate&&!Ze)return yt(o),null}else 2*Sn()-c.renderingStartTime>Hd&&l!==536870912&&(o.flags|=128,y=!0,gu(c,!1),o.lanes=4194304);c.isBackwards?(v.sibling=o.child,o.child=v):(s=c.last,s!==null?s.sibling=v:o.child=v,c.last=v)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=Sn(),s.sibling=null,l=Nt.current,he(Nt,y?l&1|2:l&1),Ze&&ws(o,c.treeForkCount),s):(yt(o),null);case 22:case 23:return zn(o),Qp(),c=o.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(o.flags|=8192):c&&(o.flags|=8192),c?(l&536870912)!==0&&(o.flags&128)===0&&(yt(o),o.subtreeFlags&6&&(o.flags|=8192)):yt(o),l=o.updateQueue,l!==null&&Od(o,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),c=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(c=o.memoizedState.cachePool.pool),c!==l&&(o.flags|=2048),s!==null&&ie(Eo),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),o.memoizedState.cache!==l&&(o.flags|=2048),Is(Ot),yt(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function C1(s,o){switch(Vp(o),o.tag){case 1:return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return Is(Ot),$e(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 26:case 27:case 5:return On(o),null;case 31:if(o.memoizedState!==null){if(zn(o),o.alternate===null)throw Error(i(340));_o()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 13:if(zn(o),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(i(340));_o()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return ie(Nt),null;case 4:return $e(),null;case 10:return Is(o.type),null;case 22:case 23:return zn(o),Qp(),s!==null&&ie(Eo),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 24:return Is(Ot),null;case 25:return null;default:return null}}function _T(s,o){switch(Vp(o),o.tag){case 3:Is(Ot),$e();break;case 26:case 27:case 5:On(o);break;case 4:$e();break;case 31:o.memoizedState!==null&&zn(o);break;case 13:zn(o);break;case 19:ie(Nt);break;case 10:Is(o.type);break;case 22:case 23:zn(o),Qp(),s!==null&&ie(Eo);break;case 24:Is(Ot)}}function yu(s,o){try{var l=o.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var y=c.next;l=y;do{if((l.tag&s)===s){c=void 0;var v=l.create,A=l.inst;c=v(),A.destroy=c}l=l.next}while(l!==y)}}catch(b){ut(o,o.return,b)}}function vr(s,o,l){try{var c=o.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var v=y.next;c=v;do{if((c.tag&s)===s){var A=c.inst,b=A.destroy;if(b!==void 0){A.destroy=void 0,y=o;var O=l,Y=b;try{Y()}catch(ne){ut(y,O,ne)}}}c=c.next}while(c!==v)}}catch(ne){ut(o,o.return,ne)}}function vT(s){var o=s.updateQueue;if(o!==null){var l=s.stateNode;try{u0(o,l)}catch(c){ut(s,s.return,c)}}}function TT(s,o,l){l.props=Io(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(c){ut(s,o,c)}}function _u(s,o){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof l=="function"?s.refCleanup=l(c):l.current=c}}catch(y){ut(s,o,y)}}function rs(s,o){var l=s.ref,c=s.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(y){ut(s,o,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(y){ut(s,o,y)}else l.current=null}function ET(s){var o=s.type,l=s.memoizedProps,c=s.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(y){ut(s,s.return,y)}}function Rm(s,o,l){try{var c=s.stateNode;K1(c,s.type,l,o),c[Xt]=o}catch(y){ut(s,s.return,y)}}function ST(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Ir(s.type)||s.tag===4}function xm(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||ST(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Ir(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Nm(s,o,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,o?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,o):(o=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,o.appendChild(s),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=Ti));else if(c!==4&&(c===27&&Ir(s.type)&&(l=s.stateNode,o=null),s=s.child,s!==null))for(Nm(s,o,l),s=s.sibling;s!==null;)Nm(s,o,l),s=s.sibling}function Fd(s,o,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,o?l.insertBefore(s,o):l.appendChild(s);else if(c!==4&&(c===27&&Ir(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(Fd(s,o,l),s=s.sibling;s!==null;)Fd(s,o,l),s=s.sibling}function AT(s){var o=s.stateNode,l=s.memoizedProps;try{for(var c=s.type,y=o.attributes;y.length;)o.removeAttributeNode(y[0]);cn(o,c,l),o[Vt]=s,o[Xt]=l}catch(v){ut(s,s.return,v)}}var Ms=!1,qt=!1,Mm=!1,wT=typeof WeakSet=="function"?WeakSet:Set,Zt=null;function I1(s,o){if(s=s.containerInfo,jm=af,s=Uv(s),wp(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var y=c.anchorOffset,v=c.focusNode;c=c.focusOffset;try{l.nodeType,v.nodeType}catch{l=null;break e}var A=0,b=-1,O=-1,Y=0,ne=0,re=s,j=null;t:for(;;){for(var te;re!==l||y!==0&&re.nodeType!==3||(b=A+y),re!==v||c!==0&&re.nodeType!==3||(O=A+c),re.nodeType===3&&(A+=re.nodeValue.length),(te=re.firstChild)!==null;)j=re,re=te;for(;;){if(re===s)break t;if(j===l&&++Y===y&&(b=A),j===v&&++ne===c&&(O=A),(te=re.nextSibling)!==null)break;re=j,j=re.parentNode}re=te}l=b===-1||O===-1?null:{start:b,end:O}}else l=null}l=l||{start:0,end:0}}else l=null;for(Zm={focusedElem:s,selectionRange:l},af=!1,Zt=o;Zt!==null;)if(o=Zt,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,Zt=s;else for(;Zt!==null;){switch(o=Zt,v=o.alternate,s=o.flags,o.tag){case 0:if((s&4)!==0&&(s=o.updateQueue,s=s!==null?s.events:null,s!==null))for(l=0;l<s.length;l++)y=s[l],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&v!==null){s=void 0,l=o,y=v.memoizedProps,v=v.memoizedState,c=l.stateNode;try{var ve=Io(l.type,y);s=c.getSnapshotBeforeUpdate(ve,v),c.__reactInternalSnapshotBeforeUpdate=s}catch(Ie){ut(l,l.return,Ie)}}break;case 3:if((s&1024)!==0){if(s=o.stateNode.containerInfo,l=s.nodeType,l===9)ng(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":ng(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=o.sibling,s!==null){s.return=o.return,Zt=s;break}Zt=o.return}}function CT(s,o,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:Ps(s,l),c&4&&yu(5,l);break;case 1:if(Ps(s,l),c&4)if(s=l.stateNode,o===null)try{s.componentDidMount()}catch(A){ut(l,l.return,A)}else{var y=Io(l.type,o.memoizedProps);o=o.memoizedState;try{s.componentDidUpdate(y,o,s.__reactInternalSnapshotBeforeUpdate)}catch(A){ut(l,l.return,A)}}c&64&&vT(l),c&512&&_u(l,l.return);break;case 3:if(Ps(s,l),c&64&&(s=l.updateQueue,s!==null)){if(o=null,l.child!==null)switch(l.child.tag){case 27:case 5:o=l.child.stateNode;break;case 1:o=l.child.stateNode}try{u0(s,o)}catch(A){ut(l,l.return,A)}}break;case 27:o===null&&c&4&&AT(l);case 26:case 5:Ps(s,l),o===null&&c&4&&ET(l),c&512&&_u(l,l.return);break;case 12:Ps(s,l);break;case 31:Ps(s,l),c&4&&RT(s,l);break;case 13:Ps(s,l),c&4&&xT(s,l),c&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=V1.bind(null,l),tM(s,l))));break;case 22:if(c=l.memoizedState!==null||Ms,!c){o=o!==null&&o.memoizedState!==null||qt,y=Ms;var v=qt;Ms=c,(qt=o)&&!v?ks(s,l,(l.subtreeFlags&8772)!==0):Ps(s,l),Ms=y,qt=v}break;case 30:break;default:Ps(s,l)}}function IT(s){var o=s.alternate;o!==null&&(s.alternate=null,IT(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&ea(o)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Tt=null,Nn=!1;function Ds(s,o,l){for(l=l.child;l!==null;)bT(s,o,l),l=l.sibling}function bT(s,o,l){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(gi,l)}catch{}switch(l.tag){case 26:qt||rs(l,o),Ds(s,o,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:qt||rs(l,o);var c=Tt,y=Nn;Ir(l.type)&&(Tt=l.stateNode,Nn=!1),Ds(s,o,l),bu(l.stateNode),Tt=c,Nn=y;break;case 5:qt||rs(l,o);case 6:if(c=Tt,y=Nn,Tt=null,Ds(s,o,l),Tt=c,Nn=y,Tt!==null)if(Nn)try{(Tt.nodeType===9?Tt.body:Tt.nodeName==="HTML"?Tt.ownerDocument.body:Tt).removeChild(l.stateNode)}catch(v){ut(l,o,v)}else try{Tt.removeChild(l.stateNode)}catch(v){ut(l,o,v)}break;case 18:Tt!==null&&(Nn?(s=Tt,vE(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),Oa(s)):vE(Tt,l.stateNode));break;case 4:c=Tt,y=Nn,Tt=l.stateNode.containerInfo,Nn=!0,Ds(s,o,l),Tt=c,Nn=y;break;case 0:case 11:case 14:case 15:vr(2,l,o),qt||vr(4,l,o),Ds(s,o,l);break;case 1:qt||(rs(l,o),c=l.stateNode,typeof c.componentWillUnmount=="function"&&TT(l,o,c)),Ds(s,o,l);break;case 21:Ds(s,o,l);break;case 22:qt=(c=qt)||l.memoizedState!==null,Ds(s,o,l),qt=c;break;default:Ds(s,o,l)}}function RT(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Oa(s)}catch(l){ut(o,o.return,l)}}}function xT(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Oa(s)}catch(l){ut(o,o.return,l)}}function b1(s){switch(s.tag){case 31:case 13:case 19:var o=s.stateNode;return o===null&&(o=s.stateNode=new wT),o;case 22:return s=s.stateNode,o=s._retryCache,o===null&&(o=s._retryCache=new wT),o;default:throw Error(i(435,s.tag))}}function Bd(s,o){var l=b1(s);o.forEach(function(c){if(!l.has(c)){l.add(c);var y=U1.bind(null,s,c);c.then(y,y)}})}function Mn(s,o){var l=o.deletions;if(l!==null)for(var c=0;c<l.length;c++){var y=l[c],v=s,A=o,b=A;e:for(;b!==null;){switch(b.tag){case 27:if(Ir(b.type)){Tt=b.stateNode,Nn=!1;break e}break;case 5:Tt=b.stateNode,Nn=!1;break e;case 3:case 4:Tt=b.stateNode.containerInfo,Nn=!0;break e}b=b.return}if(Tt===null)throw Error(i(160));bT(v,A,y),Tt=null,Nn=!1,v=y.alternate,v!==null&&(v.return=null),y.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)NT(o,s),o=o.sibling}var Ii=null;function NT(s,o){var l=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Mn(o,s),Dn(s),c&4&&(vr(3,s,s.return),yu(3,s),vr(5,s,s.return));break;case 1:Mn(o,s),Dn(s),c&512&&(qt||l===null||rs(l,l.return)),c&64&&Ms&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var y=Ii;if(Mn(o,s),Dn(s),c&512&&(qt||l===null||rs(l,l.return)),c&4){var v=l!==null?l.memoizedState:null;if(c=s.memoizedState,l===null)if(c===null)if(s.stateNode===null){e:{c=s.type,l=s.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":v=y.getElementsByTagName("title")[0],(!v||v[$i]||v[Vt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=y.createElement(c),y.head.insertBefore(v,y.querySelector("head > title"))),cn(v,c,l),v[Vt]=s,Ut(v),c=v;break e;case"link":var A=NE("link","href",y).get(c+(l.href||""));if(A){for(var b=0;b<A.length;b++)if(v=A[b],v.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&v.getAttribute("rel")===(l.rel==null?null:l.rel)&&v.getAttribute("title")===(l.title==null?null:l.title)&&v.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){A.splice(b,1);break t}}v=y.createElement(c),cn(v,c,l),y.head.appendChild(v);break;case"meta":if(A=NE("meta","content",y).get(c+(l.content||""))){for(b=0;b<A.length;b++)if(v=A[b],v.getAttribute("content")===(l.content==null?null:""+l.content)&&v.getAttribute("name")===(l.name==null?null:l.name)&&v.getAttribute("property")===(l.property==null?null:l.property)&&v.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&v.getAttribute("charset")===(l.charSet==null?null:l.charSet)){A.splice(b,1);break t}}v=y.createElement(c),cn(v,c,l),y.head.appendChild(v);break;default:throw Error(i(468,c))}v[Vt]=s,Ut(v),c=v}s.stateNode=c}else ME(y,s.type,s.stateNode);else s.stateNode=xE(y,c,s.memoizedProps);else v!==c?(v===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):v.count--,c===null?ME(y,s.type,s.stateNode):xE(y,c,s.memoizedProps)):c===null&&s.stateNode!==null&&Rm(s,s.memoizedProps,l.memoizedProps)}break;case 27:Mn(o,s),Dn(s),c&512&&(qt||l===null||rs(l,l.return)),l!==null&&c&4&&Rm(s,s.memoizedProps,l.memoizedProps);break;case 5:if(Mn(o,s),Dn(s),c&512&&(qt||l===null||rs(l,l.return)),s.flags&32){y=s.stateNode;try{xn(y,"")}catch(ve){ut(s,s.return,ve)}}c&4&&s.stateNode!=null&&(y=s.memoizedProps,Rm(s,y,l!==null?l.memoizedProps:y)),c&1024&&(Mm=!0);break;case 6:if(Mn(o,s),Dn(s),c&4){if(s.stateNode===null)throw Error(i(162));c=s.memoizedProps,l=s.stateNode;try{l.nodeValue=c}catch(ve){ut(s,s.return,ve)}}break;case 3:if(nf=null,y=Ii,Ii=ef(o.containerInfo),Mn(o,s),Ii=y,Dn(s),c&4&&l!==null&&l.memoizedState.isDehydrated)try{Oa(o.containerInfo)}catch(ve){ut(s,s.return,ve)}Mm&&(Mm=!1,MT(s));break;case 4:c=Ii,Ii=ef(s.stateNode.containerInfo),Mn(o,s),Dn(s),Ii=c;break;case 12:Mn(o,s),Dn(s);break;case 31:Mn(o,s),Dn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Bd(s,c)));break;case 13:Mn(o,s),Dn(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Gd=Sn()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Bd(s,c)));break;case 22:y=s.memoizedState!==null;var O=l!==null&&l.memoizedState!==null,Y=Ms,ne=qt;if(Ms=Y||y,qt=ne||O,Mn(o,s),qt=ne,Ms=Y,Dn(s),c&8192)e:for(o=s.stateNode,o._visibility=y?o._visibility&-2:o._visibility|1,y&&(l===null||O||Ms||qt||bo(s)),l=null,o=s;;){if(o.tag===5||o.tag===26){if(l===null){O=l=o;try{if(v=O.stateNode,y)A=v.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{b=O.stateNode;var re=O.memoizedProps.style,j=re!=null&&re.hasOwnProperty("display")?re.display:null;b.style.display=j==null||typeof j=="boolean"?"":(""+j).trim()}}catch(ve){ut(O,O.return,ve)}}}else if(o.tag===6){if(l===null){O=o;try{O.stateNode.nodeValue=y?"":O.memoizedProps}catch(ve){ut(O,O.return,ve)}}}else if(o.tag===18){if(l===null){O=o;try{var te=O.stateNode;y?TE(te,!0):TE(O.stateNode,!1)}catch(ve){ut(O,O.return,ve)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===s)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;l===o&&(l=null),o=o.return}l===o&&(l=null),o.sibling.return=o.return,o=o.sibling}c&4&&(c=s.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,Bd(s,l))));break;case 19:Mn(o,s),Dn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Bd(s,c)));break;case 30:break;case 21:break;default:Mn(o,s),Dn(s)}}function Dn(s){var o=s.flags;if(o&2){try{for(var l,c=s.return;c!==null;){if(ST(c)){l=c;break}c=c.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var y=l.stateNode,v=xm(s);Fd(s,v,y);break;case 5:var A=l.stateNode;l.flags&32&&(xn(A,""),l.flags&=-33);var b=xm(s);Fd(s,b,A);break;case 3:case 4:var O=l.stateNode.containerInfo,Y=xm(s);Nm(s,Y,O);break;default:throw Error(i(161))}}catch(ne){ut(s,s.return,ne)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function MT(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var o=s;MT(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),s=s.sibling}}function Ps(s,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)CT(s,o.alternate,o),o=o.sibling}function bo(s){for(s=s.child;s!==null;){var o=s;switch(o.tag){case 0:case 11:case 14:case 15:vr(4,o,o.return),bo(o);break;case 1:rs(o,o.return);var l=o.stateNode;typeof l.componentWillUnmount=="function"&&TT(o,o.return,l),bo(o);break;case 27:bu(o.stateNode);case 26:case 5:rs(o,o.return),bo(o);break;case 22:o.memoizedState===null&&bo(o);break;case 30:bo(o);break;default:bo(o)}s=s.sibling}}function ks(s,o,l){for(l=l&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var c=o.alternate,y=s,v=o,A=v.flags;switch(v.tag){case 0:case 11:case 15:ks(y,v,l),yu(4,v);break;case 1:if(ks(y,v,l),c=v,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(Y){ut(c,c.return,Y)}if(c=v,y=c.updateQueue,y!==null){var b=c.stateNode;try{var O=y.shared.hiddenCallbacks;if(O!==null)for(y.shared.hiddenCallbacks=null,y=0;y<O.length;y++)l0(O[y],b)}catch(Y){ut(c,c.return,Y)}}l&&A&64&&vT(v),_u(v,v.return);break;case 27:AT(v);case 26:case 5:ks(y,v,l),l&&c===null&&A&4&&ET(v),_u(v,v.return);break;case 12:ks(y,v,l);break;case 31:ks(y,v,l),l&&A&4&&RT(y,v);break;case 13:ks(y,v,l),l&&A&4&&xT(y,v);break;case 22:v.memoizedState===null&&ks(y,v,l),_u(v,v.return);break;case 30:break;default:ks(y,v,l)}o=o.sibling}}function Dm(s,o){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(s=o.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&su(l))}function Pm(s,o){s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&su(s))}function bi(s,o,l,c){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)DT(s,o,l,c),o=o.sibling}function DT(s,o,l,c){var y=o.flags;switch(o.tag){case 0:case 11:case 15:bi(s,o,l,c),y&2048&&yu(9,o);break;case 1:bi(s,o,l,c);break;case 3:bi(s,o,l,c),y&2048&&(s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&su(s)));break;case 12:if(y&2048){bi(s,o,l,c),s=o.stateNode;try{var v=o.memoizedProps,A=v.id,b=v.onPostCommit;typeof b=="function"&&b(A,o.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(O){ut(o,o.return,O)}}else bi(s,o,l,c);break;case 31:bi(s,o,l,c);break;case 13:bi(s,o,l,c);break;case 23:break;case 22:v=o.stateNode,A=o.alternate,o.memoizedState!==null?v._visibility&2?bi(s,o,l,c):vu(s,o):v._visibility&2?bi(s,o,l,c):(v._visibility|=2,ba(s,o,l,c,(o.subtreeFlags&10256)!==0||!1)),y&2048&&Dm(A,o);break;case 24:bi(s,o,l,c),y&2048&&Pm(o.alternate,o);break;default:bi(s,o,l,c)}}function ba(s,o,l,c,y){for(y=y&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var v=s,A=o,b=l,O=c,Y=A.flags;switch(A.tag){case 0:case 11:case 15:ba(v,A,b,O,y),yu(8,A);break;case 23:break;case 22:var ne=A.stateNode;A.memoizedState!==null?ne._visibility&2?ba(v,A,b,O,y):vu(v,A):(ne._visibility|=2,ba(v,A,b,O,y)),y&&Y&2048&&Dm(A.alternate,A);break;case 24:ba(v,A,b,O,y),y&&Y&2048&&Pm(A.alternate,A);break;default:ba(v,A,b,O,y)}o=o.sibling}}function vu(s,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var l=s,c=o,y=c.flags;switch(c.tag){case 22:vu(l,c),y&2048&&Dm(c.alternate,c);break;case 24:vu(l,c),y&2048&&Pm(c.alternate,c);break;default:vu(l,c)}o=o.sibling}}var Tu=8192;function Ra(s,o,l){if(s.subtreeFlags&Tu)for(s=s.child;s!==null;)PT(s,o,l),s=s.sibling}function PT(s,o,l){switch(s.tag){case 26:Ra(s,o,l),s.flags&Tu&&s.memoizedState!==null&&hM(l,Ii,s.memoizedState,s.memoizedProps);break;case 5:Ra(s,o,l);break;case 3:case 4:var c=Ii;Ii=ef(s.stateNode.containerInfo),Ra(s,o,l),Ii=c;break;case 22:s.memoizedState===null&&(c=s.alternate,c!==null&&c.memoizedState!==null?(c=Tu,Tu=16777216,Ra(s,o,l),Tu=c):Ra(s,o,l));break;default:Ra(s,o,l)}}function kT(s){var o=s.alternate;if(o!==null&&(s=o.child,s!==null)){o.child=null;do o=s.sibling,s.sibling=null,s=o;while(s!==null)}}function Eu(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var c=o[l];Zt=c,UT(c,s)}kT(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)VT(s),s=s.sibling}function VT(s){switch(s.tag){case 0:case 11:case 15:Eu(s),s.flags&2048&&vr(9,s,s.return);break;case 3:Eu(s);break;case 12:Eu(s);break;case 22:var o=s.stateNode;s.memoizedState!==null&&o._visibility&2&&(s.return===null||s.return.tag!==13)?(o._visibility&=-3,qd(s)):Eu(s);break;default:Eu(s)}}function qd(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var c=o[l];Zt=c,UT(c,s)}kT(s)}for(s=s.child;s!==null;){switch(o=s,o.tag){case 0:case 11:case 15:vr(8,o,o.return),qd(o);break;case 22:l=o.stateNode,l._visibility&2&&(l._visibility&=-3,qd(o));break;default:qd(o)}s=s.sibling}}function UT(s,o){for(;Zt!==null;){var l=Zt;switch(l.tag){case 0:case 11:case 15:vr(8,l,o);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:su(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,Zt=c;else e:for(l=s;Zt!==null;){c=Zt;var y=c.sibling,v=c.return;if(IT(c),c===l){Zt=null;break e}if(y!==null){y.return=v,Zt=y;break e}Zt=v}}}var R1={getCacheForType:function(s){var o=ln(Ot),l=o.data.get(s);return l===void 0&&(l=s(),o.data.set(s,l)),l},cacheSignal:function(){return ln(Ot).controller.signal}},x1=typeof WeakMap=="function"?WeakMap:Map,rt=0,pt=null,Je=null,Ye=0,lt=0,$n=null,Tr=!1,xa=!1,km=!1,Vs=0,It=0,Er=0,Ro=0,Vm=0,Jn=0,Na=0,Su=null,Pn=null,Um=!1,Gd=0,LT=0,Hd=1/0,zd=null,Sr=null,Kt=0,Ar=null,Ma=null,Us=0,Lm=0,Om=null,OT=null,Au=0,Fm=null;function Kn(){return(rt&2)!==0&&Ye!==0?Ye&-Ye:Z.T!==null?$m():$c()}function FT(){if(Jn===0)if((Ye&536870912)===0||Ze){var s=eo;eo<<=1,(eo&3932160)===0&&(eo=262144),Jn=s}else Jn=536870912;return s=Hn.current,s!==null&&(s.flags|=32),Jn}function kn(s,o,l){(s===pt&&(lt===2||lt===9)||s.cancelPendingCommit!==null)&&(Da(s,0),wr(s,Ye,Jn,!1)),to(s,l),((rt&2)===0||s!==pt)&&(s===pt&&((rt&2)===0&&(Ro|=l),It===4&&wr(s,Ye,Jn,!1)),os(s))}function BT(s,o,l){if((rt&6)!==0)throw Error(i(327));var c=!l&&(o&127)===0&&(o&s.expiredLanes)===0||yi(s,o),y=c?D1(s,o):qm(s,o,!0),v=c;do{if(y===0){xa&&!c&&wr(s,o,0,!1);break}else{if(l=s.current.alternate,v&&!N1(l)){y=qm(s,o,!1),v=!1;continue}if(y===2){if(v=o,s.errorRecoveryDisabledLanes&v)var A=0;else A=s.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){o=A;e:{var b=s;y=Su;var O=b.current.memoizedState.isDehydrated;if(O&&(Da(b,A).flags|=256),A=qm(b,A,!1),A!==2){if(km&&!O){b.errorRecoveryDisabledLanes|=v,Ro|=v,y=4;break e}v=Pn,Pn=y,v!==null&&(Pn===null?Pn=v:Pn.push.apply(Pn,v))}y=A}if(v=!1,y!==2)continue}}if(y===1){Da(s,0),wr(s,o,0,!0);break}e:{switch(c=s,v=y,v){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:wr(c,o,Jn,!Tr);break e;case 2:Pn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(y=Gd+300-Sn(),10<y)){if(wr(c,o,Jn,!Tr),Gi(c,0,!0)!==0)break e;Us=o,c.timeoutHandle=yE(qT.bind(null,c,l,Pn,zd,Um,o,Jn,Ro,Na,Tr,v,"Throttled",-0,0),y);break e}qT(c,l,Pn,zd,Um,o,Jn,Ro,Na,Tr,v,null,-0,0)}}break}while(!0);os(s)}function qT(s,o,l,c,y,v,A,b,O,Y,ne,re,j,te){if(s.timeoutHandle=-1,re=o.subtreeFlags,re&8192||(re&16785408)===16785408){re={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ti},PT(o,v,re);var ve=(v&62914560)===v?Gd-Sn():(v&4194048)===v?LT-Sn():0;if(ve=pM(re,ve),ve!==null){Us=v,s.cancelPendingCommit=ve(WT.bind(null,s,o,v,l,c,y,A,b,O,ne,re,null,j,te)),wr(s,v,A,!Y);return}}WT(s,o,v,l,c,y,A,b,O)}function N1(s){for(var o=s;;){var l=o.tag;if((l===0||l===11||l===15)&&o.flags&16384&&(l=o.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var y=l[c],v=y.getSnapshot;y=y.value;try{if(!qn(v(),y))return!1}catch{return!1}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function wr(s,o,l,c){o&=~Vm,o&=~Ro,s.suspendedLanes|=o,s.pingedLanes&=~o,c&&(s.warmLanes|=o),c=s.expirationTimes;for(var y=o;0<y;){var v=31-Rt(y),A=1<<v;c[v]=-1,y&=~A}l!==0&&no(s,l,o)}function $d(){return(rt&6)===0?(wu(0),!1):!0}function Bm(){if(Je!==null){if(lt===0)var s=Je.return;else s=Je,Cs=vo=null,nm(s),Sa=null,ou=0,s=Je;for(;s!==null;)_T(s.alternate,s),s=s.return;Je=null}}function Da(s,o){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,Q1(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),Us=0,Bm(),pt=s,Je=l=As(s.current,null),Ye=o,lt=0,$n=null,Tr=!1,xa=yi(s,o),km=!1,Na=Jn=Vm=Ro=Er=It=0,Pn=Su=null,Um=!1,(o&8)!==0&&(o|=o&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=o;0<c;){var y=31-Rt(c),v=1<<y;o|=s[y],c&=~v}return Vs=o,fd(),l}function GT(s,o){Be=null,Z.H=pu,o===Ea||o===Td?(o=s0(),lt=3):o===zp?(o=s0(),lt=4):lt=o===_m?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,$n=o,Je===null&&(It=1,kd(s,si(o,s.current)))}function HT(){var s=Hn.current;return s===null?!0:(Ye&4194048)===Ye?li===null:(Ye&62914560)===Ye||(Ye&536870912)!==0?s===li:!1}function zT(){var s=Z.H;return Z.H=pu,s===null?pu:s}function $T(){var s=Z.A;return Z.A=R1,s}function Jd(){It=4,Tr||(Ye&4194048)!==Ye&&Hn.current!==null||(xa=!0),(Er&134217727)===0&&(Ro&134217727)===0||pt===null||wr(pt,Ye,Jn,!1)}function qm(s,o,l){var c=rt;rt|=2;var y=zT(),v=$T();(pt!==s||Ye!==o)&&(zd=null,Da(s,o)),o=!1;var A=It;e:do try{if(lt!==0&&Je!==null){var b=Je,O=$n;switch(lt){case 8:Bm(),A=6;break e;case 3:case 2:case 9:case 6:Hn.current===null&&(o=!0);var Y=lt;if(lt=0,$n=null,Pa(s,b,O,Y),l&&xa){A=0;break e}break;default:Y=lt,lt=0,$n=null,Pa(s,b,O,Y)}}M1(),A=It;break}catch(ne){GT(s,ne)}while(!0);return o&&s.shellSuspendCounter++,Cs=vo=null,rt=c,Z.H=y,Z.A=v,Je===null&&(pt=null,Ye=0,fd()),A}function M1(){for(;Je!==null;)JT(Je)}function D1(s,o){var l=rt;rt|=2;var c=zT(),y=$T();pt!==s||Ye!==o?(zd=null,Hd=Sn()+500,Da(s,o)):xa=yi(s,o);e:do try{if(lt!==0&&Je!==null){o=Je;var v=$n;t:switch(lt){case 1:lt=0,$n=null,Pa(s,o,v,1);break;case 2:case 9:if(n0(v)){lt=0,$n=null,KT(o);break}o=function(){lt!==2&&lt!==9||pt!==s||(lt=7),os(s)},v.then(o,o);break e;case 3:lt=7;break e;case 4:lt=5;break e;case 7:n0(v)?(lt=0,$n=null,KT(o)):(lt=0,$n=null,Pa(s,o,v,7));break;case 5:var A=null;switch(Je.tag){case 26:A=Je.memoizedState;case 5:case 27:var b=Je;if(A?DE(A):b.stateNode.complete){lt=0,$n=null;var O=b.sibling;if(O!==null)Je=O;else{var Y=b.return;Y!==null?(Je=Y,Kd(Y)):Je=null}break t}}lt=0,$n=null,Pa(s,o,v,5);break;case 6:lt=0,$n=null,Pa(s,o,v,6);break;case 8:Bm(),It=6;break e;default:throw Error(i(462))}}P1();break}catch(ne){GT(s,ne)}while(!0);return Cs=vo=null,Z.H=c,Z.A=y,rt=l,Je!==null?0:(pt=null,Ye=0,fd(),It)}function P1(){for(;Je!==null&&!yp();)JT(Je)}function JT(s){var o=gT(s.alternate,s,Vs);s.memoizedProps=s.pendingProps,o===null?Kd(s):Je=o}function KT(s){var o=s,l=o.alternate;switch(o.tag){case 15:case 0:o=cT(l,o,o.pendingProps,o.type,void 0,Ye);break;case 11:o=cT(l,o,o.pendingProps,o.type.render,o.ref,Ye);break;case 5:nm(o);default:_T(l,o),o=Je=$v(o,Vs),o=gT(l,o,Vs)}s.memoizedProps=s.pendingProps,o===null?Kd(s):Je=o}function Pa(s,o,l,c){Cs=vo=null,nm(o),Sa=null,ou=0;var y=o.return;try{if(E1(s,y,o,l,Ye)){It=1,kd(s,si(l,s.current)),Je=null;return}}catch(v){if(y!==null)throw Je=y,v;It=1,kd(s,si(l,s.current)),Je=null;return}o.flags&32768?(Ze||c===1?s=!0:xa||(Ye&536870912)!==0?s=!1:(Tr=s=!0,(c===2||c===9||c===3||c===6)&&(c=Hn.current,c!==null&&c.tag===13&&(c.flags|=16384))),YT(o,s)):Kd(o)}function Kd(s){var o=s;do{if((o.flags&32768)!==0){YT(o,Tr);return}s=o.return;var l=w1(o.alternate,o,Vs);if(l!==null){Je=l;return}if(o=o.sibling,o!==null){Je=o;return}Je=o=s}while(o!==null);It===0&&(It=5)}function YT(s,o){do{var l=C1(s.alternate,s);if(l!==null){l.flags&=32767,Je=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!o&&(s=s.sibling,s!==null)){Je=s;return}Je=s=l}while(s!==null);It=6,Je=null}function WT(s,o,l,c,y,v,A,b,O){s.cancelPendingCommit=null;do Yd();while(Kt!==0);if((rt&6)!==0)throw Error(i(327));if(o!==null){if(o===s.current)throw Error(i(177));if(v=o.lanes|o.childLanes,v|=xp,Tp(s,l,v,A,b,O),s===pt&&(Je=pt=null,Ye=0),Ma=o,Ar=s,Us=l,Lm=v,Om=y,OT=c,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,L1(er,function(){return eE(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||c){c=Z.T,Z.T=null,y=ce.p,ce.p=2,A=rt,rt|=4;try{I1(s,o,l)}finally{rt=A,ce.p=y,Z.T=c}}Kt=1,QT(),XT(),jT()}}function QT(){if(Kt===1){Kt=0;var s=Ar,o=Ma,l=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||l){l=Z.T,Z.T=null;var c=ce.p;ce.p=2;var y=rt;rt|=4;try{NT(o,s);var v=Zm,A=Uv(s.containerInfo),b=v.focusedElem,O=v.selectionRange;if(A!==b&&b&&b.ownerDocument&&Vv(b.ownerDocument.documentElement,b)){if(O!==null&&wp(b)){var Y=O.start,ne=O.end;if(ne===void 0&&(ne=Y),"selectionStart"in b)b.selectionStart=Y,b.selectionEnd=Math.min(ne,b.value.length);else{var re=b.ownerDocument||document,j=re&&re.defaultView||window;if(j.getSelection){var te=j.getSelection(),ve=b.textContent.length,Ie=Math.min(O.start,ve),ht=O.end===void 0?Ie:Math.min(O.end,ve);!te.extend&&Ie>ht&&(A=ht,ht=Ie,Ie=A);var G=kv(b,Ie),B=kv(b,ht);if(G&&B&&(te.rangeCount!==1||te.anchorNode!==G.node||te.anchorOffset!==G.offset||te.focusNode!==B.node||te.focusOffset!==B.offset)){var K=re.createRange();K.setStart(G.node,G.offset),te.removeAllRanges(),Ie>ht?(te.addRange(K),te.extend(B.node,B.offset)):(K.setEnd(B.node,B.offset),te.addRange(K))}}}}for(re=[],te=b;te=te.parentNode;)te.nodeType===1&&re.push({element:te,left:te.scrollLeft,top:te.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<re.length;b++){var se=re[b];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}af=!!jm,Zm=jm=null}finally{rt=y,ce.p=c,Z.T=l}}s.current=o,Kt=2}}function XT(){if(Kt===2){Kt=0;var s=Ar,o=Ma,l=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||l){l=Z.T,Z.T=null;var c=ce.p;ce.p=2;var y=rt;rt|=4;try{CT(s,o.alternate,o)}finally{rt=y,ce.p=c,Z.T=l}}Kt=3}}function jT(){if(Kt===4||Kt===3){Kt=0,Oc();var s=Ar,o=Ma,l=Us,c=OT;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Kt=5:(Kt=0,Ma=Ar=null,ZT(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(Sr=null),vs(l),o=o.stateNode,rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(gi,o,void 0,(o.current.flags&128)===128)}catch{}if(c!==null){o=Z.T,y=ce.p,ce.p=2,Z.T=null;try{for(var v=s.onRecoverableError,A=0;A<c.length;A++){var b=c[A];v(b.value,{componentStack:b.stack})}}finally{Z.T=o,ce.p=y}}(Us&3)!==0&&Yd(),os(s),y=s.pendingLanes,(l&261930)!==0&&(y&42)!==0?s===Fm?Au++:(Au=0,Fm=s):Au=0,wu(0)}}function ZT(s,o){(s.pooledCacheLanes&=o)===0&&(o=s.pooledCache,o!=null&&(s.pooledCache=null,su(o)))}function Yd(){return QT(),XT(),jT(),eE()}function eE(){if(Kt!==5)return!1;var s=Ar,o=Lm;Lm=0;var l=vs(Us),c=Z.T,y=ce.p;try{ce.p=32>l?32:l,Z.T=null,l=Om,Om=null;var v=Ar,A=Us;if(Kt=0,Ma=Ar=null,Us=0,(rt&6)!==0)throw Error(i(331));var b=rt;if(rt|=4,VT(v.current),DT(v,v.current,A,l),rt=b,wu(0,!1),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(gi,v)}catch{}return!0}finally{ce.p=y,Z.T=c,ZT(s,o)}}function tE(s,o,l){o=si(l,o),o=ym(s.stateNode,o,2),s=gr(s,o,2),s!==null&&(to(s,2),os(s))}function ut(s,o,l){if(s.tag===3)tE(s,s,l);else for(;o!==null;){if(o.tag===3){tE(o,s,l);break}else if(o.tag===1){var c=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Sr===null||!Sr.has(c))){s=si(l,s),l=nT(2),c=gr(o,l,2),c!==null&&(iT(l,c,o,s),to(c,2),os(c));break}}o=o.return}}function Gm(s,o,l){var c=s.pingCache;if(c===null){c=s.pingCache=new x1;var y=new Set;c.set(o,y)}else y=c.get(o),y===void 0&&(y=new Set,c.set(o,y));y.has(l)||(km=!0,y.add(l),s=k1.bind(null,s,o,l),o.then(s,s))}function k1(s,o,l){var c=s.pingCache;c!==null&&c.delete(o),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,pt===s&&(Ye&l)===l&&(It===4||It===3&&(Ye&62914560)===Ye&&300>Sn()-Gd?(rt&2)===0&&Da(s,0):Vm|=l,Na===Ye&&(Na=0)),os(s)}function nE(s,o){o===0&&(o=zc()),s=go(s,o),s!==null&&(to(s,o),os(s))}function V1(s){var o=s.memoizedState,l=0;o!==null&&(l=o.retryLane),nE(s,l)}function U1(s,o){var l=0;switch(s.tag){case 31:case 13:var c=s.stateNode,y=s.memoizedState;y!==null&&(l=y.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(o),nE(s,l)}function L1(s,o){return Jt(s,o)}var Wd=null,ka=null,Hm=!1,Qd=!1,zm=!1,Cr=0;function os(s){s!==ka&&s.next===null&&(ka===null?Wd=ka=s:ka=ka.next=s),Qd=!0,Hm||(Hm=!0,F1())}function wu(s,o){if(!zm&&Qd){zm=!0;do for(var l=!1,c=Wd;c!==null;){if(s!==0){var y=c.pendingLanes;if(y===0)var v=0;else{var A=c.suspendedLanes,b=c.pingedLanes;v=(1<<31-Rt(42|s)+1)-1,v&=y&~(A&~b),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(l=!0,oE(c,v))}else v=Ye,v=Gi(c,c===pt?v:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(v&3)===0||yi(c,v)||(l=!0,oE(c,v));c=c.next}while(l);zm=!1}}function O1(){iE()}function iE(){Qd=Hm=!1;var s=0;Cr!==0&&W1()&&(s=Cr);for(var o=Sn(),l=null,c=Wd;c!==null;){var y=c.next,v=sE(c,o);v===0?(c.next=null,l===null?Wd=y:l.next=y,y===null&&(ka=l)):(l=c,(s!==0||(v&3)!==0)&&(Qd=!0)),c=y}Kt!==0&&Kt!==5||wu(s),Cr!==0&&(Cr=0)}function sE(s,o){for(var l=s.suspendedLanes,c=s.pingedLanes,y=s.expirationTimes,v=s.pendingLanes&-62914561;0<v;){var A=31-Rt(v),b=1<<A,O=y[A];O===-1?((b&l)===0||(b&c)!==0)&&(y[A]=vp(b,o)):O<=o&&(s.expiredLanes|=b),v&=~b}if(o=pt,l=Ye,l=Gi(s,s===o?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,l===0||s===o&&(lt===2||lt===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&Zs(c),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||yi(s,l)){if(o=l&-l,o===s.callbackPriority)return o;switch(c!==null&&Zs(c),vs(l)){case 2:case 8:l=kl;break;case 32:l=er;break;case 268435456:l=Fc;break;default:l=er}return c=rE.bind(null,s),l=Jt(l,c),s.callbackPriority=o,s.callbackNode=l,o}return c!==null&&c!==null&&Zs(c),s.callbackPriority=2,s.callbackNode=null,2}function rE(s,o){if(Kt!==0&&Kt!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(Yd()&&s.callbackNode!==l)return null;var c=Ye;return c=Gi(s,s===pt?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(BT(s,c,o),sE(s,Sn()),s.callbackNode!=null&&s.callbackNode===l?rE.bind(null,s):null)}function oE(s,o){if(Yd())return null;BT(s,o,!0)}function F1(){X1(function(){(rt&6)!==0?Jt(Pl,O1):iE()})}function $m(){if(Cr===0){var s=va;s===0&&(s=Bi,Bi<<=1,(Bi&261888)===0&&(Bi=256)),Cr=s}return Cr}function aE(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:sa(""+s)}function lE(s,o){var l=o.ownerDocument.createElement("input");return l.name=o.name,l.value=o.value,s.id&&l.setAttribute("form",s.id),o.parentNode.insertBefore(l,o),s=new FormData(s),l.parentNode.removeChild(l),s}function B1(s,o,l,c,y){if(o==="submit"&&l&&l.stateNode===y){var v=aE((y[Xt]||null).action),A=c.submitter;A&&(o=(o=A[Xt]||null)?aE(o.formAction):A.getAttribute("formAction"),o!==null&&(v=o,A=null));var b=new Zi("action","action",null,c,y);s.push({event:b,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Cr!==0){var O=A?lE(y,A):new FormData(y);dm(l,{pending:!0,data:O,method:y.method,action:v},null,O)}}else typeof v=="function"&&(b.preventDefault(),O=A?lE(y,A):new FormData(y),dm(l,{pending:!0,data:O,method:y.method,action:v},v,O))},currentTarget:y}]})}}for(var Jm=0;Jm<Rp.length;Jm++){var Km=Rp[Jm],q1=Km.toLowerCase(),G1=Km[0].toUpperCase()+Km.slice(1);Ci(q1,"on"+G1)}Ci(Fv,"onAnimationEnd"),Ci(Bv,"onAnimationIteration"),Ci(qv,"onAnimationStart"),Ci("dblclick","onDoubleClick"),Ci("focusin","onFocus"),Ci("focusout","onBlur"),Ci(s1,"onTransitionRun"),Ci(r1,"onTransitionStart"),Ci(o1,"onTransitionCancel"),Ci(Gv,"onTransitionEnd"),Wi("onMouseEnter",["mouseout","mouseover"]),Wi("onMouseLeave",["mouseout","mouseover"]),Wi("onPointerEnter",["pointerout","pointerover"]),Wi("onPointerLeave",["pointerout","pointerover"]),Yi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Yi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Yi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Yi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Yi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Yi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),H1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Cu));function uE(s,o){o=(o&4)!==0;for(var l=0;l<s.length;l++){var c=s[l],y=c.event;c=c.listeners;e:{var v=void 0;if(o)for(var A=c.length-1;0<=A;A--){var b=c[A],O=b.instance,Y=b.currentTarget;if(b=b.listener,O!==v&&y.isPropagationStopped())break e;v=b,y.currentTarget=Y;try{v(y)}catch(ne){dd(ne)}y.currentTarget=null,v=O}else for(A=0;A<c.length;A++){if(b=c[A],O=b.instance,Y=b.currentTarget,b=b.listener,O!==v&&y.isPropagationStopped())break e;v=b,y.currentTarget=Y;try{v(y)}catch(ne){dd(ne)}y.currentTarget=null,v=O}}}}function Ke(s,o){var l=o[Zo];l===void 0&&(l=o[Zo]=new Set);var c=s+"__bubble";l.has(c)||(cE(o,s,2,!1),l.add(c))}function Ym(s,o,l){var c=0;o&&(c|=4),cE(l,s,c,o)}var Xd="_reactListening"+Math.random().toString(36).slice(2);function Wm(s){if(!s[Xd]){s[Xd]=!0,Ll.forEach(function(l){l!=="selectionchange"&&(H1.has(l)||Ym(l,!1,s),Ym(l,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[Xd]||(o[Xd]=!0,Ym("selectionchange",!1,o))}}function cE(s,o,l,c){switch(FE(o)){case 2:var y=yM;break;case 8:y=_M;break;default:y=cg}l=y.bind(null,o,l,s),y=void 0,!ao||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(y=!0),c?y!==void 0?s.addEventListener(o,l,{capture:!0,passive:y}):s.addEventListener(o,l,!0):y!==void 0?s.addEventListener(o,l,{passive:y}):s.addEventListener(o,l,!1)}function Qm(s,o,l,c,y){var v=c;if((o&1)===0&&(o&2)===0&&c!==null)e:for(;;){if(c===null)return;var A=c.tag;if(A===3||A===4){var b=c.stateNode.containerInfo;if(b===y)break;if(A===4)for(A=c.return;A!==null;){var O=A.tag;if((O===3||O===4)&&A.stateNode.containerInfo===y)return;A=A.return}for(;b!==null;){if(A=Ji(b),A===null)return;if(O=A.tag,O===5||O===6||O===26||O===27){c=v=A;continue e}b=b.parentNode}}c=c.return}or(function(){var Y=v,ne=ei(l),re=[];e:{var j=Hv.get(s);if(j!==void 0){var te=Zi,ve=s;switch(s){case"keypress":if(uo(l)===0)break e;case"keydown":case"keyup":te=ld;break;case"focusin":ve="focus",te=fo;break;case"focusout":ve="blur",te=fo;break;case"beforeblur":case"afterblur":te=fo;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=Ql;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=Zc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=S;break;case Fv:case Bv:case qv:te=td;break;case Gv:te=R;break;case"scroll":case"scrollend":te=Wl;break;case"wheel":te=ee;break;case"copy":case"cut":case"paste":te=nd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=Ss;break;case"toggle":case"beforetoggle":te=Fe}var Ie=(o&4)!==0,ht=!Ie&&(s==="scroll"||s==="scrollend"),G=Ie?j!==null?j+"Capture":null:j;Ie=[];for(var B=Y,K;B!==null;){var se=B;if(K=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||K===null||G===null||(se=Ei(B,G),se!=null&&Ie.push(Iu(B,se,K))),ht)break;B=B.return}0<Ie.length&&(j=new te(j,ve,null,l,ne),re.push({event:j,listeners:Ie}))}}if((o&7)===0){e:{if(j=s==="mouseover"||s==="pointerover",te=s==="mouseout"||s==="pointerout",j&&l!==Jl&&(ve=l.relatedTarget||l.fromElement)&&(Ji(ve)||ve[zi]))break e;if((te||j)&&(j=ne.window===ne?ne:(j=ne.ownerDocument)?j.defaultView||j.parentWindow:window,te?(ve=l.relatedTarget||l.toElement,te=Y,ve=ve?Ji(ve):null,ve!==null&&(ht=a(ve),Ie=ve.tag,ve!==ht||Ie!==5&&Ie!==27&&Ie!==6)&&(ve=null)):(te=null,ve=Y),te!==ve)){if(Ie=Ql,se="onMouseLeave",G="onMouseEnter",B="mouse",(s==="pointerout"||s==="pointerover")&&(Ie=Ss,se="onPointerLeave",G="onPointerEnter",B="pointer"),ht=te==null?j:Fn(te),K=ve==null?j:Fn(ve),j=new Ie(se,B+"leave",te,l,ne),j.target=ht,j.relatedTarget=K,se=null,Ji(ne)===Y&&(Ie=new Ie(G,B+"enter",ve,l,ne),Ie.target=K,Ie.relatedTarget=ht,se=Ie),ht=se,te&&ve)t:{for(Ie=z1,G=te,B=ve,K=0,se=G;se;se=Ie(se))K++;se=0;for(var Se=B;Se;Se=Ie(Se))se++;for(;0<K-se;)G=Ie(G),K--;for(;0<se-K;)B=Ie(B),se--;for(;K--;){if(G===B||B!==null&&G===B.alternate){Ie=G;break t}G=Ie(G),B=Ie(B)}Ie=null}else Ie=null;te!==null&&dE(re,j,te,Ie,!1),ve!==null&&ht!==null&&dE(re,ht,ve,Ie,!0)}}e:{if(j=Y?Fn(Y):window,te=j.nodeName&&j.nodeName.toLowerCase(),te==="select"||te==="input"&&j.type==="file")var tt=Rv;else if(Iv(j))if(xv)tt=t1;else{tt=ZN;var Te=jN}else te=j.nodeName,!te||te.toLowerCase()!=="input"||j.type!=="checkbox"&&j.type!=="radio"?Y&&ia(Y.elementType)&&(tt=Rv):tt=e1;if(tt&&(tt=tt(s,Y))){bv(re,tt,l,ne);break e}Te&&Te(s,j,Y),s==="focusout"&&Y&&j.type==="number"&&Y.memoizedProps.value!=null&&Hl(j,"number",j.value)}switch(Te=Y?Fn(Y):window,s){case"focusin":(Iv(Te)||Te.contentEditable==="true")&&(da=Te,Cp=Y,tu=null);break;case"focusout":tu=Cp=da=null;break;case"mousedown":Ip=!0;break;case"contextmenu":case"mouseup":case"dragend":Ip=!1,Lv(re,l,ne);break;case"selectionchange":if(i1)break;case"keydown":case"keyup":Lv(re,l,ne)}var qe;if(st)e:{switch(s){case"compositionstart":var We="onCompositionStart";break e;case"compositionend":We="onCompositionEnd";break e;case"compositionupdate":We="onCompositionUpdate";break e}We=void 0}else ca?ho(s,l)&&(We="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(We="onCompositionStart");We&&(ns&&l.locale!=="ko"&&(ca||We!=="onCompositionStart"?We==="onCompositionEnd"&&ca&&(qe=Yl()):(ji=ne,Kl="value"in ji?ji.value:ji.textContent,ca=!0)),Te=jd(Y,We),0<Te.length&&(We=new ts(We,s,null,l,ne),re.push({event:We,listeners:Te}),qe?We.data=qe:(qe=ua(l),qe!==null&&(We.data=qe)))),(qe=ni?YN(s,l):WN(s,l))&&(We=jd(Y,"onBeforeInput"),0<We.length&&(Te=new ts("onBeforeInput","beforeinput",null,l,ne),re.push({event:Te,listeners:We}),Te.data=qe)),B1(re,s,Y,l,ne)}uE(re,o)})}function Iu(s,o,l){return{instance:s,listener:o,currentTarget:l}}function jd(s,o){for(var l=o+"Capture",c=[];s!==null;){var y=s,v=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||v===null||(y=Ei(s,l),y!=null&&c.unshift(Iu(s,y,v)),y=Ei(s,o),y!=null&&c.push(Iu(s,y,v))),s.tag===3)return c;s=s.return}return[]}function z1(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function dE(s,o,l,c,y){for(var v=o._reactName,A=[];l!==null&&l!==c;){var b=l,O=b.alternate,Y=b.stateNode;if(b=b.tag,O!==null&&O===c)break;b!==5&&b!==26&&b!==27||Y===null||(O=Y,y?(Y=Ei(l,v),Y!=null&&A.unshift(Iu(l,Y,O))):y||(Y=Ei(l,v),Y!=null&&A.push(Iu(l,Y,O)))),l=l.return}A.length!==0&&s.push({event:o,listeners:A})}var $1=/\r\n?/g,J1=/\u0000|\uFFFD/g;function fE(s){return(typeof s=="string"?s:""+s).replace($1,`
`).replace(J1,"")}function hE(s,o){return o=fE(o),fE(s)===o}function ft(s,o,l,c,y,v){switch(l){case"children":typeof c=="string"?o==="body"||o==="textarea"&&c===""||xn(s,c):(typeof c=="number"||typeof c=="bigint")&&o!=="body"&&xn(s,""+c);break;case"className":Bn(s,"class",c);break;case"tabIndex":Bn(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Bn(s,l,c);break;case"style":$l(s,c,v);break;case"data":if(o!=="object"){Bn(s,"data",c);break}case"src":case"href":if(c===""&&(o!=="a"||l!=="href")){s.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=sa(""+c),s.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(l==="formAction"?(o!=="input"&&ft(s,o,"name",y.name,y,null),ft(s,o,"formEncType",y.formEncType,y,null),ft(s,o,"formMethod",y.formMethod,y,null),ft(s,o,"formTarget",y.formTarget,y,null)):(ft(s,o,"encType",y.encType,y,null),ft(s,o,"method",y.method,y,null),ft(s,o,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=sa(""+c),s.setAttribute(l,c);break;case"onClick":c!=null&&(s.onclick=Ti);break;case"onScroll":c!=null&&Ke("scroll",s);break;case"onScrollEnd":c!=null&&Ke("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}l=sa(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""+c):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":c===!0?s.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,c):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(l,c):s.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(l):s.setAttribute(l,c);break;case"popover":Ke("beforetoggle",s),Ke("toggle",s),ta(s,"popover",c);break;case"xlinkActuate":Lt(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Lt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Lt(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Lt(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Lt(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Lt(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Lt(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Lt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Lt(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":ta(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=jc.get(l)||l,ta(s,l,c))}}function Xm(s,o,l,c,y,v){switch(l){case"style":$l(s,c,v);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"children":typeof c=="string"?xn(s,c):(typeof c=="number"||typeof c=="bigint")&&xn(s,""+c);break;case"onScroll":c!=null&&Ke("scroll",s);break;case"onScrollEnd":c!=null&&Ke("scrollend",s);break;case"onClick":c!=null&&(s.onclick=Ti);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ol.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(y=l.endsWith("Capture"),o=l.slice(2,y?l.length-7:void 0),v=s[Xt]||null,v=v!=null?v[l]:null,typeof v=="function"&&s.removeEventListener(o,v,y),typeof c=="function")){typeof v!="function"&&v!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(o,c,y);break e}l in s?s[l]=c:c===!0?s.setAttribute(l,""):ta(s,l,c)}}}function cn(s,o,l){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ke("error",s),Ke("load",s);var c=!1,y=!1,v;for(v in l)if(l.hasOwnProperty(v)){var A=l[v];if(A!=null)switch(v){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:ft(s,o,v,A,l,null)}}y&&ft(s,o,"srcSet",l.srcSet,l,null),c&&ft(s,o,"src",l.src,l,null);return;case"input":Ke("invalid",s);var b=v=A=y=null,O=null,Y=null;for(c in l)if(l.hasOwnProperty(c)){var ne=l[c];if(ne!=null)switch(c){case"name":y=ne;break;case"type":A=ne;break;case"checked":O=ne;break;case"defaultChecked":Y=ne;break;case"value":v=ne;break;case"defaultValue":b=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(137,o));break;default:ft(s,o,c,ne,l,null)}}Wc(s,v,b,O,Y,A,y,!1);return;case"select":Ke("invalid",s),c=A=v=null;for(y in l)if(l.hasOwnProperty(y)&&(b=l[y],b!=null))switch(y){case"value":v=b;break;case"defaultValue":A=b;break;case"multiple":c=b;default:ft(s,o,y,b,l,null)}o=v,l=A,s.multiple=!!c,o!=null?nr(s,!!c,o,!1):l!=null&&nr(s,!!c,l,!0);return;case"textarea":Ke("invalid",s),v=y=c=null;for(A in l)if(l.hasOwnProperty(A)&&(b=l[A],b!=null))switch(A){case"value":c=b;break;case"defaultValue":y=b;break;case"children":v=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(i(91));break;default:ft(s,o,A,b,l,null)}ir(s,c,y,v);return;case"option":for(O in l)if(l.hasOwnProperty(O)&&(c=l[O],c!=null))switch(O){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:ft(s,o,O,c,l,null)}return;case"dialog":Ke("beforetoggle",s),Ke("toggle",s),Ke("cancel",s),Ke("close",s);break;case"iframe":case"object":Ke("load",s);break;case"video":case"audio":for(c=0;c<Cu.length;c++)Ke(Cu[c],s);break;case"image":Ke("error",s),Ke("load",s);break;case"details":Ke("toggle",s);break;case"embed":case"source":case"link":Ke("error",s),Ke("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in l)if(l.hasOwnProperty(Y)&&(c=l[Y],c!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:ft(s,o,Y,c,l,null)}return;default:if(ia(o)){for(ne in l)l.hasOwnProperty(ne)&&(c=l[ne],c!==void 0&&Xm(s,o,ne,c,l,void 0));return}}for(b in l)l.hasOwnProperty(b)&&(c=l[b],c!=null&&ft(s,o,b,c,l,null))}function K1(s,o,l,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,v=null,A=null,b=null,O=null,Y=null,ne=null;for(te in l){var re=l[te];if(l.hasOwnProperty(te)&&re!=null)switch(te){case"checked":break;case"value":break;case"defaultValue":O=re;default:c.hasOwnProperty(te)||ft(s,o,te,null,c,re)}}for(var j in c){var te=c[j];if(re=l[j],c.hasOwnProperty(j)&&(te!=null||re!=null))switch(j){case"type":v=te;break;case"name":y=te;break;case"checked":Y=te;break;case"defaultChecked":ne=te;break;case"value":A=te;break;case"defaultValue":b=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,o));break;default:te!==re&&ft(s,o,j,te,c,re)}}na(s,A,b,O,Y,ne,v,y);return;case"select":te=A=b=j=null;for(v in l)if(O=l[v],l.hasOwnProperty(v)&&O!=null)switch(v){case"value":break;case"multiple":te=O;default:c.hasOwnProperty(v)||ft(s,o,v,null,c,O)}for(y in c)if(v=c[y],O=l[y],c.hasOwnProperty(y)&&(v!=null||O!=null))switch(y){case"value":j=v;break;case"defaultValue":b=v;break;case"multiple":A=v;default:v!==O&&ft(s,o,y,v,c,O)}o=b,l=A,c=te,j!=null?nr(s,!!l,j,!1):!!c!=!!l&&(o!=null?nr(s,!!l,o,!0):nr(s,!!l,l?[]:"",!1));return;case"textarea":te=j=null;for(b in l)if(y=l[b],l.hasOwnProperty(b)&&y!=null&&!c.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:ft(s,o,b,null,c,y)}for(A in c)if(y=c[A],v=l[A],c.hasOwnProperty(A)&&(y!=null||v!=null))switch(A){case"value":j=y;break;case"defaultValue":te=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==v&&ft(s,o,A,y,c,v)}Qc(s,j,te);return;case"option":for(var ve in l)if(j=l[ve],l.hasOwnProperty(ve)&&j!=null&&!c.hasOwnProperty(ve))switch(ve){case"selected":s.selected=!1;break;default:ft(s,o,ve,null,c,j)}for(O in c)if(j=c[O],te=l[O],c.hasOwnProperty(O)&&j!==te&&(j!=null||te!=null))switch(O){case"selected":s.selected=j&&typeof j!="function"&&typeof j!="symbol";break;default:ft(s,o,O,j,c,te)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ie in l)j=l[Ie],l.hasOwnProperty(Ie)&&j!=null&&!c.hasOwnProperty(Ie)&&ft(s,o,Ie,null,c,j);for(Y in c)if(j=c[Y],te=l[Y],c.hasOwnProperty(Y)&&j!==te&&(j!=null||te!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(i(137,o));break;default:ft(s,o,Y,j,c,te)}return;default:if(ia(o)){for(var ht in l)j=l[ht],l.hasOwnProperty(ht)&&j!==void 0&&!c.hasOwnProperty(ht)&&Xm(s,o,ht,void 0,c,j);for(ne in c)j=c[ne],te=l[ne],!c.hasOwnProperty(ne)||j===te||j===void 0&&te===void 0||Xm(s,o,ne,j,c,te);return}}for(var G in l)j=l[G],l.hasOwnProperty(G)&&j!=null&&!c.hasOwnProperty(G)&&ft(s,o,G,null,c,j);for(re in c)j=c[re],te=l[re],!c.hasOwnProperty(re)||j===te||j==null&&te==null||ft(s,o,re,j,c,te)}function pE(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Y1(){if(typeof performance.getEntriesByType=="function"){for(var s=0,o=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var y=l[c],v=y.transferSize,A=y.initiatorType,b=y.duration;if(v&&b&&pE(A)){for(A=0,b=y.responseEnd,c+=1;c<l.length;c++){var O=l[c],Y=O.startTime;if(Y>b)break;var ne=O.transferSize,re=O.initiatorType;ne&&pE(re)&&(O=O.responseEnd,A+=ne*(O<b?1:(b-Y)/(O-Y)))}if(--c,o+=8*(v+A)/(y.duration/1e3),s++,10<s)break}}if(0<s)return o/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var jm=null,Zm=null;function Zd(s){return s.nodeType===9?s:s.ownerDocument}function mE(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function gE(s,o){if(s===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&o==="foreignObject"?0:s}function eg(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var tg=null;function W1(){var s=window.event;return s&&s.type==="popstate"?s===tg?!1:(tg=s,!0):(tg=null,!1)}var yE=typeof setTimeout=="function"?setTimeout:void 0,Q1=typeof clearTimeout=="function"?clearTimeout:void 0,_E=typeof Promise=="function"?Promise:void 0,X1=typeof queueMicrotask=="function"?queueMicrotask:typeof _E<"u"?function(s){return _E.resolve(null).then(s).catch(j1)}:yE;function j1(s){setTimeout(function(){throw s})}function Ir(s){return s==="head"}function vE(s,o){var l=o,c=0;do{var y=l.nextSibling;if(s.removeChild(l),y&&y.nodeType===8)if(l=y.data,l==="/$"||l==="/&"){if(c===0){s.removeChild(y),Oa(o);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")bu(s.ownerDocument.documentElement);else if(l==="head"){l=s.ownerDocument.head,bu(l);for(var v=l.firstChild;v;){var A=v.nextSibling,b=v.nodeName;v[$i]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&v.rel.toLowerCase()==="stylesheet"||l.removeChild(v),v=A}}else l==="body"&&bu(s.ownerDocument.body);l=y}while(l);Oa(o)}function TE(s,o){var l=s;s=0;do{var c=l.nextSibling;if(l.nodeType===1?o?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(o?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(s===0)break;s--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||s++;l=c}while(l)}function ng(s){var o=s.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var l=o;switch(o=o.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":ng(l),ea(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function Z1(s,o,l,c){for(;s.nodeType===1;){var y=l;if(s.nodeName.toLowerCase()!==o.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[$i])switch(o){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(v=s.getAttribute("rel"),v==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(v!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(v=s.getAttribute("src"),(v!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&v&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(o==="input"&&s.type==="hidden"){var v=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===v)return s}else return s;if(s=ui(s.nextSibling),s===null)break}return null}function eM(s,o,l){if(o==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=ui(s.nextSibling),s===null))return null;return s}function EE(s,o){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!o||(s=ui(s.nextSibling),s===null))return null;return s}function ig(s){return s.data==="$?"||s.data==="$~"}function sg(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function tM(s,o){var l=s.ownerDocument;if(s.data==="$~")s._reactRetry=o;else if(s.data!=="$?"||l.readyState!=="loading")o();else{var c=function(){o(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function ui(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return s}var rg=null;function SE(s){s=s.nextSibling;for(var o=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"||l==="/&"){if(o===0)return ui(s.nextSibling);o--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||o++}s=s.nextSibling}return null}function AE(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(o===0)return s;o--}else l!=="/$"&&l!=="/&"||o++}s=s.previousSibling}return null}function wE(s,o,l){switch(o=Zd(l),s){case"html":if(s=o.documentElement,!s)throw Error(i(452));return s;case"head":if(s=o.head,!s)throw Error(i(453));return s;case"body":if(s=o.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function bu(s){for(var o=s.attributes;o.length;)s.removeAttributeNode(o[0]);ea(s)}var ci=new Map,CE=new Set;function ef(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Ls=ce.d;ce.d={f:nM,r:iM,D:sM,C:rM,L:oM,m:aM,X:uM,S:lM,M:cM};function nM(){var s=Ls.f(),o=$d();return s||o}function iM(s){var o=Zn(s);o!==null&&o.tag===5&&o.type==="form"?G0(o):Ls.r(s)}var Va=typeof document>"u"?null:document;function IE(s,o,l){var c=Va;if(c&&typeof o=="string"&&o){var y=Rn(o);y='link[rel="'+s+'"][href="'+y+'"]',typeof l=="string"&&(y+='[crossorigin="'+l+'"]'),CE.has(y)||(CE.add(y),s={rel:s,crossOrigin:l,href:o},c.querySelector(y)===null&&(o=c.createElement("link"),cn(o,"link",s),Ut(o),c.head.appendChild(o)))}}function sM(s){Ls.D(s),IE("dns-prefetch",s,null)}function rM(s,o){Ls.C(s,o),IE("preconnect",s,o)}function oM(s,o,l){Ls.L(s,o,l);var c=Va;if(c&&s&&o){var y='link[rel="preload"][as="'+Rn(o)+'"]';o==="image"&&l&&l.imageSrcSet?(y+='[imagesrcset="'+Rn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(y+='[imagesizes="'+Rn(l.imageSizes)+'"]')):y+='[href="'+Rn(s)+'"]';var v=y;switch(o){case"style":v=Ua(s);break;case"script":v=La(s)}ci.has(v)||(s=T({rel:"preload",href:o==="image"&&l&&l.imageSrcSet?void 0:s,as:o},l),ci.set(v,s),c.querySelector(y)!==null||o==="style"&&c.querySelector(Ru(v))||o==="script"&&c.querySelector(xu(v))||(o=c.createElement("link"),cn(o,"link",s),Ut(o),c.head.appendChild(o)))}}function aM(s,o){Ls.m(s,o);var l=Va;if(l&&s){var c=o&&typeof o.as=="string"?o.as:"script",y='link[rel="modulepreload"][as="'+Rn(c)+'"][href="'+Rn(s)+'"]',v=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=La(s)}if(!ci.has(v)&&(s=T({rel:"modulepreload",href:s},o),ci.set(v,s),l.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(xu(v)))return}c=l.createElement("link"),cn(c,"link",s),Ut(c),l.head.appendChild(c)}}}function lM(s,o,l){Ls.S(s,o,l);var c=Va;if(c&&s){var y=Ki(c).hoistableStyles,v=Ua(s);o=o||"default";var A=y.get(v);if(!A){var b={loading:0,preload:null};if(A=c.querySelector(Ru(v)))b.loading=5;else{s=T({rel:"stylesheet",href:s,"data-precedence":o},l),(l=ci.get(v))&&og(s,l);var O=A=c.createElement("link");Ut(O),cn(O,"link",s),O._p=new Promise(function(Y,ne){O.onload=Y,O.onerror=ne}),O.addEventListener("load",function(){b.loading|=1}),O.addEventListener("error",function(){b.loading|=2}),b.loading|=4,tf(A,o,c)}A={type:"stylesheet",instance:A,count:1,state:b},y.set(v,A)}}}function uM(s,o){Ls.X(s,o);var l=Va;if(l&&s){var c=Ki(l).hoistableScripts,y=La(s),v=c.get(y);v||(v=l.querySelector(xu(y)),v||(s=T({src:s,async:!0},o),(o=ci.get(y))&&ag(s,o),v=l.createElement("script"),Ut(v),cn(v,"link",s),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function cM(s,o){Ls.M(s,o);var l=Va;if(l&&s){var c=Ki(l).hoistableScripts,y=La(s),v=c.get(y);v||(v=l.querySelector(xu(y)),v||(s=T({src:s,async:!0,type:"module"},o),(o=ci.get(y))&&ag(s,o),v=l.createElement("script"),Ut(v),cn(v,"link",s),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function bE(s,o,l,c){var y=(y=De.current)?ef(y):null;if(!y)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(o=Ua(l.href),l=Ki(y).hoistableStyles,c=l.get(o),c||(c={type:"style",instance:null,count:0,state:null},l.set(o,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=Ua(l.href);var v=Ki(y).hoistableStyles,A=v.get(s);if(A||(y=y.ownerDocument||y,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(s,A),(v=y.querySelector(Ru(s)))&&!v._p&&(A.instance=v,A.state.loading=5),ci.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},ci.set(s,l),v||dM(y,s,l,A.state))),o&&c===null)throw Error(i(528,""));return A}if(o&&c!==null)throw Error(i(529,""));return null;case"script":return o=l.async,l=l.src,typeof l=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=La(l),l=Ki(y).hoistableScripts,c=l.get(o),c||(c={type:"script",instance:null,count:0,state:null},l.set(o,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Ua(s){return'href="'+Rn(s)+'"'}function Ru(s){return'link[rel="stylesheet"]['+s+"]"}function RE(s){return T({},s,{"data-precedence":s.precedence,precedence:null})}function dM(s,o,l,c){s.querySelector('link[rel="preload"][as="style"]['+o+"]")?c.loading=1:(o=s.createElement("link"),c.preload=o,o.addEventListener("load",function(){return c.loading|=1}),o.addEventListener("error",function(){return c.loading|=2}),cn(o,"link",l),Ut(o),s.head.appendChild(o))}function La(s){return'[src="'+Rn(s)+'"]'}function xu(s){return"script[async]"+s}function xE(s,o,l){if(o.count++,o.instance===null)switch(o.type){case"style":var c=s.querySelector('style[data-href~="'+Rn(l.href)+'"]');if(c)return o.instance=c,Ut(c),c;var y=T({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),Ut(c),cn(c,"style",y),tf(c,l.precedence,s),o.instance=c;case"stylesheet":y=Ua(l.href);var v=s.querySelector(Ru(y));if(v)return o.state.loading|=4,o.instance=v,Ut(v),v;c=RE(l),(y=ci.get(y))&&og(c,y),v=(s.ownerDocument||s).createElement("link"),Ut(v);var A=v;return A._p=new Promise(function(b,O){A.onload=b,A.onerror=O}),cn(v,"link",c),o.state.loading|=4,tf(v,l.precedence,s),o.instance=v;case"script":return v=La(l.src),(y=s.querySelector(xu(v)))?(o.instance=y,Ut(y),y):(c=l,(y=ci.get(v))&&(c=T({},l),ag(c,y)),s=s.ownerDocument||s,y=s.createElement("script"),Ut(y),cn(y,"link",c),s.head.appendChild(y),o.instance=y);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(c=o.instance,o.state.loading|=4,tf(c,l.precedence,s));return o.instance}function tf(s,o,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,v=y,A=0;A<c.length;A++){var b=c[A];if(b.dataset.precedence===o)v=b;else if(v!==y)break}v?v.parentNode.insertBefore(s,v.nextSibling):(o=l.nodeType===9?l.head:l,o.insertBefore(s,o.firstChild))}function og(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.title==null&&(s.title=o.title)}function ag(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.integrity==null&&(s.integrity=o.integrity)}var nf=null;function NE(s,o,l){if(nf===null){var c=new Map,y=nf=new Map;y.set(l,c)}else y=nf,c=y.get(l),c||(c=new Map,y.set(l,c));if(c.has(s))return c;for(c.set(s,null),l=l.getElementsByTagName(s),y=0;y<l.length;y++){var v=l[y];if(!(v[$i]||v[Vt]||s==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var A=v.getAttribute(o)||"";A=s+A;var b=c.get(A);b?b.push(v):c.set(A,[v])}}return c}function ME(s,o,l){s=s.ownerDocument||s,s.head.insertBefore(l,o==="title"?s.querySelector("head > title"):null)}function fM(s,o,l){if(l===1||o.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return s=o.disabled,typeof o.precedence=="string"&&s==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function DE(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function hM(s,o,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var y=Ua(c.href),v=o.querySelector(Ru(y));if(v){o=v._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(s.count++,s=sf.bind(s),o.then(s,s)),l.state.loading|=4,l.instance=v,Ut(v);return}v=o.ownerDocument||o,c=RE(c),(y=ci.get(y))&&og(c,y),v=v.createElement("link"),Ut(v);var A=v;A._p=new Promise(function(b,O){A.onload=b,A.onerror=O}),cn(v,"link",c),l.instance=v}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(l,o),(o=l.state.preload)&&(l.state.loading&3)===0&&(s.count++,l=sf.bind(s),o.addEventListener("load",l),o.addEventListener("error",l))}}var lg=0;function pM(s,o){return s.stylesheets&&s.count===0&&of(s,s.stylesheets),0<s.count||0<s.imgCount?function(l){var c=setTimeout(function(){if(s.stylesheets&&of(s,s.stylesheets),s.unsuspend){var v=s.unsuspend;s.unsuspend=null,v()}},6e4+o);0<s.imgBytes&&lg===0&&(lg=62500*Y1());var y=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&of(s,s.stylesheets),s.unsuspend)){var v=s.unsuspend;s.unsuspend=null,v()}},(s.imgBytes>lg?50:800)+o);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function sf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)of(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var rf=null;function of(s,o){s.stylesheets=null,s.unsuspend!==null&&(s.count++,rf=new Map,o.forEach(mM,s),rf=null,sf.call(s))}function mM(s,o){if(!(o.state.loading&4)){var l=rf.get(s);if(l)var c=l.get(null);else{l=new Map,rf.set(s,l);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<y.length;v++){var A=y[v];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(l.set(A.dataset.precedence,A),c=A)}c&&l.set(null,c)}y=o.instance,A=y.getAttribute("data-precedence"),v=l.get(A)||c,v===c&&l.set(null,y),l.set(A,y),this.count++,c=sf.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),v?v.parentNode.insertBefore(y,v.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),o.state.loading|=4}}var Nu={$$typeof:z,Provider:null,Consumer:null,_currentValue:fe,_currentValue2:fe,_threadCount:0};function gM(s,o,l,c,y,v,A,b,O){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Hi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hi(0),this.hiddenUpdates=Hi(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=v,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function PE(s,o,l,c,y,v,A,b,O,Y,ne,re){return s=new gM(s,o,l,A,O,Y,ne,re,b),o=1,v===!0&&(o|=24),v=Gn(3,null,null,o),s.current=v,v.stateNode=s,o=qp(),o.refCount++,s.pooledCache=o,o.refCount++,v.memoizedState={element:c,isDehydrated:l,cache:o},$p(v),s}function kE(s){return s?(s=pa,s):pa}function VE(s,o,l,c,y,v){y=kE(y),c.context===null?c.context=y:c.pendingContext=y,c=mr(o),c.payload={element:l},v=v===void 0?null:v,v!==null&&(c.callback=v),l=gr(s,c,o),l!==null&&(kn(l,s,o),lu(l,s,o))}function UE(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<o?l:o}}function ug(s,o){UE(s,o),(s=s.alternate)&&UE(s,o)}function LE(s){if(s.tag===13||s.tag===31){var o=go(s,67108864);o!==null&&kn(o,s,67108864),ug(s,67108864)}}function OE(s){if(s.tag===13||s.tag===31){var o=Kn();o=io(o);var l=go(s,o);l!==null&&kn(l,s,o),ug(s,o)}}var af=!0;function yM(s,o,l,c){var y=Z.T;Z.T=null;var v=ce.p;try{ce.p=2,cg(s,o,l,c)}finally{ce.p=v,Z.T=y}}function _M(s,o,l,c){var y=Z.T;Z.T=null;var v=ce.p;try{ce.p=8,cg(s,o,l,c)}finally{ce.p=v,Z.T=y}}function cg(s,o,l,c){if(af){var y=dg(c);if(y===null)Qm(s,o,c,lf,l),BE(s,c);else if(TM(y,s,o,l,c))c.stopPropagation();else if(BE(s,c),o&4&&-1<vM.indexOf(s)){for(;y!==null;){var v=Zn(y);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var A=qi(v.pendingLanes);if(A!==0){var b=v;for(b.pendingLanes|=2,b.entangledLanes|=2;A;){var O=1<<31-Rt(A);b.entanglements[1]|=O,A&=~O}os(v),(rt&6)===0&&(Hd=Sn()+500,wu(0))}}break;case 31:case 13:b=go(v,2),b!==null&&kn(b,v,2),$d(),ug(v,2)}if(v=dg(c),v===null&&Qm(s,o,c,lf,l),v===y)break;y=v}y!==null&&c.stopPropagation()}else Qm(s,o,c,null,l)}}function dg(s){return s=ei(s),fg(s)}var lf=null;function fg(s){if(lf=null,s=Ji(s),s!==null){var o=a(s);if(o===null)s=null;else{var l=o.tag;if(l===13){if(s=u(o),s!==null)return s;s=null}else if(l===31){if(s=d(o),s!==null)return s;s=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null)}}return lf=s,null}function FE(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Zr()){case Pl:return 2;case kl:return 8;case er:case _p:return 32;case Fc:return 268435456;default:return 32}default:return 32}}var hg=!1,br=null,Rr=null,xr=null,Mu=new Map,Du=new Map,Nr=[],vM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function BE(s,o){switch(s){case"focusin":case"focusout":br=null;break;case"dragenter":case"dragleave":Rr=null;break;case"mouseover":case"mouseout":xr=null;break;case"pointerover":case"pointerout":Mu.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Du.delete(o.pointerId)}}function Pu(s,o,l,c,y,v){return s===null||s.nativeEvent!==v?(s={blockedOn:o,domEventName:l,eventSystemFlags:c,nativeEvent:v,targetContainers:[y]},o!==null&&(o=Zn(o),o!==null&&LE(o)),s):(s.eventSystemFlags|=c,o=s.targetContainers,y!==null&&o.indexOf(y)===-1&&o.push(y),s)}function TM(s,o,l,c,y){switch(o){case"focusin":return br=Pu(br,s,o,l,c,y),!0;case"dragenter":return Rr=Pu(Rr,s,o,l,c,y),!0;case"mouseover":return xr=Pu(xr,s,o,l,c,y),!0;case"pointerover":var v=y.pointerId;return Mu.set(v,Pu(Mu.get(v)||null,s,o,l,c,y)),!0;case"gotpointercapture":return v=y.pointerId,Du.set(v,Pu(Du.get(v)||null,s,o,l,c,y)),!0}return!1}function qE(s){var o=Ji(s.target);if(o!==null){var l=a(o);if(l!==null){if(o=l.tag,o===13){if(o=u(l),o!==null){s.blockedOn=o,_i(s.priority,function(){OE(l)});return}}else if(o===31){if(o=d(l),o!==null){s.blockedOn=o,_i(s.priority,function(){OE(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function uf(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var l=dg(s.nativeEvent);if(l===null){l=s.nativeEvent;var c=new l.constructor(l.type,l);Jl=c,l.target.dispatchEvent(c),Jl=null}else return o=Zn(l),o!==null&&LE(o),s.blockedOn=l,!1;o.shift()}return!0}function GE(s,o,l){uf(s)&&l.delete(o)}function EM(){hg=!1,br!==null&&uf(br)&&(br=null),Rr!==null&&uf(Rr)&&(Rr=null),xr!==null&&uf(xr)&&(xr=null),Mu.forEach(GE),Du.forEach(GE)}function cf(s,o){s.blockedOn===o&&(s.blockedOn=null,hg||(hg=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,EM)))}var df=null;function HE(s){df!==s&&(df=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){df===s&&(df=null);for(var o=0;o<s.length;o+=3){var l=s[o],c=s[o+1],y=s[o+2];if(typeof c!="function"){if(fg(c||l)===null)continue;break}var v=Zn(l);v!==null&&(s.splice(o,3),o-=3,dm(v,{pending:!0,data:y,method:l.method,action:c},c,y))}}))}function Oa(s){function o(O){return cf(O,s)}br!==null&&cf(br,s),Rr!==null&&cf(Rr,s),xr!==null&&cf(xr,s),Mu.forEach(o),Du.forEach(o);for(var l=0;l<Nr.length;l++){var c=Nr[l];c.blockedOn===s&&(c.blockedOn=null)}for(;0<Nr.length&&(l=Nr[0],l.blockedOn===null);)qE(l),l.blockedOn===null&&Nr.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var y=l[c],v=l[c+1],A=y[Xt]||null;if(typeof v=="function")A||HE(l);else if(A){var b=null;if(v&&v.hasAttribute("formAction")){if(y=v,A=v[Xt]||null)b=A.formAction;else if(fg(y)!==null)continue}else b=A.action;typeof b=="function"?l[c+1]=b:(l.splice(c,3),c-=3),HE(l)}}}function zE(){function s(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(A){return y=A})},focusReset:"manual",scroll:"manual"})}function o(){y!==null&&(y(),y=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),y!==null&&(y(),y=null)}}}function pg(s){this._internalRoot=s}ff.prototype.render=pg.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(i(409));var l=o.current,c=Kn();VE(l,c,s,o,null,null)},ff.prototype.unmount=pg.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;VE(s.current,2,null,s,null,null),$d(),o[zi]=null}};function ff(s){this._internalRoot=s}ff.prototype.unstable_scheduleHydration=function(s){if(s){var o=$c();s={blockedOn:null,target:s,priority:o};for(var l=0;l<Nr.length&&o!==0&&o<Nr[l].priority;l++);Nr.splice(l,0,s),l===0&&qE(s)}};var $E=e.version;if($E!=="19.2.4")throw Error(i(527,$E,"19.2.4"));ce.findDOMNode=function(s){var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=h(o),s=s!==null?_(s):null,s=s===null?null:s.stateNode,s};var SM={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hf.isDisabled&&hf.supportsFiber)try{gi=hf.inject(SM),rn=hf}catch{}}return Vu.createRoot=function(s,o){if(!r(s))throw Error(i(299));var l=!1,c="",y=j0,v=Z0,A=eT;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(c=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError)),o=PE(s,1,!1,null,null,l,c,null,y,v,A,zE),s[zi]=o.current,Wm(s),new pg(o)},Vu.hydrateRoot=function(s,o,l){if(!r(s))throw Error(i(299));var c=!1,y="",v=j0,A=Z0,b=eT,O=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(v=l.onUncaughtError),l.onCaughtError!==void 0&&(A=l.onCaughtError),l.onRecoverableError!==void 0&&(b=l.onRecoverableError),l.formState!==void 0&&(O=l.formState)),o=PE(s,1,!0,o,l??null,c,y,O,v,A,b,zE),o.context=kE(null),l=o.current,c=Kn(),c=io(c),y=mr(c),y.callback=null,gr(l,y,c),l=c,o.current.lanes=l,to(o,l),os(o),s[zi]=o.current,Wm(s),new ff(o)},Vu.version="19.2.4",Vu}var tS;function PM(){if(tS)return yg.exports;tS=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),yg.exports=DM(),yg.exports}var kM=PM();const VM=jy(kM);var St=(n=>(n.DASHBOARD="DASHBOARD",n.DIAGNOSTIC="DIAGNOSTIC",n.ADVISOR="ADVISOR",n.RAJIV_WISDOM="RAJIV_WISDOM",n.HISTORY="HISTORY",n.PROFILE="PROFILE",n.LIVE_VOICE="LIVE_VOICE",n))(St||{}),Ln=(n=>(n.GEMINI="GEMINI",n.OPENAI="OPENAI",n))(Ln||{});const gs={hi:"Hindi - ",mr:"Marathi - ",pa:"Punjabi - ",gu:"Gujarati - ",ta:"Tamil - ",te:"Telugu - ",kn:"Kannada - ",bn:"Bengali - ",ml:"Malayalam - ",or:"Odia - ",en:"English"},UM=({currentView:n,setView:e,userProfile:t,children:i})=>{const r=[{id:St.DASHBOARD,label:"Dashboard",icon:""},{id:St.DIAGNOSTIC,label:"AI Diagnostic",icon:""},{id:St.ADVISOR,label:"Smart Advisor",icon:""},{id:St.LIVE_VOICE,label:"Kisan Mitra AI",icon:""},{id:St.HISTORY,label:"My History",icon:""},{id:St.RAJIV_WISDOM,label:"Natural Wisdom",icon:""}];return I.jsxs("div",{className:"min-h-screen flex flex-col md:flex-row bg-stone-50",children:[I.jsxs("header",{className:"md:hidden bg-green-700 text-white p-4 flex justify-between items-center sticky top-0 z-50 shadow-md",children:[I.jsxs("h1",{className:"font-black text-xl tracking-tight",children:["Kisan ",I.jsx("span",{className:"text-lime-400",children:"Mitra"})]}),I.jsxs("div",{className:"flex items-center gap-3",children:[t&&I.jsx("span",{className:"text-[10px] font-black opacity-80 uppercase tracking-widest",children:t.name.split(" ")[0]}),I.jsx("button",{onClick:()=>e(St.PROFILE),className:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center font-bold",children:""})]})]}),I.jsxs("nav",{className:"w-full md:w-72 bg-green-950 text-white flex-shrink-0 flex md:flex-col sticky top-0 h-auto md:h-screen overflow-x-auto md:overflow-y-auto z-40 scrollbar-hide border-r border-green-900 shadow-2xl",children:[I.jsxs("div",{className:"hidden md:flex p-8 border-b border-green-900 items-center justify-between",children:[I.jsxs("h1",{className:"text-2xl font-black tracking-tighter",children:["Kisan ",I.jsx("span",{className:"text-lime-400",children:"Mitra AI"})]}),I.jsx("div",{className:"w-3 h-3 rounded-full bg-lime-400 shadow-[0_0_15px_rgba(163,230,53,0.5)]"})]}),I.jsx("div",{className:"flex flex-row md:flex-col p-3 md:p-6 gap-2 w-full",children:r.map(a=>I.jsxs("button",{onClick:()=>e(a.id),className:`flex items-center gap-4 px-5 py-4 rounded-2xl transition-all whitespace-nowrap group ${n===a.id?"bg-lime-500 text-green-950 font-black shadow-xl ring-4 ring-lime-500/20":"hover:bg-green-900/50 text-stone-300"}`,children:[I.jsx("span",{className:"text-2xl group-hover:scale-110 transition-transform",children:a.icon}),I.jsx("span",{className:"text-sm font-bold uppercase tracking-widest",children:a.label})]},a.id))}),I.jsxs("div",{className:"mt-auto p-6 hidden md:block border-t border-green-900",children:[t&&I.jsxs("button",{onClick:()=>e(St.PROFILE),className:"w-full flex items-center gap-4 p-4 bg-green-900/40 rounded-3xl hover:bg-green-900 transition-all text-left border border-white/5 mb-4",children:[I.jsx("div",{className:"w-12 h-12 bg-lime-400 rounded-2xl flex items-center justify-center text-2xl text-green-950 font-black shadow-inner",children:t.name.charAt(0)}),I.jsxs("div",{className:"overflow-hidden",children:[I.jsx("p",{className:"font-black text-sm truncate",children:t.name}),I.jsxs("p",{className:"text-[10px] text-lime-400 font-bold uppercase tracking-widest opacity-70",children:["Pro Account  ",t.farmSize," Ac"]})]})]}),I.jsxs("div",{className:"text-center",children:[I.jsx("p",{className:"text-[10px] font-black text-green-600 uppercase tracking-[0.3em] mb-1",children:"Developed By"}),I.jsx("p",{className:"text-sm font-black text-lime-400",children:"Onkar Mahamuni"}),I.jsx("p",{className:"text-[8px] text-white/30 mt-2 uppercase tracking-widest",children:" 2025 All Rights Reserved"})]})]})]}),I.jsxs("main",{className:"flex-1 p-4 md:p-10 overflow-y-auto flex flex-col",children:[I.jsx("div",{className:"max-w-6xl mx-auto flex-1 w-full",children:i}),I.jsx("footer",{className:"mt-12 py-6 border-t border-stone-200 text-center",children:I.jsxs("p",{className:"text-xs font-bold text-stone-400 uppercase tracking-widest",children:["Crafted with Precision by ",I.jsx("span",{className:"text-green-700",children:"Onkar Mahamuni"})]})})]})]})};var Uu={exports:{}},Eg={},Sg,nS;function LM(){if(nS)return Sg;nS=1;function n(e,t){typeof t=="boolean"&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}return Sg=n,n.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},n.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},n.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=new Date().getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var i=this._timeouts.shift();if(i===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),i=this._cachedTimeouts.slice(-1);else return!1;var r=this;return this._timer=setTimeout(function(){r._attempts++,r._operationTimeoutCb&&(r._timeout=setTimeout(function(){r._operationTimeoutCb(r._attempts)},r._operationTimeout),r._options.unref&&r._timeout.unref()),r._fn(r._attempts)},i),this._options.unref&&this._timer.unref(),!0},n.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var i=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){i._operationTimeoutCb()},i._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},n.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},n.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},n.prototype.start=n.prototype.try,n.prototype.errors=function(){return this._errors},n.prototype.attempts=function(){return this._attempts},n.prototype.mainError=function(){if(this._errors.length===0)return null;for(var e={},t=null,i=0,r=0;r<this._errors.length;r++){var a=this._errors[r],u=a.message,d=(e[u]||0)+1;e[u]=d,d>=i&&(t=a,i=d)}return t},Sg}var iS;function OM(){return iS||(iS=1,(function(n){var e=LM();n.operation=function(t){var i=n.timeouts(t);return new e(i,{forever:t&&(t.forever||t.retries===1/0),unref:t&&t.unref,maxRetryTime:t&&t.maxRetryTime})},n.timeouts=function(t){if(t instanceof Array)return[].concat(t);var i={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var r in t)i[r]=t[r];if(i.minTimeout>i.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var a=[],u=0;u<i.retries;u++)a.push(this.createTimeout(u,i));return t&&t.forever&&!a.length&&a.push(this.createTimeout(u,i)),a.sort(function(d,p){return d-p}),a},n.createTimeout=function(t,i){var r=i.randomize?Math.random()+1:1,a=Math.round(r*Math.max(i.minTimeout,1)*Math.pow(i.factor,t));return a=Math.min(a,i.maxTimeout),a},n.wrap=function(t,i,r){if(i instanceof Array&&(r=i,i=null),!r){r=[];for(var a in t)typeof t[a]=="function"&&r.push(a)}for(var u=0;u<r.length;u++){var d=r[u],p=t[d];t[d]=(function(_){var T=n.operation(i),E=Array.prototype.slice.call(arguments,1),C=E.pop();E.push(function(M){T.retry(M)||(M&&(arguments[0]=T.mainError()),C.apply(this,arguments))}),T.attempt(function(){_.apply(t,E)})}).bind(t,p),t[d].options=i}}})(Eg)),Eg}var Ag,sS;function FM(){return sS||(sS=1,Ag=OM()),Ag}var rS;function BM(){if(rS)return Uu.exports;rS=1;const n=FM(),e=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class t extends Error{constructor(d){super(),d instanceof Error?(this.originalError=d,{message:d}=d):(this.originalError=new Error(d),this.originalError.stack=this.stack),this.name="AbortError",this.message=d}}const i=(u,d,p)=>{const h=p.retries-(d-1);return u.attemptNumber=d,u.retriesLeft=h,u},r=u=>e.includes(u),a=(u,d)=>new Promise((p,h)=>{d={onFailedAttempt:()=>{},retries:10,...d};const _=n.operation(d);_.attempt(async T=>{try{p(await u(T))}catch(E){if(!(E instanceof Error)){h(new TypeError(`Non-error was thrown: "${E}". You should only throw errors.`));return}if(E instanceof t)_.stop(),h(E.originalError);else if(E instanceof TypeError&&!r(E.message))_.stop(),h(E);else{i(E,T,d);try{await d.onFailedAttempt(E)}catch(C){h(C);return}_.retry(E)||h(_.mainError())}}})});return Uu.exports=a,Uu.exports.default=a,Uu.exports.AbortError=t,Uu.exports}var qC=BM();const qM=jy(qC);var GM={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let HM,zM;function $M(){return{geminiUrl:HM,vertexUrl:zM}}function JM(n,e,t,i){var r,a;if(!(n!=null&&n.baseUrl)){const u=$M();return e?(r=u.vertexUrl)!==null&&r!==void 0?r:t:(a=u.geminiUrl)!==null&&a!==void 0?a:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qs{}function pe(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const a=e[r];return a!=null?String(a):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function m(n,e,t){for(let a=0;a<e.length-1;a++){const u=e[a];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[d])){const p=n[d];if(Array.isArray(t))for(let h=0;h<p.length;h++){const _=p[h];m(_,e.slice(a+1),t[h])}else for(const h of p)m(h,e.slice(a+1),t)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in n||(n[d]=[{}]);const p=n[d];m(p[0],e.slice(a+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const i=e[e.length-1],r=n[i];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return t;const r=e[i];if(r.endsWith("[]")){const a=r.slice(0,-2);if(a in n){const u=n[a];return Array.isArray(u)?u.map(d=>f(d,e.slice(i+1),t)):t}else return t}else n=n[r]}return n}catch(i){if(i instanceof TypeError)return t;throw i}}function KM(n,e){for(const[t,i]of Object.entries(e)){const r=t.split("."),a=i.split("."),u=new Set;let d=-1;for(let p=0;p<r.length;p++)if(r[p]==="*"){d=p;break}if(d!==-1&&a.length>d)for(let p=d;p<a.length;p++){const h=a[p];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&u.add(h)}Xg(n,r,a,0,u)}}function Xg(n,e,t,i,r){if(i>=e.length||typeof n!="object"||n===null)return;const a=e[i];if(a.endsWith("[]")){const u=a.slice(0,-2),d=n;if(u in d&&Array.isArray(d[u]))for(const p of d[u])Xg(p,e,t,i+1,r)}else if(a==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,d=Object.keys(u).filter(h=>!h.startsWith("_")&&!r.has(h)),p={};for(const h of d)p[h]=u[h];for(const[h,_]of Object.entries(p)){const T=[];for(const E of t.slice(i))E==="*"?T.push(h):T.push(E);m(u,T,_)}for(const h of d)delete u[h]}}else{const u=n;a in u&&Xg(u[a],e,t,i+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function e_(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function YM(n){const e={},t=f(n,["operationName"]);t!=null&&m(e,["operationName"],t);const i=f(n,["resourceName"]);return i!=null&&m(e,["_url","resourceName"],i),e}function WM(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const i=f(n,["metadata"]);i!=null&&m(e,["metadata"],i);const r=f(n,["done"]);r!=null&&m(e,["done"],r);const a=f(n,["error"]);a!=null&&m(e,["error"],a);const u=f(n,["response","generateVideoResponse"]);return u!=null&&m(e,["response"],XM(u)),e}function QM(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const i=f(n,["metadata"]);i!=null&&m(e,["metadata"],i);const r=f(n,["done"]);r!=null&&m(e,["done"],r);const a=f(n,["error"]);a!=null&&m(e,["error"],a);const u=f(n,["response"]);return u!=null&&m(e,["response"],jM(u)),e}function XM(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>ZM(u))),m(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&m(e,["raiMediaFilteredCount"],i);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&m(e,["raiMediaFilteredReasons"],r),e}function jM(n){const e={},t=f(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>eD(u))),m(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&m(e,["raiMediaFilteredCount"],i);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&m(e,["raiMediaFilteredReasons"],r),e}function ZM(n){const e={},t=f(n,["video"]);return t!=null&&m(e,["video"],oD(t)),e}function eD(n){const e={},t=f(n,["_self"]);return t!=null&&m(e,["video"],aD(t)),e}function tD(n){const e={},t=f(n,["operationName"]);return t!=null&&m(e,["_url","operationName"],t),e}function nD(n){const e={},t=f(n,["operationName"]);return t!=null&&m(e,["_url","operationName"],t),e}function iD(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const i=f(n,["metadata"]);i!=null&&m(e,["metadata"],i);const r=f(n,["done"]);r!=null&&m(e,["done"],r);const a=f(n,["error"]);a!=null&&m(e,["error"],a);const u=f(n,["response"]);return u!=null&&m(e,["response"],sD(u)),e}function sD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&m(e,["parent"],i);const r=f(n,["documentName"]);return r!=null&&m(e,["documentName"],r),e}function GC(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const i=f(n,["metadata"]);i!=null&&m(e,["metadata"],i);const r=f(n,["done"]);r!=null&&m(e,["done"],r);const a=f(n,["error"]);a!=null&&m(e,["error"],a);const u=f(n,["response"]);return u!=null&&m(e,["response"],rD(u)),e}function rD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&m(e,["parent"],i);const r=f(n,["documentName"]);return r!=null&&m(e,["documentName"],r),e}function oD(n){const e={},t=f(n,["uri"]);t!=null&&m(e,["uri"],t);const i=f(n,["encodedVideo"]);i!=null&&m(e,["videoBytes"],e_(i));const r=f(n,["encoding"]);return r!=null&&m(e,["mimeType"],r),e}function aD(n){const e={},t=f(n,["gcsUri"]);t!=null&&m(e,["uri"],t);const i=f(n,["bytesBase64Encoded"]);i!=null&&m(e,["videoBytes"],e_(i));const r=f(n,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var oS;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(oS||(oS={}));var aS;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(aS||(aS={}));var lS;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(lS||(lS={}));var Et;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Et||(Et={}));var uS;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(uS||(uS={}));var cS;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(cS||(cS={}));var dS;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(dS||(dS={}));var fS;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(fS||(fS={}));var hS;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(hS||(hS={}));var pS;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(pS||(pS={}));var mS;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(mS||(mS={}));var gS;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(gS||(gS={}));var yS;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(yS||(yS={}));var _S;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(_S||(_S={}));var vS;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(vS||(vS={}));var TS;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(TS||(TS={}));var ES;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(ES||(ES={}));var SS;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(SS||(SS={}));var AS;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(AS||(AS={}));var wS;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(wS||(wS={}));var CS;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(CS||(CS={}));var eh;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(eh||(eh={}));var IS;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(IS||(IS={}));var bS;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(bS||(bS={}));var RS;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(RS||(RS={}));var jg;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(jg||(jg={}));var xS;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(xS||(xS={}));var NS;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(NS||(NS={}));var Zg;(function(n){n.COLLECTION="COLLECTION"})(Zg||(Zg={}));var MS;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(MS||(MS={}));var DS;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(DS||(DS={}));var th;(function(n){n.PREDICT="PREDICT",n.EMBED_CONTENT="EMBED_CONTENT"})(th||(th={}));var PS;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(PS||(PS={}));var kS;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(kS||(kS={}));var VS;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(VS||(VS={}));var US;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(US||(US={}));var LS;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(LS||(LS={}));var OS;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(OS||(OS={}));var FS;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(FS||(FS={}));var BS;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(BS||(BS={}));var qS;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(qS||(qS={}));var GS;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(GS||(GS={}));var HS;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(HS||(HS={}));var zS;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING",n.DISTILLATION="DISTILLATION"})(zS||(zS={}));var $S;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})($S||($S={}));var JS;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(JS||(JS={}));var KS;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED",n.REGISTERED="REGISTERED"})(KS||(KS={}));var YS;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(YS||(YS={}));var WS;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(WS||(WS={}));var QS;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(QS||(QS={}));var XS;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.ACTIVITY_START="ACTIVITY_START",n.ACTIVITY_END="ACTIVITY_END"})(XS||(XS={}));var jS;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(jS||(jS={}));var ZS;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(ZS||(ZS={}));var eA;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(eA||(eA={}));var tA;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(tA||(tA={}));var nA;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(nA||(nA={}));var iA;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(iA||(iA={}));var ja;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(ja||(ja={}));class ey{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Lu{get text(){var e,t,i,r,a,u,d,p;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",_=!1;const T=[];for(const E of(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[C,M]of Object.entries(E))C!=="text"&&C!=="thought"&&C!=="thoughtSignature"&&(M!==null||M!==void 0)&&T.push(C);if(typeof E.text=="string"){if(typeof E.thought=="boolean"&&E.thought)continue;_=!0,h+=E.text}}return T.length>0&&console.warn(`there are non-text parts ${T} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),_?h:void 0}get data(){var e,t,i,r,a,u,d,p;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const _=[];for(const T of(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[E,C]of Object.entries(T))E!=="inlineData"&&(C!==null||C!==void 0)&&_.push(E);T.inlineData&&typeof T.inlineData.data=="string"&&(h+=atob(T.inlineData.data))}return _.length>0&&console.warn(`there are non-data parts ${_} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,t,i,r,a,u,d,p;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(_=>_.functionCall).map(_=>_.functionCall).filter(_=>_!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,t,i,r,a,u,d,p,h;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const _=(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(T=>T.executableCode).map(T=>T.executableCode).filter(T=>T!==void 0);if((_==null?void 0:_.length)!==0)return(h=_==null?void 0:_[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,t,i,r,a,u,d,p,h;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const _=(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(T=>T.codeExecutionResult).map(T=>T.codeExecutionResult).filter(T=>T!==void 0);if((_==null?void 0:_.length)!==0)return(h=_==null?void 0:_[0])===null||h===void 0?void 0:h.output}}class sA{}class rA{}class lD{}class uD{}class cD{}class dD{}class oA{}class aA{}class lA{}class fD{}class nh{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new nh;let r;const a=e;return t?r=QM(a):r=WM(a),Object.assign(i,r),i}}class uA{}class cA{}class dA{}class fA{}class hD{}class pD{}class mD{}class t_{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new t_,a=iD(e);return Object.assign(i,a),i}}class gD{}class yD{}class _D{}class vD{}class hA{}class TD{get text(){var e,t,i;let r="",a=!1;const u=[];for(const d of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[p,h]of Object.entries(d))p!=="text"&&p!=="thought"&&h!==null&&u.push(p);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;a=!0,r+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?r:void 0}get data(){var e,t,i;let r="";const a=[];for(const u of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[d,p]of Object.entries(u))d!=="inlineData"&&p!==null&&a.push(d);u.inlineData&&typeof u.inlineData.data=="string"&&(r+=atob(u.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class ED{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class n_{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new n_,a=GC(e);return Object.assign(i,a),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function it(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function HC(n,e){const t=it(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function zC(n){return Array.isArray(n)?n.map(e=>ih(e)):[ih(n)]}function ih(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function $C(n){const e=ih(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function JC(n){const e=ih(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function pA(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function KC(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>pA(e)):[pA(n)]}function ty(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function mA(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function gA(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function nn(n){if(n==null)throw new Error("ContentUnion is required");return ty(n)?n:{role:"user",parts:KC(n)}}function i_(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=nn(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=nn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>nn(t)):[nn(e)]}function Xn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(mA(n)||gA(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[nn(n)]}const e=[],t=[],i=ty(n[0]);for(const r of n){const a=ty(r);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(r);else{if(mA(r)||gA(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return i||e.push({role:"user",parts:KC(t)}),e}function SD(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(Et).includes(t[0].toUpperCase())?t[0].toUpperCase():Et.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(Et).includes(i.toUpperCase())?i.toUpperCase():Et.TYPE_UNSPECIFIED})}}function el(n){const e={},t=["items"],i=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=n.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,n=a[1]):a[1].type==="null"&&(e.nullable=!0,n=a[0])),n.type instanceof Array&&SD(n.type,e);for(const[u,d]of Object.entries(n))if(d!=null)if(u=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(Et).includes(d.toUpperCase())?d.toUpperCase():Et.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=el(d);else if(i.includes(u)){const p=[];for(const h of d){if(h.type=="null"){e.nullable=!0;continue}p.push(el(h))}e[u]=p}else if(r.includes(u)){const p={};for(const[h,_]of Object.entries(d))p[h]=el(_);e[u]=p}else{if(u==="additionalProperties")continue;e[u]=d}return e}function s_(n){return el(n)}function r_(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function o_(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function yl(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=el(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=el(e.response));return n}function _l(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function AD(n,e,t,i=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function Xs(n,e){if(typeof e!="string")throw new Error("name must be a string");return AD(n,e,"cachedContents")}function YC(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Xr(n){return e_(n)}function wD(n){return n!=null&&typeof n=="object"&&"name"in n}function CD(n){return n!=null&&typeof n=="object"&&"video"in n}function ID(n){return n!=null&&typeof n=="object"&&"uri"in n}function WC(n){var e;let t;if(wD(n)&&(t=n.name),!(ID(n)&&(t=n.uri,t===void 0))&&!(CD(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const r=t.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${t}`);t=r[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function QC(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function XC(n){for(const e of["models","tunedModels","publisherModels"])if(bD(n,e))return n[e];return[]}function bD(n,e){return n!==null&&typeof n=="object"&&e in n}function RD(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function xD(n,e={}){const t=[],i=new Set;for(const r of n){const a=r.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const u=RD(r,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function jC(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,r=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function ND(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function ZC(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const r=t.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let a=!1;for(const u of r){if(typeof u!="object"||u===null)continue;const p=u.response;if(typeof p!="object"||p===null)continue;if(p.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function vl(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function eI(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function MD(n){return n.includes("gemini")&&n!=="gemini-embedding-001"||n.includes("maas")}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DD(n){const e={},t=f(n,["responsesFile"]);t!=null&&m(e,["fileName"],t);const i=f(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>fP(u))),m(e,["inlinedResponses"],a)}const r=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["inlinedEmbedContentResponses"],a)}return e}function PD(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&m(e,["format"],t);const i=f(n,["gcsDestination","outputUriPrefix"]);i!=null&&m(e,["gcsUri"],i);const r=f(n,["bigqueryDestination","outputUri"]);return r!=null&&m(e,["bigqueryUri"],r),e}function kD(n){const e={},t=f(n,["format"]);t!=null&&m(e,["predictionsFormat"],t);const i=f(n,["gcsUri"]);i!=null&&m(e,["gcsDestination","outputUriPrefix"],i);const r=f(n,["bigqueryUri"]);if(r!=null&&m(e,["bigqueryDestination","outputUri"],r),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Pf(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const i=f(n,["metadata","displayName"]);i!=null&&m(e,["displayName"],i);const r=f(n,["metadata","state"]);r!=null&&m(e,["state"],eI(r));const a=f(n,["metadata","createTime"]);a!=null&&m(e,["createTime"],a);const u=f(n,["metadata","endTime"]);u!=null&&m(e,["endTime"],u);const d=f(n,["metadata","updateTime"]);d!=null&&m(e,["updateTime"],d);const p=f(n,["metadata","model"]);p!=null&&m(e,["model"],p);const h=f(n,["metadata","output"]);return h!=null&&m(e,["dest"],DD(ZC(h))),e}function ny(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const i=f(n,["displayName"]);i!=null&&m(e,["displayName"],i);const r=f(n,["state"]);r!=null&&m(e,["state"],eI(r));const a=f(n,["error"]);a!=null&&m(e,["error"],a);const u=f(n,["createTime"]);u!=null&&m(e,["createTime"],u);const d=f(n,["startTime"]);d!=null&&m(e,["startTime"],d);const p=f(n,["endTime"]);p!=null&&m(e,["endTime"],p);const h=f(n,["updateTime"]);h!=null&&m(e,["updateTime"],h);const _=f(n,["model"]);_!=null&&m(e,["model"],_);const T=f(n,["inputConfig"]);T!=null&&m(e,["src"],VD(T));const E=f(n,["outputConfig"]);E!=null&&m(e,["dest"],PD(ZC(E)));const C=f(n,["completionStats"]);return C!=null&&m(e,["completionStats"],C),e}function VD(n){const e={},t=f(n,["instancesFormat"]);t!=null&&m(e,["format"],t);const i=f(n,["gcsSource","uris"]);i!=null&&m(e,["gcsUri"],i);const r=f(n,["bigquerySource","inputUri"]);return r!=null&&m(e,["bigqueryUri"],r),e}function UD(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=f(e,["fileName"]);i!=null&&m(t,["fileName"],i);const r=f(e,["inlinedRequests"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>dP(n,u))),m(t,["requests","requests"],a)}return t}function LD(n){const e={},t=f(n,["format"]);t!=null&&m(e,["instancesFormat"],t);const i=f(n,["gcsUri"]);i!=null&&m(e,["gcsSource","uris"],i);const r=f(n,["bigqueryUri"]);if(r!=null&&m(e,["bigquerySource","inputUri"],r),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function OD(n){const e={},t=f(n,["data"]);if(t!=null&&m(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function FD(n,e){const t={},i=f(e,["name"]);return i!=null&&m(t,["_url","name"],vl(n,i)),t}function BD(n,e){const t={},i=f(e,["name"]);return i!=null&&m(t,["_url","name"],vl(n,i)),t}function qD(n){const e={},t=f(n,["content"]);t!=null&&m(e,["content"],t);const i=f(n,["citationMetadata"]);i!=null&&m(e,["citationMetadata"],GD(i));const r=f(n,["tokenCount"]);r!=null&&m(e,["tokenCount"],r);const a=f(n,["finishReason"]);a!=null&&m(e,["finishReason"],a);const u=f(n,["avgLogprobs"]);u!=null&&m(e,["avgLogprobs"],u);const d=f(n,["groundingMetadata"]);d!=null&&m(e,["groundingMetadata"],d);const p=f(n,["index"]);p!=null&&m(e,["index"],p);const h=f(n,["logprobsResult"]);h!=null&&m(e,["logprobsResult"],h);const _=f(n,["safetyRatings"]);if(_!=null){let E=_;Array.isArray(E)&&(E=E.map(C=>C)),m(e,["safetyRatings"],E)}const T=f(n,["urlContextMetadata"]);return T!=null&&m(e,["urlContextMetadata"],T),e}function GD(n){const e={},t=f(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>r)),m(e,["citations"],i)}return e}function tI(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>vP(a))),m(e,["parts"],r)}const i=f(n,["role"]);return i!=null&&m(e,["role"],i),e}function HD(n,e){const t={},i=f(n,["displayName"]);if(e!==void 0&&i!=null&&m(e,["batch","displayName"],i),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function zD(n,e){const t={},i=f(n,["displayName"]);e!==void 0&&i!=null&&m(e,["displayName"],i);const r=f(n,["dest"]);return e!==void 0&&r!=null&&m(e,["outputConfig"],kD(ND(r))),t}function yA(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],it(n,i));const r=f(e,["src"]);r!=null&&m(t,["batch","inputConfig"],UD(n,jC(n,r)));const a=f(e,["config"]);return a!=null&&HD(a,t),t}function $D(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["model"],it(n,i));const r=f(e,["src"]);r!=null&&m(t,["inputConfig"],LD(jC(n,r)));const a=f(e,["config"]);return a!=null&&zD(a,t),t}function JD(n,e){const t={},i=f(n,["displayName"]);return e!==void 0&&i!=null&&m(e,["batch","displayName"],i),t}function KD(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],it(n,i));const r=f(e,["src"]);r!=null&&m(t,["batch","inputConfig"],eP(n,r));const a=f(e,["config"]);return a!=null&&JD(a,t),t}function YD(n,e){const t={},i=f(e,["name"]);return i!=null&&m(t,["_url","name"],vl(n,i)),t}function WD(n,e){const t={},i=f(e,["name"]);return i!=null&&m(t,["_url","name"],vl(n,i)),t}function QD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["name"]);i!=null&&m(e,["name"],i);const r=f(n,["done"]);r!=null&&m(e,["done"],r);const a=f(n,["error"]);return a!=null&&m(e,["error"],a),e}function XD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["name"]);i!=null&&m(e,["name"],i);const r=f(n,["done"]);r!=null&&m(e,["done"],r);const a=f(n,["error"]);return a!=null&&m(e,["error"],a),e}function jD(n,e){const t={},i=f(e,["contents"]);if(i!=null){let a=i_(n,i);Array.isArray(a)&&(a=a.map(u=>u)),m(t,["requests[]","request","content"],a)}const r=f(e,["config"]);return r!=null&&(m(t,["_self"],ZD(r,t)),KM(t,{"requests[].*":"requests[].request.*"})),t}function ZD(n,e){const t={},i=f(n,["taskType"]);e!==void 0&&i!=null&&m(e,["requests[]","taskType"],i);const r=f(n,["title"]);e!==void 0&&r!=null&&m(e,["requests[]","title"],r);const a=f(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&m(e,["requests[]","outputDimensionality"],a),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function eP(n,e){const t={},i=f(e,["fileName"]);i!=null&&m(t,["file_name"],i);const r=f(e,["inlinedRequests"]);return r!=null&&m(t,["requests"],jD(n,r)),t}function tP(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function nP(n){const e={},t=f(n,["id"]);t!=null&&m(e,["id"],t);const i=f(n,["args"]);i!=null&&m(e,["args"],i);const r=f(n,["name"]);if(r!=null&&m(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function iP(n){const e={},t=f(n,["allowedFunctionNames"]);t!=null&&m(e,["allowedFunctionNames"],t);const i=f(n,["mode"]);if(i!=null&&m(e,["mode"],i),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function sP(n,e,t){const i={},r=f(e,["systemInstruction"]);t!==void 0&&r!=null&&m(t,["systemInstruction"],tI(nn(r)));const a=f(e,["temperature"]);a!=null&&m(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&m(i,["topP"],u);const d=f(e,["topK"]);d!=null&&m(i,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&m(i,["candidateCount"],p);const h=f(e,["maxOutputTokens"]);h!=null&&m(i,["maxOutputTokens"],h);const _=f(e,["stopSequences"]);_!=null&&m(i,["stopSequences"],_);const T=f(e,["responseLogprobs"]);T!=null&&m(i,["responseLogprobs"],T);const E=f(e,["logprobs"]);E!=null&&m(i,["logprobs"],E);const C=f(e,["presencePenalty"]);C!=null&&m(i,["presencePenalty"],C);const M=f(e,["frequencyPenalty"]);M!=null&&m(i,["frequencyPenalty"],M);const U=f(e,["seed"]);U!=null&&m(i,["seed"],U);const P=f(e,["responseMimeType"]);P!=null&&m(i,["responseMimeType"],P);const $=f(e,["responseSchema"]);$!=null&&m(i,["responseSchema"],s_($));const H=f(e,["responseJsonSchema"]);if(H!=null&&m(i,["responseJsonSchema"],H),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const z=f(e,["safetySettings"]);if(t!==void 0&&z!=null){let V=z;Array.isArray(V)&&(V=V.map(ke=>TP(ke))),m(t,["safetySettings"],V)}const X=f(e,["tools"]);if(t!==void 0&&X!=null){let V=_l(X);Array.isArray(V)&&(V=V.map(ke=>SP(yl(ke)))),m(t,["tools"],V)}const ue=f(e,["toolConfig"]);if(t!==void 0&&ue!=null&&m(t,["toolConfig"],EP(ue)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const W=f(e,["cachedContent"]);t!==void 0&&W!=null&&m(t,["cachedContent"],Xs(n,W));const N=f(e,["responseModalities"]);N!=null&&m(i,["responseModalities"],N);const D=f(e,["mediaResolution"]);D!=null&&m(i,["mediaResolution"],D);const x=f(e,["speechConfig"]);if(x!=null&&m(i,["speechConfig"],r_(x)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=f(e,["thinkingConfig"]);L!=null&&m(i,["thinkingConfig"],L);const k=f(e,["imageConfig"]);k!=null&&m(i,["imageConfig"],cP(k));const q=f(e,["enableEnhancedCivicAnswers"]);if(q!=null&&m(i,["enableEnhancedCivicAnswers"],q),f(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function rP(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["candidates"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(h=>qD(h))),m(e,["candidates"],p)}const r=f(n,["modelVersion"]);r!=null&&m(e,["modelVersion"],r);const a=f(n,["promptFeedback"]);a!=null&&m(e,["promptFeedback"],a);const u=f(n,["responseId"]);u!=null&&m(e,["responseId"],u);const d=f(n,["usageMetadata"]);return d!=null&&m(e,["usageMetadata"],d),e}function oP(n,e){const t={},i=f(e,["name"]);return i!=null&&m(t,["_url","name"],vl(n,i)),t}function aP(n,e){const t={},i=f(e,["name"]);return i!=null&&m(t,["_url","name"],vl(n,i)),t}function lP(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function uP(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function cP(n){const e={},t=f(n,["aspectRatio"]);t!=null&&m(e,["aspectRatio"],t);const i=f(n,["imageSize"]);if(i!=null&&m(e,["imageSize"],i),f(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function dP(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["request","model"],it(n,i));const r=f(e,["contents"]);if(r!=null){let d=Xn(r);Array.isArray(d)&&(d=d.map(p=>tI(p))),m(t,["request","contents"],d)}const a=f(e,["metadata"]);a!=null&&m(t,["metadata"],a);const u=f(e,["config"]);return u!=null&&m(t,["request","generationConfig"],sP(n,u,f(t,["request"],{}))),t}function fP(n){const e={},t=f(n,["response"]);t!=null&&m(e,["response"],rP(t));const i=f(n,["metadata"]);i!=null&&m(e,["metadata"],i);const r=f(n,["error"]);return r!=null&&m(e,["error"],r),e}function hP(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const r=f(n,["pageToken"]);if(e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function pP(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const r=f(n,["pageToken"]);e!==void 0&&r!=null&&m(e,["_query","pageToken"],r);const a=f(n,["filter"]);return e!==void 0&&a!=null&&m(e,["_query","filter"],a),t}function mP(n){const e={},t=f(n,["config"]);return t!=null&&hP(t,e),e}function gP(n){const e={},t=f(n,["config"]);return t!=null&&pP(t,e),e}function yP(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const r=f(n,["operations"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>Pf(u))),m(e,["batchJobs"],a)}return e}function _P(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const r=f(n,["batchPredictionJobs"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>ny(u))),m(e,["batchJobs"],a)}return e}function vP(n){const e={},t=f(n,["mediaResolution"]);t!=null&&m(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const r=f(n,["executableCode"]);r!=null&&m(e,["executableCode"],r);const a=f(n,["fileData"]);a!=null&&m(e,["fileData"],tP(a));const u=f(n,["functionCall"]);u!=null&&m(e,["functionCall"],nP(u));const d=f(n,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const p=f(n,["inlineData"]);p!=null&&m(e,["inlineData"],OD(p));const h=f(n,["text"]);h!=null&&m(e,["text"],h);const _=f(n,["thought"]);_!=null&&m(e,["thought"],_);const T=f(n,["thoughtSignature"]);T!=null&&m(e,["thoughtSignature"],T);const E=f(n,["videoMetadata"]);return E!=null&&m(e,["videoMetadata"],E),e}function TP(n){const e={},t=f(n,["category"]);if(t!=null&&m(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=f(n,["threshold"]);return i!=null&&m(e,["threshold"],i),e}function EP(n){const e={},t=f(n,["retrievalConfig"]);t!=null&&m(e,["retrievalConfig"],t);const i=f(n,["functionCallingConfig"]);return i!=null&&m(e,["functionCallingConfig"],iP(i)),e}function SP(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&m(e,["computerUse"],t);const i=f(n,["fileSearch"]);i!=null&&m(e,["fileSearch"],i);const r=f(n,["codeExecution"]);if(r!=null&&m(e,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(n,["functionDeclarations"]);if(a!=null){let _=a;Array.isArray(_)&&(_=_.map(T=>T)),m(e,["functionDeclarations"],_)}const u=f(n,["googleMaps"]);u!=null&&m(e,["googleMaps"],lP(u));const d=f(n,["googleSearch"]);d!=null&&m(e,["googleSearch"],uP(d));const p=f(n,["googleSearchRetrieval"]);p!=null&&m(e,["googleSearchRetrieval"],p);const h=f(n,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var zs;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(zs||(zs={}));class $o{constructor(e,t,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,r)}init(e,t,i){var r,a;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!i||Object.keys(i).length===0?u={config:{}}:typeof i=="object"?u=Object.assign({},i):u=i,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(a=(r=u.config)===null||r===void 0?void 0:r.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let AP=class extends Qs{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new $o(zs.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=yA(this.apiClient,e),i=t._url,r=pe("{model}:batchGenerateContent",i),d=t.batch.inputConfig.requests,p=d.requests,h=[];for(const _ of p){const T=Object.assign({},_);if(T.systemInstruction){const E=T.systemInstruction;delete T.systemInstruction;const C=T.request;C.systemInstruction=E,T.request=C}h.push(T)}return d.requests=h,delete t.config,delete t._url,delete t._query,{path:r,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const i=t?Object.assign({},t):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){const a=this.getGcsUri(e),u=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${r}`;else if(u)i.dest=`${u}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var t,i,r,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=$D(this.apiClient,e);return d=pe("batchPredictionJobs",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>ny(_))}else{const h=yA(this.apiClient,e);return d=pe("{model}:batchGenerateContent",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>Pf(_))}}async createEmbeddingsInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=KD(this.apiClient,e);return a=pe("{model}:asyncBatchEmbedContent",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>Pf(p))}}async get(e){var t,i,r,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=aP(this.apiClient,e);return d=pe("batchPredictionJobs/{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>ny(_))}else{const h=oP(this.apiClient,e);return d=pe("batches/{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>Pf(_))}}async cancel(e){var t,i,r,a;let u="",d={};if(this.apiClient.isVertexAI()){const p=BD(this.apiClient,e);u=pe("batchPredictionJobs/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const p=FD(this.apiClient,e);u=pe("batches/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var t,i,r,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=gP(e);return d=pe("batchPredictionJobs",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=_P(_),E=new hA;return Object.assign(E,T),E})}else{const h=mP(e);return d=pe("batches",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=yP(_),E=new hA;return Object.assign(E,T),E})}}async delete(e){var t,i,r,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=WD(this.apiClient,e);return d=pe("batchPredictionJobs/{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>XD(_))}else{const h=YD(this.apiClient,e);return d=pe("batches/{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>QD(_))}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wP(n){const e={},t=f(n,["data"]);if(t!=null&&m(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function _A(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>KP(a))),m(e,["parts"],r)}const i=f(n,["role"]);return i!=null&&m(e,["role"],i),e}function CP(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const r=f(n,["expireTime"]);e!==void 0&&r!=null&&m(e,["expireTime"],r);const a=f(n,["displayName"]);e!==void 0&&a!=null&&m(e,["displayName"],a);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let _=Xn(u);Array.isArray(_)&&(_=_.map(T=>_A(T))),m(e,["contents"],_)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&m(e,["systemInstruction"],_A(nn(d)));const p=f(n,["tools"]);if(e!==void 0&&p!=null){let _=p;Array.isArray(_)&&(_=_.map(T=>WP(T))),m(e,["tools"],_)}const h=f(n,["toolConfig"]);if(e!==void 0&&h!=null&&m(e,["toolConfig"],YP(h)),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function IP(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const r=f(n,["expireTime"]);e!==void 0&&r!=null&&m(e,["expireTime"],r);const a=f(n,["displayName"]);e!==void 0&&a!=null&&m(e,["displayName"],a);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let T=Xn(u);Array.isArray(T)&&(T=T.map(E=>E)),m(e,["contents"],T)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&m(e,["systemInstruction"],nn(d));const p=f(n,["tools"]);if(e!==void 0&&p!=null){let T=p;Array.isArray(T)&&(T=T.map(E=>QP(E))),m(e,["tools"],T)}const h=f(n,["toolConfig"]);e!==void 0&&h!=null&&m(e,["toolConfig"],h);const _=f(n,["kmsKeyName"]);return e!==void 0&&_!=null&&m(e,["encryption_spec","kmsKeyName"],_),t}function bP(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["model"],HC(n,i));const r=f(e,["config"]);return r!=null&&CP(r,t),t}function RP(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["model"],HC(n,i));const r=f(e,["config"]);return r!=null&&IP(r,t),t}function xP(n,e){const t={},i=f(e,["name"]);return i!=null&&m(t,["_url","name"],Xs(n,i)),t}function NP(n,e){const t={},i=f(e,["name"]);return i!=null&&m(t,["_url","name"],Xs(n,i)),t}function MP(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function DP(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function PP(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function kP(n){const e={},t=f(n,["id"]);t!=null&&m(e,["id"],t);const i=f(n,["args"]);i!=null&&m(e,["args"],i);const r=f(n,["name"]);if(r!=null&&m(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function VP(n){const e={},t=f(n,["allowedFunctionNames"]);t!=null&&m(e,["allowedFunctionNames"],t);const i=f(n,["mode"]);if(i!=null&&m(e,["mode"],i),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function UP(n){const e={},t=f(n,["description"]);t!=null&&m(e,["description"],t);const i=f(n,["name"]);i!=null&&m(e,["name"],i);const r=f(n,["parameters"]);r!=null&&m(e,["parameters"],r);const a=f(n,["parametersJsonSchema"]);a!=null&&m(e,["parametersJsonSchema"],a);const u=f(n,["response"]);u!=null&&m(e,["response"],u);const d=f(n,["responseJsonSchema"]);if(d!=null&&m(e,["responseJsonSchema"],d),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function LP(n,e){const t={},i=f(e,["name"]);return i!=null&&m(t,["_url","name"],Xs(n,i)),t}function OP(n,e){const t={},i=f(e,["name"]);return i!=null&&m(t,["_url","name"],Xs(n,i)),t}function FP(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function BP(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function qP(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),t}function GP(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),t}function HP(n){const e={},t=f(n,["config"]);return t!=null&&qP(t,e),e}function zP(n){const e={},t=f(n,["config"]);return t!=null&&GP(t,e),e}function $P(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const r=f(n,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["cachedContents"],a)}return e}function JP(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const r=f(n,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["cachedContents"],a)}return e}function KP(n){const e={},t=f(n,["mediaResolution"]);t!=null&&m(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const r=f(n,["executableCode"]);r!=null&&m(e,["executableCode"],r);const a=f(n,["fileData"]);a!=null&&m(e,["fileData"],PP(a));const u=f(n,["functionCall"]);u!=null&&m(e,["functionCall"],kP(u));const d=f(n,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const p=f(n,["inlineData"]);p!=null&&m(e,["inlineData"],wP(p));const h=f(n,["text"]);h!=null&&m(e,["text"],h);const _=f(n,["thought"]);_!=null&&m(e,["thought"],_);const T=f(n,["thoughtSignature"]);T!=null&&m(e,["thoughtSignature"],T);const E=f(n,["videoMetadata"]);return E!=null&&m(e,["videoMetadata"],E),e}function YP(n){const e={},t=f(n,["retrievalConfig"]);t!=null&&m(e,["retrievalConfig"],t);const i=f(n,["functionCallingConfig"]);return i!=null&&m(e,["functionCallingConfig"],VP(i)),e}function WP(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&m(e,["computerUse"],t);const i=f(n,["fileSearch"]);i!=null&&m(e,["fileSearch"],i);const r=f(n,["codeExecution"]);if(r!=null&&m(e,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(n,["functionDeclarations"]);if(a!=null){let _=a;Array.isArray(_)&&(_=_.map(T=>T)),m(e,["functionDeclarations"],_)}const u=f(n,["googleMaps"]);u!=null&&m(e,["googleMaps"],FP(u));const d=f(n,["googleSearch"]);d!=null&&m(e,["googleSearch"],BP(d));const p=f(n,["googleSearchRetrieval"]);p!=null&&m(e,["googleSearchRetrieval"],p);const h=f(n,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function QP(n){const e={},t=f(n,["retrieval"]);t!=null&&m(e,["retrieval"],t);const i=f(n,["computerUse"]);if(i!=null&&m(e,["computerUse"],i),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=f(n,["codeExecution"]);r!=null&&m(e,["codeExecution"],r);const a=f(n,["enterpriseWebSearch"]);a!=null&&m(e,["enterpriseWebSearch"],a);const u=f(n,["functionDeclarations"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(E=>UP(E))),m(e,["functionDeclarations"],T)}const d=f(n,["googleMaps"]);d!=null&&m(e,["googleMaps"],d);const p=f(n,["googleSearch"]);p!=null&&m(e,["googleSearch"],p);const h=f(n,["googleSearchRetrieval"]);h!=null&&m(e,["googleSearchRetrieval"],h);const _=f(n,["urlContext"]);return _!=null&&m(e,["urlContext"],_),e}function XP(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const r=f(n,["expireTime"]);return e!==void 0&&r!=null&&m(e,["expireTime"],r),t}function jP(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const r=f(n,["expireTime"]);return e!==void 0&&r!=null&&m(e,["expireTime"],r),t}function ZP(n,e){const t={},i=f(e,["name"]);i!=null&&m(t,["_url","name"],Xs(n,i));const r=f(e,["config"]);return r!=null&&XP(r,t),t}function ek(n,e){const t={},i=f(e,["name"]);i!=null&&m(t,["_url","name"],Xs(n,i));const r=f(e,["config"]);return r!=null&&jP(r,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tk extends Qs{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new $o(zs.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,r,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=RP(this.apiClient,e);return d=pe("cachedContents",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=bP(this.apiClient,e);return d=pe("cachedContents",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async get(e){var t,i,r,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=OP(this.apiClient,e);return d=pe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=LP(this.apiClient,e);return d=pe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async delete(e){var t,i,r,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=NP(this.apiClient,e);return d=pe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=DP(_),E=new dA;return Object.assign(E,T),E})}else{const h=xP(this.apiClient,e);return d=pe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=MP(_),E=new dA;return Object.assign(E,T),E})}}async update(e){var t,i,r,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=ek(this.apiClient,e);return d=pe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=ZP(this.apiClient,e);return d=pe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async listInternal(e){var t,i,r,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=zP(e);return d=pe("cachedContents",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=JP(_),E=new fA;return Object.assign(E,T),E})}else{const h=HP(e);return d=pe("cachedContents",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=$P(_),E=new fA;return Object.assign(E,T),E})}}}function sh(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}function vA(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ve(n){return this instanceof Ve?(this.v=n,this):new Ve(n)}function Di(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,a=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),r[Symbol.asyncIterator]=function(){return this},r;function u(C){return function(M){return Promise.resolve(M).then(C,T)}}function d(C,M){i[C]&&(r[C]=function(U){return new Promise(function(P,$){a.push([C,U,P,$])>1||p(C,U)})},M&&(r[C]=M(r[C])))}function p(C,M){try{h(i[C](M))}catch(U){E(a[0][3],U)}}function h(C){C.value instanceof Ve?Promise.resolve(C.value.v).then(_,T):E(a[0][2],C)}function _(C){p("next",C)}function T(C){p("throw",C)}function E(C,M){C(M),a.shift(),a.length&&p(a[0][0],a[0][1])}}function Pi(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof vA=="function"?vA(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=n[a]&&function(u){return new Promise(function(d,p){u=n[a](u),r(d,p,u.done,u.value)})}}function r(a,u,d,p){Promise.resolve(p).then(function(h){a({value:h,done:d})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nk(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:nI(t)}function nI(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function ik(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function TA(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const r=[];let a=!0;for(;i<t&&n[i].role==="model";)r.push(n[i]),a&&!nI(n[i])&&(a=!1),i++;a?e.push(...r):e.pop()}return e}class sk{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new rk(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}let rk=class{constructor(e,t,i,r={},a=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=r,this.history=a,this.sendPromise=Promise.resolve(),ik(a)}async sendMessage(e){var t;await this.sendPromise;const i=nn(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var a,u,d;const p=await r,h=(u=(a=p.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content,_=p.automaticFunctionCallingHistory,T=this.getHistory(!0).length;let E=[];_!=null&&(E=(d=_.slice(T))!==null&&d!==void 0?d:[]);const C=h?[h]:[];this.recordHistory(i,C,E)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const i=nn(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const a=await r;return this.processStreamResponse(a,i)}getHistory(e=!1){const t=e?TA(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return Di(this,arguments,function*(){var r,a,u,d,p,h;const _=[];try{for(var T=!0,E=Pi(e),C;C=yield Ve(E.next()),r=C.done,!r;T=!0){d=C.value,T=!1;const M=d;if(nk(M)){const U=(h=(p=M.candidates)===null||p===void 0?void 0:p[0])===null||h===void 0?void 0:h.content;U!==void 0&&_.push(U)}yield yield Ve(M)}}catch(M){a={error:M}}finally{try{!T&&!r&&(u=E.return)&&(yield Ve(u.call(E)))}finally{if(a)throw a.error}}this.recordHistory(t,_)})}recordHistory(e,t,i){let r=[];t.length>0&&t.every(a=>a.role!==void 0)?r=t:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...TA(i)):this.history.push(e),this.history.push(...r)}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dc extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,dc.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ok(n){const e={},t=f(n,["file"]);return t!=null&&m(e,["file"],t),e}function ak(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function lk(n){const e={},t=f(n,["name"]);return t!=null&&m(e,["_url","file"],WC(t)),e}function uk(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function ck(n){const e={},t=f(n,["name"]);return t!=null&&m(e,["_url","file"],WC(t)),e}function dk(n){const e={},t=f(n,["uris"]);return t!=null&&m(e,["uris"],t),e}function fk(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),t}function hk(n){const e={},t=f(n,["config"]);return t!=null&&fk(t,e),e}function pk(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const r=f(n,["files"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["files"],a)}return e}function mk(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["files"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),m(e,["files"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let gk=class extends Qs{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new $o(zs.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=hk(e);return a=pe("files",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),r.then(p=>{const h=pk(p),_=new gD;return Object.assign(_,h),_})}}async createInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=ok(e);return a=pe("upload/v1beta/files",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>{const h=ak(p),_=new yD;return Object.assign(_,h),_})}}async get(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=ck(e);return a=pe("files/{file}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>p)}}async delete(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=lk(e);return a=pe("files/{file}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),r.then(p=>{const h=uk(p),_=new _D;return Object.assign(_,h),_})}}async registerFilesInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=dk(e);return a=pe("files:register",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>{const h=mk(p),_=new vD;return Object.assign(_,h),_})}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kf(n){const e={},t=f(n,["data"]);if(t!=null&&m(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function yk(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>Pk(a))),m(e,["parts"],r)}const i=f(n,["role"]);return i!=null&&m(e,["role"],i),e}function _k(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function vk(n){const e={},t=f(n,["id"]);t!=null&&m(e,["id"],t);const i=f(n,["args"]);i!=null&&m(e,["args"],i);const r=f(n,["name"]);if(r!=null&&m(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Tk(n){const e={},t=f(n,["description"]);t!=null&&m(e,["description"],t);const i=f(n,["name"]);i!=null&&m(e,["name"],i);const r=f(n,["parameters"]);r!=null&&m(e,["parameters"],r);const a=f(n,["parametersJsonSchema"]);a!=null&&m(e,["parametersJsonSchema"],a);const u=f(n,["response"]);u!=null&&m(e,["response"],u);const d=f(n,["responseJsonSchema"]);if(d!=null&&m(e,["responseJsonSchema"],d),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Ek(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&m(e,["modelConfig"],t);const i=f(n,["responseJsonSchema"]);i!=null&&m(e,["responseJsonSchema"],i);const r=f(n,["audioTimestamp"]);r!=null&&m(e,["audioTimestamp"],r);const a=f(n,["candidateCount"]);a!=null&&m(e,["candidateCount"],a);const u=f(n,["enableAffectiveDialog"]);u!=null&&m(e,["enableAffectiveDialog"],u);const d=f(n,["frequencyPenalty"]);d!=null&&m(e,["frequencyPenalty"],d);const p=f(n,["logprobs"]);p!=null&&m(e,["logprobs"],p);const h=f(n,["maxOutputTokens"]);h!=null&&m(e,["maxOutputTokens"],h);const _=f(n,["mediaResolution"]);_!=null&&m(e,["mediaResolution"],_);const T=f(n,["presencePenalty"]);T!=null&&m(e,["presencePenalty"],T);const E=f(n,["responseLogprobs"]);E!=null&&m(e,["responseLogprobs"],E);const C=f(n,["responseMimeType"]);C!=null&&m(e,["responseMimeType"],C);const M=f(n,["responseModalities"]);M!=null&&m(e,["responseModalities"],M);const U=f(n,["responseSchema"]);U!=null&&m(e,["responseSchema"],U);const P=f(n,["routingConfig"]);P!=null&&m(e,["routingConfig"],P);const $=f(n,["seed"]);$!=null&&m(e,["seed"],$);const H=f(n,["speechConfig"]);H!=null&&m(e,["speechConfig"],H);const z=f(n,["stopSequences"]);z!=null&&m(e,["stopSequences"],z);const X=f(n,["temperature"]);X!=null&&m(e,["temperature"],X);const ue=f(n,["thinkingConfig"]);ue!=null&&m(e,["thinkingConfig"],ue);const W=f(n,["topK"]);W!=null&&m(e,["topK"],W);const N=f(n,["topP"]);if(N!=null&&m(e,["topP"],N),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Sk(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function Ak(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function wk(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig"],i);const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig","responseModalities"],r);const a=f(n,["temperature"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const h=f(n,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const _=f(n,["seed"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","seed"],_);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","speechConfig"],o_(T));const E=f(n,["thinkingConfig"]);e!==void 0&&E!=null&&m(e,["setup","generationConfig","thinkingConfig"],E);const C=f(n,["enableAffectiveDialog"]);e!==void 0&&C!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],C);const M=f(n,["systemInstruction"]);e!==void 0&&M!=null&&m(e,["setup","systemInstruction"],yk(nn(M)));const U=f(n,["tools"]);if(e!==void 0&&U!=null){let W=_l(U);Array.isArray(W)&&(W=W.map(N=>Vk(yl(N)))),m(e,["setup","tools"],W)}const P=f(n,["sessionResumption"]);e!==void 0&&P!=null&&m(e,["setup","sessionResumption"],kk(P));const $=f(n,["inputAudioTranscription"]);e!==void 0&&$!=null&&m(e,["setup","inputAudioTranscription"],$);const H=f(n,["outputAudioTranscription"]);e!==void 0&&H!=null&&m(e,["setup","outputAudioTranscription"],H);const z=f(n,["realtimeInputConfig"]);e!==void 0&&z!=null&&m(e,["setup","realtimeInputConfig"],z);const X=f(n,["contextWindowCompression"]);e!==void 0&&X!=null&&m(e,["setup","contextWindowCompression"],X);const ue=f(n,["proactivity"]);if(e!==void 0&&ue!=null&&m(e,["setup","proactivity"],ue),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function Ck(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig"],Ek(i));const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig","responseModalities"],r);const a=f(n,["temperature"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const h=f(n,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const _=f(n,["seed"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","seed"],_);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","speechConfig"],o_(T));const E=f(n,["thinkingConfig"]);e!==void 0&&E!=null&&m(e,["setup","generationConfig","thinkingConfig"],E);const C=f(n,["enableAffectiveDialog"]);e!==void 0&&C!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],C);const M=f(n,["systemInstruction"]);e!==void 0&&M!=null&&m(e,["setup","systemInstruction"],nn(M));const U=f(n,["tools"]);if(e!==void 0&&U!=null){let N=_l(U);Array.isArray(N)&&(N=N.map(D=>Uk(yl(D)))),m(e,["setup","tools"],N)}const P=f(n,["sessionResumption"]);e!==void 0&&P!=null&&m(e,["setup","sessionResumption"],P);const $=f(n,["inputAudioTranscription"]);e!==void 0&&$!=null&&m(e,["setup","inputAudioTranscription"],$);const H=f(n,["outputAudioTranscription"]);e!==void 0&&H!=null&&m(e,["setup","outputAudioTranscription"],H);const z=f(n,["realtimeInputConfig"]);e!==void 0&&z!=null&&m(e,["setup","realtimeInputConfig"],z);const X=f(n,["contextWindowCompression"]);e!==void 0&&X!=null&&m(e,["setup","contextWindowCompression"],X);const ue=f(n,["proactivity"]);e!==void 0&&ue!=null&&m(e,["setup","proactivity"],ue);const W=f(n,["explicitVadSignal"]);return e!==void 0&&W!=null&&m(e,["setup","explicitVadSignal"],W),t}function Ik(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["setup","model"],it(n,i));const r=f(e,["config"]);return r!=null&&m(t,["config"],wk(r,t)),t}function bk(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["setup","model"],it(n,i));const r=f(e,["config"]);return r!=null&&m(t,["config"],Ck(r,t)),t}function Rk(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&m(e,["musicGenerationConfig"],t),e}function xk(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>r)),m(e,["weightedPrompts"],i)}return e}function Nk(n){const e={},t=f(n,["media"]);if(t!=null){let h=zC(t);Array.isArray(h)&&(h=h.map(_=>kf(_))),m(e,["mediaChunks"],h)}const i=f(n,["audio"]);i!=null&&m(e,["audio"],kf(JC(i)));const r=f(n,["audioStreamEnd"]);r!=null&&m(e,["audioStreamEnd"],r);const a=f(n,["video"]);a!=null&&m(e,["video"],kf($C(a)));const u=f(n,["text"]);u!=null&&m(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&m(e,["activityStart"],d);const p=f(n,["activityEnd"]);return p!=null&&m(e,["activityEnd"],p),e}function Mk(n){const e={},t=f(n,["media"]);if(t!=null){let h=zC(t);Array.isArray(h)&&(h=h.map(_=>_)),m(e,["mediaChunks"],h)}const i=f(n,["audio"]);i!=null&&m(e,["audio"],JC(i));const r=f(n,["audioStreamEnd"]);r!=null&&m(e,["audioStreamEnd"],r);const a=f(n,["video"]);a!=null&&m(e,["video"],$C(a));const u=f(n,["text"]);u!=null&&m(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&m(e,["activityStart"],d);const p=f(n,["activityEnd"]);return p!=null&&m(e,["activityEnd"],p),e}function Dk(n){const e={},t=f(n,["setupComplete"]);t!=null&&m(e,["setupComplete"],t);const i=f(n,["serverContent"]);i!=null&&m(e,["serverContent"],i);const r=f(n,["toolCall"]);r!=null&&m(e,["toolCall"],r);const a=f(n,["toolCallCancellation"]);a!=null&&m(e,["toolCallCancellation"],a);const u=f(n,["usageMetadata"]);u!=null&&m(e,["usageMetadata"],Lk(u));const d=f(n,["goAway"]);d!=null&&m(e,["goAway"],d);const p=f(n,["sessionResumptionUpdate"]);p!=null&&m(e,["sessionResumptionUpdate"],p);const h=f(n,["voiceActivityDetectionSignal"]);h!=null&&m(e,["voiceActivityDetectionSignal"],h);const _=f(n,["voiceActivity"]);return _!=null&&m(e,["voiceActivity"],Ok(_)),e}function Pk(n){const e={},t=f(n,["mediaResolution"]);t!=null&&m(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const r=f(n,["executableCode"]);r!=null&&m(e,["executableCode"],r);const a=f(n,["fileData"]);a!=null&&m(e,["fileData"],_k(a));const u=f(n,["functionCall"]);u!=null&&m(e,["functionCall"],vk(u));const d=f(n,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const p=f(n,["inlineData"]);p!=null&&m(e,["inlineData"],kf(p));const h=f(n,["text"]);h!=null&&m(e,["text"],h);const _=f(n,["thought"]);_!=null&&m(e,["thought"],_);const T=f(n,["thoughtSignature"]);T!=null&&m(e,["thoughtSignature"],T);const E=f(n,["videoMetadata"]);return E!=null&&m(e,["videoMetadata"],E),e}function kk(n){const e={},t=f(n,["handle"]);if(t!=null&&m(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Vk(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&m(e,["computerUse"],t);const i=f(n,["fileSearch"]);i!=null&&m(e,["fileSearch"],i);const r=f(n,["codeExecution"]);if(r!=null&&m(e,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(n,["functionDeclarations"]);if(a!=null){let _=a;Array.isArray(_)&&(_=_.map(T=>T)),m(e,["functionDeclarations"],_)}const u=f(n,["googleMaps"]);u!=null&&m(e,["googleMaps"],Sk(u));const d=f(n,["googleSearch"]);d!=null&&m(e,["googleSearch"],Ak(d));const p=f(n,["googleSearchRetrieval"]);p!=null&&m(e,["googleSearchRetrieval"],p);const h=f(n,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function Uk(n){const e={},t=f(n,["retrieval"]);t!=null&&m(e,["retrieval"],t);const i=f(n,["computerUse"]);if(i!=null&&m(e,["computerUse"],i),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=f(n,["codeExecution"]);r!=null&&m(e,["codeExecution"],r);const a=f(n,["enterpriseWebSearch"]);a!=null&&m(e,["enterpriseWebSearch"],a);const u=f(n,["functionDeclarations"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(E=>Tk(E))),m(e,["functionDeclarations"],T)}const d=f(n,["googleMaps"]);d!=null&&m(e,["googleMaps"],d);const p=f(n,["googleSearch"]);p!=null&&m(e,["googleSearch"],p);const h=f(n,["googleSearchRetrieval"]);h!=null&&m(e,["googleSearchRetrieval"],h);const _=f(n,["urlContext"]);return _!=null&&m(e,["urlContext"],_),e}function Lk(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&m(e,["promptTokenCount"],t);const i=f(n,["cachedContentTokenCount"]);i!=null&&m(e,["cachedContentTokenCount"],i);const r=f(n,["candidatesTokenCount"]);r!=null&&m(e,["responseTokenCount"],r);const a=f(n,["toolUsePromptTokenCount"]);a!=null&&m(e,["toolUsePromptTokenCount"],a);const u=f(n,["thoughtsTokenCount"]);u!=null&&m(e,["thoughtsTokenCount"],u);const d=f(n,["totalTokenCount"]);d!=null&&m(e,["totalTokenCount"],d);const p=f(n,["promptTokensDetails"]);if(p!=null){let C=p;Array.isArray(C)&&(C=C.map(M=>M)),m(e,["promptTokensDetails"],C)}const h=f(n,["cacheTokensDetails"]);if(h!=null){let C=h;Array.isArray(C)&&(C=C.map(M=>M)),m(e,["cacheTokensDetails"],C)}const _=f(n,["candidatesTokensDetails"]);if(_!=null){let C=_;Array.isArray(C)&&(C=C.map(M=>M)),m(e,["responseTokensDetails"],C)}const T=f(n,["toolUsePromptTokensDetails"]);if(T!=null){let C=T;Array.isArray(C)&&(C=C.map(M=>M)),m(e,["toolUsePromptTokensDetails"],C)}const E=f(n,["trafficType"]);return E!=null&&m(e,["trafficType"],E),e}function Ok(n){const e={},t=f(n,["type"]);return t!=null&&m(e,["voiceActivityType"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fk(n,e){const t={},i=f(n,["data"]);if(i!=null&&m(t,["data"],i),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=f(n,["mimeType"]);return r!=null&&m(t,["mimeType"],r),t}function Bk(n,e){const t={},i=f(n,["content"]);i!=null&&m(t,["content"],i);const r=f(n,["citationMetadata"]);r!=null&&m(t,["citationMetadata"],qk(r));const a=f(n,["tokenCount"]);a!=null&&m(t,["tokenCount"],a);const u=f(n,["finishReason"]);u!=null&&m(t,["finishReason"],u);const d=f(n,["avgLogprobs"]);d!=null&&m(t,["avgLogprobs"],d);const p=f(n,["groundingMetadata"]);p!=null&&m(t,["groundingMetadata"],p);const h=f(n,["index"]);h!=null&&m(t,["index"],h);const _=f(n,["logprobsResult"]);_!=null&&m(t,["logprobsResult"],_);const T=f(n,["safetyRatings"]);if(T!=null){let C=T;Array.isArray(C)&&(C=C.map(M=>M)),m(t,["safetyRatings"],C)}const E=f(n,["urlContextMetadata"]);return E!=null&&m(t,["urlContextMetadata"],E),t}function qk(n,e){const t={},i=f(n,["citationSources"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),m(t,["citations"],r)}return t}function Gk(n,e,t){const i={},r=f(e,["model"]);r!=null&&m(i,["_url","model"],it(n,r));const a=f(e,["contents"]);if(a!=null){let u=Xn(a);Array.isArray(u)&&(u=u.map(d=>d)),m(i,["contents"],u)}return i}function Hk(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=f(n,["tokensInfo"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),m(t,["tokensInfo"],a)}return t}function zk(n,e){const t={},i=f(n,["values"]);i!=null&&m(t,["values"],i);const r=f(n,["statistics"]);return r!=null&&m(t,["statistics"],$k(r)),t}function $k(n,e){const t={},i=f(n,["truncated"]);i!=null&&m(t,["truncated"],i);const r=f(n,["token_count"]);return r!=null&&m(t,["tokenCount"],r),t}function Sc(n,e){const t={},i=f(n,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>eV(u))),m(t,["parts"],a)}const r=f(n,["role"]);return r!=null&&m(t,["role"],r),t}function Jk(n,e){const t={},i=f(n,["controlType"]);i!=null&&m(t,["controlType"],i);const r=f(n,["enableControlImageComputation"]);return r!=null&&m(t,["computeControl"],r),t}function Kk(n,e){const t={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function Yk(n,e,t){const i={},r=f(n,["systemInstruction"]);e!==void 0&&r!=null&&m(e,["systemInstruction"],nn(r));const a=f(n,["tools"]);if(e!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(p=>oI(p))),m(e,["tools"],d)}const u=f(n,["generationConfig"]);return e!==void 0&&u!=null&&m(e,["generationConfig"],F2(u)),i}function Wk(n,e,t){const i={},r=f(e,["model"]);r!=null&&m(i,["_url","model"],it(n,r));const a=f(e,["contents"]);if(a!=null){let d=Xn(a);Array.isArray(d)&&(d=d.map(p=>Sc(p))),m(i,["contents"],d)}const u=f(e,["config"]);return u!=null&&Kk(u),i}function Qk(n,e,t){const i={},r=f(e,["model"]);r!=null&&m(i,["_url","model"],it(n,r));const a=f(e,["contents"]);if(a!=null){let d=Xn(a);Array.isArray(d)&&(d=d.map(p=>p)),m(i,["contents"],d)}const u=f(e,["config"]);return u!=null&&Yk(u,i),i}function Xk(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=f(n,["totalTokens"]);r!=null&&m(t,["totalTokens"],r);const a=f(n,["cachedContentTokenCount"]);return a!=null&&m(t,["cachedContentTokenCount"],a),t}function jk(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=f(n,["totalTokens"]);return r!=null&&m(t,["totalTokens"],r),t}function Zk(n,e,t){const i={},r=f(e,["model"]);return r!=null&&m(i,["_url","name"],it(n,r)),i}function e2(n,e,t){const i={},r=f(e,["model"]);return r!=null&&m(i,["_url","name"],it(n,r)),i}function t2(n,e){const t={},i=f(n,["sdkHttpResponse"]);return i!=null&&m(t,["sdkHttpResponse"],i),t}function n2(n,e){const t={},i=f(n,["sdkHttpResponse"]);return i!=null&&m(t,["sdkHttpResponse"],i),t}function i2(n,e,t){const i={},r=f(n,["outputGcsUri"]);e!==void 0&&r!=null&&m(e,["parameters","storageUri"],r);const a=f(n,["negativePrompt"]);e!==void 0&&a!=null&&m(e,["parameters","negativePrompt"],a);const u=f(n,["numberOfImages"]);e!==void 0&&u!=null&&m(e,["parameters","sampleCount"],u);const d=f(n,["aspectRatio"]);e!==void 0&&d!=null&&m(e,["parameters","aspectRatio"],d);const p=f(n,["guidanceScale"]);e!==void 0&&p!=null&&m(e,["parameters","guidanceScale"],p);const h=f(n,["seed"]);e!==void 0&&h!=null&&m(e,["parameters","seed"],h);const _=f(n,["safetyFilterLevel"]);e!==void 0&&_!=null&&m(e,["parameters","safetySetting"],_);const T=f(n,["personGeneration"]);e!==void 0&&T!=null&&m(e,["parameters","personGeneration"],T);const E=f(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&m(e,["parameters","includeSafetyAttributes"],E);const C=f(n,["includeRaiReason"]);e!==void 0&&C!=null&&m(e,["parameters","includeRaiReason"],C);const M=f(n,["language"]);e!==void 0&&M!=null&&m(e,["parameters","language"],M);const U=f(n,["outputMimeType"]);e!==void 0&&U!=null&&m(e,["parameters","outputOptions","mimeType"],U);const P=f(n,["outputCompressionQuality"]);e!==void 0&&P!=null&&m(e,["parameters","outputOptions","compressionQuality"],P);const $=f(n,["addWatermark"]);e!==void 0&&$!=null&&m(e,["parameters","addWatermark"],$);const H=f(n,["labels"]);e!==void 0&&H!=null&&m(e,["labels"],H);const z=f(n,["editMode"]);e!==void 0&&z!=null&&m(e,["parameters","editMode"],z);const X=f(n,["baseSteps"]);return e!==void 0&&X!=null&&m(e,["parameters","editConfig","baseSteps"],X),i}function s2(n,e,t){const i={},r=f(e,["model"]);r!=null&&m(i,["_url","model"],it(n,r));const a=f(e,["prompt"]);a!=null&&m(i,["instances[0]","prompt"],a);const u=f(e,["referenceImages"]);if(u!=null){let p=u;Array.isArray(p)&&(p=p.map(h=>oV(h))),m(i,["instances[0]","referenceImages"],p)}const d=f(e,["config"]);return d!=null&&i2(d,i),i}function r2(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=f(n,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>Uh(u))),m(t,["generatedImages"],a)}return t}function o2(n,e,t){const i={},r=f(n,["taskType"]);e!==void 0&&r!=null&&m(e,["requests[]","taskType"],r);const a=f(n,["title"]);e!==void 0&&a!=null&&m(e,["requests[]","title"],a);const u=f(n,["outputDimensionality"]);if(e!==void 0&&u!=null&&m(e,["requests[]","outputDimensionality"],u),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function a2(n,e,t){const i={};let r=f(t,["embeddingApiType"]);if(r===void 0&&(r="PREDICT"),r==="PREDICT"){const h=f(n,["taskType"]);e!==void 0&&h!=null&&m(e,["instances[]","task_type"],h)}else if(r==="EMBED_CONTENT"){const h=f(n,["taskType"]);e!==void 0&&h!=null&&m(e,["taskType"],h)}let a=f(t,["embeddingApiType"]);if(a===void 0&&(a="PREDICT"),a==="PREDICT"){const h=f(n,["title"]);e!==void 0&&h!=null&&m(e,["instances[]","title"],h)}else if(a==="EMBED_CONTENT"){const h=f(n,["title"]);e!==void 0&&h!=null&&m(e,["title"],h)}let u=f(t,["embeddingApiType"]);if(u===void 0&&(u="PREDICT"),u==="PREDICT"){const h=f(n,["outputDimensionality"]);e!==void 0&&h!=null&&m(e,["parameters","outputDimensionality"],h)}else if(u==="EMBED_CONTENT"){const h=f(n,["outputDimensionality"]);e!==void 0&&h!=null&&m(e,["outputDimensionality"],h)}let d=f(t,["embeddingApiType"]);if(d===void 0&&(d="PREDICT"),d==="PREDICT"){const h=f(n,["mimeType"]);e!==void 0&&h!=null&&m(e,["instances[]","mimeType"],h)}let p=f(t,["embeddingApiType"]);if(p===void 0&&(p="PREDICT"),p==="PREDICT"){const h=f(n,["autoTruncate"]);e!==void 0&&h!=null&&m(e,["parameters","autoTruncate"],h)}else if(p==="EMBED_CONTENT"){const h=f(n,["autoTruncate"]);e!==void 0&&h!=null&&m(e,["autoTruncate"],h)}return i}function l2(n,e,t){const i={},r=f(e,["model"]);r!=null&&m(i,["_url","model"],it(n,r));const a=f(e,["contents"]);if(a!=null){let h=i_(n,a);Array.isArray(h)&&(h=h.map(_=>_)),m(i,["requests[]","content"],h)}const u=f(e,["content"]);u!=null&&Sc(nn(u));const d=f(e,["config"]);d!=null&&o2(d,i);const p=f(e,["model"]);return p!==void 0&&m(i,["requests[]","model"],it(n,p)),i}function u2(n,e,t){const i={},r=f(e,["model"]);r!=null&&m(i,["_url","model"],it(n,r));let a=f(t,["embeddingApiType"]);if(a===void 0&&(a="PREDICT"),a==="PREDICT"){const p=f(e,["contents"]);if(p!=null){let h=i_(n,p);Array.isArray(h)&&(h=h.map(_=>_)),m(i,["instances[]","content"],h)}}let u=f(t,["embeddingApiType"]);if(u===void 0&&(u="PREDICT"),u==="EMBED_CONTENT"){const p=f(e,["content"]);p!=null&&m(i,["content"],nn(p))}const d=f(e,["config"]);return d!=null&&a2(d,i,t),i}function c2(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=f(n,["embeddings"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>d)),m(t,["embeddings"],u)}const a=f(n,["metadata"]);return a!=null&&m(t,["metadata"],a),t}function d2(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=f(n,["predictions[]","embeddings"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>zk(d))),m(t,["embeddings"],u)}const a=f(n,["metadata"]);if(a!=null&&m(t,["metadata"],a),e&&f(e,["embeddingApiType"])==="EMBED_CONTENT"){const u=f(n,["embedding"]),d=f(n,["usageMetadata"]),p=f(n,["truncated"]);if(u){const h={};d&&d.promptTokenCount&&(h.tokenCount=d.promptTokenCount),p&&(h.truncated=p),u.statistics=h,m(t,["embeddings"],[u])}}return t}function f2(n,e){const t={},i=f(n,["endpoint"]);i!=null&&m(t,["name"],i);const r=f(n,["deployedModelId"]);return r!=null&&m(t,["deployedModelId"],r),t}function h2(n,e){const t={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["fileUri"]);i!=null&&m(t,["fileUri"],i);const r=f(n,["mimeType"]);return r!=null&&m(t,["mimeType"],r),t}function p2(n,e){const t={},i=f(n,["id"]);i!=null&&m(t,["id"],i);const r=f(n,["args"]);r!=null&&m(t,["args"],r);const a=f(n,["name"]);if(a!=null&&m(t,["name"],a),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function m2(n,e){const t={},i=f(n,["allowedFunctionNames"]);i!=null&&m(t,["allowedFunctionNames"],i);const r=f(n,["mode"]);if(r!=null&&m(t,["mode"],r),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function g2(n,e){const t={},i=f(n,["description"]);i!=null&&m(t,["description"],i);const r=f(n,["name"]);r!=null&&m(t,["name"],r);const a=f(n,["parameters"]);a!=null&&m(t,["parameters"],a);const u=f(n,["parametersJsonSchema"]);u!=null&&m(t,["parametersJsonSchema"],u);const d=f(n,["response"]);d!=null&&m(t,["response"],d);const p=f(n,["responseJsonSchema"]);if(p!=null&&m(t,["responseJsonSchema"],p),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function y2(n,e,t,i){const r={},a=f(e,["systemInstruction"]);t!==void 0&&a!=null&&m(t,["systemInstruction"],Sc(nn(a)));const u=f(e,["temperature"]);u!=null&&m(r,["temperature"],u);const d=f(e,["topP"]);d!=null&&m(r,["topP"],d);const p=f(e,["topK"]);p!=null&&m(r,["topK"],p);const h=f(e,["candidateCount"]);h!=null&&m(r,["candidateCount"],h);const _=f(e,["maxOutputTokens"]);_!=null&&m(r,["maxOutputTokens"],_);const T=f(e,["stopSequences"]);T!=null&&m(r,["stopSequences"],T);const E=f(e,["responseLogprobs"]);E!=null&&m(r,["responseLogprobs"],E);const C=f(e,["logprobs"]);C!=null&&m(r,["logprobs"],C);const M=f(e,["presencePenalty"]);M!=null&&m(r,["presencePenalty"],M);const U=f(e,["frequencyPenalty"]);U!=null&&m(r,["frequencyPenalty"],U);const P=f(e,["seed"]);P!=null&&m(r,["seed"],P);const $=f(e,["responseMimeType"]);$!=null&&m(r,["responseMimeType"],$);const H=f(e,["responseSchema"]);H!=null&&m(r,["responseSchema"],s_(H));const z=f(e,["responseJsonSchema"]);if(z!=null&&m(r,["responseJsonSchema"],z),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const X=f(e,["safetySettings"]);if(t!==void 0&&X!=null){let ke=X;Array.isArray(ke)&&(ke=ke.map(xe=>aV(xe))),m(t,["safetySettings"],ke)}const ue=f(e,["tools"]);if(t!==void 0&&ue!=null){let ke=_l(ue);Array.isArray(ke)&&(ke=ke.map(xe=>pV(yl(xe)))),m(t,["tools"],ke)}const W=f(e,["toolConfig"]);if(t!==void 0&&W!=null&&m(t,["toolConfig"],hV(W)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const N=f(e,["cachedContent"]);t!==void 0&&N!=null&&m(t,["cachedContent"],Xs(n,N));const D=f(e,["responseModalities"]);D!=null&&m(r,["responseModalities"],D);const x=f(e,["mediaResolution"]);x!=null&&m(r,["mediaResolution"],x);const L=f(e,["speechConfig"]);if(L!=null&&m(r,["speechConfig"],r_(L)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const k=f(e,["thinkingConfig"]);k!=null&&m(r,["thinkingConfig"],k);const q=f(e,["imageConfig"]);q!=null&&m(r,["imageConfig"],z2(q));const V=f(e,["enableEnhancedCivicAnswers"]);if(V!=null&&m(r,["enableEnhancedCivicAnswers"],V),f(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}function _2(n,e,t,i){const r={},a=f(e,["systemInstruction"]);t!==void 0&&a!=null&&m(t,["systemInstruction"],nn(a));const u=f(e,["temperature"]);u!=null&&m(r,["temperature"],u);const d=f(e,["topP"]);d!=null&&m(r,["topP"],d);const p=f(e,["topK"]);p!=null&&m(r,["topK"],p);const h=f(e,["candidateCount"]);h!=null&&m(r,["candidateCount"],h);const _=f(e,["maxOutputTokens"]);_!=null&&m(r,["maxOutputTokens"],_);const T=f(e,["stopSequences"]);T!=null&&m(r,["stopSequences"],T);const E=f(e,["responseLogprobs"]);E!=null&&m(r,["responseLogprobs"],E);const C=f(e,["logprobs"]);C!=null&&m(r,["logprobs"],C);const M=f(e,["presencePenalty"]);M!=null&&m(r,["presencePenalty"],M);const U=f(e,["frequencyPenalty"]);U!=null&&m(r,["frequencyPenalty"],U);const P=f(e,["seed"]);P!=null&&m(r,["seed"],P);const $=f(e,["responseMimeType"]);$!=null&&m(r,["responseMimeType"],$);const H=f(e,["responseSchema"]);H!=null&&m(r,["responseSchema"],s_(H));const z=f(e,["responseJsonSchema"]);z!=null&&m(r,["responseJsonSchema"],z);const X=f(e,["routingConfig"]);X!=null&&m(r,["routingConfig"],X);const ue=f(e,["modelSelectionConfig"]);ue!=null&&m(r,["modelConfig"],ue);const W=f(e,["safetySettings"]);if(t!==void 0&&W!=null){let fe=W;Array.isArray(fe)&&(fe=fe.map(be=>be)),m(t,["safetySettings"],fe)}const N=f(e,["tools"]);if(t!==void 0&&N!=null){let fe=_l(N);Array.isArray(fe)&&(fe=fe.map(be=>oI(yl(be)))),m(t,["tools"],fe)}const D=f(e,["toolConfig"]);t!==void 0&&D!=null&&m(t,["toolConfig"],D);const x=f(e,["labels"]);t!==void 0&&x!=null&&m(t,["labels"],x);const L=f(e,["cachedContent"]);t!==void 0&&L!=null&&m(t,["cachedContent"],Xs(n,L));const k=f(e,["responseModalities"]);k!=null&&m(r,["responseModalities"],k);const q=f(e,["mediaResolution"]);q!=null&&m(r,["mediaResolution"],q);const V=f(e,["speechConfig"]);V!=null&&m(r,["speechConfig"],r_(V));const ke=f(e,["audioTimestamp"]);ke!=null&&m(r,["audioTimestamp"],ke);const xe=f(e,["thinkingConfig"]);xe!=null&&m(r,["thinkingConfig"],xe);const Z=f(e,["imageConfig"]);if(Z!=null&&m(r,["imageConfig"],$2(Z)),f(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const ce=f(e,["modelArmorConfig"]);return t!==void 0&&ce!=null&&m(t,["modelArmorConfig"],ce),r}function EA(n,e,t){const i={},r=f(e,["model"]);r!=null&&m(i,["_url","model"],it(n,r));const a=f(e,["contents"]);if(a!=null){let d=Xn(a);Array.isArray(d)&&(d=d.map(p=>Sc(p))),m(i,["contents"],d)}const u=f(e,["config"]);return u!=null&&m(i,["generationConfig"],y2(n,u,i)),i}function SA(n,e,t){const i={},r=f(e,["model"]);r!=null&&m(i,["_url","model"],it(n,r));const a=f(e,["contents"]);if(a!=null){let d=Xn(a);Array.isArray(d)&&(d=d.map(p=>p)),m(i,["contents"],d)}const u=f(e,["config"]);return u!=null&&m(i,["generationConfig"],_2(n,u,i)),i}function AA(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=f(n,["candidates"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(_=>Bk(_))),m(t,["candidates"],h)}const a=f(n,["modelVersion"]);a!=null&&m(t,["modelVersion"],a);const u=f(n,["promptFeedback"]);u!=null&&m(t,["promptFeedback"],u);const d=f(n,["responseId"]);d!=null&&m(t,["responseId"],d);const p=f(n,["usageMetadata"]);return p!=null&&m(t,["usageMetadata"],p),t}function wA(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=f(n,["candidates"]);if(r!=null){let _=r;Array.isArray(_)&&(_=_.map(T=>T)),m(t,["candidates"],_)}const a=f(n,["createTime"]);a!=null&&m(t,["createTime"],a);const u=f(n,["modelVersion"]);u!=null&&m(t,["modelVersion"],u);const d=f(n,["promptFeedback"]);d!=null&&m(t,["promptFeedback"],d);const p=f(n,["responseId"]);p!=null&&m(t,["responseId"],p);const h=f(n,["usageMetadata"]);return h!=null&&m(t,["usageMetadata"],h),t}function v2(n,e,t){const i={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=f(n,["numberOfImages"]);e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r);const a=f(n,["aspectRatio"]);e!==void 0&&a!=null&&m(e,["parameters","aspectRatio"],a);const u=f(n,["guidanceScale"]);if(e!==void 0&&u!=null&&m(e,["parameters","guidanceScale"],u),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=f(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&m(e,["parameters","safetySetting"],d);const p=f(n,["personGeneration"]);e!==void 0&&p!=null&&m(e,["parameters","personGeneration"],p);const h=f(n,["includeSafetyAttributes"]);e!==void 0&&h!=null&&m(e,["parameters","includeSafetyAttributes"],h);const _=f(n,["includeRaiReason"]);e!==void 0&&_!=null&&m(e,["parameters","includeRaiReason"],_);const T=f(n,["language"]);e!==void 0&&T!=null&&m(e,["parameters","language"],T);const E=f(n,["outputMimeType"]);e!==void 0&&E!=null&&m(e,["parameters","outputOptions","mimeType"],E);const C=f(n,["outputCompressionQuality"]);if(e!==void 0&&C!=null&&m(e,["parameters","outputOptions","compressionQuality"],C),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const M=f(n,["imageSize"]);if(e!==void 0&&M!=null&&m(e,["parameters","sampleImageSize"],M),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function T2(n,e,t){const i={},r=f(n,["outputGcsUri"]);e!==void 0&&r!=null&&m(e,["parameters","storageUri"],r);const a=f(n,["negativePrompt"]);e!==void 0&&a!=null&&m(e,["parameters","negativePrompt"],a);const u=f(n,["numberOfImages"]);e!==void 0&&u!=null&&m(e,["parameters","sampleCount"],u);const d=f(n,["aspectRatio"]);e!==void 0&&d!=null&&m(e,["parameters","aspectRatio"],d);const p=f(n,["guidanceScale"]);e!==void 0&&p!=null&&m(e,["parameters","guidanceScale"],p);const h=f(n,["seed"]);e!==void 0&&h!=null&&m(e,["parameters","seed"],h);const _=f(n,["safetyFilterLevel"]);e!==void 0&&_!=null&&m(e,["parameters","safetySetting"],_);const T=f(n,["personGeneration"]);e!==void 0&&T!=null&&m(e,["parameters","personGeneration"],T);const E=f(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&m(e,["parameters","includeSafetyAttributes"],E);const C=f(n,["includeRaiReason"]);e!==void 0&&C!=null&&m(e,["parameters","includeRaiReason"],C);const M=f(n,["language"]);e!==void 0&&M!=null&&m(e,["parameters","language"],M);const U=f(n,["outputMimeType"]);e!==void 0&&U!=null&&m(e,["parameters","outputOptions","mimeType"],U);const P=f(n,["outputCompressionQuality"]);e!==void 0&&P!=null&&m(e,["parameters","outputOptions","compressionQuality"],P);const $=f(n,["addWatermark"]);e!==void 0&&$!=null&&m(e,["parameters","addWatermark"],$);const H=f(n,["labels"]);e!==void 0&&H!=null&&m(e,["labels"],H);const z=f(n,["imageSize"]);e!==void 0&&z!=null&&m(e,["parameters","sampleImageSize"],z);const X=f(n,["enhancePrompt"]);return e!==void 0&&X!=null&&m(e,["parameters","enhancePrompt"],X),i}function E2(n,e,t){const i={},r=f(e,["model"]);r!=null&&m(i,["_url","model"],it(n,r));const a=f(e,["prompt"]);a!=null&&m(i,["instances[0]","prompt"],a);const u=f(e,["config"]);return u!=null&&v2(u,i),i}function S2(n,e,t){const i={},r=f(e,["model"]);r!=null&&m(i,["_url","model"],it(n,r));const a=f(e,["prompt"]);a!=null&&m(i,["instances[0]","prompt"],a);const u=f(e,["config"]);return u!=null&&T2(u,i),i}function A2(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=f(n,["predictions"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>V2(d))),m(t,["generatedImages"],u)}const a=f(n,["positivePromptSafetyAttributes"]);return a!=null&&m(t,["positivePromptSafetyAttributes"],sI(a)),t}function w2(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=f(n,["predictions"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>Uh(d))),m(t,["generatedImages"],u)}const a=f(n,["positivePromptSafetyAttributes"]);return a!=null&&m(t,["positivePromptSafetyAttributes"],rI(a)),t}function C2(n,e,t){const i={},r=f(n,["numberOfVideos"]);if(e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=f(n,["durationSeconds"]);if(e!==void 0&&a!=null&&m(e,["parameters","durationSeconds"],a),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&m(e,["parameters","aspectRatio"],u);const d=f(n,["resolution"]);e!==void 0&&d!=null&&m(e,["parameters","resolution"],d);const p=f(n,["personGeneration"]);if(e!==void 0&&p!=null&&m(e,["parameters","personGeneration"],p),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const h=f(n,["negativePrompt"]);e!==void 0&&h!=null&&m(e,["parameters","negativePrompt"],h);const _=f(n,["enhancePrompt"]);if(e!==void 0&&_!=null&&m(e,["parameters","enhancePrompt"],_),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const T=f(n,["lastFrame"]);e!==void 0&&T!=null&&m(e,["instances[0]","lastFrame"],Lh(T));const E=f(n,["referenceImages"]);if(e!==void 0&&E!=null){let C=E;Array.isArray(C)&&(C=C.map(M=>bV(M))),m(e,["instances[0]","referenceImages"],C)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return i}function I2(n,e,t){const i={},r=f(n,["numberOfVideos"]);e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r);const a=f(n,["outputGcsUri"]);e!==void 0&&a!=null&&m(e,["parameters","storageUri"],a);const u=f(n,["fps"]);e!==void 0&&u!=null&&m(e,["parameters","fps"],u);const d=f(n,["durationSeconds"]);e!==void 0&&d!=null&&m(e,["parameters","durationSeconds"],d);const p=f(n,["seed"]);e!==void 0&&p!=null&&m(e,["parameters","seed"],p);const h=f(n,["aspectRatio"]);e!==void 0&&h!=null&&m(e,["parameters","aspectRatio"],h);const _=f(n,["resolution"]);e!==void 0&&_!=null&&m(e,["parameters","resolution"],_);const T=f(n,["personGeneration"]);e!==void 0&&T!=null&&m(e,["parameters","personGeneration"],T);const E=f(n,["pubsubTopic"]);e!==void 0&&E!=null&&m(e,["parameters","pubsubTopic"],E);const C=f(n,["negativePrompt"]);e!==void 0&&C!=null&&m(e,["parameters","negativePrompt"],C);const M=f(n,["enhancePrompt"]);e!==void 0&&M!=null&&m(e,["parameters","enhancePrompt"],M);const U=f(n,["generateAudio"]);e!==void 0&&U!=null&&m(e,["parameters","generateAudio"],U);const P=f(n,["lastFrame"]);e!==void 0&&P!=null&&m(e,["instances[0]","lastFrame"],Li(P));const $=f(n,["referenceImages"]);if(e!==void 0&&$!=null){let X=$;Array.isArray(X)&&(X=X.map(ue=>RV(ue))),m(e,["instances[0]","referenceImages"],X)}const H=f(n,["mask"]);e!==void 0&&H!=null&&m(e,["instances[0]","mask"],IV(H));const z=f(n,["compressionQuality"]);return e!==void 0&&z!=null&&m(e,["parameters","compressionQuality"],z),i}function b2(n,e){const t={},i=f(n,["name"]);i!=null&&m(t,["name"],i);const r=f(n,["metadata"]);r!=null&&m(t,["metadata"],r);const a=f(n,["done"]);a!=null&&m(t,["done"],a);const u=f(n,["error"]);u!=null&&m(t,["error"],u);const d=f(n,["response","generateVideoResponse"]);return d!=null&&m(t,["response"],M2(d)),t}function R2(n,e){const t={},i=f(n,["name"]);i!=null&&m(t,["name"],i);const r=f(n,["metadata"]);r!=null&&m(t,["metadata"],r);const a=f(n,["done"]);a!=null&&m(t,["done"],a);const u=f(n,["error"]);u!=null&&m(t,["error"],u);const d=f(n,["response"]);return d!=null&&m(t,["response"],D2(d)),t}function x2(n,e,t){const i={},r=f(e,["model"]);r!=null&&m(i,["_url","model"],it(n,r));const a=f(e,["prompt"]);a!=null&&m(i,["instances[0]","prompt"],a);const u=f(e,["image"]);u!=null&&m(i,["instances[0]","image"],Lh(u));const d=f(e,["video"]);d!=null&&m(i,["instances[0]","video"],aI(d));const p=f(e,["source"]);p!=null&&P2(p,i);const h=f(e,["config"]);return h!=null&&C2(h,i),i}function N2(n,e,t){const i={},r=f(e,["model"]);r!=null&&m(i,["_url","model"],it(n,r));const a=f(e,["prompt"]);a!=null&&m(i,["instances[0]","prompt"],a);const u=f(e,["image"]);u!=null&&m(i,["instances[0]","image"],Li(u));const d=f(e,["video"]);d!=null&&m(i,["instances[0]","video"],lI(d));const p=f(e,["source"]);p!=null&&k2(p,i);const h=f(e,["config"]);return h!=null&&I2(h,i),i}function M2(n,e){const t={},i=f(n,["generatedSamples"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(d=>L2(d))),m(t,["generatedVideos"],u)}const r=f(n,["raiMediaFilteredCount"]);r!=null&&m(t,["raiMediaFilteredCount"],r);const a=f(n,["raiMediaFilteredReasons"]);return a!=null&&m(t,["raiMediaFilteredReasons"],a),t}function D2(n,e){const t={},i=f(n,["videos"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(d=>O2(d))),m(t,["generatedVideos"],u)}const r=f(n,["raiMediaFilteredCount"]);r!=null&&m(t,["raiMediaFilteredCount"],r);const a=f(n,["raiMediaFilteredReasons"]);return a!=null&&m(t,["raiMediaFilteredReasons"],a),t}function P2(n,e,t){const i={},r=f(n,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const a=f(n,["image"]);e!==void 0&&a!=null&&m(e,["instances[0]","image"],Lh(a));const u=f(n,["video"]);return e!==void 0&&u!=null&&m(e,["instances[0]","video"],aI(u)),i}function k2(n,e,t){const i={},r=f(n,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const a=f(n,["image"]);e!==void 0&&a!=null&&m(e,["instances[0]","image"],Li(a));const u=f(n,["video"]);return e!==void 0&&u!=null&&m(e,["instances[0]","video"],lI(u)),i}function V2(n,e){const t={},i=f(n,["_self"]);i!=null&&m(t,["image"],J2(i));const r=f(n,["raiFilteredReason"]);r!=null&&m(t,["raiFilteredReason"],r);const a=f(n,["_self"]);return a!=null&&m(t,["safetyAttributes"],sI(a)),t}function Uh(n,e){const t={},i=f(n,["_self"]);i!=null&&m(t,["image"],iI(i));const r=f(n,["raiFilteredReason"]);r!=null&&m(t,["raiFilteredReason"],r);const a=f(n,["_self"]);a!=null&&m(t,["safetyAttributes"],rI(a));const u=f(n,["prompt"]);return u!=null&&m(t,["enhancedPrompt"],u),t}function U2(n,e){const t={},i=f(n,["_self"]);i!=null&&m(t,["mask"],iI(i));const r=f(n,["labels"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),m(t,["labels"],a)}return t}function L2(n,e){const t={},i=f(n,["video"]);return i!=null&&m(t,["video"],wV(i)),t}function O2(n,e){const t={},i=f(n,["_self"]);return i!=null&&m(t,["video"],CV(i)),t}function F2(n,e){const t={},i=f(n,["modelSelectionConfig"]);i!=null&&m(t,["modelConfig"],i);const r=f(n,["responseJsonSchema"]);r!=null&&m(t,["responseJsonSchema"],r);const a=f(n,["audioTimestamp"]);a!=null&&m(t,["audioTimestamp"],a);const u=f(n,["candidateCount"]);u!=null&&m(t,["candidateCount"],u);const d=f(n,["enableAffectiveDialog"]);d!=null&&m(t,["enableAffectiveDialog"],d);const p=f(n,["frequencyPenalty"]);p!=null&&m(t,["frequencyPenalty"],p);const h=f(n,["logprobs"]);h!=null&&m(t,["logprobs"],h);const _=f(n,["maxOutputTokens"]);_!=null&&m(t,["maxOutputTokens"],_);const T=f(n,["mediaResolution"]);T!=null&&m(t,["mediaResolution"],T);const E=f(n,["presencePenalty"]);E!=null&&m(t,["presencePenalty"],E);const C=f(n,["responseLogprobs"]);C!=null&&m(t,["responseLogprobs"],C);const M=f(n,["responseMimeType"]);M!=null&&m(t,["responseMimeType"],M);const U=f(n,["responseModalities"]);U!=null&&m(t,["responseModalities"],U);const P=f(n,["responseSchema"]);P!=null&&m(t,["responseSchema"],P);const $=f(n,["routingConfig"]);$!=null&&m(t,["routingConfig"],$);const H=f(n,["seed"]);H!=null&&m(t,["seed"],H);const z=f(n,["speechConfig"]);z!=null&&m(t,["speechConfig"],z);const X=f(n,["stopSequences"]);X!=null&&m(t,["stopSequences"],X);const ue=f(n,["temperature"]);ue!=null&&m(t,["temperature"],ue);const W=f(n,["thinkingConfig"]);W!=null&&m(t,["thinkingConfig"],W);const N=f(n,["topK"]);N!=null&&m(t,["topK"],N);const D=f(n,["topP"]);if(D!=null&&m(t,["topP"],D),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function B2(n,e,t){const i={},r=f(e,["model"]);return r!=null&&m(i,["_url","name"],it(n,r)),i}function q2(n,e,t){const i={},r=f(e,["model"]);return r!=null&&m(i,["_url","name"],it(n,r)),i}function G2(n,e){const t={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=f(n,["enableWidget"]);return i!=null&&m(t,["enableWidget"],i),t}function H2(n,e){const t={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=f(n,["timeRangeFilter"]);return i!=null&&m(t,["timeRangeFilter"],i),t}function z2(n,e){const t={},i=f(n,["aspectRatio"]);i!=null&&m(t,["aspectRatio"],i);const r=f(n,["imageSize"]);if(r!=null&&m(t,["imageSize"],r),f(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function $2(n,e){const t={},i=f(n,["aspectRatio"]);i!=null&&m(t,["aspectRatio"],i);const r=f(n,["imageSize"]);r!=null&&m(t,["imageSize"],r);const a=f(n,["personGeneration"]);a!=null&&m(t,["personGeneration"],a);const u=f(n,["outputMimeType"]);u!=null&&m(t,["imageOutputOptions","mimeType"],u);const d=f(n,["outputCompressionQuality"]);return d!=null&&m(t,["imageOutputOptions","compressionQuality"],d),t}function J2(n,e){const t={},i=f(n,["bytesBase64Encoded"]);i!=null&&m(t,["imageBytes"],Xr(i));const r=f(n,["mimeType"]);return r!=null&&m(t,["mimeType"],r),t}function iI(n,e){const t={},i=f(n,["gcsUri"]);i!=null&&m(t,["gcsUri"],i);const r=f(n,["bytesBase64Encoded"]);r!=null&&m(t,["imageBytes"],Xr(r));const a=f(n,["mimeType"]);return a!=null&&m(t,["mimeType"],a),t}function Lh(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=f(n,["imageBytes"]);i!=null&&m(t,["bytesBase64Encoded"],Xr(i));const r=f(n,["mimeType"]);return r!=null&&m(t,["mimeType"],r),t}function Li(n,e){const t={},i=f(n,["gcsUri"]);i!=null&&m(t,["gcsUri"],i);const r=f(n,["imageBytes"]);r!=null&&m(t,["bytesBase64Encoded"],Xr(r));const a=f(n,["mimeType"]);return a!=null&&m(t,["mimeType"],a),t}function K2(n,e,t,i){const r={},a=f(e,["pageSize"]);t!==void 0&&a!=null&&m(t,["_query","pageSize"],a);const u=f(e,["pageToken"]);t!==void 0&&u!=null&&m(t,["_query","pageToken"],u);const d=f(e,["filter"]);t!==void 0&&d!=null&&m(t,["_query","filter"],d);const p=f(e,["queryBase"]);return t!==void 0&&p!=null&&m(t,["_url","models_url"],QC(n,p)),r}function Y2(n,e,t,i){const r={},a=f(e,["pageSize"]);t!==void 0&&a!=null&&m(t,["_query","pageSize"],a);const u=f(e,["pageToken"]);t!==void 0&&u!=null&&m(t,["_query","pageToken"],u);const d=f(e,["filter"]);t!==void 0&&d!=null&&m(t,["_query","filter"],d);const p=f(e,["queryBase"]);return t!==void 0&&p!=null&&m(t,["_url","models_url"],QC(n,p)),r}function W2(n,e,t){const i={},r=f(e,["config"]);return r!=null&&K2(n,r,i),i}function Q2(n,e,t){const i={},r=f(e,["config"]);return r!=null&&Y2(n,r,i),i}function X2(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=f(n,["nextPageToken"]);r!=null&&m(t,["nextPageToken"],r);const a=f(n,["_self"]);if(a!=null){let u=XC(a);Array.isArray(u)&&(u=u.map(d=>iy(d))),m(t,["models"],u)}return t}function j2(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=f(n,["nextPageToken"]);r!=null&&m(t,["nextPageToken"],r);const a=f(n,["_self"]);if(a!=null){let u=XC(a);Array.isArray(u)&&(u=u.map(d=>sy(d))),m(t,["models"],u)}return t}function Z2(n,e){const t={},i=f(n,["maskMode"]);i!=null&&m(t,["maskMode"],i);const r=f(n,["segmentationClasses"]);r!=null&&m(t,["maskClasses"],r);const a=f(n,["maskDilation"]);return a!=null&&m(t,["dilation"],a),t}function iy(n,e){const t={},i=f(n,["name"]);i!=null&&m(t,["name"],i);const r=f(n,["displayName"]);r!=null&&m(t,["displayName"],r);const a=f(n,["description"]);a!=null&&m(t,["description"],a);const u=f(n,["version"]);u!=null&&m(t,["version"],u);const d=f(n,["_self"]);d!=null&&m(t,["tunedModelInfo"],mV(d));const p=f(n,["inputTokenLimit"]);p!=null&&m(t,["inputTokenLimit"],p);const h=f(n,["outputTokenLimit"]);h!=null&&m(t,["outputTokenLimit"],h);const _=f(n,["supportedGenerationMethods"]);_!=null&&m(t,["supportedActions"],_);const T=f(n,["temperature"]);T!=null&&m(t,["temperature"],T);const E=f(n,["maxTemperature"]);E!=null&&m(t,["maxTemperature"],E);const C=f(n,["topP"]);C!=null&&m(t,["topP"],C);const M=f(n,["topK"]);M!=null&&m(t,["topK"],M);const U=f(n,["thinking"]);return U!=null&&m(t,["thinking"],U),t}function sy(n,e){const t={},i=f(n,["name"]);i!=null&&m(t,["name"],i);const r=f(n,["displayName"]);r!=null&&m(t,["displayName"],r);const a=f(n,["description"]);a!=null&&m(t,["description"],a);const u=f(n,["versionId"]);u!=null&&m(t,["version"],u);const d=f(n,["deployedModels"]);if(d!=null){let E=d;Array.isArray(E)&&(E=E.map(C=>f2(C))),m(t,["endpoints"],E)}const p=f(n,["labels"]);p!=null&&m(t,["labels"],p);const h=f(n,["_self"]);h!=null&&m(t,["tunedModelInfo"],gV(h));const _=f(n,["defaultCheckpointId"]);_!=null&&m(t,["defaultCheckpointId"],_);const T=f(n,["checkpoints"]);if(T!=null){let E=T;Array.isArray(E)&&(E=E.map(C=>C)),m(t,["checkpoints"],E)}return t}function eV(n,e){const t={},i=f(n,["mediaResolution"]);i!=null&&m(t,["mediaResolution"],i);const r=f(n,["codeExecutionResult"]);r!=null&&m(t,["codeExecutionResult"],r);const a=f(n,["executableCode"]);a!=null&&m(t,["executableCode"],a);const u=f(n,["fileData"]);u!=null&&m(t,["fileData"],h2(u));const d=f(n,["functionCall"]);d!=null&&m(t,["functionCall"],p2(d));const p=f(n,["functionResponse"]);p!=null&&m(t,["functionResponse"],p);const h=f(n,["inlineData"]);h!=null&&m(t,["inlineData"],Fk(h));const _=f(n,["text"]);_!=null&&m(t,["text"],_);const T=f(n,["thought"]);T!=null&&m(t,["thought"],T);const E=f(n,["thoughtSignature"]);E!=null&&m(t,["thoughtSignature"],E);const C=f(n,["videoMetadata"]);return C!=null&&m(t,["videoMetadata"],C),t}function tV(n,e){const t={},i=f(n,["productImage"]);return i!=null&&m(t,["image"],Li(i)),t}function nV(n,e,t){const i={},r=f(n,["numberOfImages"]);e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r);const a=f(n,["baseSteps"]);e!==void 0&&a!=null&&m(e,["parameters","baseSteps"],a);const u=f(n,["outputGcsUri"]);e!==void 0&&u!=null&&m(e,["parameters","storageUri"],u);const d=f(n,["seed"]);e!==void 0&&d!=null&&m(e,["parameters","seed"],d);const p=f(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&m(e,["parameters","safetySetting"],p);const h=f(n,["personGeneration"]);e!==void 0&&h!=null&&m(e,["parameters","personGeneration"],h);const _=f(n,["addWatermark"]);e!==void 0&&_!=null&&m(e,["parameters","addWatermark"],_);const T=f(n,["outputMimeType"]);e!==void 0&&T!=null&&m(e,["parameters","outputOptions","mimeType"],T);const E=f(n,["outputCompressionQuality"]);e!==void 0&&E!=null&&m(e,["parameters","outputOptions","compressionQuality"],E);const C=f(n,["enhancePrompt"]);e!==void 0&&C!=null&&m(e,["parameters","enhancePrompt"],C);const M=f(n,["labels"]);return e!==void 0&&M!=null&&m(e,["labels"],M),i}function iV(n,e,t){const i={},r=f(e,["model"]);r!=null&&m(i,["_url","model"],it(n,r));const a=f(e,["source"]);a!=null&&rV(a,i);const u=f(e,["config"]);return u!=null&&nV(u,i),i}function sV(n,e){const t={},i=f(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>Uh(a))),m(t,["generatedImages"],r)}return t}function rV(n,e,t){const i={},r=f(n,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const a=f(n,["personImage"]);e!==void 0&&a!=null&&m(e,["instances[0]","personImage","image"],Li(a));const u=f(n,["productImages"]);if(e!==void 0&&u!=null){let d=u;Array.isArray(d)&&(d=d.map(p=>tV(p))),m(e,["instances[0]","productImages"],d)}return i}function oV(n,e){const t={},i=f(n,["referenceImage"]);i!=null&&m(t,["referenceImage"],Li(i));const r=f(n,["referenceId"]);r!=null&&m(t,["referenceId"],r);const a=f(n,["referenceType"]);a!=null&&m(t,["referenceType"],a);const u=f(n,["maskImageConfig"]);u!=null&&m(t,["maskImageConfig"],Z2(u));const d=f(n,["controlImageConfig"]);d!=null&&m(t,["controlImageConfig"],Jk(d));const p=f(n,["styleImageConfig"]);p!=null&&m(t,["styleImageConfig"],p);const h=f(n,["subjectImageConfig"]);return h!=null&&m(t,["subjectImageConfig"],h),t}function sI(n,e){const t={},i=f(n,["safetyAttributes","categories"]);i!=null&&m(t,["categories"],i);const r=f(n,["safetyAttributes","scores"]);r!=null&&m(t,["scores"],r);const a=f(n,["contentType"]);return a!=null&&m(t,["contentType"],a),t}function rI(n,e){const t={},i=f(n,["safetyAttributes","categories"]);i!=null&&m(t,["categories"],i);const r=f(n,["safetyAttributes","scores"]);r!=null&&m(t,["scores"],r);const a=f(n,["contentType"]);return a!=null&&m(t,["contentType"],a),t}function aV(n,e){const t={},i=f(n,["category"]);if(i!=null&&m(t,["category"],i),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=f(n,["threshold"]);return r!=null&&m(t,["threshold"],r),t}function lV(n,e){const t={},i=f(n,["image"]);return i!=null&&m(t,["image"],Li(i)),t}function uV(n,e,t){const i={},r=f(n,["mode"]);e!==void 0&&r!=null&&m(e,["parameters","mode"],r);const a=f(n,["maxPredictions"]);e!==void 0&&a!=null&&m(e,["parameters","maxPredictions"],a);const u=f(n,["confidenceThreshold"]);e!==void 0&&u!=null&&m(e,["parameters","confidenceThreshold"],u);const d=f(n,["maskDilation"]);e!==void 0&&d!=null&&m(e,["parameters","maskDilation"],d);const p=f(n,["binaryColorThreshold"]);e!==void 0&&p!=null&&m(e,["parameters","binaryColorThreshold"],p);const h=f(n,["labels"]);return e!==void 0&&h!=null&&m(e,["labels"],h),i}function cV(n,e,t){const i={},r=f(e,["model"]);r!=null&&m(i,["_url","model"],it(n,r));const a=f(e,["source"]);a!=null&&fV(a,i);const u=f(e,["config"]);return u!=null&&uV(u,i),i}function dV(n,e){const t={},i=f(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>U2(a))),m(t,["generatedMasks"],r)}return t}function fV(n,e,t){const i={},r=f(n,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const a=f(n,["image"]);e!==void 0&&a!=null&&m(e,["instances[0]","image"],Li(a));const u=f(n,["scribbleImage"]);return e!==void 0&&u!=null&&m(e,["instances[0]","scribble"],lV(u)),i}function hV(n,e){const t={},i=f(n,["retrievalConfig"]);i!=null&&m(t,["retrievalConfig"],i);const r=f(n,["functionCallingConfig"]);return r!=null&&m(t,["functionCallingConfig"],m2(r)),t}function pV(n,e){const t={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["computerUse"]);i!=null&&m(t,["computerUse"],i);const r=f(n,["fileSearch"]);r!=null&&m(t,["fileSearch"],r);const a=f(n,["codeExecution"]);if(a!=null&&m(t,["codeExecution"],a),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=f(n,["functionDeclarations"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(E=>E)),m(t,["functionDeclarations"],T)}const d=f(n,["googleMaps"]);d!=null&&m(t,["googleMaps"],G2(d));const p=f(n,["googleSearch"]);p!=null&&m(t,["googleSearch"],H2(p));const h=f(n,["googleSearchRetrieval"]);h!=null&&m(t,["googleSearchRetrieval"],h);const _=f(n,["urlContext"]);return _!=null&&m(t,["urlContext"],_),t}function oI(n,e){const t={},i=f(n,["retrieval"]);i!=null&&m(t,["retrieval"],i);const r=f(n,["computerUse"]);if(r!=null&&m(t,["computerUse"],r),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=f(n,["codeExecution"]);a!=null&&m(t,["codeExecution"],a);const u=f(n,["enterpriseWebSearch"]);u!=null&&m(t,["enterpriseWebSearch"],u);const d=f(n,["functionDeclarations"]);if(d!=null){let E=d;Array.isArray(E)&&(E=E.map(C=>g2(C))),m(t,["functionDeclarations"],E)}const p=f(n,["googleMaps"]);p!=null&&m(t,["googleMaps"],p);const h=f(n,["googleSearch"]);h!=null&&m(t,["googleSearch"],h);const _=f(n,["googleSearchRetrieval"]);_!=null&&m(t,["googleSearchRetrieval"],_);const T=f(n,["urlContext"]);return T!=null&&m(t,["urlContext"],T),t}function mV(n,e){const t={},i=f(n,["baseModel"]);i!=null&&m(t,["baseModel"],i);const r=f(n,["createTime"]);r!=null&&m(t,["createTime"],r);const a=f(n,["updateTime"]);return a!=null&&m(t,["updateTime"],a),t}function gV(n,e){const t={},i=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&m(t,["baseModel"],i);const r=f(n,["createTime"]);r!=null&&m(t,["createTime"],r);const a=f(n,["updateTime"]);return a!=null&&m(t,["updateTime"],a),t}function yV(n,e,t){const i={},r=f(n,["displayName"]);e!==void 0&&r!=null&&m(e,["displayName"],r);const a=f(n,["description"]);e!==void 0&&a!=null&&m(e,["description"],a);const u=f(n,["defaultCheckpointId"]);return e!==void 0&&u!=null&&m(e,["defaultCheckpointId"],u),i}function _V(n,e,t){const i={},r=f(n,["displayName"]);e!==void 0&&r!=null&&m(e,["displayName"],r);const a=f(n,["description"]);e!==void 0&&a!=null&&m(e,["description"],a);const u=f(n,["defaultCheckpointId"]);return e!==void 0&&u!=null&&m(e,["defaultCheckpointId"],u),i}function vV(n,e,t){const i={},r=f(e,["model"]);r!=null&&m(i,["_url","name"],it(n,r));const a=f(e,["config"]);return a!=null&&yV(a,i),i}function TV(n,e,t){const i={},r=f(e,["model"]);r!=null&&m(i,["_url","model"],it(n,r));const a=f(e,["config"]);return a!=null&&_V(a,i),i}function EV(n,e,t){const i={},r=f(n,["outputGcsUri"]);e!==void 0&&r!=null&&m(e,["parameters","storageUri"],r);const a=f(n,["safetyFilterLevel"]);e!==void 0&&a!=null&&m(e,["parameters","safetySetting"],a);const u=f(n,["personGeneration"]);e!==void 0&&u!=null&&m(e,["parameters","personGeneration"],u);const d=f(n,["includeRaiReason"]);e!==void 0&&d!=null&&m(e,["parameters","includeRaiReason"],d);const p=f(n,["outputMimeType"]);e!==void 0&&p!=null&&m(e,["parameters","outputOptions","mimeType"],p);const h=f(n,["outputCompressionQuality"]);e!==void 0&&h!=null&&m(e,["parameters","outputOptions","compressionQuality"],h);const _=f(n,["enhanceInputImage"]);e!==void 0&&_!=null&&m(e,["parameters","upscaleConfig","enhanceInputImage"],_);const T=f(n,["imagePreservationFactor"]);e!==void 0&&T!=null&&m(e,["parameters","upscaleConfig","imagePreservationFactor"],T);const E=f(n,["labels"]);e!==void 0&&E!=null&&m(e,["labels"],E);const C=f(n,["numberOfImages"]);e!==void 0&&C!=null&&m(e,["parameters","sampleCount"],C);const M=f(n,["mode"]);return e!==void 0&&M!=null&&m(e,["parameters","mode"],M),i}function SV(n,e,t){const i={},r=f(e,["model"]);r!=null&&m(i,["_url","model"],it(n,r));const a=f(e,["image"]);a!=null&&m(i,["instances[0]","image"],Li(a));const u=f(e,["upscaleFactor"]);u!=null&&m(i,["parameters","upscaleConfig","upscaleFactor"],u);const d=f(e,["config"]);return d!=null&&EV(d,i),i}function AV(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=f(n,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>Uh(u))),m(t,["generatedImages"],a)}return t}function wV(n,e){const t={},i=f(n,["uri"]);i!=null&&m(t,["uri"],i);const r=f(n,["encodedVideo"]);r!=null&&m(t,["videoBytes"],Xr(r));const a=f(n,["encoding"]);return a!=null&&m(t,["mimeType"],a),t}function CV(n,e){const t={},i=f(n,["gcsUri"]);i!=null&&m(t,["uri"],i);const r=f(n,["bytesBase64Encoded"]);r!=null&&m(t,["videoBytes"],Xr(r));const a=f(n,["mimeType"]);return a!=null&&m(t,["mimeType"],a),t}function IV(n,e){const t={},i=f(n,["image"]);i!=null&&m(t,["_self"],Li(i));const r=f(n,["maskMode"]);return r!=null&&m(t,["maskMode"],r),t}function bV(n,e){const t={},i=f(n,["image"]);i!=null&&m(t,["image"],Lh(i));const r=f(n,["referenceType"]);return r!=null&&m(t,["referenceType"],r),t}function RV(n,e){const t={},i=f(n,["image"]);i!=null&&m(t,["image"],Li(i));const r=f(n,["referenceType"]);return r!=null&&m(t,["referenceType"],r),t}function aI(n,e){const t={},i=f(n,["uri"]);i!=null&&m(t,["uri"],i);const r=f(n,["videoBytes"]);r!=null&&m(t,["encodedVideo"],Xr(r));const a=f(n,["mimeType"]);return a!=null&&m(t,["encoding"],a),t}function lI(n,e){const t={},i=f(n,["uri"]);i!=null&&m(t,["gcsUri"],i);const r=f(n,["videoBytes"]);r!=null&&m(t,["bytesBase64Encoded"],Xr(r));const a=f(n,["mimeType"]);return a!=null&&m(t,["mimeType"],a),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xV(n,e){const t={},i=f(n,["displayName"]);return e!==void 0&&i!=null&&m(e,["displayName"],i),t}function NV(n){const e={},t=f(n,["config"]);return t!=null&&xV(t,e),e}function MV(n,e){const t={},i=f(n,["force"]);return e!==void 0&&i!=null&&m(e,["_query","force"],i),t}function DV(n){const e={},t=f(n,["name"]);t!=null&&m(e,["_url","name"],t);const i=f(n,["config"]);return i!=null&&MV(i,e),e}function PV(n){const e={},t=f(n,["name"]);return t!=null&&m(e,["_url","name"],t),e}function kV(n,e){const t={},i=f(n,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["customMetadata"],a)}const r=f(n,["chunkingConfig"]);return e!==void 0&&r!=null&&m(e,["chunkingConfig"],r),t}function VV(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const i=f(n,["metadata"]);i!=null&&m(e,["metadata"],i);const r=f(n,["done"]);r!=null&&m(e,["done"],r);const a=f(n,["error"]);a!=null&&m(e,["error"],a);const u=f(n,["response"]);return u!=null&&m(e,["response"],LV(u)),e}function UV(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&m(e,["_url","file_search_store_name"],t);const i=f(n,["fileName"]);i!=null&&m(e,["fileName"],i);const r=f(n,["config"]);return r!=null&&kV(r,e),e}function LV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&m(e,["parent"],i);const r=f(n,["documentName"]);return r!=null&&m(e,["documentName"],r),e}function OV(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),t}function FV(n){const e={},t=f(n,["config"]);return t!=null&&OV(t,e),e}function BV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const r=f(n,["fileSearchStores"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["fileSearchStores"],a)}return e}function uI(n,e){const t={},i=f(n,["mimeType"]);e!==void 0&&i!=null&&m(e,["mimeType"],i);const r=f(n,["displayName"]);e!==void 0&&r!=null&&m(e,["displayName"],r);const a=f(n,["customMetadata"]);if(e!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(p=>p)),m(e,["customMetadata"],d)}const u=f(n,["chunkingConfig"]);return e!==void 0&&u!=null&&m(e,["chunkingConfig"],u),t}function qV(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&m(e,["_url","file_search_store_name"],t);const i=f(n,["config"]);return i!=null&&uI(i,e),e}function GV(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const HV="Content-Type",zV="X-Server-Timeout",$V="User-Agent",ry="x-goog-api-client",JV="1.42.0",KV=`google-genai-sdk/${JV}`,YV="v1beta1",WV="v1beta",QV=5,XV=[408,429,500,502,503,504];class jV{constructor(e){var t,i,r;this.clientOptions=Object.assign({},e),this.customBaseUrl=(t=e.httpOptions)===null||t===void 0?void 0:t.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const a={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const d=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!d?(a.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?a.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(a.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),a.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:YV}else{if(!this.clientOptions.apiKey)throw new dc({message:"API key must be set when using the Gemini API.",status:403});a.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:WV,a.baseUrl="https://generativelanguage.googleapis.com/"}a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const r=[this.getRequestUrlInternal(t)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e,t){return!(t.baseUrl&&t.baseUrlResourceScope===Zg.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,t),r=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[u,d]of Object.entries(e.queryParams))r.searchParams.append(u,String(d));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,t,r.toString(),e.abortSignal),this.unaryApiCall(r,a,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[r,a]of Object.entries(t))typeof a=="object"?i[r]=Object.assign(Object.assign({},i[r]),a):a!==void 0&&(i[r]=a);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,t),r=this.constructUrl(e.path,t,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,t,r.toString(),e.abortSignal),this.streamApiCall(r,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i,r){if(t&&t.timeout||r){const a=new AbortController,u=a.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const d=setTimeout(()=>a.abort(),t.timeout);d&&typeof d.unref=="function"&&d.unref()}r&&r.addEventListener("abort",()=>{a.abort()}),e.signal=u}return t&&t.extraBody!==null&&ZV(e,t.extraBody),e.headers=await this.getHeadersInternal(t,i),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async r=>(await CA(r),new ey(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async r=>(await CA(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return Di(this,arguments,function*(){var i;const r=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),a=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let u="";const d="data:",p=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:h,value:_}=yield Ve(r.read());if(h){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const T=a.decode(_,{stream:!0});try{const M=JSON.parse(T);if("error"in M){const U=JSON.parse(JSON.stringify(M.error)),P=U.status,$=U.code,H=`got status: ${P}. ${JSON.stringify(M)}`;if($>=400&&$<600)throw new dc({message:H,status:$})}}catch(M){if(M.name==="ApiError")throw M}u+=T;let E=-1,C=0;for(;;){E=-1,C=0;for(const P of p){const $=u.indexOf(P);$!==-1&&(E===-1||$<E)&&(E=$,C=P.length)}if(E===-1)break;const M=u.substring(0,E);u=u.substring(E+C);const U=M.trim();if(U.startsWith(d)){const P=U.substring(d.length).trim();try{const $=new Response(P,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ve(new ey($))}catch($){throw new Error(`exception parsing stream chunk ${P}. ${$}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,t){var i;if(!this.clientOptions.httpOptions||!this.clientOptions.httpOptions.retryOptions)return fetch(e,t);const r=this.clientOptions.httpOptions.retryOptions;return qM(async()=>{const u=await fetch(e,t);if(u.ok)return u;throw XV.includes(u.status)?new Error(`Retryable HTTP Error: ${u.statusText}`):new qC.AbortError(`Non-retryable exception ${u.statusText} sending request`)},{retries:((i=r.attempts)!==null&&i!==void 0?i:QV)-1})}getDefaultHeaders(){const e={},t=KV+" "+this.clientOptions.userAgentExtra;return e[$V]=t,e[ry]=t,e[HV]="application/json",e}async getHeadersInternal(e,t){const i=new Headers;if(e&&e.headers){for(const[r,a]of Object.entries(e.headers))i.append(r,a);e.timeout&&e.timeout>0&&i.append(zV,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,t),i}getFileName(e){var t;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(t=i.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),i}async uploadFile(e,t){var i;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const a=this.clientOptions.uploader,u=await a.stat(e);r.sizeBytes=String(u.size);const d=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:u.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=d;const p={file:r},h=this.getFileName(e),_=pe("upload/v1beta/files",p._url),T=await this.fetchUploadUrl(_,r.sizeBytes,r.mimeType,h,p,t==null?void 0:t.httpOptions);return a.upload(e,T,this)}async uploadFileToFileSearchStore(e,t,i){var r;const a=this.clientOptions.uploader,u=await a.stat(t),d=String(u.size),p=(r=i==null?void 0:i.mimeType)!==null&&r!==void 0?r:u.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,_=this.getFileName(t),T={};i!=null&&uI(i,T);const E=await this.fetchUploadUrl(h,d,p,_,T,i==null?void 0:i.httpOptions);return a.uploadToFileSearchStore(t,E,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,i,r,a,u){var d;let p={};u?p=u:p={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${i}`},r?{"X-Goog-Upload-File-Name":r}:{})};const h=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:p});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const _=(d=h==null?void 0:h.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(_===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return _}}async function CA(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(i);throw t>=400&&t<600?new dc({message:r,status:t}):new Error(r)}}function ZV(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const a=JSON.parse(n.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))t=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,u){const d=Object.assign({},a);for(const p in u)if(Object.prototype.hasOwnProperty.call(u,p)){const h=u[p],_=d[p];h&&typeof h=="object"&&!Array.isArray(h)&&_&&typeof _=="object"&&!Array.isArray(_)?d[p]=i(_,h):(_&&h&&typeof _!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof _}, New type: ${typeof h}. Overwriting.`),d[p]=h)}return d}const r=i(t,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const eU="mcp_used/unknown";let tU=!1;function cI(n){for(const e of n)if(nU(e)||typeof e=="object"&&"inputSchema"in e)return!0;return tU}function dI(n){var e;const t=(e=n[ry])!==null&&e!==void 0?e:"";n[ry]=(t+` ${eU}`).trimStart()}function nU(n){return n!==null&&typeof n=="object"&&n instanceof a_}function iU(n){return Di(this,arguments,function*(t,i=100){let r,a=0;for(;a<i;){const u=yield Ve(t.listTools({cursor:r}));for(const d of u.tools)yield yield Ve(d),a++;if(!u.nextCursor)break;r=u.nextCursor}})}class a_{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new a_(e,t)}async initialize(){var e,t,i,r;if(this.mcpTools.length>0)return;const a={},u=[];for(const _ of this.mcpClients)try{for(var d=!0,p=(t=void 0,Pi(iU(_))),h;h=await p.next(),e=h.done,!e;d=!0){r=h.value,d=!1;const T=r;u.push(T);const E=T.name;if(a[E])throw new Error(`Duplicate function name ${E} found in MCP tools. Please ensure function names are unique.`);a[E]=_}}catch(T){t={error:T}}finally{try{!d&&!e&&(i=p.return)&&await i.call(p)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),xD(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const u=await r.callTool({name:i.name,arguments:i.args},void 0,a);t.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function sU(n,e,t){const i=new ED;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data),Object.assign(i,r),e(i)}class rU{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),u=lU(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),p=`${r}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${d}`;let h=()=>{};const _=new Promise(z=>{h=z}),T=e.callbacks,E=function(){h({})},C=this.apiClient,M={onopen:E,onmessage:z=>{sU(C,T.onmessage,z)},onerror:(t=T==null?void 0:T.onerror)!==null&&t!==void 0?t:function(z){},onclose:(i=T==null?void 0:T.onclose)!==null&&i!==void 0?i:function(z){}},U=this.webSocketFactory.create(p,aU(u),M);U.connect(),await _;const H={setup:{model:it(this.apiClient,e.model)}};return U.send(JSON.stringify(H)),new oU(U,this.apiClient)}}class oU{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=xk(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=Rk(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(ja.PLAY)}pause(){this.sendPlaybackControl(ja.PAUSE)}stop(){this.sendPlaybackControl(ja.STOP)}resetContext(){this.sendPlaybackControl(ja.RESET_CONTEXT)}close(){this.conn.close()}}function aU(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function lU(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uU="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function cU(n,e,t){const i=new TD;let r;t.data instanceof Blob?r=await t.data.text():t.data instanceof ArrayBuffer?r=new TextDecoder().decode(t.data):r=t.data;const a=JSON.parse(r);if(n.isVertexAI()){const u=Dk(a);Object.assign(i,u)}else Object.assign(i,a);e(i)}class dU{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new rU(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,r,a,u,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let _;const T=this.apiClient.getHeaders();e.config&&e.config.tools&&cI(e.config.tools)&&dI(T);const E=mU(T);if(this.apiClient.isVertexAI()){const x=this.apiClient.getProject(),L=this.apiClient.getLocation(),k=this.apiClient.getApiKey(),q=!!x&&!!L||!!k;this.apiClient.getCustomBaseUrl()&&!q?_=p:(_=`${p}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(E,_))}else{const x=this.apiClient.getApiKey();let L="BidiGenerateContent",k="key";x!=null&&x.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),L="BidiGenerateContentConstrained",k="access_token"),_=`${p}/ws/google.ai.generativelanguage.${h}.GenerativeService.${L}?${k}=${x}`}let C=()=>{};const M=new Promise(x=>{C=x}),U=e.callbacks,P=function(){var x;(x=U==null?void 0:U.onopen)===null||x===void 0||x.call(U),C({})},$=this.apiClient,H={onopen:P,onmessage:x=>{cU($,U.onmessage,x)},onerror:(t=U==null?void 0:U.onerror)!==null&&t!==void 0?t:function(x){},onclose:(i=U==null?void 0:U.onclose)!==null&&i!==void 0?i:function(x){}},z=this.webSocketFactory.create(_,pU(E),H);z.connect(),await M;let X=it(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&X.startsWith("publishers/")){const x=this.apiClient.getProject(),L=this.apiClient.getLocation();x&&L&&(X=`projects/${x}/locations/${L}/`+X)}let ue={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[eh.AUDIO]}:e.config.responseModalities=[eh.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const W=(d=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[],N=[];for(const x of W)if(this.isCallableTool(x)){const L=x;N.push(await L.tool())}else N.push(x);N.length>0&&(e.config.tools=N);const D={model:X,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?ue=bk(this.apiClient,D):ue=Ik(this.apiClient,D),delete ue.config,z.send(JSON.stringify(ue)),new hU(z,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const fU={turnComplete:!0};class hU{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=Xn(t.turns),e.isVertexAI()||(i=i.map(r=>Sc(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(uU)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},fU),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:Mk(e)}:t={realtimeInput:Nk(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function pU(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function mU(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const IA=10;function bA(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(tl(u)){r=!0;break}if(!r)return!0;const a=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function tl(n){return"callTool"in n&&typeof n.callTool=="function"}function gU(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>tl(r)))!==null&&i!==void 0?i:!1}function RA(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((i,r)=>{if(tl(i))return;const a=i;a.functionDeclarations&&a.functionDeclarations.length>0&&t.push(r)}),t}function xA(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let yU=class extends Qs{constructor(e){super(),this.apiClient=e,this.embedContent=async t=>{if(!this.apiClient.isVertexAI())return await this.embedContentInternal(t);if(t.model.includes("gemini")&&t.model!=="gemini-embedding-001"||t.model.includes("maas")){const r=Xn(t.contents);if(r.length>1)throw new Error("The embedContent API for this model only supports one content at a time.");const a=Object.assign(Object.assign({},t),{content:r[0],embeddingApiType:th.EMBED_CONTENT});return await this.embedContentInternal(a)}else{const r=Object.assign(Object.assign({},t),{embeddingApiType:th.PREDICT});return await this.embedContentInternal(r)}},this.generateContent=async t=>{var i,r,a,u,d;const p=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!gU(t)||bA(t.config))return await this.generateContentInternal(p);const h=RA(t);if(h.length>0){const U=h.map(P=>`tools[${P}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${U}.`)}let _,T;const E=Xn(p.contents),C=(a=(r=(i=p.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&a!==void 0?a:IA;let M=0;for(;M<C&&(_=await this.generateContentInternal(p),!(!_.functionCalls||_.functionCalls.length===0));){const U=_.candidates[0].content,P=[];for(const $ of(d=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[])if(tl($)){const z=await $.callTool(_.functionCalls);P.push(...z)}M++,T={role:"user",parts:P},p.contents=Xn(p.contents),p.contents.push(U),p.contents.push(T),xA(p.config)&&(E.push(U),E.push(T))}return xA(p.config)&&(_.automaticFunctionCallingHistory=E),_},this.generateContentStream=async t=>{var i,r,a,u,d;if(this.maybeMoveToResponseJsonSchem(t),bA(t.config)){const T=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(T)}const p=RA(t);if(p.length>0){const T=p.map(E=>`tools[${E}]`).join(", ");throw new Error(`Incompatible tools found at ${T}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(a=(r=(i=t==null?void 0:t.config)===null||i===void 0?void 0:i.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,_=(d=(u=t==null?void 0:t.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(h&&!_)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var r;let a;const u=[];if(i!=null&&i.generatedImages)for(const p of i.generatedImages)p&&(p!=null&&p.safetyAttributes)&&((r=p==null?void 0:p.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?a=p==null?void 0:p.safetyAttributes:u.push(p);let d;return a?d={generatedImages:u,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:d={generatedImages:u,sdkHttpResponse:i.sdkHttpResponse},d}),this.list=async t=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new $o(zs.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(u),u)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async t=>{var i,r,a,u,d,p;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=t.video)===null||i===void 0)&&i.uri&&(!((r=t.video)===null||r===void 0)&&r.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(a=t.source)===null||a===void 0?void 0:a.video)===null||u===void 0)&&u.uri&&(!((p=(d=t.source)===null||d===void 0?void 0:d.video)===null||p===void 0)&&p.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,r;const a=(t=e.config)===null||t===void 0?void 0:t.tools;if(!a)return e;const u=await Promise.all(a.map(async p=>tl(p)?await p.tool():p)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(d.config.tools=u,e.config&&e.config.tools&&cI(e.config.tools)){const p=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let h=Object.assign({},p);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),dI(h),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return d}async initAfcToolsMap(e){var t,i,r;const a=new Map;for(const u of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(tl(u)){const d=u,p=await d.tool();for(const h of(r=p.functionDeclarations)!==null&&r!==void 0?r:[]){if(!h.name)throw new Error("Function declaration name is required.");if(a.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);a.set(h.name,d)}}return a}async processAfcStream(e){var t,i,r;const a=(r=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:IA;let u=!1,d=0;const p=await this.initAfcToolsMap(e);return(function(h,_,T){return Di(this,arguments,function*(){for(var E,C,M,U,P,$;d<a;){u&&(d++,u=!1);const ue=yield Ve(h.processParamsMaybeAddMcpUsage(T)),W=yield Ve(h.generateContentStreamInternal(ue)),N=[],D=[];try{for(var H=!0,z=(C=void 0,Pi(W)),X;X=yield Ve(z.next()),E=X.done,!E;H=!0){U=X.value,H=!1;const x=U;if(yield yield Ve(x),x.candidates&&(!((P=x.candidates[0])===null||P===void 0)&&P.content)){D.push(x.candidates[0].content);for(const L of($=x.candidates[0].content.parts)!==null&&$!==void 0?$:[])if(d<a&&L.functionCall){if(!L.functionCall.name)throw new Error("Function call name was not returned by the model.");if(_.has(L.functionCall.name)){const k=yield Ve(_.get(L.functionCall.name).callTool([L.functionCall]));N.push(...k)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${_.keys()}, mising tool: ${L.functionCall.name}`)}}}}catch(x){C={error:x}}finally{try{!H&&!E&&(M=z.return)&&(yield Ve(M.call(z)))}finally{if(C)throw C.error}}if(N.length>0){u=!0;const x=new Lu;x.candidates=[{content:{role:"user",parts:N}}],yield yield Ve(x);const L=[];L.push(...D),L.push({role:"user",parts:N});const k=Xn(T.contents).concat(L);T.contents=k}else break}})})(this,p,e)}async generateContentInternal(e){var t,i,r,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=SA(this.apiClient,e);return d=pe("{model}:generateContent",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=wA(_),E=new Lu;return Object.assign(E,T),E})}else{const h=EA(this.apiClient,e);return d=pe("{model}:generateContent",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=AA(_),E=new Lu;return Object.assign(E,T),E})}}async generateContentStreamInternal(e){var t,i,r,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=SA(this.apiClient,e);return d=pe("{model}:streamGenerateContent?alt=sse",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(T){return Di(this,arguments,function*(){var E,C,M,U;try{for(var P=!0,$=Pi(T),H;H=yield Ve($.next()),E=H.done,!E;P=!0){U=H.value,P=!1;const z=U,X=wA(yield Ve(z.json()),e);X.sdkHttpResponse={headers:z.headers};const ue=new Lu;Object.assign(ue,X),yield yield Ve(ue)}}catch(z){C={error:z}}finally{try{!P&&!E&&(M=$.return)&&(yield Ve(M.call($)))}finally{if(C)throw C.error}}})})}else{const h=EA(this.apiClient,e);return d=pe("{model}:streamGenerateContent?alt=sse",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),u.then(function(T){return Di(this,arguments,function*(){var E,C,M,U;try{for(var P=!0,$=Pi(T),H;H=yield Ve($.next()),E=H.done,!E;P=!0){U=H.value,P=!1;const z=U,X=AA(yield Ve(z.json()),e);X.sdkHttpResponse={headers:z.headers};const ue=new Lu;Object.assign(ue,X),yield yield Ve(ue)}}catch(z){C={error:z}}finally{try{!P&&!E&&(M=$.return)&&(yield Ve(M.call($)))}finally{if(C)throw C.error}}})})}}async embedContentInternal(e){var t,i,r,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=u2(this.apiClient,e,e),_=MD(e.model)?"{model}:embedContent":"{model}:predict";return d=pe(_,h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(T=>T.json().then(E=>{const C=E;return C.sdkHttpResponse={headers:T.headers},C})),u.then(T=>{const E=d2(T,e),C=new sA;return Object.assign(C,E),C})}else{const h=l2(this.apiClient,e);return d=pe("{model}:batchEmbedContents",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=c2(_),E=new sA;return Object.assign(E,T),E})}}async generateImagesInternal(e){var t,i,r,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=S2(this.apiClient,e);return d=pe("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=w2(_),E=new rA;return Object.assign(E,T),E})}else{const h=E2(this.apiClient,e);return d=pe("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=A2(_),E=new rA;return Object.assign(E,T),E})}}async editImageInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const d=s2(this.apiClient,e);return a=pe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),r.then(p=>{const h=r2(p),_=new lD;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const d=SV(this.apiClient,e);return a=pe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),r.then(p=>{const h=AV(p),_=new uD;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const d=iV(this.apiClient,e);return a=pe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>{const h=sV(p),_=new cD;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const d=cV(this.apiClient,e);return a=pe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>{const h=dV(p),_=new dD;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,r,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=q2(this.apiClient,e);return d=pe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>sy(_))}else{const h=B2(this.apiClient,e);return d=pe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>iy(_))}}async listInternal(e){var t,i,r,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=Q2(this.apiClient,e);return d=pe("{models_url}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=j2(_),E=new oA;return Object.assign(E,T),E})}else{const h=W2(this.apiClient,e);return d=pe("{models_url}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=X2(_),E=new oA;return Object.assign(E,T),E})}}async update(e){var t,i,r,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=TV(this.apiClient,e);return d=pe("{model}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>sy(_))}else{const h=vV(this.apiClient,e);return d=pe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>iy(_))}}async delete(e){var t,i,r,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=e2(this.apiClient,e);return d=pe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=n2(_),E=new aA;return Object.assign(E,T),E})}else{const h=Zk(this.apiClient,e);return d=pe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=t2(_),E=new aA;return Object.assign(E,T),E})}}async countTokens(e){var t,i,r,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=Qk(this.apiClient,e);return d=pe("{model}:countTokens",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=jk(_),E=new lA;return Object.assign(E,T),E})}else{const h=Wk(this.apiClient,e);return d=pe("{model}:countTokens",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=Xk(_),E=new lA;return Object.assign(E,T),E})}}async computeTokens(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const d=Gk(this.apiClient,e);return a=pe("{model}:computeTokens",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),r.then(p=>{const h=Hk(p),_=new fD;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,r,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=N2(this.apiClient,e);return d=pe("{model}:predictLongRunning",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>{const T=R2(_),E=new nh;return Object.assign(E,T),E})}else{const h=x2(this.apiClient,e);return d=pe("{model}:predictLongRunning",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>{const T=b2(_),E=new nh;return Object.assign(E,T),E})}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _U extends Qs{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,r,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=nD(e);return d=pe("{operationName}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u}else{const h=tD(e);return d=pe("{operationName}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u}}async fetchPredictVideosOperationInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const d=YM(e);return a=pe("{resourceName}:fetchPredictOperation",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vU(n){const e={},t=f(n,["data"]);if(t!=null&&m(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function TU(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>xU(a))),m(e,["parts"],r)}const i=f(n,["role"]);return i!=null&&m(e,["role"],i),e}function EU(n,e,t){const i={},r=f(e,["expireTime"]);t!==void 0&&r!=null&&m(t,["expireTime"],r);const a=f(e,["newSessionExpireTime"]);t!==void 0&&a!=null&&m(t,["newSessionExpireTime"],a);const u=f(e,["uses"]);t!==void 0&&u!=null&&m(t,["uses"],u);const d=f(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&m(t,["bidiGenerateContentSetup"],RU(n,d));const p=f(e,["lockAdditionalFields"]);return t!==void 0&&p!=null&&m(t,["fieldMask"],p),i}function SU(n,e){const t={},i=f(e,["config"]);return i!=null&&m(t,["config"],EU(n,i,t)),t}function AU(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function wU(n){const e={},t=f(n,["id"]);t!=null&&m(e,["id"],t);const i=f(n,["args"]);i!=null&&m(e,["args"],i);const r=f(n,["name"]);if(r!=null&&m(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function CU(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function IU(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function bU(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig"],i);const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig","responseModalities"],r);const a=f(n,["temperature"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const h=f(n,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const _=f(n,["seed"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","seed"],_);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","speechConfig"],o_(T));const E=f(n,["thinkingConfig"]);e!==void 0&&E!=null&&m(e,["setup","generationConfig","thinkingConfig"],E);const C=f(n,["enableAffectiveDialog"]);e!==void 0&&C!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],C);const M=f(n,["systemInstruction"]);e!==void 0&&M!=null&&m(e,["setup","systemInstruction"],TU(nn(M)));const U=f(n,["tools"]);if(e!==void 0&&U!=null){let W=_l(U);Array.isArray(W)&&(W=W.map(N=>MU(yl(N)))),m(e,["setup","tools"],W)}const P=f(n,["sessionResumption"]);e!==void 0&&P!=null&&m(e,["setup","sessionResumption"],NU(P));const $=f(n,["inputAudioTranscription"]);e!==void 0&&$!=null&&m(e,["setup","inputAudioTranscription"],$);const H=f(n,["outputAudioTranscription"]);e!==void 0&&H!=null&&m(e,["setup","outputAudioTranscription"],H);const z=f(n,["realtimeInputConfig"]);e!==void 0&&z!=null&&m(e,["setup","realtimeInputConfig"],z);const X=f(n,["contextWindowCompression"]);e!==void 0&&X!=null&&m(e,["setup","contextWindowCompression"],X);const ue=f(n,["proactivity"]);if(e!==void 0&&ue!=null&&m(e,["setup","proactivity"],ue),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function RU(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["setup","model"],it(n,i));const r=f(e,["config"]);return r!=null&&m(t,["config"],bU(r,t)),t}function xU(n){const e={},t=f(n,["mediaResolution"]);t!=null&&m(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const r=f(n,["executableCode"]);r!=null&&m(e,["executableCode"],r);const a=f(n,["fileData"]);a!=null&&m(e,["fileData"],AU(a));const u=f(n,["functionCall"]);u!=null&&m(e,["functionCall"],wU(u));const d=f(n,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const p=f(n,["inlineData"]);p!=null&&m(e,["inlineData"],vU(p));const h=f(n,["text"]);h!=null&&m(e,["text"],h);const _=f(n,["thought"]);_!=null&&m(e,["thought"],_);const T=f(n,["thoughtSignature"]);T!=null&&m(e,["thoughtSignature"],T);const E=f(n,["videoMetadata"]);return E!=null&&m(e,["videoMetadata"],E),e}function NU(n){const e={},t=f(n,["handle"]);if(t!=null&&m(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function MU(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&m(e,["computerUse"],t);const i=f(n,["fileSearch"]);i!=null&&m(e,["fileSearch"],i);const r=f(n,["codeExecution"]);if(r!=null&&m(e,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(n,["functionDeclarations"]);if(a!=null){let _=a;Array.isArray(_)&&(_=_.map(T=>T)),m(e,["functionDeclarations"],_)}const u=f(n,["googleMaps"]);u!=null&&m(e,["googleMaps"],CU(u));const d=f(n,["googleSearch"]);d!=null&&m(e,["googleSearch"],IU(d));const p=f(n,["googleSearchRetrieval"]);p!=null&&m(e,["googleSearchRetrieval"],p);const h=f(n,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DU(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(a=>`${t}.${a}`);e.push(...r)}else e.push(t)}return e.join(",")}function PU(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(n.bidiGenerateContentSetup=a,t=a):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(t){const a=DU(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?n.fieldMask=a:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];r.length>0&&(d=r.map(h=>u.includes(h)?`generationConfig.${h}`:h));const p=[];a&&p.push(a),d.length>0&&p.push(...d),p.length>0?n.fieldMask=p.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class kU extends Qs{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=SU(this.apiClient,e);a=pe("auth_tokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const p=PU(d,e.config);return r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function VU(n,e){const t={},i=f(n,["force"]);return e!==void 0&&i!=null&&m(e,["_query","force"],i),t}function UU(n){const e={},t=f(n,["name"]);t!=null&&m(e,["_url","name"],t);const i=f(n,["config"]);return i!=null&&VU(i,e),e}function LU(n){const e={},t=f(n,["name"]);return t!=null&&m(e,["_url","name"],t),e}function OU(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),t}function FU(n){const e={},t=f(n,["parent"]);t!=null&&m(e,["_url","parent"],t);const i=f(n,["config"]);return i!=null&&OU(i,e),e}function BU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const r=f(n,["documents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qU extends Qs{constructor(e){super(),this.apiClient=e,this.list=async t=>new $o(zs.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:t.parent,config:i.config}),await this.listInternal(t),t)}async get(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=LU(e);return a=pe("{name}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>p)}}async delete(e){var t,i;let r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=UU(e);r=pe("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=FU(e);return a=pe("{parent}/documents",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>{const h=BU(p),_=new hD;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class GU extends Qs{constructor(e,t=new qU(e)){super(),this.apiClient=e,this.documents=t,this.list=async(i={})=>new $o(zs.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=NV(e);return a=pe("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>p)}}async get(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=PV(e);return a=pe("{name}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>p)}}async delete(e){var t,i;let r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=DV(e);r=pe("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=FV(e);return a=pe("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>{const h=BV(p),_=new pD;return Object.assign(_,h),_})}}async uploadToFileSearchStoreInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=qV(e);return a=pe("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>{const h=GV(p),_=new mD;return Object.assign(_,h),_})}}async importFile(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=UV(e);return a=pe("{file_search_store_name}:importFile",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>{const h=VV(p),_=new t_;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let fI=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return fI=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^t()&15>>+i/4).toString(16))};const HU=()=>fI();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oy(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const ay=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pi extends Error{}let mi=class ly extends pi{constructor(e,t,i,r){super(`${ly.makeMessage(e,t,i)}`),this.status=e,this.headers=r,this.error=t}static makeMessage(e,t,i){const r=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):i;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,i,r){if(!e||!r)return new Oh({message:i,cause:ay(t)});const a=t;return e===400?new pI(e,a,i,r):e===401?new mI(e,a,i,r):e===403?new gI(e,a,i,r):e===404?new yI(e,a,i,r):e===409?new _I(e,a,i,r):e===422?new vI(e,a,i,r):e===429?new TI(e,a,i,r):e>=500?new EI(e,a,i,r):new ly(e,a,i,r)}},uy=class extends mi{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}},Oh=class extends mi{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}},hI=class extends Oh{constructor({message:e}={}){super({message:e??"Request timed out."})}},pI=class extends mi{},mI=class extends mi{},gI=class extends mi{},yI=class extends mi{},_I=class extends mi{},vI=class extends mi{},TI=class extends mi{},EI=class extends mi{};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zU=/^[a-z][a-z0-9+.-]*:/i,$U=n=>zU.test(n);let cy=n=>(cy=Array.isArray,cy(n));const JU=cy;let KU=JU;const NA=KU;function YU(n){if(!n)return!0;for(const e in n)return!1;return!0}function WU(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const QU=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new pi(`${n} must be an integer`);if(e<0)throw new pi(`${n} must be a positive integer`);return e},XU=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jU=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const za="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZU(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const eL=()=>{var n,e,t,i,r;const a=ZU();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":za,"X-Stainless-OS":DA(Deno.build.os),"X-Stainless-Arch":MA(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":za,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":za,"X-Stainless-OS":DA((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":MA((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const u=tL();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":za,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":za,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function tL(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const i=t.exec(navigator.userAgent);if(i){const r=i[1]||0,a=i[2]||0,u=i[3]||0;return{browser:e,version:`${r}.${a}.${u}`}}}return null}const MA=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",DA=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let pf;const nL=()=>pf??(pf=eL());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iL(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function SI(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function sL(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return SI({start(){},async pull(t){const{done:i,value:r}=await e.next();i?t.close():t.enqueue(r)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function AI(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function rL(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const i=n.getReader(),r=i.cancel();i.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oL=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wI=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function wg(n,e,t){return wI(),new File(n,e??"unknown_file",t)}function aL(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const lL=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const CI=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",uL=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&CI(n),cL=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function dL(n,e,t){if(wI(),n=await n,uL(n))return n instanceof File?n:wg([await n.arrayBuffer()],n.name);if(cL(n)){const r=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),wg(await dy(r),e,t)}const i=await dy(n);if(e||(e=aL(n)),!(t!=null&&t.type)){const r=i.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof r=="string"&&(t=Object.assign(Object.assign({},t),{type:r}))}return wg(i,e,t)}async function dy(n){var e,t,i,r,a;let u=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)u.push(n);else if(CI(n))u.push(n instanceof Blob?n:await n.arrayBuffer());else if(lL(n))try{for(var d=!0,p=Pi(n),h;h=await p.next(),e=h.done,!e;d=!0){r=h.value,d=!1;const _=r;u.push(...await dy(_))}}catch(_){t={error:_}}finally{try{!d&&!e&&(i=p.return)&&await i.call(p)}finally{if(t)throw t.error}}else{const _=(a=n==null?void 0:n.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof n}${_?`; constructor: ${_}`:""}${fL(n)}`)}return u}function fL(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let II=class{constructor(e){this._client=e}};II._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bI(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const PA=Object.freeze(Object.create(null)),hL=(n=bI)=>(function(t,...i){if(t.length===1)return t[0];let r=!1;const a=[],u=t.reduce((_,T,E)=>{var C,M,U;/[?#]/.test(T)&&(r=!0);const P=i[E];let $=(r?encodeURIComponent:n)(""+P);return E!==i.length&&(P==null||typeof P=="object"&&P.toString===((U=Object.getPrototypeOf((M=Object.getPrototypeOf((C=P.hasOwnProperty)!==null&&C!==void 0?C:PA))!==null&&M!==void 0?M:PA))===null||U===void 0?void 0:U.toString))&&($=P+"",a.push({start:_.length+T.length,length:$.length,error:`Value of type ${Object.prototype.toString.call(P).slice(8,-1)} is not a valid path parameter`})),_+T+(E===i.length?"":$)},""),d=u.split(/[?#]/,1)[0],p=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=p.exec(d))!==null;)a.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(a.sort((_,T)=>_.start-T.start),a.length>0){let _=0;const T=a.reduce((E,C)=>{const M=" ".repeat(C.start-_),U="^".repeat(C.length);return _=C.start+C.length,E+M+U},"");throw new pi(`Path parameters result in path with invalid segments:
${a.map(E=>E.error).join(`
`)}
${u}
${T}`)}return u}),mf=hL(bI);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class RI extends II{create(e,t){var i;const{api_version:r=this._client.apiVersion}=e,a=sh(e,["api_version"]);if("model"in a&&"agent_config"in a)throw new pi("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new pi("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(mf`/${r}/interactions`,Object.assign(Object.assign({body:a},t),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,t={},i){const{api_version:r=this._client.apiVersion}=t??{};return this._client.delete(mf`/${r}/interactions/${e}`,i)}cancel(e,t={},i){const{api_version:r=this._client.apiVersion}=t??{};return this._client.post(mf`/${r}/interactions/${e}/cancel`,i)}get(e,t={},i){var r;const a=t??{},{api_version:u=this._client.apiVersion}=a,d=sh(a,["api_version"]);return this._client.get(mf`/${u}/interactions/${e}`,Object.assign(Object.assign({query:d},i),{stream:(r=t==null?void 0:t.stream)!==null&&r!==void 0?r:!1}))}}RI._key=Object.freeze(["interactions"]);class xI extends RI{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pL(n){let e=0;for(const r of n)e+=r.length;const t=new Uint8Array(e);let i=0;for(const r of n)t.set(r,i),i+=r.length;return t}let gf;function l_(n){let e;return(gf??(e=new globalThis.TextEncoder,gf=e.encode.bind(e)))(n)}let yf;function kA(n){let e;return(yf??(e=new globalThis.TextDecoder,yf=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Fh=class{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?l_(e):e;this.buffer=pL([this.buffer,t]);const i=[];let r;for(;(r=mL(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){i.push(kA(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,u=kA(this.buffer.subarray(0,a));i.push(u),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}};Fh.NEWLINE_CHARS=new Set([`
`,"\r"]);Fh.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function mL(n,e){for(let r=e??0;r<n.length;r++){if(n[r]===10)return{preceding:r,index:r+1,carriage:!1};if(n[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function gL(n){for(let i=0;i<n.length-1;i++){if(n[i]===10&&n[i+1]===10||n[i]===13&&n[i+1]===13)return i+2;if(n[i]===13&&n[i+1]===10&&i+3<n.length&&n[i+2]===13&&n[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rh={off:0,error:200,warn:300,info:400,debug:500},VA=(n,e,t)=>{if(n){if(WU(rh,n))return n;In(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(rh))}`)}};function qu(){}function _f(n,e,t){return!e||rh[n]>rh[t]?qu:e[n].bind(e)}const yL={error:qu,warn:qu,info:qu,debug:qu};let UA=new WeakMap;function In(n){var e;const t=n.logger,i=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return yL;const r=UA.get(t);if(r&&r[0]===i)return r[1];const a={error:_f("error",t,i),warn:_f("warn",t,i),info:_f("info",t,i),debug:_f("debug",t,i)};return UA.set(t,[i,a]),a}const xo=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let _L=class Gu{constructor(e,t,i){this.iterator=e,this.controller=t,this.client=i}static fromSSEResponse(e,t,i){let r=!1;const a=i?In(i):console;function u(){return Di(this,arguments,function*(){var p,h,_,T;if(r)throw new pi("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let E=!1;try{try{for(var C=!0,M=Pi(vL(e,t)),U;U=yield Ve(M.next()),p=U.done,!p;C=!0){T=U.value,C=!1;const P=T;if(!E)if(P.data.startsWith("[DONE]")){E=!0;continue}else try{yield yield Ve(JSON.parse(P.data))}catch($){throw a.error("Could not parse message into JSON:",P.data),a.error("From chunk:",P.raw),$}}}catch(P){h={error:P}}finally{try{!C&&!p&&(_=M.return)&&(yield Ve(_.call(M)))}finally{if(h)throw h.error}}E=!0}catch(P){if(oy(P))return yield Ve(void 0);throw P}finally{E||t.abort()}})}return new Gu(u,t,i)}static fromReadableStream(e,t,i){let r=!1;function a(){return Di(this,arguments,function*(){var p,h,_,T;const E=new Fh,C=AI(e);try{for(var M=!0,U=Pi(C),P;P=yield Ve(U.next()),p=P.done,!p;M=!0){T=P.value,M=!1;const $=T;for(const H of E.decode($))yield yield Ve(H)}}catch($){h={error:$}}finally{try{!M&&!p&&(_=U.return)&&(yield Ve(_.call(U)))}finally{if(h)throw h.error}}for(const $ of E.flush())yield yield Ve($)})}function u(){return Di(this,arguments,function*(){var p,h,_,T;if(r)throw new pi("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let E=!1;try{try{for(var C=!0,M=Pi(a()),U;U=yield Ve(M.next()),p=U.done,!p;C=!0){T=U.value,C=!1;const P=T;E||P&&(yield yield Ve(JSON.parse(P)))}}catch(P){h={error:P}}finally{try{!C&&!p&&(_=M.return)&&(yield Ve(_.call(M)))}finally{if(h)throw h.error}}E=!0}catch(P){if(oy(P))return yield Ve(void 0);throw P}finally{E||t.abort()}})}return new Gu(u,t,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],i=this.iterator(),r=a=>({next:()=>{if(a.length===0){const u=i.next();e.push(u),t.push(u)}return a.shift()}});return[new Gu(()=>r(e),this.controller,this.client),new Gu(()=>r(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return SI({async start(){t=e[Symbol.asyncIterator]()},async pull(i){try{const{value:r,done:a}=await t.next();if(a)return i.close();const u=l_(JSON.stringify(r)+`
`);i.enqueue(u)}catch(r){i.error(r)}},async cancel(){var i;await((i=t.return)===null||i===void 0?void 0:i.call(t))}})}};function vL(n,e){return Di(this,arguments,function*(){var i,r,a,u;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new pi("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new pi("Attempted to iterate over a response with no body");const d=new EL,p=new Fh,h=AI(n.body);try{for(var _=!0,T=Pi(TL(h)),E;E=yield Ve(T.next()),i=E.done,!i;_=!0){u=E.value,_=!1;const C=u;for(const M of p.decode(C)){const U=d.decode(M);U&&(yield yield Ve(U))}}}catch(C){r={error:C}}finally{try{!_&&!i&&(a=T.return)&&(yield Ve(a.call(T)))}finally{if(r)throw r.error}}for(const C of p.flush()){const M=d.decode(C);M&&(yield yield Ve(M))}})}function TL(n){return Di(this,arguments,function*(){var t,i,r,a;let u=new Uint8Array;try{for(var d=!0,p=Pi(n),h;h=yield Ve(p.next()),t=h.done,!t;d=!0){a=h.value,d=!1;const _=a;if(_==null)continue;const T=_ instanceof ArrayBuffer?new Uint8Array(_):typeof _=="string"?l_(_):_;let E=new Uint8Array(u.length+T.length);E.set(u),E.set(T,u.length),u=E;let C;for(;(C=gL(u))!==-1;)yield yield Ve(u.slice(0,C)),u=u.slice(C)}}catch(_){i={error:_}}finally{try{!d&&!t&&(r=p.return)&&(yield Ve(r.call(p)))}finally{if(i)throw i.error}}u.length>0&&(yield yield Ve(u))})}let EL=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,i,r]=SL(e,":");return r.startsWith(" ")&&(r=r.substring(1)),t==="event"?this.event=r:t==="data"&&this.data.push(r),null}};function SL(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function AL(n,e){const{response:t,requestLogID:i,retryOfRequestLogID:r,startTime:a}=e,u=await(async()=>{var d;if(e.options.stream)return In(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):_L.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const p=t.headers.get("content-type"),h=(d=p==null?void 0:p.split(";")[0])===null||d===void 0?void 0:d.trim();return(h==null?void 0:h.includes("application/json"))||(h==null?void 0:h.endsWith("+json"))?t.headers.get("content-length")==="0"?void 0:await t.json():await t.text()})();return In(n).debug(`[${i}] response parsed`,xo({retryOfRequestLogID:r,url:t.url,status:t.status,body:u,durationMs:Date.now()-a})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let wL=class NI extends Promise{constructor(e,t,i=AL){super(r=>{r(null)}),this.responsePromise=t,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new NI(this.client,this.responsePromise,async(t,i)=>e(await this.parseResponse(t,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const MI=Symbol("brand.privateNullableHeaders");function*CL(n){if(!n)return;if(MI in n){const{values:i,nulls:r}=n;yield*i.entries();for(const a of r)yield[a,null];return}let e=!1,t;n instanceof Headers?t=n.entries():NA(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let i of t){const r=i[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const a=NA(i[1])?i[1]:[i[1]];let u=!1;for(const d of a)d!==void 0&&(e&&!u&&(u=!0,yield[r,null]),yield[r,d])}}const Ou=n=>{const e=new Headers,t=new Set;for(const i of n){const r=new Set;for(const[a,u]of CL(i)){const d=a.toLowerCase();r.has(d)||(e.delete(a),r.add(d)),u===null?(e.delete(a),t.add(d)):(e.append(a,u),t.delete(d))}}return{[MI]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Cg=n=>{var e,t,i,r,a,u;if(typeof globalThis.process<"u")return(i=(t=(e=GM)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(u=(a=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||a===void 0?void 0:a.call(r,n))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var DI;class Bh{constructor(e){var t,i,r,a,u,d,p,{baseURL:h=Cg("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:_=(t=Cg("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:T="v1beta"}=e,E=sh(e,["baseURL","apiKey","apiVersion"]);const C=Object.assign(Object.assign({apiKey:_,apiVersion:T},E),{baseURL:h||"https://generativelanguage.googleapis.com"});this.baseURL=C.baseURL,this.timeout=(i=C.timeout)!==null&&i!==void 0?i:Bh.DEFAULT_TIMEOUT,this.logger=(r=C.logger)!==null&&r!==void 0?r:console;const M="warn";this.logLevel=M,this.logLevel=(u=(a=VA(C.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:VA(Cg("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:M,this.fetchOptions=C.fetchOptions,this.maxRetries=(d=C.maxRetries)!==null&&d!==void 0?d:2,this.fetch=(p=C.fetch)!==null&&p!==void 0?p:iL(),this.encoder=oL,this._options=C,this.apiKey=_,this.apiVersion=T,this.clientAdapter=C.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=Ou([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return Ou([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Ou([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,i])=>typeof i<"u").map(([t,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(t)}=`;throw new pi(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${za}`}defaultIdempotencyKey(){return`stainless-node-retry-${HU()}`}makeStatusError(e,t,i,r){return mi.generate(e,t,i,r)}buildURL(e,t,i){const r=!this.baseURLOverridden()&&i||this.baseURL,a=$U(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return YU(u)||(t=Object.assign(Object.assign({},u),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(a.search=this.stringifyQuery(t)),a.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:i}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,i){return this.request(Promise.resolve(i).then(r=>Object.assign({method:e,path:t},r)))}request(e,t=null){return new wL(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,i){var r,a,u;const d=await e,p=(r=d.maxRetries)!==null&&r!==void 0?r:this.maxRetries;t==null&&(t=p),await this.prepareOptions(d);const{req:h,url:_,timeout:T}=await this.buildRequest(d,{retryCount:p-t});await this.prepareRequest(h,{url:_,options:d});const E="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),C=i===void 0?"":`, retryOf: ${i}`,M=Date.now();if(In(this).debug(`[${E}] sending request`,xo({retryOfRequestLogID:i,method:d.method,url:_,options:d,headers:h.headers})),!((a=d.signal)===null||a===void 0)&&a.aborted)throw new uy;const U=new AbortController,P=await this.fetchWithTimeout(_,h,T,U).catch(ay),$=Date.now();if(P instanceof globalThis.Error){const z=`retrying, ${t} attempts remaining`;if(!((u=d.signal)===null||u===void 0)&&u.aborted)throw new uy;const X=oy(P)||/timed? ?out/i.test(String(P)+("cause"in P?String(P.cause):""));if(t)return In(this).info(`[${E}] connection ${X?"timed out":"failed"} - ${z}`),In(this).debug(`[${E}] connection ${X?"timed out":"failed"} (${z})`,xo({retryOfRequestLogID:i,url:_,durationMs:$-M,message:P.message})),this.retryRequest(d,t,i??E);throw In(this).info(`[${E}] connection ${X?"timed out":"failed"} - error; no more retries left`),In(this).debug(`[${E}] connection ${X?"timed out":"failed"} (error; no more retries left)`,xo({retryOfRequestLogID:i,url:_,durationMs:$-M,message:P.message})),X?new hI:new Oh({cause:P})}const H=`[${E}${C}] ${h.method} ${_} ${P.ok?"succeeded":"failed"} with status ${P.status} in ${$-M}ms`;if(!P.ok){const z=await this.shouldRetry(P);if(t&&z){const x=`retrying, ${t} attempts remaining`;return await rL(P.body),In(this).info(`${H} - ${x}`),In(this).debug(`[${E}] response error (${x})`,xo({retryOfRequestLogID:i,url:P.url,status:P.status,headers:P.headers,durationMs:$-M})),this.retryRequest(d,t,i??E,P.headers)}const X=z?"error; no more retries left":"error; not retryable";In(this).info(`${H} - ${X}`);const ue=await P.text().catch(x=>ay(x).message),W=XU(ue),N=W?void 0:ue;throw In(this).debug(`[${E}] response error (${X})`,xo({retryOfRequestLogID:i,url:P.url,status:P.status,headers:P.headers,message:N,durationMs:Date.now()-M})),this.makeStatusError(P.status,W,N,P.headers)}return In(this).info(H),In(this).debug(`[${E}] response start`,xo({retryOfRequestLogID:i,url:P.url,status:P.status,headers:P.headers,durationMs:$-M})),{response:P,options:d,controller:U,requestLogID:E,retryOfRequestLogID:i,startTime:M}}async fetchWithTimeout(e,t,i,r){const a=t||{},{signal:u,method:d}=a,p=sh(a,["signal","method"]),h=this._makeAbort(r);u&&u.addEventListener("abort",h,{once:!0});const _=setTimeout(h,i),T=globalThis.ReadableStream&&p.body instanceof globalThis.ReadableStream||typeof p.body=="object"&&p.body!==null&&Symbol.asyncIterator in p.body,E=Object.assign(Object.assign(Object.assign({signal:r.signal},T?{duplex:"half"}:{}),{method:"GET"}),p);d&&(E.method=d.toUpperCase());try{return await this.fetch.call(void 0,e,E)}finally{clearTimeout(_)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,i,r){var a;let u;const d=r==null?void 0:r.get("retry-after-ms");if(d){const h=parseFloat(d);Number.isNaN(h)||(u=h)}const p=r==null?void 0:r.get("retry-after");if(p&&!u){const h=parseFloat(p);Number.isNaN(h)?u=Date.parse(p)-Date.now():u=h*1e3}if(!(u&&0<=u&&u<60*1e3)){const h=(a=e.maxRetries)!==null&&a!==void 0?a:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(t,h)}return await jU(u),this.makeRequest(e,t-1,i)}calculateDefaultRetryTimeoutMillis(e,t){const a=t-e,u=Math.min(.5*Math.pow(2,a),8),d=1-Math.random()*.25;return u*d*1e3}async buildRequest(e,{retryCount:t=0}={}){var i,r,a;const u=Object.assign({},e),{method:d,path:p,query:h,defaultBaseURL:_}=u,T=this.buildURL(p,h,_);"timeout"in u&&QU("timeout",u.timeout),u.timeout=(i=u.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:E,body:C}=this.buildBody({options:u}),M=await this.buildHeaders({options:e,method:d,bodyHeaders:E,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:d,headers:M},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&C instanceof globalThis.ReadableStream&&{duplex:"half"}),C&&{body:C}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(a=u.fetchOptions)!==null&&a!==void 0?a:{}),url:T,timeout:u.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:i,retryCount:r}){let a={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let d=Ou([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),nL()),this._options.defaultHeaders,i,e.headers,u]);return this.validateHeaders(d),d.values}_makeAbort(e){return()=>e.abort()}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=Ou([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:sL(e)}:typeof e=="object"&&i.values.get("content-type")==="application/x-www-form-urlencoded"?{bodyHeaders:{"content-type":"application/x-www-form-urlencoded"},body:this.stringifyQuery(e)}:this.encoder({body:e,headers:i})}}Bh.DEFAULT_TIMEOUT=6e4;class sn extends Bh{constructor(){super(...arguments),this.interactions=new xI(this)}}DI=sn;sn.GeminiNextGenAPIClient=DI;sn.GeminiNextGenAPIClientError=pi;sn.APIError=mi;sn.APIConnectionError=Oh;sn.APIConnectionTimeoutError=hI;sn.APIUserAbortError=uy;sn.NotFoundError=yI;sn.ConflictError=_I;sn.RateLimitError=TI;sn.BadRequestError=pI;sn.AuthenticationError=mI;sn.InternalServerError=EI;sn.PermissionDeniedError=gI;sn.UnprocessableEntityError=vI;sn.toFile=dL;sn.Interactions=xI;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IL(n,e){const t={},i=f(n,["name"]);return i!=null&&m(t,["_url","name"],i),t}function bL(n,e){const t={},i=f(n,["name"]);return i!=null&&m(t,["_url","name"],i),t}function RL(n,e){const t={},i=f(n,["sdkHttpResponse"]);return i!=null&&m(t,["sdkHttpResponse"],i),t}function xL(n,e){const t={},i=f(n,["sdkHttpResponse"]);return i!=null&&m(t,["sdkHttpResponse"],i),t}function NL(n,e,t){const i={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=f(n,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&m(e,["displayName"],r),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=f(n,["epochCount"]);e!==void 0&&a!=null&&m(e,["tuningTask","hyperparameters","epochCount"],a);const u=f(n,["learningRateMultiplier"]);if(u!=null&&m(i,["tuningTask","hyperparameters","learningRateMultiplier"],u),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(f(n,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(f(n,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const d=f(n,["batchSize"]);e!==void 0&&d!=null&&m(e,["tuningTask","hyperparameters","batchSize"],d);const p=f(n,["learningRate"]);if(e!==void 0&&p!=null&&m(e,["tuningTask","hyperparameters","learningRate"],p),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(f(n,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(f(n,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(f(n,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(f(n,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");if(f(n,["encryptionSpec"])!==void 0)throw new Error("encryptionSpec parameter is not supported in Gemini API.");return i}function ML(n,e,t){const i={};let r=f(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const W=f(n,["validationDataset"]);e!==void 0&&W!=null&&m(e,["supervisedTuningSpec"],Ig(W))}else if(r==="PREFERENCE_TUNING"){const W=f(n,["validationDataset"]);e!==void 0&&W!=null&&m(e,["preferenceOptimizationSpec"],Ig(W))}else if(r==="DISTILLATION"){const W=f(n,["validationDataset"]);e!==void 0&&W!=null&&m(e,["distillationSpec"],Ig(W))}const a=f(n,["tunedModelDisplayName"]);e!==void 0&&a!=null&&m(e,["tunedModelDisplayName"],a);const u=f(n,["description"]);e!==void 0&&u!=null&&m(e,["description"],u);let d=f(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const W=f(n,["epochCount"]);e!==void 0&&W!=null&&m(e,["supervisedTuningSpec","hyperParameters","epochCount"],W)}else if(d==="PREFERENCE_TUNING"){const W=f(n,["epochCount"]);e!==void 0&&W!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],W)}else if(d==="DISTILLATION"){const W=f(n,["epochCount"]);e!==void 0&&W!=null&&m(e,["distillationSpec","hyperParameters","epochCount"],W)}let p=f(t,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const W=f(n,["learningRateMultiplier"]);e!==void 0&&W!=null&&m(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],W)}else if(p==="PREFERENCE_TUNING"){const W=f(n,["learningRateMultiplier"]);e!==void 0&&W!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],W)}else if(p==="DISTILLATION"){const W=f(n,["learningRateMultiplier"]);e!==void 0&&W!=null&&m(e,["distillationSpec","hyperParameters","learningRateMultiplier"],W)}let h=f(t,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const W=f(n,["exportLastCheckpointOnly"]);e!==void 0&&W!=null&&m(e,["supervisedTuningSpec","exportLastCheckpointOnly"],W)}else if(h==="PREFERENCE_TUNING"){const W=f(n,["exportLastCheckpointOnly"]);e!==void 0&&W!=null&&m(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],W)}else if(h==="DISTILLATION"){const W=f(n,["exportLastCheckpointOnly"]);e!==void 0&&W!=null&&m(e,["distillationSpec","exportLastCheckpointOnly"],W)}let _=f(t,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const W=f(n,["adapterSize"]);e!==void 0&&W!=null&&m(e,["supervisedTuningSpec","hyperParameters","adapterSize"],W)}else if(_==="PREFERENCE_TUNING"){const W=f(n,["adapterSize"]);e!==void 0&&W!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],W)}else if(_==="DISTILLATION"){const W=f(n,["adapterSize"]);e!==void 0&&W!=null&&m(e,["distillationSpec","hyperParameters","adapterSize"],W)}let T=f(t,["config","method"]);if(T===void 0&&(T="SUPERVISED_FINE_TUNING"),T==="SUPERVISED_FINE_TUNING"){const W=f(n,["tuningMode"]);e!==void 0&&W!=null&&m(e,["supervisedTuningSpec","tuningMode"],W)}const E=f(n,["customBaseModel"]);e!==void 0&&E!=null&&m(e,["customBaseModel"],E);let C=f(t,["config","method"]);if(C===void 0&&(C="SUPERVISED_FINE_TUNING"),C==="SUPERVISED_FINE_TUNING"){const W=f(n,["batchSize"]);e!==void 0&&W!=null&&m(e,["supervisedTuningSpec","hyperParameters","batchSize"],W)}let M=f(t,["config","method"]);if(M===void 0&&(M="SUPERVISED_FINE_TUNING"),M==="SUPERVISED_FINE_TUNING"){const W=f(n,["learningRate"]);e!==void 0&&W!=null&&m(e,["supervisedTuningSpec","hyperParameters","learningRate"],W)}const U=f(n,["labels"]);e!==void 0&&U!=null&&m(e,["labels"],U);const P=f(n,["beta"]);e!==void 0&&P!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","beta"],P);const $=f(n,["baseTeacherModel"]);e!==void 0&&$!=null&&m(e,["distillationSpec","baseTeacherModel"],$);const H=f(n,["tunedTeacherModelSource"]);e!==void 0&&H!=null&&m(e,["distillationSpec","tunedTeacherModelSource"],H);const z=f(n,["sftLossWeightMultiplier"]);e!==void 0&&z!=null&&m(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],z);const X=f(n,["outputUri"]);e!==void 0&&X!=null&&m(e,["outputUri"],X);const ue=f(n,["encryptionSpec"]);return e!==void 0&&ue!=null&&m(e,["encryptionSpec"],ue),i}function DL(n,e){const t={},i=f(n,["baseModel"]);i!=null&&m(t,["baseModel"],i);const r=f(n,["preTunedModel"]);r!=null&&m(t,["preTunedModel"],r);const a=f(n,["trainingDataset"]);a!=null&&HL(a);const u=f(n,["config"]);return u!=null&&NL(u,t),t}function PL(n,e){const t={},i=f(n,["baseModel"]);i!=null&&m(t,["baseModel"],i);const r=f(n,["preTunedModel"]);r!=null&&m(t,["preTunedModel"],r);const a=f(n,["trainingDataset"]);a!=null&&zL(a,t,e);const u=f(n,["config"]);return u!=null&&ML(u,t,e),t}function kL(n,e){const t={},i=f(n,["name"]);return i!=null&&m(t,["_url","name"],i),t}function VL(n,e){const t={},i=f(n,["name"]);return i!=null&&m(t,["_url","name"],i),t}function UL(n,e,t){const i={},r=f(n,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const a=f(n,["pageToken"]);e!==void 0&&a!=null&&m(e,["_query","pageToken"],a);const u=f(n,["filter"]);return e!==void 0&&u!=null&&m(e,["_query","filter"],u),i}function LL(n,e,t){const i={},r=f(n,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const a=f(n,["pageToken"]);e!==void 0&&a!=null&&m(e,["_query","pageToken"],a);const u=f(n,["filter"]);return e!==void 0&&u!=null&&m(e,["_query","filter"],u),i}function OL(n,e){const t={},i=f(n,["config"]);return i!=null&&UL(i,t),t}function FL(n,e){const t={},i=f(n,["config"]);return i!=null&&LL(i,t),t}function BL(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=f(n,["nextPageToken"]);r!=null&&m(t,["nextPageToken"],r);const a=f(n,["tunedModels"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>PI(d))),m(t,["tuningJobs"],u)}return t}function qL(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=f(n,["nextPageToken"]);r!=null&&m(t,["nextPageToken"],r);const a=f(n,["tuningJobs"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>fy(d))),m(t,["tuningJobs"],u)}return t}function GL(n,e){const t={},i=f(n,["name"]);i!=null&&m(t,["model"],i);const r=f(n,["name"]);return r!=null&&m(t,["endpoint"],r),t}function HL(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=f(n,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),m(t,["examples","examples"],r)}return t}function zL(n,e,t){const i={};let r=f(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(r==="PREFERENCE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}else if(r==="DISTILLATION"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&m(e,["distillationSpec","promptDatasetUri"],u)}let a=f(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(a==="PREFERENCE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}else if(a==="DISTILLATION"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&m(e,["distillationSpec","promptDatasetUri"],u)}if(f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function PI(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=f(n,["name"]);r!=null&&m(t,["name"],r);const a=f(n,["state"]);a!=null&&m(t,["state"],YC(a));const u=f(n,["createTime"]);u!=null&&m(t,["createTime"],u);const d=f(n,["tuningTask","startTime"]);d!=null&&m(t,["startTime"],d);const p=f(n,["tuningTask","completeTime"]);p!=null&&m(t,["endTime"],p);const h=f(n,["updateTime"]);h!=null&&m(t,["updateTime"],h);const _=f(n,["description"]);_!=null&&m(t,["description"],_);const T=f(n,["baseModel"]);T!=null&&m(t,["baseModel"],T);const E=f(n,["_self"]);return E!=null&&m(t,["tunedModel"],GL(E)),t}function fy(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=f(n,["name"]);r!=null&&m(t,["name"],r);const a=f(n,["state"]);a!=null&&m(t,["state"],YC(a));const u=f(n,["createTime"]);u!=null&&m(t,["createTime"],u);const d=f(n,["startTime"]);d!=null&&m(t,["startTime"],d);const p=f(n,["endTime"]);p!=null&&m(t,["endTime"],p);const h=f(n,["updateTime"]);h!=null&&m(t,["updateTime"],h);const _=f(n,["error"]);_!=null&&m(t,["error"],_);const T=f(n,["description"]);T!=null&&m(t,["description"],T);const E=f(n,["baseModel"]);E!=null&&m(t,["baseModel"],E);const C=f(n,["tunedModel"]);C!=null&&m(t,["tunedModel"],C);const M=f(n,["preTunedModel"]);M!=null&&m(t,["preTunedModel"],M);const U=f(n,["supervisedTuningSpec"]);U!=null&&m(t,["supervisedTuningSpec"],U);const P=f(n,["preferenceOptimizationSpec"]);P!=null&&m(t,["preferenceOptimizationSpec"],P);const $=f(n,["distillationSpec"]);$!=null&&m(t,["distillationSpec"],$);const H=f(n,["tuningDataStats"]);H!=null&&m(t,["tuningDataStats"],H);const z=f(n,["encryptionSpec"]);z!=null&&m(t,["encryptionSpec"],z);const X=f(n,["partnerModelTuningSpec"]);X!=null&&m(t,["partnerModelTuningSpec"],X);const ue=f(n,["customBaseModel"]);ue!=null&&m(t,["customBaseModel"],ue);const W=f(n,["experiment"]);W!=null&&m(t,["experiment"],W);const N=f(n,["labels"]);N!=null&&m(t,["labels"],N);const D=f(n,["outputUri"]);D!=null&&m(t,["outputUri"],D);const x=f(n,["pipelineJob"]);x!=null&&m(t,["pipelineJob"],x);const L=f(n,["serviceAccount"]);L!=null&&m(t,["serviceAccount"],L);const k=f(n,["tunedModelDisplayName"]);k!=null&&m(t,["tunedModelDisplayName"],k);const q=f(n,["veoTuningSpec"]);return q!=null&&m(t,["veoTuningSpec"],q),t}function $L(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=f(n,["name"]);r!=null&&m(t,["name"],r);const a=f(n,["metadata"]);a!=null&&m(t,["metadata"],a);const u=f(n,["done"]);u!=null&&m(t,["done"],u);const d=f(n,["error"]);return d!=null&&m(t,["error"],d),t}function Ig(n,e){const t={},i=f(n,["gcsUri"]);i!=null&&m(t,["validationDatasetUri"],i);const r=f(n,["vertexDatasetResource"]);return r!=null&&m(t,["validationDatasetUri"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class JL extends Qs{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new $o(zs.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var i;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const r={tunedModelName:t.baseModel};!((i=t.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(r.checkpointId=t.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},t),{preTunedModel:r});return a.baseModel=void 0,await this.tuneInternal(a)}else{const r=Object.assign({},t);return await this.tuneInternal(r)}else{const r=Object.assign({},t),a=await this.tuneMldevInternal(r);let u="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?u=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(u=a.name.split("/operations/")[0]),{name:u,state:jg.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,r,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=VL(e);return d=pe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>fy(_))}else{const h=kL(e);return d=pe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>PI(_))}}async listInternal(e){var t,i,r,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=FL(e);return d=pe("tuningJobs",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=qL(_),E=new uA;return Object.assign(E,T),E})}else{const h=OL(e);return d=pe("tunedModels",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=BL(_),E=new uA;return Object.assign(E,T),E})}}async cancel(e){var t,i,r,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=bL(e);return d=pe("{name}:cancel",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=xL(_),E=new cA;return Object.assign(E,T),E})}else{const h=IL(e);return d=pe("{name}:cancel",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=RL(_),E=new cA;return Object.assign(E,T),E})}}async tuneInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const d=PL(e,e);return a=pe("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),r.then(p=>fy(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=DL(e);return a=pe("tunedModels",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),r.then(p=>$L(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class KL{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const YL=1024*1024*8,WL=3,QL=1e3,XL=2,oh="x-goog-upload-status";async function jL(n,e,t){var i;const r=await kI(n,e,t),a=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[oh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function ZL(n,e,t){var i;const r=await kI(n,e,t),a=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[oh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=GC(a),d=new n_;return Object.assign(d,u),d}async function kI(n,e,t){var i,r;let a=0,u=0,d=new ey(new Response),p="upload";for(a=n.size;u<a;){const h=Math.min(YL,a-u),_=n.slice(u,u+h);u+h>=a&&(p+=", finalize");let T=0,E=QL;for(;T<WL&&(d=await t.request({path:"",body:_,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(u),"Content-Length":String(h)}}}),!(!((i=d==null?void 0:d.headers)===null||i===void 0)&&i[oh]));)T++,await tO(E),E=E*XL;if(u+=h,((r=d==null?void 0:d.headers)===null||r===void 0?void 0:r[oh])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function eO(n){return{size:n.size,type:n.type}}function tO(n){return new Promise(e=>setTimeout(e,n))}class nO{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await jL(e,t,i)}async uploadToFileSearchStore(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await ZL(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await eO(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class iO{create(e,t,i){return new sO(e,t,i)}}class sO{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LA="x-goog-api-key";class rO{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(LA)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(LA,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oO="gl-node/";class aO{get interactions(){var e;if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const t=this.httpOptions;t!=null&&t.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const i=new sn({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:t==null?void 0:t.timeout,maxRetries:(e=t==null?void 0:t.retryOptions)===null||e===void 0?void 0:e.attempts});return this._interactions=i.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=JM(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new rO(this.apiKey);this.apiClient=new jV({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:oO+"web",uploader:new nO,downloader:new KL}),this.models=new yU(this.apiClient),this.live=new dU(this.apiClient,r,new iO),this.batches=new AP(this.apiClient),this.chats=new sk(this.models,this.apiClient),this.caches=new tk(this.apiClient),this.files=new gk(this.apiClient),this.operations=new _U(this.apiClient),this.authTokens=new kU(this.apiClient),this.tunings=new JL(this.apiClient),this.fileSearchStores=new GU(this.apiClient)}}var OA={};let bg=null;const qh=()=>{if(!bg){const n=OA.API_KEY||OA.GEMINI_API_KEY;if(!n)throw new Error("Gemini API key is not set. Please set GEMINI_API_KEY in your environment.");bg=new aO({apiKey:n})}return bg},VI={type:Et.OBJECT,properties:{disease:{type:Et.STRING},confidence:{type:Et.NUMBER},description:{type:Et.STRING},solutions:{type:Et.OBJECT,properties:{issue:{type:Et.STRING},chemicalSolution:{type:Et.OBJECT,properties:{product:{type:Et.STRING},dosage:{type:Et.STRING},precautions:{type:Et.STRING}},required:["product","dosage","precautions"]},naturalSolution:{type:Et.OBJECT,properties:{name:{type:Et.STRING},preparation:{type:Et.STRING},benefits:{type:Et.STRING},philosophy:{type:Et.STRING}},required:["name","preparation","benefits","philosophy"]}},required:["issue","chemicalSolution","naturalSolution"]}},required:["disease","confidence","description","solutions"]},lO=async(n,e="en")=>{const r=await qh().models.generateContent({model:"gemini-3-flash-preview",contents:{parts:[{inlineData:{mimeType:"image/jpeg",data:n}},{text:`Diagnose the crop disease. Provide chemical and Rajiv Dixit natural solutions in JSON. Output all text in ${gs[e]}.`}]},config:{responseMimeType:"application/json",responseSchema:VI}});return JSON.parse(r.text||"{}")},uO=async(n,e,t="en")=>{var h,_,T;const a=await qh().models.generateContent({model:"gemini-3-flash-preview",contents:`Farmer Question: "${n}" in "${e||"India"}". Provide chemical and natural solutions with Google Search. Output all text in ${gs[t]}.`,config:{tools:[{googleSearch:{}}],responseMimeType:"application/json",responseSchema:VI.properties.solutions}}),d=(((T=(_=(h=a.candidates)==null?void 0:h[0])==null?void 0:_.groundingMetadata)==null?void 0:T.groundingChunks)||[]).map(E=>{var C,M;return{title:(C=E.web)==null?void 0:C.title,uri:(M=E.web)==null?void 0:M.uri}}).filter(E=>E.uri);return{...JSON.parse(a.text||"{}"),groundingSources:d}},cO=async(n="en")=>(await qh().models.generateContent({model:"gemini-2.5-flash-lite-latest",contents:`Give a 1-sentence quick professional tip for soil moisture conservation today in ${gs[n]}.`})).text||"Keep your soil mulched!",dO=(n,e="en")=>qh().live.connect({model:"gemini-2.5-flash-native-audio-preview-12-2025",callbacks:n,config:{responseModalities:["audio"],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Puck"}}},inputAudioTranscription:{},outputAudioTranscription:{},systemInstruction:`You are 'Kisan Mitra', a wise and warm agricultural advisor. 
      Respond ONLY in ${gs[e]} using simple, conversational language.
      
      RULES:
      1. Always address the farmer with respect.
      2. First, offer a natural, zero-budget solution based on Rajiv Dixit's principles.
      3. Then, provide a scientific chemical alternative as a backup.
      4. Use regional farming terms in ${gs[e]}.
      5. Agriculture is hard work; be empathetic.`}});function Ne(n,e,t,i,r){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t}function Q(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)}let UI=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return UI=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^t()&15>>+i/4).toString(16))};function hy(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const py=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};class Ae extends Error{}class mn extends Ae{constructor(e,t,i,r){super(`${mn.makeMessage(e,t,i)}`),this.status=e,this.headers=r,this.requestID=r==null?void 0:r.get("x-request-id"),this.error=t;const a=t;this.code=a==null?void 0:a.code,this.param=a==null?void 0:a.param,this.type=a==null?void 0:a.type}static makeMessage(e,t,i){const r=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):i;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,i,r){if(!e||!r)return new Gh({message:i,cause:py(t)});const a=t==null?void 0:t.error;return e===400?new LI(e,a,i,r):e===401?new OI(e,a,i,r):e===403?new FI(e,a,i,r):e===404?new BI(e,a,i,r):e===409?new qI(e,a,i,r):e===422?new GI(e,a,i,r):e===429?new HI(e,a,i,r):e>=500?new zI(e,a,i,r):new mn(e,a,i,r)}}class hi extends mn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Gh extends mn{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class u_ extends Gh{constructor({message:e}={}){super({message:e??"Request timed out."})}}class LI extends mn{}class OI extends mn{}class FI extends mn{}class BI extends mn{}class qI extends mn{}class GI extends mn{}class HI extends mn{}class zI extends mn{}class $I extends Ae{constructor(){super("Could not parse response content as the length limit was reached")}}class JI extends Ae{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class Hu extends Error{constructor(e){super(e)}}const fO=/^[a-z][a-z0-9+.-]*:/i,hO=n=>fO.test(n);let Un=n=>(Un=Array.isArray,Un(n)),FA=Un;function KI(n){return typeof n!="object"?{}:n??{}}function pO(n){if(!n)return!0;for(const e in n)return!1;return!0}function mO(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Rg(n){return n!=null&&typeof n=="object"&&!Array.isArray(n)}const gO=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Ae(`${n} must be an integer`);if(e<0)throw new Ae(`${n} must be a positive integer`);return e},yO=n=>{try{return JSON.parse(n)}catch{return}},Ac=n=>new Promise(e=>setTimeout(e,n)),$a="6.22.0",_O=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function vO(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const TO=()=>{var t;const n=vO();if(n==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$a,"X-Stainless-OS":qA(Deno.build.os),"X-Stainless-Arch":BA(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((t=Deno.version)==null?void 0:t.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$a,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(n==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$a,"X-Stainless-OS":qA(globalThis.process.platform??"unknown"),"X-Stainless-Arch":BA(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=EO();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$a,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$a,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function EO(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const i=t.exec(navigator.userAgent);if(i){const r=i[1]||0,a=i[2]||0,u=i[3]||0;return{browser:e,version:`${r}.${a}.${u}`}}}return null}const BA=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",qA=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let GA;const SO=()=>GA??(GA=TO());function AO(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function YI(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function WI(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return YI({start(){},async pull(t){const{done:i,value:r}=await e.next();i?t.close():t.enqueue(r)},async cancel(){var t;await((t=e.return)==null?void 0:t.call(e))}})}function QI(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function wO(n){var i,r;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((r=(i=n[Symbol.asyncIterator]()).return)==null?void 0:r.call(i));return}const e=n.getReader(),t=e.cancel();e.releaseLock(),await t}const CO=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),XI="RFC3986",jI=n=>String(n),HA={RFC1738:n=>String(n).replace(/%20/g,"+"),RFC3986:jI},IO="RFC1738";let my=(n,e)=>(my=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),my(n,e));const as=(()=>{const n=[];for(let e=0;e<256;++e)n.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return n})(),xg=1024,bO=(n,e,t,i,r)=>{if(n.length===0)return n;let a=n;if(typeof n=="symbol"?a=Symbol.prototype.toString.call(n):typeof n!="string"&&(a=String(n)),t==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(d){return"%26%23"+parseInt(d.slice(2),16)+"%3B"});let u="";for(let d=0;d<a.length;d+=xg){const p=a.length>=xg?a.slice(d,d+xg):a,h=[];for(let _=0;_<p.length;++_){let T=p.charCodeAt(_);if(T===45||T===46||T===95||T===126||T>=48&&T<=57||T>=65&&T<=90||T>=97&&T<=122||r===IO&&(T===40||T===41)){h[h.length]=p.charAt(_);continue}if(T<128){h[h.length]=as[T];continue}if(T<2048){h[h.length]=as[192|T>>6]+as[128|T&63];continue}if(T<55296||T>=57344){h[h.length]=as[224|T>>12]+as[128|T>>6&63]+as[128|T&63];continue}_+=1,T=65536+((T&1023)<<10|p.charCodeAt(_)&1023),h[h.length]=as[240|T>>18]+as[128|T>>12&63]+as[128|T>>6&63]+as[128|T&63]}u+=h.join("")}return u};function RO(n){return!n||typeof n!="object"?!1:!!(n.constructor&&n.constructor.isBuffer&&n.constructor.isBuffer(n))}function zA(n,e){if(Un(n)){const t=[];for(let i=0;i<n.length;i+=1)t.push(e(n[i]));return t}return e(n)}const ZI={brackets(n){return String(n)+"[]"},comma:"comma",indices(n,e){return String(n)+"["+e+"]"},repeat(n){return String(n)}},eb=function(n,e){Array.prototype.push.apply(n,Un(e)?e:[e])};let $A;const Wt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:bO,encodeValuesOnly:!1,format:XI,formatter:jI,indices:!1,serializeDate(n){return($A??($A=Function.prototype.call.bind(Date.prototype.toISOString)))(n)},skipNulls:!1,strictNullHandling:!1};function xO(n){return typeof n=="string"||typeof n=="number"||typeof n=="boolean"||typeof n=="symbol"||typeof n=="bigint"}const Ng={};function tb(n,e,t,i,r,a,u,d,p,h,_,T,E,C,M,U,P,$){let H=n,z=$,X=0,ue=!1;for(;(z=z.get(Ng))!==void 0&&!ue;){const L=z.get(n);if(X+=1,typeof L<"u"){if(L===X)throw new RangeError("Cyclic object value");ue=!0}typeof z.get(Ng)>"u"&&(X=0)}if(typeof h=="function"?H=h(e,H):H instanceof Date?H=E==null?void 0:E(H):t==="comma"&&Un(H)&&(H=zA(H,function(L){return L instanceof Date?E==null?void 0:E(L):L})),H===null){if(a)return p&&!U?p(e,Wt.encoder,P,"key",C):e;H=""}if(xO(H)||RO(H)){if(p){const L=U?e:p(e,Wt.encoder,P,"key",C);return[(M==null?void 0:M(L))+"="+(M==null?void 0:M(p(H,Wt.encoder,P,"value",C)))]}return[(M==null?void 0:M(e))+"="+(M==null?void 0:M(String(H)))]}const W=[];if(typeof H>"u")return W;let N;if(t==="comma"&&Un(H))U&&p&&(H=zA(H,p)),N=[{value:H.length>0?H.join(",")||null:void 0}];else if(Un(h))N=h;else{const L=Object.keys(H);N=_?L.sort(_):L}const D=d?String(e).replace(/\./g,"%2E"):String(e),x=i&&Un(H)&&H.length===1?D+"[]":D;if(r&&Un(H)&&H.length===0)return x+"[]";for(let L=0;L<N.length;++L){const k=N[L],q=typeof k=="object"&&typeof k.value<"u"?k.value:H[k];if(u&&q===null)continue;const V=T&&d?k.replace(/\./g,"%2E"):k,ke=Un(H)?typeof t=="function"?t(x,V):x:x+(T?"."+V:"["+V+"]");$.set(n,X);const xe=new WeakMap;xe.set(Ng,$),eb(W,tb(q,ke,t,i,r,a,u,d,t==="comma"&&U&&Un(H)?null:p,h,_,T,E,C,M,U,P,xe))}return W}function NO(n=Wt){if(typeof n.allowEmptyArrays<"u"&&typeof n.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof n.encodeDotInKeys<"u"&&typeof n.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(n.encoder!==null&&typeof n.encoder<"u"&&typeof n.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=n.charset||Wt.charset;if(typeof n.charset<"u"&&n.charset!=="utf-8"&&n.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let t=XI;if(typeof n.format<"u"){if(!my(HA,n.format))throw new TypeError("Unknown format option provided.");t=n.format}const i=HA[t];let r=Wt.filter;(typeof n.filter=="function"||Un(n.filter))&&(r=n.filter);let a;if(n.arrayFormat&&n.arrayFormat in ZI?a=n.arrayFormat:"indices"in n?a=n.indices?"indices":"repeat":a=Wt.arrayFormat,"commaRoundTrip"in n&&typeof n.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const u=typeof n.allowDots>"u"?n.encodeDotInKeys?!0:Wt.allowDots:!!n.allowDots;return{addQueryPrefix:typeof n.addQueryPrefix=="boolean"?n.addQueryPrefix:Wt.addQueryPrefix,allowDots:u,allowEmptyArrays:typeof n.allowEmptyArrays=="boolean"?!!n.allowEmptyArrays:Wt.allowEmptyArrays,arrayFormat:a,charset:e,charsetSentinel:typeof n.charsetSentinel=="boolean"?n.charsetSentinel:Wt.charsetSentinel,commaRoundTrip:!!n.commaRoundTrip,delimiter:typeof n.delimiter>"u"?Wt.delimiter:n.delimiter,encode:typeof n.encode=="boolean"?n.encode:Wt.encode,encodeDotInKeys:typeof n.encodeDotInKeys=="boolean"?n.encodeDotInKeys:Wt.encodeDotInKeys,encoder:typeof n.encoder=="function"?n.encoder:Wt.encoder,encodeValuesOnly:typeof n.encodeValuesOnly=="boolean"?n.encodeValuesOnly:Wt.encodeValuesOnly,filter:r,format:t,formatter:i,serializeDate:typeof n.serializeDate=="function"?n.serializeDate:Wt.serializeDate,skipNulls:typeof n.skipNulls=="boolean"?n.skipNulls:Wt.skipNulls,sort:typeof n.sort=="function"?n.sort:null,strictNullHandling:typeof n.strictNullHandling=="boolean"?n.strictNullHandling:Wt.strictNullHandling}}function MO(n,e={}){let t=n;const i=NO(e);let r,a;typeof i.filter=="function"?(a=i.filter,t=a("",t)):Un(i.filter)&&(a=i.filter,r=a);const u=[];if(typeof t!="object"||t===null)return"";const d=ZI[i.arrayFormat],p=d==="comma"&&i.commaRoundTrip;r||(r=Object.keys(t)),i.sort&&r.sort(i.sort);const h=new WeakMap;for(let E=0;E<r.length;++E){const C=r[E];i.skipNulls&&t[C]===null||eb(u,tb(t[C],C,d,p,i.allowEmptyArrays,i.strictNullHandling,i.skipNulls,i.encodeDotInKeys,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,h))}const _=u.join(i.delimiter);let T=i.addQueryPrefix===!0?"?":"";return i.charsetSentinel&&(i.charset==="iso-8859-1"?T+="utf8=%26%2310003%3B&":T+="utf8=%E2%9C%93&"),_.length>0?T+_:""}function DO(n){let e=0;for(const r of n)e+=r.length;const t=new Uint8Array(e);let i=0;for(const r of n)t.set(r,i),i+=r.length;return t}let JA;function c_(n){let e;return(JA??(e=new globalThis.TextEncoder,JA=e.encode.bind(e)))(n)}let KA;function YA(n){let e;return(KA??(e=new globalThis.TextDecoder,KA=e.decode.bind(e)))(n)}var Yn,Wn;class Hh{constructor(){Yn.set(this,void 0),Wn.set(this,void 0),Ne(this,Yn,new Uint8Array),Ne(this,Wn,null)}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?c_(e):e;Ne(this,Yn,DO([Q(this,Yn,"f"),t]));const i=[];let r;for(;(r=PO(Q(this,Yn,"f"),Q(this,Wn,"f")))!=null;){if(r.carriage&&Q(this,Wn,"f")==null){Ne(this,Wn,r.index);continue}if(Q(this,Wn,"f")!=null&&(r.index!==Q(this,Wn,"f")+1||r.carriage)){i.push(YA(Q(this,Yn,"f").subarray(0,Q(this,Wn,"f")-1))),Ne(this,Yn,Q(this,Yn,"f").subarray(Q(this,Wn,"f"))),Ne(this,Wn,null);continue}const a=Q(this,Wn,"f")!==null?r.preceding-1:r.preceding,u=YA(Q(this,Yn,"f").subarray(0,a));i.push(u),Ne(this,Yn,Q(this,Yn,"f").subarray(r.index)),Ne(this,Wn,null)}return i}flush(){return Q(this,Yn,"f").length?this.decode(`
`):[]}}Yn=new WeakMap,Wn=new WeakMap;Hh.NEWLINE_CHARS=new Set([`
`,"\r"]);Hh.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function PO(n,e){for(let r=e??0;r<n.length;r++){if(n[r]===10)return{preceding:r,index:r+1,carriage:!1};if(n[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function kO(n){for(let i=0;i<n.length-1;i++){if(n[i]===10&&n[i+1]===10||n[i]===13&&n[i+1]===13)return i+2;if(n[i]===13&&n[i+1]===10&&i+3<n.length&&n[i+2]===13&&n[i+3]===10)return i+4}return-1}const ah={off:0,error:200,warn:300,info:400,debug:500},WA=(n,e,t)=>{if(n){if(mO(ah,n))return n;dn(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(ah))}`)}};function zu(){}function vf(n,e,t){return!e||ah[n]>ah[t]?zu:e[n].bind(e)}const VO={error:zu,warn:zu,info:zu,debug:zu};let QA=new WeakMap;function dn(n){const e=n.logger,t=n.logLevel??"off";if(!e)return VO;const i=QA.get(e);if(i&&i[0]===t)return i[1];const r={error:vf("error",e,t),warn:vf("warn",e,t),info:vf("info",e,t),debug:vf("debug",e,t)};return QA.set(e,[t,r]),r}const No=n=>(n.options&&(n.options={...n.options},delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);var Fu;class cs{constructor(e,t,i){this.iterator=e,Fu.set(this,void 0),this.controller=t,Ne(this,Fu,i)}static fromSSEResponse(e,t,i){let r=!1;const a=i?dn(i):console;async function*u(){if(r)throw new Ae("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let d=!1;try{for await(const p of UO(e,t))if(!d){if(p.data.startsWith("[DONE]")){d=!0;continue}if(p.event===null||!p.event.startsWith("thread.")){let h;try{h=JSON.parse(p.data)}catch(_){throw a.error("Could not parse message into JSON:",p.data),a.error("From chunk:",p.raw),_}if(h&&h.error)throw new mn(void 0,h.error,void 0,e.headers);yield h}else{let h;try{h=JSON.parse(p.data)}catch(_){throw console.error("Could not parse message into JSON:",p.data),console.error("From chunk:",p.raw),_}if(p.event=="error")throw new mn(void 0,h.error,h.message,void 0);yield{event:p.event,data:h}}}d=!0}catch(p){if(hy(p))return;throw p}finally{d||t.abort()}}return new cs(u,t,i)}static fromReadableStream(e,t,i){let r=!1;async function*a(){const d=new Hh,p=QI(e);for await(const h of p)for(const _ of d.decode(h))yield _;for(const h of d.flush())yield h}async function*u(){if(r)throw new Ae("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let d=!1;try{for await(const p of a())d||p&&(yield JSON.parse(p));d=!0}catch(p){if(hy(p))return;throw p}finally{d||t.abort()}}return new cs(u,t,i)}[(Fu=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],t=[],i=this.iterator(),r=a=>({next:()=>{if(a.length===0){const u=i.next();e.push(u),t.push(u)}return a.shift()}});return[new cs(()=>r(e),this.controller,Q(this,Fu,"f")),new cs(()=>r(t),this.controller,Q(this,Fu,"f"))]}toReadableStream(){const e=this;let t;return YI({async start(){t=e[Symbol.asyncIterator]()},async pull(i){try{const{value:r,done:a}=await t.next();if(a)return i.close();const u=c_(JSON.stringify(r)+`
`);i.enqueue(u)}catch(r){i.error(r)}},async cancel(){var i;await((i=t.return)==null?void 0:i.call(t))}})}}async function*UO(n,e){if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Ae("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Ae("Attempted to iterate over a response with no body");const t=new OO,i=new Hh,r=QI(n.body);for await(const a of LO(r))for(const u of i.decode(a)){const d=t.decode(u);d&&(yield d)}for(const a of i.flush()){const u=t.decode(a);u&&(yield u)}}async function*LO(n){let e=new Uint8Array;for await(const t of n){if(t==null)continue;const i=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?c_(t):t;let r=new Uint8Array(e.length+i.length);r.set(e),r.set(i,e.length),e=r;let a;for(;(a=kO(e))!==-1;)yield e.slice(0,a),e=e.slice(a)}e.length>0&&(yield e)}class OO{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,i,r]=FO(e,":");return r.startsWith(" ")&&(r=r.substring(1)),t==="event"?this.event=r:t==="data"&&this.data.push(r),null}}function FO(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}async function nb(n,e){const{response:t,requestLogID:i,retryOfRequestLogID:r,startTime:a}=e,u=await(async()=>{var T;if(e.options.stream)return dn(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):cs.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const d=t.headers.get("content-type"),p=(T=d==null?void 0:d.split(";")[0])==null?void 0:T.trim();if((p==null?void 0:p.includes("application/json"))||(p==null?void 0:p.endsWith("+json"))){if(t.headers.get("content-length")==="0")return;const C=await t.json();return ib(C,t)}return await t.text()})();return dn(n).debug(`[${i}] response parsed`,No({retryOfRequestLogID:r,url:t.url,status:t.status,body:u,durationMs:Date.now()-a})),u}function ib(n,e){return!n||typeof n!="object"||Array.isArray(n)?n:Object.defineProperty(n,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var $u;class zh extends Promise{constructor(e,t,i=nb){super(r=>{r(null)}),this.responsePromise=t,this.parseResponse=i,$u.set(this,void 0),Ne(this,$u,e)}_thenUnwrap(e){return new zh(Q(this,$u,"f"),this.responsePromise,async(t,i)=>ib(e(await this.parseResponse(t,i),i),i.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(Q(this,$u,"f"),e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}$u=new WeakMap;var Tf;class d_{constructor(e,t,i,r){Tf.set(this,void 0),Ne(this,Tf,e),this.options=r,this.response=t,this.body=i}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new Ae("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await Q(this,Tf,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Tf=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}class BO extends zh{constructor(e,t,i){super(e,t,async(r,a)=>new i(r,a.response,await nb(r,a),a.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const t of e)yield t}}class $h extends d_{constructor(e,t,i,r){super(e,t,i,r),this.data=i.data||[],this.object=i.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class bt extends d_{constructor(e,t,i,r){super(e,t,i,r),this.data=i.data||[],this.has_more=i.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){var i;const e=this.getPaginatedItems(),t=(i=e[e.length-1])==null?void 0:i.id;return t?{...this.options,query:{...KI(this.options.query),after:t}}:null}}class lh extends d_{constructor(e,t,i,r){super(e,t,i,r),this.data=i.data||[],this.has_more=i.has_more||!1,this.last_id=i.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...KI(this.options.query),after:e}}:null}}const sb=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)==null?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function nc(n,e,t){return sb(),new File(n,e??"unknown_file",t)}function Vf(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const f_=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function",fc=async(n,e)=>gy(n.body)?{...n,body:await rb(n.body,e)}:n,ll=async(n,e)=>({...n,body:await rb(n.body,e)}),XA=new WeakMap;function qO(n){const e=typeof n=="function"?n:n.fetch,t=XA.get(e);if(t)return t;const i=(async()=>{try{const r="Response"in e?e.Response:(await e("data:,")).constructor,a=new FormData;return a.toString()!==await new r(a).text()}catch{return!0}})();return XA.set(e,i),i}const rb=async(n,e)=>{if(!await qO(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const t=new FormData;return await Promise.all(Object.entries(n||{}).map(([i,r])=>yy(t,i,r))),t},ob=n=>n instanceof Blob&&"name"in n,GO=n=>typeof n=="object"&&n!==null&&(n instanceof Response||f_(n)||ob(n)),gy=n=>{if(GO(n))return!0;if(Array.isArray(n))return n.some(gy);if(n&&typeof n=="object"){for(const e in n)if(gy(n[e]))return!0}return!1},yy=async(n,e,t)=>{if(t!==void 0){if(t==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")n.append(e,String(t));else if(t instanceof Response)n.append(e,nc([await t.blob()],Vf(t)));else if(f_(t))n.append(e,nc([await new Response(WI(t)).blob()],Vf(t)));else if(ob(t))n.append(e,t,Vf(t));else if(Array.isArray(t))await Promise.all(t.map(i=>yy(n,e+"[]",i)));else if(typeof t=="object")await Promise.all(Object.entries(t).map(([i,r])=>yy(n,`${e}[${i}]`,r)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${t} instead`)}},ab=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",HO=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&ab(n),zO=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function $O(n,e,t){if(sb(),n=await n,HO(n))return n instanceof File?n:nc([await n.arrayBuffer()],n.name);if(zO(n)){const r=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),nc(await _y(r),e,t)}const i=await _y(n);if(e||(e=Vf(n)),!(t!=null&&t.type)){const r=i.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof r=="string"&&(t={...t,type:r})}return nc(i,e,t)}async function _y(n){var t;let e=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)e.push(n);else if(ab(n))e.push(n instanceof Blob?n:await n.arrayBuffer());else if(f_(n))for await(const i of n)e.push(...await _y(i));else{const i=(t=n==null?void 0:n.constructor)==null?void 0:t.name;throw new Error(`Unexpected data type: ${typeof n}${i?`; constructor: ${i}`:""}${JO(n)}`)}return e}function JO(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}class Ee{constructor(e){this._client=e}}function lb(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const jA=Object.freeze(Object.create(null)),KO=(n=lb)=>function(t,...i){if(t.length===1)return t[0];let r=!1;const a=[],u=t.reduce((_,T,E)=>{var U;/[?#]/.test(T)&&(r=!0);const C=i[E];let M=(r?encodeURIComponent:n)(""+C);return E!==i.length&&(C==null||typeof C=="object"&&C.toString===((U=Object.getPrototypeOf(Object.getPrototypeOf(C.hasOwnProperty??jA)??jA))==null?void 0:U.toString))&&(M=C+"",a.push({start:_.length+T.length,length:M.length,error:`Value of type ${Object.prototype.toString.call(C).slice(8,-1)} is not a valid path parameter`})),_+T+(E===i.length?"":M)},""),d=u.split(/[?#]/,1)[0],p=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=p.exec(d))!==null;)a.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(a.sort((_,T)=>_.start-T.start),a.length>0){let _=0;const T=a.reduce((E,C)=>{const M=" ".repeat(C.start-_),U="^".repeat(C.length);return _=C.start+C.length,E+M+U},"");throw new Ae(`Path parameters result in path with invalid segments:
${a.map(E=>E.error).join(`
`)}
${u}
${T}`)}return u},le=KO(lb);let ub=class extends Ee{list(e,t={},i){return this._client.getAPIList(le`/chat/completions/${e}/messages`,bt,{query:t,...i})}};function uh(n){return n!==void 0&&"function"in n&&n.function!==void 0}function h_(n){return(n==null?void 0:n.$brand)==="auto-parseable-response-format"}function wc(n){return(n==null?void 0:n.$brand)==="auto-parseable-tool"}function YO(n,e){return!e||!cb(e)?{...n,choices:n.choices.map(t=>(db(t.message.tool_calls),{...t,message:{...t.message,parsed:null,...t.message.tool_calls?{tool_calls:t.message.tool_calls}:void 0}}))}:p_(n,e)}function p_(n,e){const t=n.choices.map(i=>{var r;if(i.finish_reason==="length")throw new $I;if(i.finish_reason==="content_filter")throw new JI;return db(i.message.tool_calls),{...i,message:{...i.message,...i.message.tool_calls?{tool_calls:((r=i.message.tool_calls)==null?void 0:r.map(a=>QO(e,a)))??void 0}:void 0,parsed:i.message.content&&!i.message.refusal?WO(e,i.message.content):null}}});return{...n,choices:t}}function WO(n,e){var t,i;return((t=n.response_format)==null?void 0:t.type)!=="json_schema"?null:((i=n.response_format)==null?void 0:i.type)==="json_schema"?"$parseRaw"in n.response_format?n.response_format.$parseRaw(e):JSON.parse(e):null}function QO(n,e){var i;const t=(i=n.tools)==null?void 0:i.find(r=>{var a;return uh(r)&&((a=r.function)==null?void 0:a.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:wc(t)?t.$parseRaw(e.function.arguments):t!=null&&t.function.strict?JSON.parse(e.function.arguments):null}}}function XO(n,e){var i;if(!n||!("tools"in n)||!n.tools)return!1;const t=(i=n.tools)==null?void 0:i.find(r=>{var a;return uh(r)&&((a=r.function)==null?void 0:a.name)===e.function.name});return uh(t)&&(wc(t)||(t==null?void 0:t.function.strict)||!1)}function cb(n){var e;return h_(n.response_format)?!0:((e=n.tools)==null?void 0:e.some(t=>wc(t)||t.type==="function"&&t.function.strict===!0))??!1}function db(n){for(const e of n||[])if(e.type!=="function")throw new Ae(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function jO(n){for(const e of n??[]){if(e.type!=="function")throw new Ae(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new Ae(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const ch=n=>(n==null?void 0:n.role)==="assistant",fb=n=>(n==null?void 0:n.role)==="tool";var vy,Uf,Lf,Ju,Ku,Of,Yu,Fs,Wu,dh,fh,Ja,hb;class m_{constructor(){vy.add(this),this.controller=new AbortController,Uf.set(this,void 0),Lf.set(this,()=>{}),Ju.set(this,()=>{}),Ku.set(this,void 0),Of.set(this,()=>{}),Yu.set(this,()=>{}),Fs.set(this,{}),Wu.set(this,!1),dh.set(this,!1),fh.set(this,!1),Ja.set(this,!1),Ne(this,Uf,new Promise((e,t)=>{Ne(this,Lf,e,"f"),Ne(this,Ju,t,"f")})),Ne(this,Ku,new Promise((e,t)=>{Ne(this,Of,e,"f"),Ne(this,Yu,t,"f")})),Q(this,Uf,"f").catch(()=>{}),Q(this,Ku,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},Q(this,vy,"m",hb).bind(this))},0)}_connected(){this.ended||(Q(this,Lf,"f").call(this),this._emit("connect"))}get ended(){return Q(this,Wu,"f")}get errored(){return Q(this,dh,"f")}get aborted(){return Q(this,fh,"f")}abort(){this.controller.abort()}on(e,t){return(Q(this,Fs,"f")[e]||(Q(this,Fs,"f")[e]=[])).push({listener:t}),this}off(e,t){const i=Q(this,Fs,"f")[e];if(!i)return this;const r=i.findIndex(a=>a.listener===t);return r>=0&&i.splice(r,1),this}once(e,t){return(Q(this,Fs,"f")[e]||(Q(this,Fs,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,i)=>{Ne(this,Ja,!0),e!=="error"&&this.once("error",i),this.once(e,t)})}async done(){Ne(this,Ja,!0),await Q(this,Ku,"f")}_emit(e,...t){if(Q(this,Wu,"f"))return;e==="end"&&(Ne(this,Wu,!0),Q(this,Of,"f").call(this));const i=Q(this,Fs,"f")[e];if(i&&(Q(this,Fs,"f")[e]=i.filter(r=>!r.once),i.forEach(({listener:r})=>r(...t))),e==="abort"){const r=t[0];!Q(this,Ja,"f")&&!(i!=null&&i.length)&&Promise.reject(r),Q(this,Ju,"f").call(this,r),Q(this,Yu,"f").call(this,r),this._emit("end");return}if(e==="error"){const r=t[0];!Q(this,Ja,"f")&&!(i!=null&&i.length)&&Promise.reject(r),Q(this,Ju,"f").call(this,r),Q(this,Yu,"f").call(this,r),this._emit("end")}}_emitFinal(){}}Uf=new WeakMap,Lf=new WeakMap,Ju=new WeakMap,Ku=new WeakMap,Of=new WeakMap,Yu=new WeakMap,Fs=new WeakMap,Wu=new WeakMap,dh=new WeakMap,fh=new WeakMap,Ja=new WeakMap,vy=new WeakSet,hb=function(e){if(Ne(this,dh,!0),e instanceof Error&&e.name==="AbortError"&&(e=new hi),e instanceof hi)return Ne(this,fh,!0),this._emit("abort",e);if(e instanceof Ae)return this._emit("error",e);if(e instanceof Error){const t=new Ae(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new Ae(String(e)))};function ZO(n){return typeof n.parse=="function"}var Cn,Ty,hh,Ey,Sy,Ay,pb,mb;const e4=10;class gb extends m_{constructor(){super(...arguments),Cn.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var i;this._chatCompletions.push(e),this._emit("chatCompletion",e);const t=(i=e.choices[0])==null?void 0:i.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t){if(this._emit("message",e),fb(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(ch(e)&&e.tool_calls)for(const i of e.tool_calls)i.type==="function"&&this._emit("functionToolCall",i.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Ae("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),Q(this,Cn,"m",Ty).call(this)}async finalMessage(){return await this.done(),Q(this,Cn,"m",hh).call(this)}async finalFunctionToolCall(){return await this.done(),Q(this,Cn,"m",Ey).call(this)}async finalFunctionToolCallResult(){return await this.done(),Q(this,Cn,"m",Sy).call(this)}async totalUsage(){return await this.done(),Q(this,Cn,"m",Ay).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const t=Q(this,Cn,"m",hh).call(this);t&&this._emit("finalMessage",t);const i=Q(this,Cn,"m",Ty).call(this);i&&this._emit("finalContent",i);const r=Q(this,Cn,"m",Ey).call(this);r&&this._emit("finalFunctionToolCall",r);const a=Q(this,Cn,"m",Sy).call(this);a!=null&&this._emit("finalFunctionToolCallResult",a),this._chatCompletions.some(u=>u.usage)&&this._emit("totalUsage",Q(this,Cn,"m",Ay).call(this))}async _createChatCompletion(e,t,i){const r=i==null?void 0:i.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),Q(this,Cn,"m",pb).call(this,t);const a=await e.chat.completions.create({...t,stream:!1},{...i,signal:this.controller.signal});return this._connected(),this._addChatCompletion(p_(a,t))}async _runChatCompletion(e,t,i){for(const r of t.messages)this._addMessage(r,!1);return await this._createChatCompletion(e,t,i)}async _runTools(e,t,i){var C,M,U;const r="tool",{tool_choice:a="auto",stream:u,...d}=t,p=typeof a!="string"&&a.type==="function"&&((C=a==null?void 0:a.function)==null?void 0:C.name),{maxChatCompletions:h=e4}=i||{},_=t.tools.map(P=>{if(wc(P)){if(!P.$callback)throw new Ae("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:P.$callback,name:P.function.name,description:P.function.description||"",parameters:P.function.parameters,parse:P.$parseRaw,strict:!0}}}return P}),T={};for(const P of _)P.type==="function"&&(T[P.function.name||P.function.function.name]=P.function);const E="tools"in t?_.map(P=>P.type==="function"?{type:"function",function:{name:P.function.name||P.function.function.name,parameters:P.function.parameters,description:P.function.description,strict:P.function.strict}}:P):void 0;for(const P of t.messages)this._addMessage(P,!1);for(let P=0;P<h;++P){const H=(M=(await this._createChatCompletion(e,{...d,tool_choice:a,tools:E,messages:[...this.messages]},i)).choices[0])==null?void 0:M.message;if(!H)throw new Ae("missing message in ChatCompletion response");if(!((U=H.tool_calls)!=null&&U.length))return;for(const z of H.tool_calls){if(z.type!=="function")continue;const X=z.id,{name:ue,arguments:W}=z.function,N=T[ue];if(N){if(p&&p!==ue){const k=`Invalid tool_call: ${JSON.stringify(ue)}. ${JSON.stringify(p)} requested. Please try again`;this._addMessage({role:r,tool_call_id:X,content:k});continue}}else{const k=`Invalid tool_call: ${JSON.stringify(ue)}. Available options are: ${Object.keys(T).map(q=>JSON.stringify(q)).join(", ")}. Please try again`;this._addMessage({role:r,tool_call_id:X,content:k});continue}let D;try{D=ZO(N)?await N.parse(W):W}catch(k){const q=k instanceof Error?k.message:String(k);this._addMessage({role:r,tool_call_id:X,content:q});continue}const x=await N.function(D,this),L=Q(this,Cn,"m",mb).call(this,x);if(this._addMessage({role:r,tool_call_id:X,content:L}),p)return}}}}Cn=new WeakSet,Ty=function(){return Q(this,Cn,"m",hh).call(this).content??null},hh=function(){let e=this.messages.length;for(;e-- >0;){const t=this.messages[e];if(ch(t))return{...t,content:t.content??null,refusal:t.refusal??null}}throw new Ae("stream ended without producing a ChatCompletionMessage with role=assistant")},Ey=function(){var e,t;for(let i=this.messages.length-1;i>=0;i--){const r=this.messages[i];if(ch(r)&&((e=r==null?void 0:r.tool_calls)!=null&&e.length))return(t=r.tool_calls.filter(a=>a.type==="function").at(-1))==null?void 0:t.function}},Sy=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(fb(t)&&t.content!=null&&typeof t.content=="string"&&this.messages.some(i=>{var r;return i.role==="assistant"&&((r=i.tool_calls)==null?void 0:r.some(a=>a.type==="function"&&a.id===t.tool_call_id))}))return t.content}},Ay=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},pb=function(e){if(e.n!=null&&e.n>1)throw new Ae("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},mb=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class g_ extends gb{static runTools(e,t,i){const r=new g_,a={...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,t,a)),r}_addMessage(e,t=!0){super._addMessage(e,t),ch(e)&&e.content&&this._emit("content",e.content)}}const yb=1,_b=2,vb=4,Tb=8,Eb=16,Sb=32,Ab=64,wb=128,Cb=256,Ib=wb|Cb,bb=Eb|Sb|Ib|Ab,Rb=yb|_b|bb,xb=vb|Tb,t4=Rb|xb,en={STR:yb,NUM:_b,ARR:vb,OBJ:Tb,NULL:Eb,BOOL:Sb,NAN:Ab,INFINITY:wb,MINUS_INFINITY:Cb,INF:Ib,SPECIAL:bb,ATOM:Rb,COLLECTION:xb,ALL:t4};class n4 extends Error{}class i4 extends Error{}function s4(n,e=en.ALL){if(typeof n!="string")throw new TypeError(`expecting str, got ${typeof n}`);if(!n.trim())throw new Error(`${n} is empty`);return r4(n.trim(),e)}const r4=(n,e)=>{const t=n.length;let i=0;const r=E=>{throw new n4(`${E} at position ${i}`)},a=E=>{throw new i4(`${E} at position ${i}`)},u=()=>(T(),i>=t&&r("Unexpected end of input"),n[i]==='"'?d():n[i]==="{"?p():n[i]==="["?h():n.substring(i,i+4)==="null"||en.NULL&e&&t-i<4&&"null".startsWith(n.substring(i))?(i+=4,null):n.substring(i,i+4)==="true"||en.BOOL&e&&t-i<4&&"true".startsWith(n.substring(i))?(i+=4,!0):n.substring(i,i+5)==="false"||en.BOOL&e&&t-i<5&&"false".startsWith(n.substring(i))?(i+=5,!1):n.substring(i,i+8)==="Infinity"||en.INFINITY&e&&t-i<8&&"Infinity".startsWith(n.substring(i))?(i+=8,1/0):n.substring(i,i+9)==="-Infinity"||en.MINUS_INFINITY&e&&1<t-i&&t-i<9&&"-Infinity".startsWith(n.substring(i))?(i+=9,-1/0):n.substring(i,i+3)==="NaN"||en.NAN&e&&t-i<3&&"NaN".startsWith(n.substring(i))?(i+=3,NaN):_()),d=()=>{const E=i;let C=!1;for(i++;i<t&&(n[i]!=='"'||C&&n[i-1]==="\\");)C=n[i]==="\\"?!C:!1,i++;if(n.charAt(i)=='"')try{return JSON.parse(n.substring(E,++i-Number(C)))}catch(M){a(String(M))}else if(en.STR&e)try{return JSON.parse(n.substring(E,i-Number(C))+'"')}catch{return JSON.parse(n.substring(E,n.lastIndexOf("\\"))+'"')}r("Unterminated string literal")},p=()=>{i++,T();const E={};try{for(;n[i]!=="}";){if(T(),i>=t&&en.OBJ&e)return E;const C=d();T(),i++;try{const M=u();Object.defineProperty(E,C,{value:M,writable:!0,enumerable:!0,configurable:!0})}catch(M){if(en.OBJ&e)return E;throw M}T(),n[i]===","&&i++}}catch{if(en.OBJ&e)return E;r("Expected '}' at end of object")}return i++,E},h=()=>{i++;const E=[];try{for(;n[i]!=="]";)E.push(u()),T(),n[i]===","&&i++}catch{if(en.ARR&e)return E;r("Expected ']' at end of array")}return i++,E},_=()=>{if(i===0){n==="-"&&en.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(n)}catch(C){if(en.NUM&e)try{return n[n.length-1]==="."?JSON.parse(n.substring(0,n.lastIndexOf("."))):JSON.parse(n.substring(0,n.lastIndexOf("e")))}catch{}a(String(C))}}const E=i;for(n[i]==="-"&&i++;n[i]&&!",]}".includes(n[i]);)i++;i==t&&!(en.NUM&e)&&r("Unterminated number literal");try{return JSON.parse(n.substring(E,i))}catch{n.substring(E,i)==="-"&&en.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(n.substring(E,n.lastIndexOf("e")))}catch(M){a(String(M))}}},T=()=>{for(;i<t&&` 
\r	`.includes(n[i]);)i++};return u()},ZA=n=>s4(n,en.ALL^en.NUM);var Yt,Os,Fa,Dr,Mg,Ef,Dg,Pg,kg,Sf,Vg,ew;class hc extends gb{constructor(e){super(),Yt.add(this),Os.set(this,void 0),Fa.set(this,void 0),Dr.set(this,void 0),Ne(this,Os,e),Ne(this,Fa,[])}get currentChatCompletionSnapshot(){return Q(this,Dr,"f")}static fromReadableStream(e){const t=new hc(null);return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,i){const r=new hc(t);return r._run(()=>r._runChatCompletion(e,{...t,stream:!0},{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createChatCompletion(e,t,i){var u;super._createChatCompletion;const r=i==null?void 0:i.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),Q(this,Yt,"m",Mg).call(this);const a=await e.chat.completions.create({...t,stream:!0},{...i,signal:this.controller.signal});this._connected();for await(const d of a)Q(this,Yt,"m",Dg).call(this,d);if((u=a.controller.signal)!=null&&u.aborted)throw new hi;return this._addChatCompletion(Q(this,Yt,"m",Sf).call(this))}async _fromReadableStream(e,t){var u;const i=t==null?void 0:t.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),Q(this,Yt,"m",Mg).call(this),this._connected();const r=cs.fromReadableStream(e,this.controller);let a;for await(const d of r)a&&a!==d.id&&this._addChatCompletion(Q(this,Yt,"m",Sf).call(this)),Q(this,Yt,"m",Dg).call(this,d),a=d.id;if((u=r.controller.signal)!=null&&u.aborted)throw new hi;return this._addChatCompletion(Q(this,Yt,"m",Sf).call(this))}[(Os=new WeakMap,Fa=new WeakMap,Dr=new WeakMap,Yt=new WeakSet,Mg=function(){this.ended||Ne(this,Dr,void 0)},Ef=function(t){let i=Q(this,Fa,"f")[t.index];return i||(i={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},Q(this,Fa,"f")[t.index]=i,i)},Dg=function(t){var r,a,u,d,p,h,_,T,E,C,M,U,P,$,H;if(this.ended)return;const i=Q(this,Yt,"m",ew).call(this,t);this._emit("chunk",t,i);for(const z of t.choices){const X=i.choices[z.index];z.delta.content!=null&&((r=X.message)==null?void 0:r.role)==="assistant"&&((a=X.message)!=null&&a.content)&&(this._emit("content",z.delta.content,X.message.content),this._emit("content.delta",{delta:z.delta.content,snapshot:X.message.content,parsed:X.message.parsed})),z.delta.refusal!=null&&((u=X.message)==null?void 0:u.role)==="assistant"&&((d=X.message)!=null&&d.refusal)&&this._emit("refusal.delta",{delta:z.delta.refusal,snapshot:X.message.refusal}),((p=z.logprobs)==null?void 0:p.content)!=null&&((h=X.message)==null?void 0:h.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(_=z.logprobs)==null?void 0:_.content,snapshot:((T=X.logprobs)==null?void 0:T.content)??[]}),((E=z.logprobs)==null?void 0:E.refusal)!=null&&((C=X.message)==null?void 0:C.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(M=z.logprobs)==null?void 0:M.refusal,snapshot:((U=X.logprobs)==null?void 0:U.refusal)??[]});const ue=Q(this,Yt,"m",Ef).call(this,X);X.finish_reason&&(Q(this,Yt,"m",kg).call(this,X),ue.current_tool_call_index!=null&&Q(this,Yt,"m",Pg).call(this,X,ue.current_tool_call_index));for(const W of z.delta.tool_calls??[])ue.current_tool_call_index!==W.index&&(Q(this,Yt,"m",kg).call(this,X),ue.current_tool_call_index!=null&&Q(this,Yt,"m",Pg).call(this,X,ue.current_tool_call_index)),ue.current_tool_call_index=W.index;for(const W of z.delta.tool_calls??[]){const N=(P=X.message.tool_calls)==null?void 0:P[W.index];N!=null&&N.type&&((N==null?void 0:N.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:($=N.function)==null?void 0:$.name,index:W.index,arguments:N.function.arguments,parsed_arguments:N.function.parsed_arguments,arguments_delta:((H=W.function)==null?void 0:H.arguments)??""}):(N==null||N.type,void 0))}}},Pg=function(t,i){var u,d,p;if(Q(this,Yt,"m",Ef).call(this,t).done_tool_calls.has(i))return;const a=(u=t.message.tool_calls)==null?void 0:u[i];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const h=(p=(d=Q(this,Os,"f"))==null?void 0:d.tools)==null?void 0:p.find(_=>uh(_)&&_.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:i,arguments:a.function.arguments,parsed_arguments:wc(h)?h.$parseRaw(a.function.arguments):h!=null&&h.function.strict?JSON.parse(a.function.arguments):null})}else a.type},kg=function(t){var r,a;const i=Q(this,Yt,"m",Ef).call(this,t);if(t.message.content&&!i.content_done){i.content_done=!0;const u=Q(this,Yt,"m",Vg).call(this);this._emit("content.done",{content:t.message.content,parsed:u?u.$parseRaw(t.message.content):null})}t.message.refusal&&!i.refusal_done&&(i.refusal_done=!0,this._emit("refusal.done",{refusal:t.message.refusal})),(r=t.logprobs)!=null&&r.content&&!i.logprobs_content_done&&(i.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:t.logprobs.content})),(a=t.logprobs)!=null&&a.refusal&&!i.logprobs_refusal_done&&(i.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:t.logprobs.refusal}))},Sf=function(){if(this.ended)throw new Ae("stream has ended, this shouldn't happen");const t=Q(this,Dr,"f");if(!t)throw new Ae("request ended without sending any chunks");return Ne(this,Dr,void 0),Ne(this,Fa,[]),o4(t,Q(this,Os,"f"))},Vg=function(){var i;const t=(i=Q(this,Os,"f"))==null?void 0:i.response_format;return h_(t)?t:null},ew=function(t){var i,r,a,u;let d=Q(this,Dr,"f");const{choices:p,...h}=t;d?Object.assign(d,h):d=Ne(this,Dr,{...h,choices:[]});for(const{delta:_,finish_reason:T,index:E,logprobs:C=null,...M}of t.choices){let U=d.choices[E];if(U||(U=d.choices[E]={finish_reason:T,index:E,message:{},logprobs:C,...M}),C)if(!U.logprobs)U.logprobs=Object.assign({},C);else{const{content:W,refusal:N,...D}=C;Object.assign(U.logprobs,D),W&&((i=U.logprobs).content??(i.content=[]),U.logprobs.content.push(...W)),N&&((r=U.logprobs).refusal??(r.refusal=[]),U.logprobs.refusal.push(...N))}if(T&&(U.finish_reason=T,Q(this,Os,"f")&&cb(Q(this,Os,"f")))){if(T==="length")throw new $I;if(T==="content_filter")throw new JI}if(Object.assign(U,M),!_)continue;const{content:P,refusal:$,function_call:H,role:z,tool_calls:X,...ue}=_;if(Object.assign(U.message,ue),$&&(U.message.refusal=(U.message.refusal||"")+$),z&&(U.message.role=z),H&&(U.message.function_call?(H.name&&(U.message.function_call.name=H.name),H.arguments&&((a=U.message.function_call).arguments??(a.arguments=""),U.message.function_call.arguments+=H.arguments)):U.message.function_call=H),P&&(U.message.content=(U.message.content||"")+P,!U.message.refusal&&Q(this,Yt,"m",Vg).call(this)&&(U.message.parsed=ZA(U.message.content))),X){U.message.tool_calls||(U.message.tool_calls=[]);for(const{index:W,id:N,type:D,function:x,...L}of X){const k=(u=U.message.tool_calls)[W]??(u[W]={});Object.assign(k,L),N&&(k.id=N),D&&(k.type=D),x&&(k.function??(k.function={name:x.name??"",arguments:""})),x!=null&&x.name&&(k.function.name=x.name),x!=null&&x.arguments&&(k.function.arguments+=x.arguments,XO(Q(this,Os,"f"),k)&&(k.function.parsed_arguments=ZA(k.function.arguments)))}}}return d},Symbol.asyncIterator)](){const e=[],t=[];let i=!1;return this.on("chunk",r=>{const a=t.shift();a?a.resolve(r):e.push(r)}),this.on("end",()=>{i=!0;for(const r of t)r.resolve(void 0);t.length=0}),this.on("abort",r=>{i=!0;for(const a of t)a.reject(r);t.length=0}),this.on("error",r=>{i=!0;for(const a of t)a.reject(r);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((a,u)=>t.push({resolve:a,reject:u})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new cs(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function o4(n,e){const{id:t,choices:i,created:r,model:a,system_fingerprint:u,...d}=n,p={...d,id:t,choices:i.map(({message:h,finish_reason:_,index:T,logprobs:E,...C})=>{if(!_)throw new Ae(`missing finish_reason for choice ${T}`);const{content:M=null,function_call:U,tool_calls:P,...$}=h,H=h.role;if(!H)throw new Ae(`missing role for choice ${T}`);if(U){const{arguments:z,name:X}=U;if(z==null)throw new Ae(`missing function_call.arguments for choice ${T}`);if(!X)throw new Ae(`missing function_call.name for choice ${T}`);return{...C,message:{content:M,function_call:{arguments:z,name:X},role:H,refusal:h.refusal??null},finish_reason:_,index:T,logprobs:E}}return P?{...C,index:T,finish_reason:_,logprobs:E,message:{...$,role:H,content:M,refusal:h.refusal??null,tool_calls:P.map((z,X)=>{const{function:ue,type:W,id:N,...D}=z,{arguments:x,name:L,...k}=ue||{};if(N==null)throw new Ae(`missing choices[${T}].tool_calls[${X}].id
${Af(n)}`);if(W==null)throw new Ae(`missing choices[${T}].tool_calls[${X}].type
${Af(n)}`);if(L==null)throw new Ae(`missing choices[${T}].tool_calls[${X}].function.name
${Af(n)}`);if(x==null)throw new Ae(`missing choices[${T}].tool_calls[${X}].function.arguments
${Af(n)}`);return{...D,id:N,type:W,function:{...k,name:L,arguments:x}}})}}:{...C,message:{...$,content:M,role:H,refusal:h.refusal??null},finish_reason:_,index:T,logprobs:E}}),created:r,model:a,object:"chat.completion",...u?{system_fingerprint:u}:{}};return YO(p,e)}function Af(n){return JSON.stringify(n)}class ph extends hc{static fromReadableStream(e){const t=new ph(null);return t._run(()=>t._fromReadableStream(e)),t}static runTools(e,t,i){const r=new ph(t),a={...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,t,a)),r}}let y_=class extends Ee{constructor(){super(...arguments),this.messages=new ub(this._client)}create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}retrieve(e,t){return this._client.get(le`/chat/completions/${e}`,t)}update(e,t,i){return this._client.post(le`/chat/completions/${e}`,{body:t,...i})}list(e={},t){return this._client.getAPIList("/chat/completions",bt,{query:e,...t})}delete(e,t){return this._client.delete(le`/chat/completions/${e}`,t)}parse(e,t){return jO(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t==null?void 0:t.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(i=>p_(i,e))}runTools(e,t){return e.stream?ph.runTools(this._client,e,t):g_.runTools(this._client,e,t)}stream(e,t){return hc.createChatCompletion(this._client,e,t)}};y_.Messages=ub;class __ extends Ee{constructor(){super(...arguments),this.completions=new y_(this._client)}}__.Completions=y_;const Nb=Symbol("brand.privateNullableHeaders");function*a4(n){if(!n)return;if(Nb in n){const{values:i,nulls:r}=n;yield*i.entries();for(const a of r)yield[a,null];return}let e=!1,t;n instanceof Headers?t=n.entries():FA(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let i of t){const r=i[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const a=FA(i[1])?i[1]:[i[1]];let u=!1;for(const d of a)d!==void 0&&(e&&!u&&(u=!0,yield[r,null]),yield[r,d])}}const _e=n=>{const e=new Headers,t=new Set;for(const i of n){const r=new Set;for(const[a,u]of a4(i)){const d=a.toLowerCase();r.has(d)||(e.delete(a),r.add(d)),u===null?(e.delete(a),t.add(d)):(e.append(a,u),t.delete(d))}}return{[Nb]:!0,values:e,nulls:t}};class Mb extends Ee{create(e,t){return this._client.post("/audio/speech",{body:e,...t,headers:_e([{Accept:"application/octet-stream"},t==null?void 0:t.headers]),__binaryResponse:!0})}}class Db extends Ee{create(e,t){return this._client.post("/audio/transcriptions",ll({body:e,...t,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class Pb extends Ee{create(e,t){return this._client.post("/audio/translations",ll({body:e,...t,__metadata:{model:e.model}},this._client))}}class Cc extends Ee{constructor(){super(...arguments),this.transcriptions=new Db(this._client),this.translations=new Pb(this._client),this.speech=new Mb(this._client)}}Cc.Transcriptions=Db;Cc.Translations=Pb;Cc.Speech=Mb;class kb extends Ee{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(le`/batches/${e}`,t)}list(e={},t){return this._client.getAPIList("/batches",bt,{query:e,...t})}cancel(e,t){return this._client.post(le`/batches/${e}/cancel`,t)}}class Vb extends Ee{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:_e([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}retrieve(e,t){return this._client.get(le`/assistants/${e}`,{...t,headers:_e([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}update(e,t,i){return this._client.post(le`/assistants/${e}`,{body:t,...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}list(e={},t){return this._client.getAPIList("/assistants",bt,{query:e,...t,headers:_e([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}delete(e,t){return this._client.delete(le`/assistants/${e}`,{...t,headers:_e([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}}let Ub=class extends Ee{create(e,t){return this._client.post("/realtime/sessions",{body:e,...t,headers:_e([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}};class Lb extends Ee{create(e,t){return this._client.post("/realtime/transcription_sessions",{body:e,...t,headers:_e([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}}let Jh=class extends Ee{constructor(){super(...arguments),this.sessions=new Ub(this._client),this.transcriptionSessions=new Lb(this._client)}};Jh.Sessions=Ub;Jh.TranscriptionSessions=Lb;class Ob extends Ee{create(e,t){return this._client.post("/chatkit/sessions",{body:e,...t,headers:_e([{"OpenAI-Beta":"chatkit_beta=v1"},t==null?void 0:t.headers])})}cancel(e,t){return this._client.post(le`/chatkit/sessions/${e}/cancel`,{...t,headers:_e([{"OpenAI-Beta":"chatkit_beta=v1"},t==null?void 0:t.headers])})}}let Fb=class extends Ee{retrieve(e,t){return this._client.get(le`/chatkit/threads/${e}`,{...t,headers:_e([{"OpenAI-Beta":"chatkit_beta=v1"},t==null?void 0:t.headers])})}list(e={},t){return this._client.getAPIList("/chatkit/threads",lh,{query:e,...t,headers:_e([{"OpenAI-Beta":"chatkit_beta=v1"},t==null?void 0:t.headers])})}delete(e,t){return this._client.delete(le`/chatkit/threads/${e}`,{...t,headers:_e([{"OpenAI-Beta":"chatkit_beta=v1"},t==null?void 0:t.headers])})}listItems(e,t={},i){return this._client.getAPIList(le`/chatkit/threads/${e}/items`,lh,{query:t,...i,headers:_e([{"OpenAI-Beta":"chatkit_beta=v1"},i==null?void 0:i.headers])})}};class Kh extends Ee{constructor(){super(...arguments),this.sessions=new Ob(this._client),this.threads=new Fb(this._client)}}Kh.Sessions=Ob;Kh.Threads=Fb;class Bb extends Ee{create(e,t,i){return this._client.post(le`/threads/${e}/messages`,{body:t,...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}retrieve(e,t,i){const{thread_id:r}=t;return this._client.get(le`/threads/${r}/messages/${e}`,{...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}update(e,t,i){const{thread_id:r,...a}=t;return this._client.post(le`/threads/${r}/messages/${e}`,{body:a,...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}list(e,t={},i){return this._client.getAPIList(le`/threads/${e}/messages`,bt,{query:t,...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}delete(e,t,i){const{thread_id:r}=t;return this._client.delete(le`/threads/${r}/messages/${e}`,{...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}}class qb extends Ee{retrieve(e,t,i){const{thread_id:r,run_id:a,...u}=t;return this._client.get(le`/threads/${r}/runs/${a}/steps/${e}`,{query:u,...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}list(e,t,i){const{thread_id:r,...a}=t;return this._client.getAPIList(le`/threads/${r}/runs/${e}/steps`,bt,{query:a,...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}}const l4=n=>{if(typeof Buffer<"u"){const e=Buffer.from(n,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(n),t=e.length,i=new Uint8Array(t);for(let r=0;r<t;r++)i[r]=e.charCodeAt(r);return Array.from(new Float32Array(i.buffer))}};var Ug={};const Ba=n=>{var e,t,i,r;if(typeof globalThis.process<"u")return((e=Ug==null?void 0:Ug[n])==null?void 0:e.trim())??void 0;if(typeof globalThis.Deno<"u")return(r=(i=(t=globalThis.Deno.env)==null?void 0:t.get)==null?void 0:i.call(t,n))==null?void 0:r.trim()};var fn,Po,wy,ls,Ff,Ri,ko,Za,Do,mh,Qn,Bf,qf,ic,Qu,Xu,tw,nw,iw,sw,rw,ow,aw;class sc extends m_{constructor(){super(...arguments),fn.add(this),wy.set(this,[]),ls.set(this,{}),Ff.set(this,{}),Ri.set(this,void 0),ko.set(this,void 0),Za.set(this,void 0),Do.set(this,void 0),mh.set(this,void 0),Qn.set(this,void 0),Bf.set(this,void 0),qf.set(this,void 0),ic.set(this,void 0)}[(wy=new WeakMap,ls=new WeakMap,Ff=new WeakMap,Ri=new WeakMap,ko=new WeakMap,Za=new WeakMap,Do=new WeakMap,mh=new WeakMap,Qn=new WeakMap,Bf=new WeakMap,qf=new WeakMap,ic=new WeakMap,fn=new WeakSet,Symbol.asyncIterator)](){const e=[],t=[];let i=!1;return this.on("event",r=>{const a=t.shift();a?a.resolve(r):e.push(r)}),this.on("end",()=>{i=!0;for(const r of t)r.resolve(void 0);t.length=0}),this.on("abort",r=>{i=!0;for(const a of t)a.reject(r);t.length=0}),this.on("error",r=>{i=!0;for(const a of t)a.reject(r);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((a,u)=>t.push({resolve:a,reject:u})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const t=new Po;return t._run(()=>t._fromReadableStream(e)),t}async _fromReadableStream(e,t){var a;const i=t==null?void 0:t.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),this._connected();const r=cs.fromReadableStream(e,this.controller);for await(const u of r)Q(this,fn,"m",Qu).call(this,u);if((a=r.controller.signal)!=null&&a.aborted)throw new hi;return this._addRun(Q(this,fn,"m",Xu).call(this))}toReadableStream(){return new cs(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,i,r){const a=new Po;return a._run(()=>a._runToolAssistantStream(e,t,i,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createToolAssistantStream(e,t,i,r){var p;const a=r==null?void 0:r.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const u={...i,stream:!0},d=await e.submitToolOutputs(t,u,{...r,signal:this.controller.signal});this._connected();for await(const h of d)Q(this,fn,"m",Qu).call(this,h);if((p=d.controller.signal)!=null&&p.aborted)throw new hi;return this._addRun(Q(this,fn,"m",Xu).call(this))}static createThreadAssistantStream(e,t,i){const r=new Po;return r._run(()=>r._threadAssistantStream(e,t,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),r}static createAssistantStream(e,t,i,r){const a=new Po;return a._run(()=>a._runAssistantStream(e,t,i,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return Q(this,Bf,"f")}currentRun(){return Q(this,qf,"f")}currentMessageSnapshot(){return Q(this,Ri,"f")}currentRunStepSnapshot(){return Q(this,ic,"f")}async finalRunSteps(){return await this.done(),Object.values(Q(this,ls,"f"))}async finalMessages(){return await this.done(),Object.values(Q(this,Ff,"f"))}async finalRun(){if(await this.done(),!Q(this,ko,"f"))throw Error("Final run was not received.");return Q(this,ko,"f")}async _createThreadAssistantStream(e,t,i){var d;const r=i==null?void 0:i.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));const a={...t,stream:!0},u=await e.createAndRun(a,{...i,signal:this.controller.signal});this._connected();for await(const p of u)Q(this,fn,"m",Qu).call(this,p);if((d=u.controller.signal)!=null&&d.aborted)throw new hi;return this._addRun(Q(this,fn,"m",Xu).call(this))}async _createAssistantStream(e,t,i,r){var p;const a=r==null?void 0:r.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const u={...i,stream:!0},d=await e.create(t,u,{...r,signal:this.controller.signal});this._connected();for await(const h of d)Q(this,fn,"m",Qu).call(this,h);if((p=d.controller.signal)!=null&&p.aborted)throw new hi;return this._addRun(Q(this,fn,"m",Xu).call(this))}static accumulateDelta(e,t){for(const[i,r]of Object.entries(t)){if(!e.hasOwnProperty(i)){e[i]=r;continue}let a=e[i];if(a==null){e[i]=r;continue}if(i==="index"||i==="type"){e[i]=r;continue}if(typeof a=="string"&&typeof r=="string")a+=r;else if(typeof a=="number"&&typeof r=="number")a+=r;else if(Rg(a)&&Rg(r))a=this.accumulateDelta(a,r);else if(Array.isArray(a)&&Array.isArray(r)){if(a.every(u=>typeof u=="string"||typeof u=="number")){a.push(...r);continue}for(const u of r){if(!Rg(u))throw new Error(`Expected array delta entry to be an object but got: ${u}`);const d=u.index;if(d==null)throw console.error(u),new Error("Expected array delta entry to have an `index` property");if(typeof d!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${d}`);const p=a[d];p==null?a.push(u):a[d]=this.accumulateDelta(p,u)}continue}else throw Error(`Unhandled record type: ${i}, deltaValue: ${r}, accValue: ${a}`);e[i]=a}return e}_addRun(e){return e}async _threadAssistantStream(e,t,i){return await this._createThreadAssistantStream(t,e,i)}async _runAssistantStream(e,t,i,r){return await this._createAssistantStream(t,e,i,r)}async _runToolAssistantStream(e,t,i,r){return await this._createToolAssistantStream(t,e,i,r)}}Po=sc,Qu=function(e){if(!this.ended)switch(Ne(this,Bf,e),Q(this,fn,"m",iw).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":Q(this,fn,"m",aw).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Q(this,fn,"m",nw).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":Q(this,fn,"m",tw).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Xu=function(){if(this.ended)throw new Ae("stream has ended, this shouldn't happen");if(!Q(this,ko,"f"))throw Error("Final run has not been received");return Q(this,ko,"f")},tw=function(e){const[t,i]=Q(this,fn,"m",rw).call(this,e,Q(this,Ri,"f"));Ne(this,Ri,t),Q(this,Ff,"f")[t.id]=t;for(const r of i){const a=t.content[r.index];(a==null?void 0:a.type)=="text"&&this._emit("textCreated",a.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(const r of e.data.delta.content){if(r.type=="text"&&r.text){let a=r.text,u=t.content[r.index];if(u&&u.type=="text")this._emit("textDelta",a,u.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(r.index!=Q(this,Za,"f")){if(Q(this,Do,"f"))switch(Q(this,Do,"f").type){case"text":this._emit("textDone",Q(this,Do,"f").text,Q(this,Ri,"f"));break;case"image_file":this._emit("imageFileDone",Q(this,Do,"f").image_file,Q(this,Ri,"f"));break}Ne(this,Za,r.index)}Ne(this,Do,t.content[r.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(Q(this,Za,"f")!==void 0){const r=e.data.content[Q(this,Za,"f")];if(r)switch(r.type){case"image_file":this._emit("imageFileDone",r.image_file,Q(this,Ri,"f"));break;case"text":this._emit("textDone",r.text,Q(this,Ri,"f"));break}}Q(this,Ri,"f")&&this._emit("messageDone",e.data),Ne(this,Ri,void 0)}},nw=function(e){const t=Q(this,fn,"m",sw).call(this,e);switch(Ne(this,ic,t),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const i=e.data.delta;if(i.step_details&&i.step_details.type=="tool_calls"&&i.step_details.tool_calls&&t.step_details.type=="tool_calls")for(const a of i.step_details.tool_calls)a.index==Q(this,mh,"f")?this._emit("toolCallDelta",a,t.step_details.tool_calls[a.index]):(Q(this,Qn,"f")&&this._emit("toolCallDone",Q(this,Qn,"f")),Ne(this,mh,a.index),Ne(this,Qn,t.step_details.tool_calls[a.index]),Q(this,Qn,"f")&&this._emit("toolCallCreated",Q(this,Qn,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Ne(this,ic,void 0),e.data.step_details.type=="tool_calls"&&Q(this,Qn,"f")&&(this._emit("toolCallDone",Q(this,Qn,"f")),Ne(this,Qn,void 0)),this._emit("runStepDone",e.data,t);break}},iw=function(e){Q(this,wy,"f").push(e),this._emit("event",e)},sw=function(e){switch(e.event){case"thread.run.step.created":return Q(this,ls,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=Q(this,ls,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let i=e.data;if(i.delta){const r=Po.accumulateDelta(t,i.delta);Q(this,ls,"f")[e.data.id]=r}return Q(this,ls,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":Q(this,ls,"f")[e.data.id]=e.data;break}if(Q(this,ls,"f")[e.data.id])return Q(this,ls,"f")[e.data.id];throw new Error("No snapshot available")},rw=function(e,t){let i=[];switch(e.event){case"thread.message.created":return[e.data,i];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let r=e.data;if(r.delta.content)for(const a of r.delta.content)if(a.index in t.content){let u=t.content[a.index];t.content[a.index]=Q(this,fn,"m",ow).call(this,a,u)}else t.content[a.index]=a,i.push(a);return[t,i];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,i];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},ow=function(e,t){return Po.accumulateDelta(t,e)},aw=function(e){switch(Ne(this,qf,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":Ne(this,ko,e.data),Q(this,Qn,"f")&&(this._emit("toolCallDone",Q(this,Qn,"f")),Ne(this,Qn,void 0));break}};let v_=class extends Ee{constructor(){super(...arguments),this.steps=new qb(this._client)}create(e,t,i){const{include:r,...a}=t;return this._client.post(le`/threads/${e}/runs`,{query:{include:r},body:a,...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers]),stream:t.stream??!1})}retrieve(e,t,i){const{thread_id:r}=t;return this._client.get(le`/threads/${r}/runs/${e}`,{...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}update(e,t,i){const{thread_id:r,...a}=t;return this._client.post(le`/threads/${r}/runs/${e}`,{body:a,...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}list(e,t={},i){return this._client.getAPIList(le`/threads/${e}/runs`,bt,{query:t,...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}cancel(e,t,i){const{thread_id:r}=t;return this._client.post(le`/threads/${r}/runs/${e}/cancel`,{...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}async createAndPoll(e,t,i){const r=await this.create(e,t,i);return await this.poll(r.id,{thread_id:e},i)}createAndStream(e,t,i){return sc.createAssistantStream(e,this._client.beta.threads.runs,t,i)}async poll(e,t,i){var a;const r=_e([i==null?void 0:i.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((a=i==null?void 0:i.pollIntervalMs)==null?void 0:a.toString())??void 0}]);for(;;){const{data:u,response:d}=await this.retrieve(e,t,{...i,headers:{...i==null?void 0:i.headers,...r}}).withResponse();switch(u.status){case"queued":case"in_progress":case"cancelling":let p=5e3;if(i!=null&&i.pollIntervalMs)p=i.pollIntervalMs;else{const h=d.headers.get("openai-poll-after-ms");if(h){const _=parseInt(h);isNaN(_)||(p=_)}}await Ac(p);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return u}}}stream(e,t,i){return sc.createAssistantStream(e,this._client.beta.threads.runs,t,i)}submitToolOutputs(e,t,i){const{thread_id:r,...a}=t;return this._client.post(le`/threads/${r}/runs/${e}/submit_tool_outputs`,{body:a,...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers]),stream:t.stream??!1})}async submitToolOutputsAndPoll(e,t,i){const r=await this.submitToolOutputs(e,t,i);return await this.poll(r.id,t,i)}submitToolOutputsStream(e,t,i){return sc.createToolAssistantStream(e,this._client.beta.threads.runs,t,i)}};v_.Steps=qb;class Yh extends Ee{constructor(){super(...arguments),this.runs=new v_(this._client),this.messages=new Bb(this._client)}create(e={},t){return this._client.post("/threads",{body:e,...t,headers:_e([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}retrieve(e,t){return this._client.get(le`/threads/${e}`,{...t,headers:_e([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}update(e,t,i){return this._client.post(le`/threads/${e}`,{body:t,...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}delete(e,t){return this._client.delete(le`/threads/${e}`,{...t,headers:_e([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:_e([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers]),stream:e.stream??!1})}async createAndRunPoll(e,t){const i=await this.createAndRun(e,t);return await this.runs.poll(i.id,{thread_id:i.thread_id},t)}createAndRunStream(e,t){return sc.createThreadAssistantStream(e,this._client.beta.threads,t)}}Yh.Runs=v_;Yh.Messages=Bb;class Tl extends Ee{constructor(){super(...arguments),this.realtime=new Jh(this._client),this.chatkit=new Kh(this._client),this.assistants=new Vb(this._client),this.threads=new Yh(this._client)}}Tl.Realtime=Jh;Tl.ChatKit=Kh;Tl.Assistants=Vb;Tl.Threads=Yh;class Gb extends Ee{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}}let Hb=class extends Ee{retrieve(e,t,i){const{container_id:r}=t;return this._client.get(le`/containers/${r}/files/${e}/content`,{...i,headers:_e([{Accept:"application/binary"},i==null?void 0:i.headers]),__binaryResponse:!0})}},T_=class extends Ee{constructor(){super(...arguments),this.content=new Hb(this._client)}create(e,t,i){return this._client.post(le`/containers/${e}/files`,fc({body:t,...i},this._client))}retrieve(e,t,i){const{container_id:r}=t;return this._client.get(le`/containers/${r}/files/${e}`,i)}list(e,t={},i){return this._client.getAPIList(le`/containers/${e}/files`,bt,{query:t,...i})}delete(e,t,i){const{container_id:r}=t;return this._client.delete(le`/containers/${r}/files/${e}`,{...i,headers:_e([{Accept:"*/*"},i==null?void 0:i.headers])})}};T_.Content=Hb;class E_ extends Ee{constructor(){super(...arguments),this.files=new T_(this._client)}create(e,t){return this._client.post("/containers",{body:e,...t})}retrieve(e,t){return this._client.get(le`/containers/${e}`,t)}list(e={},t){return this._client.getAPIList("/containers",bt,{query:e,...t})}delete(e,t){return this._client.delete(le`/containers/${e}`,{...t,headers:_e([{Accept:"*/*"},t==null?void 0:t.headers])})}}E_.Files=T_;class zb extends Ee{create(e,t,i){const{include:r,...a}=t;return this._client.post(le`/conversations/${e}/items`,{query:{include:r},body:a,...i})}retrieve(e,t,i){const{conversation_id:r,...a}=t;return this._client.get(le`/conversations/${r}/items/${e}`,{query:a,...i})}list(e,t={},i){return this._client.getAPIList(le`/conversations/${e}/items`,lh,{query:t,...i})}delete(e,t,i){const{conversation_id:r}=t;return this._client.delete(le`/conversations/${r}/items/${e}`,i)}}class S_ extends Ee{constructor(){super(...arguments),this.items=new zb(this._client)}create(e={},t){return this._client.post("/conversations",{body:e,...t})}retrieve(e,t){return this._client.get(le`/conversations/${e}`,t)}update(e,t,i){return this._client.post(le`/conversations/${e}`,{body:t,...i})}delete(e,t){return this._client.delete(le`/conversations/${e}`,t)}}S_.Items=zb;class $b extends Ee{create(e,t){const i=!!e.encoding_format;let r=i?e.encoding_format:"base64";i&&dn(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const a=this._client.post("/embeddings",{body:{...e,encoding_format:r},...t});return i?a:(dn(this._client).debug("embeddings/decoding base64 embeddings from base64"),a._thenUnwrap(u=>(u&&u.data&&u.data.forEach(d=>{const p=d.embedding;d.embedding=l4(p)}),u)))}}class Jb extends Ee{retrieve(e,t,i){const{eval_id:r,run_id:a}=t;return this._client.get(le`/evals/${r}/runs/${a}/output_items/${e}`,i)}list(e,t,i){const{eval_id:r,...a}=t;return this._client.getAPIList(le`/evals/${r}/runs/${e}/output_items`,bt,{query:a,...i})}}class A_ extends Ee{constructor(){super(...arguments),this.outputItems=new Jb(this._client)}create(e,t,i){return this._client.post(le`/evals/${e}/runs`,{body:t,...i})}retrieve(e,t,i){const{eval_id:r}=t;return this._client.get(le`/evals/${r}/runs/${e}`,i)}list(e,t={},i){return this._client.getAPIList(le`/evals/${e}/runs`,bt,{query:t,...i})}delete(e,t,i){const{eval_id:r}=t;return this._client.delete(le`/evals/${r}/runs/${e}`,i)}cancel(e,t,i){const{eval_id:r}=t;return this._client.post(le`/evals/${r}/runs/${e}`,i)}}A_.OutputItems=Jb;class w_ extends Ee{constructor(){super(...arguments),this.runs=new A_(this._client)}create(e,t){return this._client.post("/evals",{body:e,...t})}retrieve(e,t){return this._client.get(le`/evals/${e}`,t)}update(e,t,i){return this._client.post(le`/evals/${e}`,{body:t,...i})}list(e={},t){return this._client.getAPIList("/evals",bt,{query:e,...t})}delete(e,t){return this._client.delete(le`/evals/${e}`,t)}}w_.Runs=A_;let Kb=class extends Ee{create(e,t){return this._client.post("/files",ll({body:e,...t},this._client))}retrieve(e,t){return this._client.get(le`/files/${e}`,t)}list(e={},t){return this._client.getAPIList("/files",bt,{query:e,...t})}delete(e,t){return this._client.delete(le`/files/${e}`,t)}content(e,t){return this._client.get(le`/files/${e}/content`,{...t,headers:_e([{Accept:"application/binary"},t==null?void 0:t.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:i=1800*1e3}={}){const r=new Set(["processed","error","deleted"]),a=Date.now();let u=await this.retrieve(e);for(;!u.status||!r.has(u.status);)if(await Ac(t),u=await this.retrieve(e),Date.now()-a>i)throw new u_({message:`Giving up on waiting for file ${e} to finish processing after ${i} milliseconds.`});return u}};class Yb extends Ee{}let Wb=class extends Ee{run(e,t){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...t})}validate(e,t){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...t})}};class C_ extends Ee{constructor(){super(...arguments),this.graders=new Wb(this._client)}}C_.Graders=Wb;class Qb extends Ee{create(e,t,i){return this._client.getAPIList(le`/fine_tuning/checkpoints/${e}/permissions`,$h,{body:t,method:"post",...i})}retrieve(e,t={},i){return this._client.get(le`/fine_tuning/checkpoints/${e}/permissions`,{query:t,...i})}delete(e,t,i){const{fine_tuned_model_checkpoint:r}=t;return this._client.delete(le`/fine_tuning/checkpoints/${r}/permissions/${e}`,i)}}let I_=class extends Ee{constructor(){super(...arguments),this.permissions=new Qb(this._client)}};I_.Permissions=Qb;class Xb extends Ee{list(e,t={},i){return this._client.getAPIList(le`/fine_tuning/jobs/${e}/checkpoints`,bt,{query:t,...i})}}class b_ extends Ee{constructor(){super(...arguments),this.checkpoints=new Xb(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(le`/fine_tuning/jobs/${e}`,t)}list(e={},t){return this._client.getAPIList("/fine_tuning/jobs",bt,{query:e,...t})}cancel(e,t){return this._client.post(le`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},i){return this._client.getAPIList(le`/fine_tuning/jobs/${e}/events`,bt,{query:t,...i})}pause(e,t){return this._client.post(le`/fine_tuning/jobs/${e}/pause`,t)}resume(e,t){return this._client.post(le`/fine_tuning/jobs/${e}/resume`,t)}}b_.Checkpoints=Xb;class El extends Ee{constructor(){super(...arguments),this.methods=new Yb(this._client),this.jobs=new b_(this._client),this.checkpoints=new I_(this._client),this.alpha=new C_(this._client)}}El.Methods=Yb;El.Jobs=b_;El.Checkpoints=I_;El.Alpha=C_;class jb extends Ee{}class R_ extends Ee{constructor(){super(...arguments),this.graderModels=new jb(this._client)}}R_.GraderModels=jb;class Zb extends Ee{createVariation(e,t){return this._client.post("/images/variations",ll({body:e,...t},this._client))}edit(e,t){return this._client.post("/images/edits",ll({body:e,...t,stream:e.stream??!1},this._client))}generate(e,t){return this._client.post("/images/generations",{body:e,...t,stream:e.stream??!1})}}class eR extends Ee{retrieve(e,t){return this._client.get(le`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",$h,e)}delete(e,t){return this._client.delete(le`/models/${e}`,t)}}class tR extends Ee{create(e,t){return this._client.post("/moderations",{body:e,...t})}}class nR extends Ee{accept(e,t,i){return this._client.post(le`/realtime/calls/${e}/accept`,{body:t,...i,headers:_e([{Accept:"*/*"},i==null?void 0:i.headers])})}hangup(e,t){return this._client.post(le`/realtime/calls/${e}/hangup`,{...t,headers:_e([{Accept:"*/*"},t==null?void 0:t.headers])})}refer(e,t,i){return this._client.post(le`/realtime/calls/${e}/refer`,{body:t,...i,headers:_e([{Accept:"*/*"},i==null?void 0:i.headers])})}reject(e,t={},i){return this._client.post(le`/realtime/calls/${e}/reject`,{body:t,...i,headers:_e([{Accept:"*/*"},i==null?void 0:i.headers])})}}class iR extends Ee{create(e,t){return this._client.post("/realtime/client_secrets",{body:e,...t})}}class Wh extends Ee{constructor(){super(...arguments),this.clientSecrets=new iR(this._client),this.calls=new nR(this._client)}}Wh.ClientSecrets=iR;Wh.Calls=nR;function u4(n,e){return!e||!d4(e)?{...n,output_parsed:null,output:n.output.map(t=>t.type==="function_call"?{...t,parsed_arguments:null}:t.type==="message"?{...t,content:t.content.map(i=>({...i,parsed:null}))}:t)}:sR(n,e)}function sR(n,e){const t=n.output.map(r=>{if(r.type==="function_call")return{...r,parsed_arguments:p4(e,r)};if(r.type==="message"){const a=r.content.map(u=>u.type==="output_text"?{...u,parsed:c4(e,u.text)}:u);return{...r,content:a}}return r}),i=Object.assign({},n,{output:t});return Object.getOwnPropertyDescriptor(n,"output_text")||Cy(i),Object.defineProperty(i,"output_parsed",{enumerable:!0,get(){for(const r of i.output)if(r.type==="message"){for(const a of r.content)if(a.type==="output_text"&&a.parsed!==null)return a.parsed}return null}}),i}function c4(n,e){var t,i,r,a;return((i=(t=n.text)==null?void 0:t.format)==null?void 0:i.type)!=="json_schema"?null:"$parseRaw"in((r=n.text)==null?void 0:r.format)?((a=n.text)==null?void 0:a.format).$parseRaw(e):JSON.parse(e)}function d4(n){var e;return!!h_((e=n.text)==null?void 0:e.format)}function f4(n){return(n==null?void 0:n.$brand)==="auto-parseable-tool"}function h4(n,e){return n.find(t=>t.type==="function"&&t.name===e)}function p4(n,e){const t=h4(n.tools??[],e.name);return{...e,...e,parsed_arguments:f4(t)?t.$parseRaw(e.arguments):t!=null&&t.strict?JSON.parse(e.arguments):null}}function Cy(n){const e=[];for(const t of n.output)if(t.type==="message")for(const i of t.content)i.type==="output_text"&&e.push(i.text);n.output_text=e.join("")}var qa,wf,Pr,Cf,lw,uw,cw,dw;class x_ extends m_{constructor(e){super(),qa.add(this),wf.set(this,void 0),Pr.set(this,void 0),Cf.set(this,void 0),Ne(this,wf,e)}static createResponse(e,t,i){const r=new x_(t);return r._run(()=>r._createOrRetrieveResponse(e,t,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createOrRetrieveResponse(e,t,i){var d;const r=i==null?void 0:i.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),Q(this,qa,"m",lw).call(this);let a,u=null;"response_id"in t?(a=await e.responses.retrieve(t.response_id,{stream:!0},{...i,signal:this.controller.signal,stream:!0}),u=t.starting_after??null):a=await e.responses.create({...t,stream:!0},{...i,signal:this.controller.signal}),this._connected();for await(const p of a)Q(this,qa,"m",uw).call(this,p,u);if((d=a.controller.signal)!=null&&d.aborted)throw new hi;return Q(this,qa,"m",cw).call(this)}[(wf=new WeakMap,Pr=new WeakMap,Cf=new WeakMap,qa=new WeakSet,lw=function(){this.ended||Ne(this,Pr,void 0)},uw=function(t,i){if(this.ended)return;const r=(u,d)=>{(i==null||d.sequence_number>i)&&this._emit(u,d)},a=Q(this,qa,"m",dw).call(this,t);switch(r("event",t),t.type){case"response.output_text.delta":{const u=a.output[t.output_index];if(!u)throw new Ae(`missing output at index ${t.output_index}`);if(u.type==="message"){const d=u.content[t.content_index];if(!d)throw new Ae(`missing content at index ${t.content_index}`);if(d.type!=="output_text")throw new Ae(`expected content to be 'output_text', got ${d.type}`);r("response.output_text.delta",{...t,snapshot:d.text})}break}case"response.function_call_arguments.delta":{const u=a.output[t.output_index];if(!u)throw new Ae(`missing output at index ${t.output_index}`);u.type==="function_call"&&r("response.function_call_arguments.delta",{...t,snapshot:u.arguments});break}default:r(t.type,t);break}},cw=function(){if(this.ended)throw new Ae("stream has ended, this shouldn't happen");const t=Q(this,Pr,"f");if(!t)throw new Ae("request ended without sending any events");Ne(this,Pr,void 0);const i=m4(t,Q(this,wf,"f"));return Ne(this,Cf,i),i},dw=function(t){var r;let i=Q(this,Pr,"f");if(!i){if(t.type!=="response.created")throw new Ae(`When snapshot hasn't been set yet, expected 'response.created' event, got ${t.type}`);return i=Ne(this,Pr,t.response),i}switch(t.type){case"response.output_item.added":{i.output.push(t.item);break}case"response.content_part.added":{const a=i.output[t.output_index];if(!a)throw new Ae(`missing output at index ${t.output_index}`);const u=a.type,d=t.part;u==="message"&&d.type!=="reasoning_text"?a.content.push(d):u==="reasoning"&&d.type==="reasoning_text"&&(a.content||(a.content=[]),a.content.push(d));break}case"response.output_text.delta":{const a=i.output[t.output_index];if(!a)throw new Ae(`missing output at index ${t.output_index}`);if(a.type==="message"){const u=a.content[t.content_index];if(!u)throw new Ae(`missing content at index ${t.content_index}`);if(u.type!=="output_text")throw new Ae(`expected content to be 'output_text', got ${u.type}`);u.text+=t.delta}break}case"response.function_call_arguments.delta":{const a=i.output[t.output_index];if(!a)throw new Ae(`missing output at index ${t.output_index}`);a.type==="function_call"&&(a.arguments+=t.delta);break}case"response.reasoning_text.delta":{const a=i.output[t.output_index];if(!a)throw new Ae(`missing output at index ${t.output_index}`);if(a.type==="reasoning"){const u=(r=a.content)==null?void 0:r[t.content_index];if(!u)throw new Ae(`missing content at index ${t.content_index}`);if(u.type!=="reasoning_text")throw new Ae(`expected content to be 'reasoning_text', got ${u.type}`);u.text+=t.delta}break}case"response.completed":{Ne(this,Pr,t.response);break}}return i},Symbol.asyncIterator)](){const e=[],t=[];let i=!1;return this.on("event",r=>{const a=t.shift();a?a.resolve(r):e.push(r)}),this.on("end",()=>{i=!0;for(const r of t)r.resolve(void 0);t.length=0}),this.on("abort",r=>{i=!0;for(const a of t)a.reject(r);t.length=0}),this.on("error",r=>{i=!0;for(const a of t)a.reject(r);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((a,u)=>t.push({resolve:a,reject:u})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=Q(this,Cf,"f");if(!e)throw new Ae("stream ended without producing a ChatCompletion");return e}}function m4(n,e){return u4(n,e)}class rR extends Ee{list(e,t={},i){return this._client.getAPIList(le`/responses/${e}/input_items`,bt,{query:t,...i})}}class oR extends Ee{count(e={},t){return this._client.post("/responses/input_tokens",{body:e,...t})}}class Qh extends Ee{constructor(){super(...arguments),this.inputItems=new rR(this._client),this.inputTokens=new oR(this._client)}create(e,t){return this._client.post("/responses",{body:e,...t,stream:e.stream??!1})._thenUnwrap(i=>("object"in i&&i.object==="response"&&Cy(i),i))}retrieve(e,t={},i){return this._client.get(le`/responses/${e}`,{query:t,...i,stream:(t==null?void 0:t.stream)??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&Cy(r),r))}delete(e,t){return this._client.delete(le`/responses/${e}`,{...t,headers:_e([{Accept:"*/*"},t==null?void 0:t.headers])})}parse(e,t){return this._client.responses.create(e,t)._thenUnwrap(i=>sR(i,e))}stream(e,t){return x_.createResponse(this._client,e,t)}cancel(e,t){return this._client.post(le`/responses/${e}/cancel`,t)}compact(e,t){return this._client.post("/responses/compact",{body:e,...t})}}Qh.InputItems=rR;Qh.InputTokens=oR;let aR=class extends Ee{retrieve(e,t){return this._client.get(le`/skills/${e}/content`,{...t,headers:_e([{Accept:"application/binary"},t==null?void 0:t.headers]),__binaryResponse:!0})}};class lR extends Ee{retrieve(e,t,i){const{skill_id:r}=t;return this._client.get(le`/skills/${r}/versions/${e}/content`,{...i,headers:_e([{Accept:"application/binary"},i==null?void 0:i.headers]),__binaryResponse:!0})}}class N_ extends Ee{constructor(){super(...arguments),this.content=new lR(this._client)}create(e,t={},i){return this._client.post(le`/skills/${e}/versions`,fc({body:t,...i},this._client))}retrieve(e,t,i){const{skill_id:r}=t;return this._client.get(le`/skills/${r}/versions/${e}`,i)}list(e,t={},i){return this._client.getAPIList(le`/skills/${e}/versions`,bt,{query:t,...i})}delete(e,t,i){const{skill_id:r}=t;return this._client.delete(le`/skills/${r}/versions/${e}`,i)}}N_.Content=lR;class Xh extends Ee{constructor(){super(...arguments),this.content=new aR(this._client),this.versions=new N_(this._client)}create(e={},t){return this._client.post("/skills",fc({body:e,...t},this._client))}retrieve(e,t){return this._client.get(le`/skills/${e}`,t)}update(e,t,i){return this._client.post(le`/skills/${e}`,{body:t,...i})}list(e={},t){return this._client.getAPIList("/skills",bt,{query:e,...t})}delete(e,t){return this._client.delete(le`/skills/${e}`,t)}}Xh.Content=aR;Xh.Versions=N_;class uR extends Ee{create(e,t,i){return this._client.post(le`/uploads/${e}/parts`,ll({body:t,...i},this._client))}}class M_ extends Ee{constructor(){super(...arguments),this.parts=new uR(this._client)}create(e,t){return this._client.post("/uploads",{body:e,...t})}cancel(e,t){return this._client.post(le`/uploads/${e}/cancel`,t)}complete(e,t,i){return this._client.post(le`/uploads/${e}/complete`,{body:t,...i})}}M_.Parts=uR;const g4=async n=>{const e=await Promise.allSettled(n),t=e.filter(r=>r.status==="rejected");if(t.length){for(const r of t)console.error(r.reason);throw new Error(`${t.length} promise(s) failed - see the above errors`)}const i=[];for(const r of e)r.status==="fulfilled"&&i.push(r.value);return i};class cR extends Ee{create(e,t,i){return this._client.post(le`/vector_stores/${e}/file_batches`,{body:t,...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}retrieve(e,t,i){const{vector_store_id:r}=t;return this._client.get(le`/vector_stores/${r}/file_batches/${e}`,{...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}cancel(e,t,i){const{vector_store_id:r}=t;return this._client.post(le`/vector_stores/${r}/file_batches/${e}/cancel`,{...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}async createAndPoll(e,t,i){const r=await this.create(e,t);return await this.poll(e,r.id,i)}listFiles(e,t,i){const{vector_store_id:r,...a}=t;return this._client.getAPIList(le`/vector_stores/${r}/file_batches/${e}/files`,bt,{query:a,...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}async poll(e,t,i){var a;const r=_e([i==null?void 0:i.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((a=i==null?void 0:i.pollIntervalMs)==null?void 0:a.toString())??void 0}]);for(;;){const{data:u,response:d}=await this.retrieve(t,{vector_store_id:e},{...i,headers:r}).withResponse();switch(u.status){case"in_progress":let p=5e3;if(i!=null&&i.pollIntervalMs)p=i.pollIntervalMs;else{const h=d.headers.get("openai-poll-after-ms");if(h){const _=parseInt(h);isNaN(_)||(p=_)}}await Ac(p);break;case"failed":case"cancelled":case"completed":return u}}}async uploadAndPoll(e,{files:t,fileIds:i=[]},r){if(t==null||t.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=(r==null?void 0:r.maxConcurrency)??5,u=Math.min(a,t.length),d=this._client,p=t.values(),h=[...i];async function _(E){for(let C of E){const M=await d.files.create({file:C,purpose:"assistants"},r);h.push(M.id)}}const T=Array(u).fill(p).map(_);return await g4(T),await this.createAndPoll(e,{file_ids:h})}}class dR extends Ee{create(e,t,i){return this._client.post(le`/vector_stores/${e}/files`,{body:t,...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}retrieve(e,t,i){const{vector_store_id:r}=t;return this._client.get(le`/vector_stores/${r}/files/${e}`,{...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}update(e,t,i){const{vector_store_id:r,...a}=t;return this._client.post(le`/vector_stores/${r}/files/${e}`,{body:a,...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}list(e,t={},i){return this._client.getAPIList(le`/vector_stores/${e}/files`,bt,{query:t,...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}delete(e,t,i){const{vector_store_id:r}=t;return this._client.delete(le`/vector_stores/${r}/files/${e}`,{...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}async createAndPoll(e,t,i){const r=await this.create(e,t,i);return await this.poll(e,r.id,i)}async poll(e,t,i){var a;const r=_e([i==null?void 0:i.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((a=i==null?void 0:i.pollIntervalMs)==null?void 0:a.toString())??void 0}]);for(;;){const u=await this.retrieve(t,{vector_store_id:e},{...i,headers:r}).withResponse(),d=u.data;switch(d.status){case"in_progress":let p=5e3;if(i!=null&&i.pollIntervalMs)p=i.pollIntervalMs;else{const h=u.response.headers.get("openai-poll-after-ms");if(h){const _=parseInt(h);isNaN(_)||(p=_)}}await Ac(p);break;case"failed":case"completed":return d}}}async upload(e,t,i){const r=await this._client.files.create({file:t,purpose:"assistants"},i);return this.create(e,{file_id:r.id},i)}async uploadAndPoll(e,t,i){const r=await this.upload(e,t,i);return await this.poll(e,r.id,i)}content(e,t,i){const{vector_store_id:r}=t;return this._client.getAPIList(le`/vector_stores/${r}/files/${e}/content`,$h,{...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}}class jh extends Ee{constructor(){super(...arguments),this.files=new dR(this._client),this.fileBatches=new cR(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:_e([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}retrieve(e,t){return this._client.get(le`/vector_stores/${e}`,{...t,headers:_e([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}update(e,t,i){return this._client.post(le`/vector_stores/${e}`,{body:t,...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}list(e={},t){return this._client.getAPIList("/vector_stores",bt,{query:e,...t,headers:_e([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}delete(e,t){return this._client.delete(le`/vector_stores/${e}`,{...t,headers:_e([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}search(e,t,i){return this._client.getAPIList(le`/vector_stores/${e}/search`,$h,{body:t,method:"post",...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}}jh.Files=dR;jh.FileBatches=cR;class fR extends Ee{create(e,t){return this._client.post("/videos",fc({body:e,...t},this._client))}retrieve(e,t){return this._client.get(le`/videos/${e}`,t)}list(e={},t){return this._client.getAPIList("/videos",lh,{query:e,...t})}delete(e,t){return this._client.delete(le`/videos/${e}`,t)}downloadContent(e,t={},i){return this._client.get(le`/videos/${e}/content`,{query:t,...i,headers:_e([{Accept:"application/binary"},i==null?void 0:i.headers]),__binaryResponse:!0})}remix(e,t,i){return this._client.post(le`/videos/${e}/remix`,fc({body:t,...i},this._client))}}var Ka,hR,Gf;class pR extends Ee{constructor(){super(...arguments),Ka.add(this)}async unwrap(e,t,i=this._client.webhookSecret,r=300){return await this.verifySignature(e,t,i,r),JSON.parse(e)}async verifySignature(e,t,i=this._client.webhookSecret,r=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");Q(this,Ka,"m",hR).call(this,i);const a=_e([t]).values,u=Q(this,Ka,"m",Gf).call(this,a,"webhook-signature"),d=Q(this,Ka,"m",Gf).call(this,a,"webhook-timestamp"),p=Q(this,Ka,"m",Gf).call(this,a,"webhook-id"),h=parseInt(d,10);if(isNaN(h))throw new Hu("Invalid webhook timestamp format");const _=Math.floor(Date.now()/1e3);if(_-h>r)throw new Hu("Webhook timestamp is too old");if(h>_+r)throw new Hu("Webhook timestamp is too new");const T=u.split(" ").map(U=>U.startsWith("v1,")?U.substring(3):U),E=i.startsWith("whsec_")?Buffer.from(i.replace("whsec_",""),"base64"):Buffer.from(i,"utf-8"),C=p?`${p}.${d}.${e}`:`${d}.${e}`,M=await crypto.subtle.importKey("raw",E,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const U of T)try{const P=Buffer.from(U,"base64");if(await crypto.subtle.verify("HMAC",M,P,new TextEncoder().encode(C)))return}catch{continue}throw new Hu("The given webhook signature does not match the expected signature")}}Ka=new WeakSet,hR=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},Gf=function(e,t){if(!e)throw new Error("Headers are required");const i=e.get(t);if(i==null)throw new Error(`Missing required header: ${t}`);return i};var Iy,D_,Hf,mR;class Ge{constructor({baseURL:e=Ba("OPENAI_BASE_URL"),apiKey:t=Ba("OPENAI_API_KEY"),organization:i=Ba("OPENAI_ORG_ID")??null,project:r=Ba("OPENAI_PROJECT_ID")??null,webhookSecret:a=Ba("OPENAI_WEBHOOK_SECRET")??null,...u}={}){if(Iy.add(this),Hf.set(this,void 0),this.completions=new Gb(this),this.chat=new __(this),this.embeddings=new $b(this),this.files=new Kb(this),this.images=new Zb(this),this.audio=new Cc(this),this.moderations=new tR(this),this.models=new eR(this),this.fineTuning=new El(this),this.graders=new R_(this),this.vectorStores=new jh(this),this.webhooks=new pR(this),this.beta=new Tl(this),this.batches=new kb(this),this.uploads=new M_(this),this.responses=new Qh(this),this.realtime=new Wh(this),this.conversations=new S_(this),this.evals=new w_(this),this.containers=new E_(this),this.skills=new Xh(this),this.videos=new fR(this),t===void 0)throw new Ae("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const d={apiKey:t,organization:i,project:r,webhookSecret:a,...u,baseURL:e||"https://api.openai.com/v1"};if(!d.dangerouslyAllowBrowser&&_O())throw new Ae(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=d.baseURL,this.timeout=d.timeout??D_.DEFAULT_TIMEOUT,this.logger=d.logger??console;const p="warn";this.logLevel=p,this.logLevel=WA(d.logLevel,"ClientOptions.logLevel",this)??WA(Ba("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??p,this.fetchOptions=d.fetchOptions,this.maxRetries=d.maxRetries??2,this.fetch=d.fetch??AO(),Ne(this,Hf,CO),this._options=d,this.apiKey=typeof t=="string"?t:"Missing Key",this.organization=i,this.project=r,this.webhookSecret=a}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){}async authHeaders(e){return _e([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return MO(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${$a}`}defaultIdempotencyKey(){return`stainless-node-retry-${UI()}`}makeStatusError(e,t,i,r){return mn.generate(e,t,i,r)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let t;try{t=await e()}catch(i){throw i instanceof Ae?i:new Ae(`Failed to get token from 'apiKey' function: ${i.message}`,{cause:i})}if(typeof t!="string"||!t)throw new Ae(`Expected 'apiKey' function argument to return a string but it returned ${t}`);return this.apiKey=t,!0}buildURL(e,t,i){const r=!Q(this,Iy,"m",mR).call(this)&&i||this.baseURL,a=hO(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return pO(u)||(t={...u,...t}),typeof t=="object"&&t&&!Array.isArray(t)&&(a.search=this.stringifyQuery(t)),a.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:t,options:i}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,i){return this.request(Promise.resolve(i).then(r=>({method:e,path:t,...r})))}request(e,t=null){return new zh(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,i){var $,H;const r=await e,a=r.maxRetries??this.maxRetries;t==null&&(t=a),await this.prepareOptions(r);const{req:u,url:d,timeout:p}=await this.buildRequest(r,{retryCount:a-t});await this.prepareRequest(u,{url:d,options:r});const h="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),_=i===void 0?"":`, retryOf: ${i}`,T=Date.now();if(dn(this).debug(`[${h}] sending request`,No({retryOfRequestLogID:i,method:r.method,url:d,options:r,headers:u.headers})),($=r.signal)!=null&&$.aborted)throw new hi;const E=new AbortController,C=await this.fetchWithTimeout(d,u,p,E).catch(py),M=Date.now();if(C instanceof globalThis.Error){const z=`retrying, ${t} attempts remaining`;if((H=r.signal)!=null&&H.aborted)throw new hi;const X=hy(C)||/timed? ?out/i.test(String(C)+("cause"in C?String(C.cause):""));if(t)return dn(this).info(`[${h}] connection ${X?"timed out":"failed"} - ${z}`),dn(this).debug(`[${h}] connection ${X?"timed out":"failed"} (${z})`,No({retryOfRequestLogID:i,url:d,durationMs:M-T,message:C.message})),this.retryRequest(r,t,i??h);throw dn(this).info(`[${h}] connection ${X?"timed out":"failed"} - error; no more retries left`),dn(this).debug(`[${h}] connection ${X?"timed out":"failed"} (error; no more retries left)`,No({retryOfRequestLogID:i,url:d,durationMs:M-T,message:C.message})),X?new u_:new Gh({cause:C})}const U=[...C.headers.entries()].filter(([z])=>z==="x-request-id").map(([z,X])=>", "+z+": "+JSON.stringify(X)).join(""),P=`[${h}${_}${U}] ${u.method} ${d} ${C.ok?"succeeded":"failed"} with status ${C.status} in ${M-T}ms`;if(!C.ok){const z=await this.shouldRetry(C);if(t&&z){const x=`retrying, ${t} attempts remaining`;return await wO(C.body),dn(this).info(`${P} - ${x}`),dn(this).debug(`[${h}] response error (${x})`,No({retryOfRequestLogID:i,url:C.url,status:C.status,headers:C.headers,durationMs:M-T})),this.retryRequest(r,t,i??h,C.headers)}const X=z?"error; no more retries left":"error; not retryable";dn(this).info(`${P} - ${X}`);const ue=await C.text().catch(x=>py(x).message),W=yO(ue),N=W?void 0:ue;throw dn(this).debug(`[${h}] response error (${X})`,No({retryOfRequestLogID:i,url:C.url,status:C.status,headers:C.headers,message:N,durationMs:Date.now()-T})),this.makeStatusError(C.status,W,N,C.headers)}return dn(this).info(P),dn(this).debug(`[${h}] response start`,No({retryOfRequestLogID:i,url:C.url,status:C.status,headers:C.headers,durationMs:M-T})),{response:C,options:r,controller:E,requestLogID:h,retryOfRequestLogID:i,startTime:T}}getAPIList(e,t,i){return this.requestAPIList(t,i&&"then"in i?i.then(r=>({method:"get",path:e,...r})):{method:"get",path:e,...i})}requestAPIList(e,t){const i=this.makeRequest(t,null,void 0);return new BO(this,i,e)}async fetchWithTimeout(e,t,i,r){const{signal:a,method:u,...d}=t||{},p=this._makeAbort(r);a&&a.addEventListener("abort",p,{once:!0});const h=setTimeout(p,i),_=globalThis.ReadableStream&&d.body instanceof globalThis.ReadableStream||typeof d.body=="object"&&d.body!==null&&Symbol.asyncIterator in d.body,T={signal:r.signal,..._?{duplex:"half"}:{},method:"GET",...d};u&&(T.method=u.toUpperCase());try{return await this.fetch.call(void 0,e,T)}finally{clearTimeout(h)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,i,r){let a;const u=r==null?void 0:r.get("retry-after-ms");if(u){const p=parseFloat(u);Number.isNaN(p)||(a=p)}const d=r==null?void 0:r.get("retry-after");if(d&&!a){const p=parseFloat(d);Number.isNaN(p)?a=Date.parse(d)-Date.now():a=p*1e3}if(!(a&&0<=a&&a<60*1e3)){const p=e.maxRetries??this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(t,p)}return await Ac(a),this.makeRequest(e,t-1,i)}calculateDefaultRetryTimeoutMillis(e,t){const a=t-e,u=Math.min(.5*Math.pow(2,a),8),d=1-Math.random()*.25;return u*d*1e3}async buildRequest(e,{retryCount:t=0}={}){const i={...e},{method:r,path:a,query:u,defaultBaseURL:d}=i,p=this.buildURL(a,u,d);"timeout"in i&&gO("timeout",i.timeout),i.timeout=i.timeout??this.timeout;const{bodyHeaders:h,body:_}=this.buildBody({options:i}),T=await this.buildHeaders({options:e,method:r,bodyHeaders:h,retryCount:t});return{req:{method:r,headers:T,...i.signal&&{signal:i.signal},...globalThis.ReadableStream&&_ instanceof globalThis.ReadableStream&&{duplex:"half"},..._&&{body:_},...this.fetchOptions??{},...i.fetchOptions??{}},url:p,timeout:i.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:i,retryCount:r}){let a={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const u=_e([a,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...SO(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,i,e.headers]);return this.validateHeaders(u),u.values}_makeAbort(e){return()=>e.abort()}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=_e([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:WI(e)}:Q(this,Hf,"f").call(this,{body:e,headers:i})}}D_=Ge,Hf=new WeakMap,Iy=new WeakSet,mR=function(){return this.baseURL!=="https://api.openai.com/v1"};Ge.OpenAI=D_;Ge.DEFAULT_TIMEOUT=6e5;Ge.OpenAIError=Ae;Ge.APIError=mn;Ge.APIConnectionError=Gh;Ge.APIConnectionTimeoutError=u_;Ge.APIUserAbortError=hi;Ge.NotFoundError=BI;Ge.ConflictError=qI;Ge.RateLimitError=HI;Ge.BadRequestError=LI;Ge.AuthenticationError=OI;Ge.InternalServerError=zI;Ge.PermissionDeniedError=FI;Ge.UnprocessableEntityError=GI;Ge.InvalidWebhookSignatureError=Hu;Ge.toFile=$O;Ge.Completions=Gb;Ge.Chat=__;Ge.Embeddings=$b;Ge.Files=Kb;Ge.Images=Zb;Ge.Audio=Cc;Ge.Moderations=tR;Ge.Models=eR;Ge.FineTuning=El;Ge.Graders=R_;Ge.VectorStores=jh;Ge.Webhooks=pR;Ge.Beta=Tl;Ge.Batches=kb;Ge.Uploads=M_;Ge.Responses=Qh;Ge.Realtime=Wh;Ge.Conversations=S_;Ge.Evals=w_;Ge.Containers=E_;Ge.Skills=Xh;Ge.Videos=fR;var y4={};let Lg=null;const P_=()=>{if(!Lg){const n=y4.OPENAI_API_KEY;if(!n)throw new Error("OpenAI API key is not set. Please set OPENAI_API_KEY in your environment.");Lg=new Ge({apiKey:n,dangerouslyAllowBrowser:!0})}return Lg},gR=`You are 'Kisan Mitra', a professional agricultural advisor. 
Provide dual solutions:
1. Modern Scientific (Chemical): Product name, dosage, and precautions.
2. Rajiv Dixit Natural: Preparation method, benefits, and philosophy.

Always respond in the requested language.`,_4=async(n,e="en")=>{const r=(await P_().chat.completions.create({model:"gpt-4o",messages:[{role:"system",content:gR},{role:"user",content:[{type:"text",text:`Diagnose this crop disease. Provide solutions in JSON format. Language: ${gs[e]}.`},{type:"image_url",image_url:{url:`data:image/jpeg;base64,${n}`}}]}],response_format:{type:"json_object"}})).choices[0].message.content;return JSON.parse(r||"{}")},v4=async(n,e,t="en")=>{const a=(await P_().chat.completions.create({model:"gpt-4o-mini",messages:[{role:"system",content:gR},{role:"user",content:`Farmer Question: "${n}" in "${e||"India"}". Provide chemical and natural solutions in JSON. Language: ${gs[t]}.`}],response_format:{type:"json_object"}})).choices[0].message.content,u=JSON.parse(a||"{}");return u.solutions||u},T4=async(n="en")=>(await P_().chat.completions.create({model:"gpt-4o-mini",messages:[{role:"system",content:"You are a professional agronomist. Give a 1-sentence quick tip."},{role:"user",content:`Give a 1-sentence quick professional tip for soil moisture conservation today in ${gs[n]}.`}]})).choices[0].message.content||"Keep your soil mulched!",E4=async(n,e)=>e.aiProvider===Ln.OPENAI?_4(n,e.language):lO(n,e.language),S4=async(n,e)=>e.aiProvider===Ln.OPENAI?v4(n,e.address,e.language):uO(n,e.address,e.language),A4=async n=>n.aiProvider===Ln.OPENAI?T4(n.language):cO(n.language),w4=[{name:"Nitrogen (N)",value:45,unit:"kg/ha",status:"Fair"},{name:"Phosphorus (P)",value:12,unit:"kg/ha",status:"Critical"},{name:"Potassium (K)",value:65,unit:"kg/ha",status:"Good"},{name:"Soil pH",value:6.8,unit:"pH",status:"Good"}],C4=[{id:"1",type:"weather",title:"Heavy Rain Alert",message:"Expect 20mm rainfall in your area tomorrow. Ensure proper drainage.",time:Date.now()},{id:"2",type:"pest",title:"Yellow Rust Warning",message:"Reported in nearby districts for Wheat crops. Inspect your field.",time:Date.now()-36e5}],fw=({userProfile:n,setView:e})=>{const[t,i]=He.useState("Loading your daily smart tip..."),[r,a]=He.useState(C4);return He.useEffect(()=>{n&&A4(n).then(i)},[n]),I.jsxs("div",{className:"space-y-8 animate-fadeIn pb-12",children:[I.jsxs("div",{className:"bg-gradient-to-r from-green-800 to-green-700 p-6 rounded-[2rem] text-white shadow-xl relative overflow-hidden",children:[I.jsx("div",{className:"absolute -right-10 -top-10 w-40 h-40 bg-lime-400/10 rounded-full blur-3xl"}),I.jsxs("div",{className:"flex items-center gap-4",children:[I.jsx("div",{className:"w-12 h-12 bg-lime-400 rounded-2xl flex items-center justify-center text-2xl shadow-inner text-green-950",children:""}),I.jsxs("div",{children:[I.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-lime-400",children:"Smart Advice   "}),I.jsx("p",{className:"text-lg font-bold leading-tight mt-1",children:t})]})]})]}),I.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[I.jsxs("button",{onClick:()=>e(St.LIVE_VOICE),className:"bg-white p-8 rounded-[3rem] border border-stone-100 shadow-xl hover:shadow-2xl transition-all group flex flex-col items-center text-center space-y-4",children:[I.jsx("div",{className:"w-20 h-20 bg-green-100 text-green-700 rounded-full flex items-center justify-center text-4xl group-hover:scale-110 transition-transform",children:""}),I.jsxs("div",{children:[I.jsx("h4",{className:"text-xl font-black text-stone-800",children:"SPEAK"}),I.jsx("p",{className:"text-sm font-bold text-stone-400 uppercase tracking-widest",children:"  "})]})]}),I.jsxs("button",{onClick:()=>e(St.DIAGNOSTIC),className:"bg-white p-8 rounded-[3rem] border border-stone-100 shadow-xl hover:shadow-2xl transition-all group flex flex-col items-center text-center space-y-4",children:[I.jsx("div",{className:"w-20 h-20 bg-lime-100 text-green-800 rounded-full flex items-center justify-center text-4xl group-hover:scale-110 transition-transform",children:""}),I.jsxs("div",{children:[I.jsx("h4",{className:"text-xl font-black text-stone-800",children:"PHOTO"}),I.jsx("p",{className:"text-sm font-bold text-stone-400 uppercase tracking-widest",children:" "})]})]}),I.jsxs("button",{onClick:()=>e(St.RAJIV_WISDOM),className:"bg-white p-8 rounded-[3rem] border border-stone-100 shadow-xl hover:shadow-2xl transition-all group flex flex-col items-center text-center space-y-4",children:[I.jsx("div",{className:"w-20 h-20 bg-amber-100 text-amber-700 rounded-full flex items-center justify-center text-4xl group-hover:scale-110 transition-transform",children:""}),I.jsxs("div",{children:[I.jsx("h4",{className:"text-xl font-black text-stone-800",children:"LIBRARY"}),I.jsx("p",{className:"text-sm font-bold text-stone-400 uppercase tracking-widest",children:" "})]})]})]}),I.jsxs("section",{className:"space-y-4",children:[I.jsx("h3",{className:"text-xs font-black text-stone-400 uppercase tracking-[0.2em] px-2",children:"Recent Alerts   "}),I.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map(u=>I.jsxs("div",{className:`p-5 rounded-[2rem] border shadow-sm flex items-start gap-4 ${u.type==="weather"?"bg-blue-50 border-blue-100":"bg-red-50 border-red-100"}`,children:[I.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center shadow-sm ${u.type==="weather"?"bg-blue-200 text-blue-800":"bg-red-200 text-red-800"}`,children:u.type==="weather"?"":""}),I.jsxs("div",{children:[I.jsx("p",{className:`font-black text-sm ${u.type==="weather"?"text-blue-900":"text-red-900"}`,children:u.title}),I.jsx("p",{className:"text-xs text-stone-600 mt-1 font-medium",children:u.message})]})]},u.id))})]}),I.jsxs("div",{className:"bg-white p-8 rounded-[3rem] shadow-sm border border-stone-100",children:[I.jsxs("h3",{className:"text-xl font-black text-stone-800 mb-6 flex items-center gap-3",children:[I.jsx("span",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center text-sm",children:""})," Soil Health Tracker"]}),I.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-6",children:w4.map(u=>I.jsxs("div",{className:"p-4 rounded-2xl bg-stone-50 border border-stone-100",children:[I.jsx("p",{className:"text-[10px] font-black text-stone-400 uppercase tracking-widest mb-1",children:u.name}),I.jsxs("p",{className:"text-xl font-black text-stone-800",children:[u.value," ",u.unit]}),I.jsx("p",{className:`text-[10px] font-black mt-1 ${u.status==="Good"?"text-green-600":u.status==="Fair"?"text-amber-600":"text-red-600"}`,children:u.status})]},u.name))})]})]})},I4=({userProfile:n,onSaveHistory:e})=>{const[t,i]=He.useState(null),[r,a]=He.useState(!1),[u,d]=He.useState(null),p=He.useRef(null),h=T=>{var C;const E=(C=T.target.files)==null?void 0:C[0];if(E){const M=new FileReader;M.onloadend=()=>{i(M.result),d(null)},M.readAsDataURL(E)}},_=async()=>{if(t){a(!0);try{const T=t.split(",")[1],C={...await E4(T,n),id:crypto.randomUUID(),timestamp:Date.now(),image:t};d(C),e(C)}catch(T){console.error("Diagnosis failed",T),alert("Failed to analyze image. Please try again.")}finally{a(!1)}}};return I.jsxs("div",{className:"space-y-8 max-w-4xl mx-auto pb-12",children:[I.jsxs("header",{className:"text-center",children:[I.jsx("h2",{className:"text-3xl font-black text-stone-800",children:"Crop Health Scanner"}),I.jsx("p",{className:"text-stone-500 mt-2",children:"Instant AI analysis for plant diseases and pests."})]}),I.jsxs("div",{className:"bg-white p-6 md:p-10 rounded-[3rem] shadow-sm border border-stone-100",children:[I.jsxs("div",{className:"flex flex-col items-center",children:[t?I.jsxs("div",{className:"w-full space-y-6",children:[I.jsxs("div",{className:"relative group",children:[I.jsx("img",{src:t,alt:"Crop scan",className:"w-full h-[28rem] object-cover rounded-[2.5rem] shadow-inner"}),I.jsx("button",{onClick:()=>i(null),className:"absolute top-6 right-6 bg-white/90 backdrop-blur w-12 h-12 flex items-center justify-center rounded-full shadow-lg hover:bg-white text-red-500 font-bold",children:""})]}),!u&&I.jsx("button",{onClick:_,disabled:r,className:"w-full py-5 bg-green-700 text-white rounded-[2rem] font-black text-xl hover:bg-green-800 disabled:opacity-50 shadow-2xl flex items-center justify-center gap-4 transition-all active:scale-95",children:r?I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"w-6 h-6 border-4 border-white/30 border-t-white rounded-full animate-spin"}),"Consulting Expert AI..."]}):"Diagnose Problem"})]}):I.jsxs("button",{onClick:()=>{var T;return(T=p.current)==null?void 0:T.click()},className:"w-full h-96 border-4 border-dashed border-stone-100 rounded-[2.5rem] flex flex-col items-center justify-center gap-6 hover:border-lime-400 hover:bg-lime-50 transition-all group overflow-hidden bg-stone-50",children:[I.jsx("div",{className:"w-24 h-24 bg-white rounded-full flex items-center justify-center text-5xl shadow-sm group-hover:scale-110 transition-transform",children:""}),I.jsxs("div",{className:"text-center px-6",children:[I.jsx("p",{className:"font-black text-2xl text-stone-800",children:"Tap to Capture Crop"}),I.jsx("p",{className:"text-stone-400 mt-2",children:"Take a clear photo of the leaf or affected area"})]})]}),I.jsx("input",{type:"file",accept:"image/*",ref:p,onChange:h,className:"hidden"})]}),u&&I.jsxs("div",{className:"mt-12 space-y-10 animate-fadeInUp",children:[I.jsxs("div",{className:"p-8 bg-stone-50 border border-stone-200 rounded-[2.5rem] relative",children:[I.jsx("div",{className:"absolute -top-4 left-8 px-4 py-1 bg-green-700 text-white rounded-full text-xs font-black uppercase tracking-widest",children:"Diagnosis"}),I.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[I.jsx("h3",{className:"text-3xl font-black text-stone-800",children:u.disease}),I.jsxs("div",{className:"flex items-center gap-3",children:[I.jsxs("div",{className:"text-right",children:[I.jsx("p",{className:"text-[10px] font-bold text-stone-400 uppercase",children:"AI Confidence"}),I.jsxs("p",{className:"font-black text-green-600",children:[Math.round(u.confidence*100),"%"]})]}),I.jsx("div",{className:"w-12 h-12 rounded-full border-4 border-green-100 flex items-center justify-center",children:I.jsx("div",{className:"w-8 h-8 rounded-full bg-green-600",style:{clipPath:`inset(${(1-u.confidence)*100}% 0 0 0)`}})})]})]}),I.jsx("p",{className:"mt-6 text-stone-600 leading-relaxed text-lg",children:u.description})]}),I.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[I.jsxs("div",{className:"bg-amber-50/50 border border-amber-100 rounded-[2.5rem] p-8 hover:shadow-md transition-shadow",children:[I.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[I.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-2xl flex items-center justify-center text-2xl",children:""}),I.jsx("h4",{className:"font-black text-xl text-stone-800 uppercase tracking-tight",children:"Chemical Option"})]}),I.jsxs("div",{className:"space-y-4",children:[I.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-stone-100",children:[I.jsx("p",{className:"text-[10px] font-bold text-stone-400 uppercase tracking-widest mb-1",children:"Product"}),I.jsx("p",{className:"font-bold text-stone-800",children:u.solutions.chemicalSolution.product})]}),I.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-stone-100",children:[I.jsx("p",{className:"text-[10px] font-bold text-stone-400 uppercase tracking-widest mb-1",children:"Dosage"}),I.jsx("p",{className:"font-bold text-stone-800",children:u.solutions.chemicalSolution.dosage})]}),I.jsxs("div",{className:"p-5 bg-red-100/50 text-red-900 text-sm rounded-2xl border border-red-200 leading-snug",children:[I.jsx("p",{className:"font-black uppercase text-[10px] mb-2 tracking-widest opacity-60",children:"Critical Precautions"}),u.solutions.chemicalSolution.precautions]})]})]}),I.jsxs("div",{className:"bg-lime-50 border border-lime-200 rounded-[2.5rem] p-8 hover:shadow-md transition-shadow shadow-sm ring-4 ring-lime-500/10",children:[I.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[I.jsx("div",{className:"w-12 h-12 bg-lime-100 rounded-2xl flex items-center justify-center text-2xl",children:""}),I.jsx("h4",{className:"font-black text-xl text-green-900 uppercase tracking-tight",children:"Swadeshi Wisdom"})]}),I.jsxs("div",{className:"space-y-4",children:[I.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-lime-100",children:[I.jsx("p",{className:"text-[10px] font-bold text-green-600 uppercase tracking-widest mb-1",children:"Natural Formula"}),I.jsx("p",{className:"font-black text-green-900 text-lg",children:u.solutions.naturalSolution.name})]}),I.jsxs("div",{className:"p-4 bg-green-900 text-lime-100 rounded-2xl italic font-medium",children:['"',u.solutions.naturalSolution.philosophy,'"']}),I.jsxs("div",{className:"p-5 bg-white border border-lime-100 rounded-2xl text-sm",children:[I.jsx("p",{className:"font-black text-green-800 uppercase text-[10px] mb-2 tracking-widest",children:"Preparation Guide"}),I.jsx("p",{className:"text-green-700 leading-relaxed whitespace-pre-wrap",children:u.solutions.naturalSolution.preparation})]})]})]})]}),I.jsx("div",{className:"text-center py-6",children:I.jsx("button",{onClick:()=>i(null),className:"text-stone-400 font-bold hover:text-stone-800 transition-colors",children:"Start New Scan "})})]})]})]})},b4=({userProfile:n})=>{const[e,t]=He.useState(""),[i,r]=He.useState(!1),[a,u]=He.useState(null),d=async p=>{if(p.preventDefault(),!!e.trim()){r(!0);try{const h=await S4(e,n);u(h)}catch(h){console.error(h),alert("Something went wrong. Please check your query.")}finally{r(!1)}}};return I.jsxs("div",{className:"space-y-8 animate-fadeIn",children:[I.jsxs("header",{children:[I.jsx("h2",{className:"text-3xl font-black text-stone-800 tracking-tight",children:"Smart Farming Advisor"}),I.jsx("p",{className:"text-stone-500 font-medium",children:"Equipped with AI & Real-time Google Search data."})]}),I.jsxs("div",{className:"bg-white p-8 rounded-[3rem] shadow-sm border border-stone-100",children:[I.jsxs("form",{onSubmit:d,className:"relative",children:[I.jsx("textarea",{value:e,onChange:p=>t(p.target.value),placeholder:`Ask about your ${n.crops} or anything else...`,className:"w-full h-40 p-6 bg-stone-50 rounded-[2rem] border border-stone-100 focus:ring-4 focus:ring-lime-100 focus:border-lime-400 transition-all resize-none text-lg font-medium"}),I.jsx("button",{type:"submit",disabled:i||!e.trim(),className:"absolute bottom-4 right-4 py-4 px-10 bg-green-700 text-white rounded-2xl font-black hover:bg-green-800 transition-all disabled:opacity-50 shadow-xl flex items-center gap-2",children:i?I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"})," Grounding Info..."]}):I.jsxs(I.Fragment,{children:[I.jsx("span",{className:"text-xl",children:""})," Get Advice"]})})]}),a&&I.jsxs("div",{className:"mt-12 space-y-10 animate-fadeInUp",children:[I.jsx("div",{className:"border-b border-stone-100 pb-6",children:I.jsxs("h3",{className:"text-2xl font-black text-stone-800",children:['Results for: "',a.issue,'"']})}),I.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-10",children:[I.jsxs("div",{className:"bg-amber-50/50 p-8 rounded-[2.5rem] border border-amber-100 space-y-6",children:[I.jsxs("div",{className:"flex items-center gap-3",children:[I.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-2xl flex items-center justify-center text-2xl shadow-sm",children:""}),I.jsx("h4",{className:"text-xl font-black text-stone-800 uppercase tracking-tighter",children:"Chemical Route"})]}),I.jsxs("div",{className:"space-y-4",children:[I.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-stone-100",children:[I.jsx("p",{className:"text-[10px] font-bold text-stone-400 uppercase tracking-widest mb-1",children:"Recommendation"}),I.jsx("p",{className:"font-bold text-stone-800 text-lg",children:a.chemicalSolution.product}),I.jsx("p",{className:"text-sm text-stone-600 mt-2",children:a.chemicalSolution.dosage})]}),I.jsxs("div",{className:"p-5 bg-red-100/50 text-red-900 text-sm rounded-2xl border border-red-200",children:[I.jsx("p",{className:"font-black uppercase text-[10px] mb-2 tracking-widest opacity-60",children:"Critical Warnings"}),a.chemicalSolution.precautions]})]})]}),I.jsxs("div",{className:"bg-lime-50 p-8 rounded-[2.5rem] border border-lime-200 space-y-6 shadow-sm ring-4 ring-lime-500/5",children:[I.jsxs("div",{className:"flex items-center gap-3",children:[I.jsx("div",{className:"w-12 h-12 bg-lime-100 rounded-2xl flex items-center justify-center text-2xl shadow-sm",children:""}),I.jsx("h4",{className:"text-xl font-black text-green-900 uppercase tracking-tighter",children:"Natural Wisdom"})]}),I.jsxs("div",{className:"space-y-4",children:[I.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-lime-100",children:[I.jsx("p",{className:"text-[10px] font-bold text-green-600 uppercase tracking-widest mb-1",children:a.naturalSolution.name}),I.jsxs("p",{className:"font-bold text-green-900 italic text-lg leading-snug",children:['"',a.naturalSolution.philosophy,'"']})]}),I.jsxs("div",{className:"p-6 bg-white border border-lime-100 rounded-2xl",children:[I.jsx("p",{className:"text-[10px] font-black text-green-800 uppercase tracking-widest mb-2",children:"Preparation Guide"}),I.jsx("p",{className:"text-sm text-green-700 leading-relaxed whitespace-pre-wrap font-medium",children:a.naturalSolution.preparation})]})]})]})]}),a.groundingSources&&a.groundingSources.length>0&&I.jsxs("div",{className:"bg-stone-50 p-6 rounded-[2rem] border border-stone-200",children:[I.jsx("h4",{className:"text-xs font-black text-stone-400 uppercase tracking-widest mb-4",children:"Verified Sources & Research"}),I.jsx("div",{className:"flex flex-wrap gap-3",children:a.groundingSources.map((p,h)=>I.jsxs("a",{href:p.uri,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-white border border-stone-200 rounded-full text-xs font-bold text-blue-600 hover:border-blue-400 transition-all flex items-center gap-2 shadow-sm",children:[I.jsx("span",{children:""})," ",p.title||"View Source"]},h))})]})]})]})]})},R4=[{title:"Jeevamrut (Soil Booster)",ingredients:"Cow dung, Cow urine, Jaggery, Pulse flour, Soil from the same field.",utility:"Enhances microbial activity and improves soil fertility exponentially.",icon:""},{title:"Neem-Astra (Pest Repellent)",ingredients:"Neem leaves, Cow urine, Cow dung.",utility:"Controls sucking pests and mealy bugs naturally without harmful residue.",icon:""},{title:"Brahma-Astra (Deep Pest Control)",ingredients:"Neem, Custard apple, Papaya, Pomegranate, Guava leaves boiled in cow urine.",utility:"Effective against large caterpillars and borers.",icon:""},{title:"Agni-Astra",ingredients:"Cow urine, Tobacco, Green chili, Garlic, Neem.",utility:"Powerful repellent for extreme pest infestations.",icon:""}],x4=()=>I.jsxs("div",{className:"space-y-12 pb-20 animate-fadeIn",children:[I.jsxs("header",{className:"text-center max-w-2xl mx-auto",children:[I.jsx("h2",{className:"text-4xl font-extrabold text-stone-800 mb-4 tracking-tight",children:"Vedic Krishi Wisdom"}),I.jsx("div",{className:"h-1 w-20 bg-lime-500 mx-auto mb-6"}),I.jsxs("p",{className:"text-stone-600 text-lg",children:["Explore the profound agricultural principles championed by ",I.jsx("span",{className:"font-bold text-stone-800",children:"Shri Rajiv Dixit"}),". Focusing on Swadeshi, sustainable, and Zero-Budget Natural Farming."]})]}),I.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[I.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] shadow-sm border border-stone-200",children:[I.jsx("h3",{className:"text-2xl font-bold text-stone-800 mb-6",children:"Fundamental Pillars"}),I.jsxs("ul",{className:"space-y-6",children:[I.jsxs("li",{className:"flex gap-4",children:[I.jsx("span",{className:"flex-shrink-0 w-10 h-10 bg-lime-100 rounded-2xl flex items-center justify-center font-bold text-green-700",children:"1"}),I.jsxs("div",{children:[I.jsx("h4",{className:"font-bold text-stone-800",children:"Beejamrut (Seed Treatment)"}),I.jsx("p",{className:"text-sm text-stone-500 mt-1",children:"Treating seeds with local microbial cultures to prevent soil-borne diseases."})]})]}),I.jsxs("li",{className:"flex gap-4",children:[I.jsx("span",{className:"flex-shrink-0 w-10 h-10 bg-lime-100 rounded-2xl flex items-center justify-center font-bold text-green-700",children:"2"}),I.jsxs("div",{children:[I.jsx("h4",{className:"font-bold text-stone-800",children:"Jeevamrut (Microbial Enrichment)"}),I.jsx("p",{className:"text-sm text-stone-500 mt-1",children:"Applying fermented cultures of local bacteria to multiply soil life."})]})]}),I.jsxs("li",{className:"flex gap-4",children:[I.jsx("span",{className:"flex-shrink-0 w-10 h-10 bg-lime-100 rounded-2xl flex items-center justify-center font-bold text-green-700",children:"3"}),I.jsxs("div",{children:[I.jsx("h4",{className:"font-bold text-stone-800",children:"Mulching (Acchaadana)"}),I.jsx("p",{className:"text-sm text-stone-500 mt-1",children:"Covering soil with biomass to preserve moisture and prevent erosion."})]})]}),I.jsxs("li",{className:"flex gap-4",children:[I.jsx("span",{className:"flex-shrink-0 w-10 h-10 bg-lime-100 rounded-2xl flex items-center justify-center font-bold text-green-700",children:"4"}),I.jsxs("div",{children:[I.jsx("h4",{className:"font-bold text-stone-800",children:"Moisture (Whapasa)"}),I.jsx("p",{className:"text-sm text-stone-500 mt-1",children:"Understanding that roots need air as much as water."})]})]})]})]}),I.jsxs("div",{className:"bg-green-900 text-white p-8 rounded-[2.5rem] shadow-xl relative overflow-hidden",children:[I.jsx("div",{className:"absolute -right-10 -bottom-10 w-40 h-40 bg-lime-500/10 rounded-full blur-3xl"}),I.jsx("h3",{className:"text-2xl font-bold mb-6",children:"Rajiv Dixit's Philosophy"}),I.jsxs("blockquote",{className:"text-lg italic text-lime-100 border-l-4 border-lime-400 pl-6 space-y-4",children:[I.jsx("p",{children:'"Chemical fertilizers are not food for the soil; they are like poison for the earth."'}),I.jsx("p",{children:`"A farmer's true wealth is the health of his soil and the purity of his seeds."`}),I.jsx("p",{children:'"Swadeshi farming means using what you have in your cowshed, not what is sold in expensive markets."'})]}),I.jsx("div",{className:"mt-8 pt-8 border-t border-green-800",children:I.jsxs("p",{className:"text-sm text-green-300",children:["By following these natural methods, farmers can eliminate input costs entirely, leading to",I.jsx("span",{className:"font-bold text-white",children:" Zero Budget Natural Farming (ZBNF)"}),"."]})})]})]}),I.jsxs("section",{children:[I.jsx("h3",{className:"text-2xl font-bold text-stone-800 mb-8 px-4",children:"Essential Natural Formulas"}),I.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:R4.map(n=>I.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-stone-100 shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all",children:[I.jsx("div",{className:"text-4xl mb-4",children:n.icon}),I.jsx("h4",{className:"font-bold text-stone-800 mb-2",children:n.title}),I.jsx("p",{className:"text-xs text-stone-400 font-bold uppercase mb-3",children:"Ingredients"}),I.jsx("p",{className:"text-xs text-stone-600 mb-4",children:n.ingredients}),I.jsx("div",{className:"pt-4 border-t border-stone-50",children:I.jsx("p",{className:"text-xs text-green-600 font-medium",children:n.utility})})]},n.title))})]}),I.jsxs("footer",{className:"bg-stone-200/50 p-8 rounded-[2.5rem] text-center",children:[I.jsx("p",{className:"text-stone-500 font-medium",children:"Protect the Earth, Feed the Nation, Save the Future."}),I.jsx("button",{className:"mt-4 px-8 py-3 bg-stone-800 text-white rounded-full font-bold text-sm hover:bg-stone-900 transition-colors shadow-lg",children:"Download PDF Guide"})]})]}),N4=({onComplete:n})=>{const[e,t]=He.useState(0),[i,r]=He.useState({name:"",address:"",phone:"",farmSize:0,crops:[],language:"hi",aiProvider:Ln.GEMINI}),a=p=>{r({...i,language:p}),t(1)},u=()=>{t(2)},d=p=>{p.preventDefault(),n({...i,onboarded:!0})};return I.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-green-950 p-4 overflow-y-auto",children:[I.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[I.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-lime-500/20 blur-[120px] rounded-full"}),I.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-green-500/20 blur-[120px] rounded-full"})]}),I.jsxs("div",{className:"glass-card w-full max-w-xl p-8 md:p-12 rounded-[3rem] shadow-2xl relative z-10 animate-fadeInScale my-8",children:[e===0&&I.jsxs("div",{className:"text-center space-y-8",children:[I.jsx("h2",{className:"text-3xl font-black text-stone-800 tracking-tight",children:"Select Language"}),I.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.keys(gs).map(p=>I.jsx("button",{onClick:()=>a(p),className:"p-4 bg-white border border-stone-200 rounded-2xl font-bold hover:bg-lime-50 hover:border-lime-400 transition-all text-sm",children:gs[p]},p))})]}),e===1&&I.jsxs("div",{className:"text-center space-y-8",children:[I.jsx("div",{className:"w-24 h-24 bg-lime-400 mx-auto rounded-3xl flex items-center justify-center text-5xl shadow-lg rotate-3",children:""}),I.jsxs("div",{children:[I.jsx("h1",{className:"text-4xl font-black text-stone-800 tracking-tight",children:"Kisan Mitra AI"}),I.jsx("p",{className:"text-stone-500 mt-4 text-lg font-medium",children:"Empowering Farmers with Advanced Intelligence & Rajiv Dixit's Natural Wisdom."})]}),I.jsxs("div",{className:"space-y-4 pt-6",children:[I.jsxs("button",{onClick:u,className:"w-full py-4 bg-white border border-stone-200 rounded-2xl font-bold flex items-center justify-center gap-4 hover:bg-stone-50 transition-all shadow-sm",children:[I.jsx("img",{src:"https://www.gstatic.com/images/branding/product/1x/gsa_512dp.png",className:"w-6 h-6",alt:"Google"}),"Continue with Google"]}),I.jsx("button",{onClick:()=>t(2),className:"w-full py-4 bg-green-700 text-white rounded-2xl font-bold text-lg hover:bg-green-800 transition-all shadow-xl",children:"Enter Details Manually"})]})]}),e===2&&I.jsxs("form",{onSubmit:d,className:"space-y-6",children:[I.jsxs("header",{className:"text-center mb-4",children:[I.jsx("h2",{className:"text-2xl font-black text-stone-800 tracking-tight",children:"Tell us about your Farm"}),I.jsx("p",{className:"text-stone-500 text-sm",children:"We'll personalize our AI advice for your specific land."})]}),I.jsxs("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto pr-2",children:[I.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[I.jsxs("div",{children:[I.jsx("label",{className:"block text-[10px] font-black text-stone-400 uppercase tracking-widest mb-1 px-1",children:"Full Name"}),I.jsx("input",{required:!0,type:"text",value:i.name,onChange:p=>r({...i,name:p.target.value}),className:"w-full p-3 bg-stone-100 rounded-xl focus:ring-4 focus:ring-lime-100 text-sm",placeholder:"e.g. Rajesh Kumar"})]}),I.jsxs("div",{children:[I.jsx("label",{className:"block text-[10px] font-black text-stone-400 uppercase tracking-widest mb-1 px-1",children:"Mobile No."}),I.jsx("input",{required:!0,type:"tel",value:i.phone,onChange:p=>r({...i,phone:p.target.value}),className:"w-full p-3 bg-stone-100 rounded-xl focus:ring-4 focus:ring-lime-100 text-sm",placeholder:"+91 98XXX XXXX"})]})]}),I.jsxs("div",{children:[I.jsx("label",{className:"block text-[10px] font-black text-stone-400 uppercase tracking-widest mb-1 px-1",children:"Farm Location / Village"}),I.jsx("input",{required:!0,type:"text",value:i.address,onChange:p=>r({...i,address:p.target.value}),className:"w-full p-3 bg-stone-100 rounded-xl focus:ring-4 focus:ring-lime-100 text-sm",placeholder:"Address, Village, District"})]}),I.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[I.jsxs("div",{children:[I.jsx("label",{className:"block text-[10px] font-black text-stone-400 uppercase tracking-widest mb-1 px-1",children:"Farm Size (in Acres)"}),I.jsx("input",{required:!0,type:"number",step:"0.1",value:i.farmSize,onChange:p=>r({...i,farmSize:parseFloat(p.target.value)||0}),className:"w-full p-3 bg-stone-100 rounded-xl focus:ring-4 focus:ring-lime-100 text-sm",placeholder:"e.g. 5.5"})]}),I.jsxs("div",{children:[I.jsx("label",{className:"block text-[10px] font-black text-stone-400 uppercase tracking-widest mb-1 px-1",children:"Crops you plant"}),I.jsx("input",{required:!0,type:"text",value:i.crops.join(", "),onChange:p=>r({...i,crops:p.target.value.split(",").map(h=>h.trim()).filter(h=>h)}),className:"w-full p-3 bg-stone-100 rounded-xl focus:ring-4 focus:ring-lime-100 text-sm",placeholder:"e.g. Wheat, Rice, Cotton"})]})]}),I.jsxs("div",{children:[I.jsx("label",{className:"block text-[10px] font-black text-stone-400 uppercase tracking-widest mb-1 px-1",children:"AI Advisor Engine"}),I.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[I.jsx("button",{type:"button",onClick:()=>r({...i,aiProvider:Ln.GEMINI}),className:`p-3 rounded-xl border-2 transition-all text-sm font-bold ${i.aiProvider===Ln.GEMINI?"border-green-600 bg-green-50 text-green-700":"border-stone-200 bg-white text-stone-500"}`,children:"Gemini AI"}),I.jsx("button",{type:"button",onClick:()=>r({...i,aiProvider:Ln.OPENAI}),className:`p-3 rounded-xl border-2 transition-all text-sm font-bold ${i.aiProvider===Ln.OPENAI?"border-green-600 bg-green-50 text-green-700":"border-stone-200 bg-white text-stone-500"}`,children:"ChatGPT AI"})]})]})]}),I.jsx("button",{type:"submit",className:"w-full py-4 bg-green-700 text-white rounded-[1.5rem] font-black text-lg hover:bg-green-800 transition-all shadow-xl mt-4",children:"Start Smart Farming"})]})]})]})},M4=({history:n})=>n.length===0?I.jsxs("div",{className:"text-center py-20 space-y-4",children:[I.jsx("div",{className:"text-6xl",children:""}),I.jsx("h3",{className:"text-2xl font-bold text-stone-800",children:"No History Found"}),I.jsx("p",{className:"text-stone-500",children:"Your previous crop scans will appear here."})]}):I.jsxs("div",{className:"space-y-8 animate-fadeIn",children:[I.jsxs("header",{children:[I.jsx("h2",{className:"text-3xl font-bold text-stone-800",children:"Diagnosis History"}),I.jsx("p",{className:"text-stone-500",children:"Review your past scans and follow-up advice."})]}),I.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(e=>I.jsxs("div",{className:"bg-white rounded-3xl overflow-hidden shadow-sm border border-stone-200 hover:shadow-lg transition-all flex flex-col",children:[e.image&&I.jsx("img",{src:e.image,alt:e.disease,className:"w-full h-48 object-cover"}),I.jsxs("div",{className:"p-6 space-y-4 flex-1",children:[I.jsxs("div",{className:"flex justify-between items-start",children:[I.jsx("h4",{className:"font-bold text-xl text-stone-800 leading-tight",children:e.disease}),I.jsx("span",{className:"text-[10px] font-bold bg-lime-100 text-green-700 px-2 py-1 rounded-full uppercase tracking-tighter",children:new Date(e.timestamp).toLocaleDateString()})]}),I.jsx("p",{className:"text-sm text-stone-500 line-clamp-2",children:e.description}),I.jsxs("div",{className:"pt-4 mt-auto border-t border-stone-100 flex gap-2",children:[I.jsxs("span",{className:"px-3 py-1 bg-stone-100 text-stone-600 rounded-lg text-xs font-semibold",children:[" ",e.solutions.chemicalSolution.product.split(" ")[0]]}),I.jsxs("span",{className:"px-3 py-1 bg-lime-50 text-green-700 rounded-lg text-xs font-semibold",children:[" ",e.solutions.naturalSolution.name.split(" ")[0]]})]})]})]},e.id))})]}),D4=({userProfile:n,onUpdate:e,onLogout:t})=>{const i=()=>{const r=n.aiProvider===Ln.GEMINI?Ln.OPENAI:Ln.GEMINI;e({...n,aiProvider:r})};return I.jsxs("div",{className:"max-w-2xl mx-auto space-y-8 animate-fadeIn",children:[I.jsxs("header",{className:"text-center",children:[I.jsx("div",{className:"w-24 h-24 bg-green-800 text-white rounded-full mx-auto flex items-center justify-center text-4xl font-black mb-4 shadow-xl ring-8 ring-stone-100",children:n.name.charAt(0)}),I.jsx("h2",{className:"text-3xl font-black text-stone-800",children:n.name}),I.jsx("p",{className:"text-stone-500",children:"Farm Member since 2025"})]}),I.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] shadow-sm border border-stone-200 space-y-6",children:[I.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[I.jsxs("div",{className:"p-4 bg-stone-50 rounded-2xl border border-stone-100",children:[I.jsx("p",{className:"text-[10px] font-bold text-stone-400 uppercase tracking-widest mb-1",children:"Mobile Number"}),I.jsx("p",{className:"font-bold text-stone-800",children:n.phone||"N/A"})]}),I.jsxs("div",{className:"p-4 bg-stone-50 rounded-2xl border border-stone-100",children:[I.jsx("p",{className:"text-[10px] font-bold text-stone-400 uppercase tracking-widest mb-1",children:"Farm Location"}),I.jsx("p",{className:"font-bold text-stone-800",children:n.address})]})]}),I.jsxs("div",{className:"p-4 bg-stone-50 rounded-2xl border border-stone-100",children:[I.jsx("p",{className:"text-[10px] font-bold text-stone-400 uppercase tracking-widest mb-1",children:"AI Advisor Engine"}),I.jsxs("div",{className:"flex items-center justify-between mt-2",children:[I.jsx("p",{className:"font-bold text-stone-800",children:n.aiProvider===Ln.GEMINI?"Google Gemini":"OpenAI ChatGPT"}),I.jsx("button",{onClick:i,className:"text-xs font-black text-green-700 uppercase tracking-widest hover:underline",children:"Switch Engine"})]})]}),I.jsxs("div",{className:"flex items-center justify-between p-4 bg-lime-50 rounded-2xl border border-lime-100",children:[I.jsxs("div",{className:"flex items-center gap-3",children:[I.jsx("span",{className:"text-2xl",children:""}),I.jsxs("div",{children:[I.jsx("p",{className:"font-bold text-green-900",children:"Cloud Sync Active"}),I.jsx("p",{className:"text-xs text-green-600",children:"Your data is being saved to private storage."})]})]}),I.jsx("div",{className:"w-12 h-6 bg-green-700 rounded-full relative p-1 flex items-center justify-end",children:I.jsx("div",{className:"w-4 h-4 bg-white rounded-full"})})]}),I.jsxs("div",{className:"pt-6 border-t border-stone-100 flex flex-col gap-4",children:[I.jsx("button",{className:"w-full py-4 bg-stone-100 text-stone-600 font-bold rounded-2xl hover:bg-stone-200 transition-colors",children:"Edit Details"}),I.jsx("button",{onClick:t,className:"w-full py-4 bg-red-50 text-red-600 font-bold rounded-2xl hover:bg-red-100 transition-colors",children:"Sign Out"})]})]})]})},P4=({userProfile:n})=>{const[e,t]=He.useState(!1),[i,r]=He.useState(!1),[a,u]=He.useState(!1),[d,p]=He.useState(!1),[h,_]=He.useState(0),[T,E]=He.useState([]),[C,M]=He.useState(""),[U,P]=He.useState(""),$=He.useRef(null),H=He.useRef(null),z=He.useRef(0),X=He.useRef(new Set),ue=He.useRef(null),W=He.useRef(null),N=He.useRef(null),D=n.aiProvider===Ln.GEMINI;He.useEffect(()=>{var xe;(xe=ue.current)==null||xe.scrollIntoView({behavior:"smooth"})},[T,C,U]),He.useEffect(()=>(e?N.current=window.setInterval(()=>{_(xe=>xe+1)},1e3):(N.current&&clearInterval(N.current),_(0)),()=>{N.current&&clearInterval(N.current)}),[e]);const x=xe=>{const Z=Math.floor(xe/60),ce=xe%60;return`${Z}:${ce.toString().padStart(2,"0")}`},L=async(xe,Z)=>{const ce=new Int16Array(xe.buffer),fe=ce.length,be=Z.createBuffer(1,fe,24e3),ze=be.getChannelData(0);for(let F=0;F<fe;F++)ze[F]=ce[F]/32768;return be},k=xe=>{const Z=atob(xe),ce=Z.length,fe=new Uint8Array(ce);for(let be=0;be<ce;be++)fe[be]=Z.charCodeAt(be);return fe},q=async()=>{r(!0),E([]);try{const xe=await navigator.mediaDevices.getUserMedia({audio:!0});H.current=new(window.AudioContext||window.webkitAudioContext)({sampleRate:24e3});const Z=new(window.AudioContext||window.webkitAudioContext)({sampleRate:16e3});dO({onopen:()=>{r(!1),t(!0)},onmessage:async fe=>{var ze,F,ie,he,me,Ce,De,Pe,wt;const be=(me=(he=(ie=(F=(ze=fe.serverContent)==null?void 0:ze.modelTurn)==null?void 0:F.parts)==null?void 0:ie[0])==null?void 0:he.inlineData)==null?void 0:me.data;if(be&&H.current){u(!0);const $e=H.current;z.current=Math.max(z.current,$e.currentTime);const Oi=await L(k(be),$e),On=$e.createBufferSource();On.buffer=Oi,On.connect($e.destination),On.start(z.current),z.current+=Oi.duration,X.current.add(On),On.onended=()=>{X.current.delete(On),X.current.size===0&&u(!1)}}(Ce=fe.serverContent)!=null&&Ce.inputTranscription&&(M($e=>$e+fe.serverContent.inputTranscription.text),p(!0),W.current&&clearTimeout(W.current),W.current=window.setTimeout(()=>p(!1),1500)),(De=fe.serverContent)!=null&&De.outputTranscription&&P($e=>$e+fe.serverContent.outputTranscription.text),(Pe=fe.serverContent)!=null&&Pe.turnComplete&&(E($e=>[...$e,...C?[{role:"user",text:C}]:[],...U?[{role:"ai",text:U}]:[]]),M(""),P(""),p(!1)),(wt=fe.serverContent)!=null&&wt.interrupted&&(X.current.forEach($e=>$e.stop()),X.current.clear(),z.current=0,u(!1),P(""))},onerror:fe=>{console.error("Live Error",fe),V()},onclose:()=>{t(!1),u(!1),p(!1)}},n.language).then(fe=>{$.current=fe;const be=Z.createMediaStreamSource(xe),ze=Z.createScriptProcessor(4096,1,1);ze.onaudioprocess=F=>{const ie=F.inputBuffer.getChannelData(0),he=new Int16Array(ie.length);for(let Pe=0;Pe<ie.length;Pe++)he[Pe]=ie[Pe]*32768;let me="";const Ce=new Uint8Array(he.buffer);for(let Pe=0;Pe<Ce.byteLength;Pe++)me+=String.fromCharCode(Ce[Pe]);const De=btoa(me);fe.sendRealtimeInput({media:{data:De,mimeType:"audio/pcm;rate=16000"}})},be.connect(ze),ze.connect(Z.destination)})}catch(xe){console.error(xe),r(!1),alert("Microphone access is required.")}},V=()=>{$.current&&$.current.close(),t(!1)},ke=["How to make Jeevamrut?","Pests on my wheat crop","Rajiv Dixit's soil tips","Current market rates"];return I.jsxs("div",{className:"flex flex-col h-[calc(100vh-8rem)] max-w-2xl mx-auto space-y-6 animate-fadeIn",children:[!D&&I.jsxs("div",{className:"bg-amber-50 border border-amber-200 p-4 rounded-2xl flex items-center gap-3 text-amber-800 text-sm font-medium",children:[I.jsx("span",{children:""}),I.jsxs("p",{children:["Voice Assistant currently requires ",I.jsx("b",{children:"Google Gemini"}),". Please switch your AI Engine in the Profile tab to use this feature."]})]}),I.jsxs("div",{className:`flex-1 flex flex-col rounded-[3.5rem] overflow-hidden shadow-2xl transition-all duration-1000 relative border-4 ${e?a?"bg-green-950 border-lime-500/30":d?"bg-blue-950 border-blue-500/30":"bg-stone-950 border-white/10":"bg-white border-stone-100"} ${D?"":"opacity-50 pointer-events-none grayscale"}`,children:[I.jsx("div",{className:`absolute inset-0 transition-opacity duration-1000 blur-[120px] pointer-events-none opacity-40 ${a?"bg-lime-500":d?"bg-blue-500":"bg-transparent"}`}),I.jsxs("div",{className:"pt-10 px-10 flex justify-between items-center relative z-20",children:[I.jsxs("div",{className:"flex flex-col",children:[I.jsx("h4",{className:`text-[10px] font-black uppercase tracking-[0.4em] transition-colors ${e?"text-lime-400":"text-stone-400"}`,children:e?"Active Consultation":"Expert Offline"}),e&&I.jsx("span",{className:"text-white/40 font-mono text-sm mt-1",children:x(h)})]}),I.jsx("div",{className:"flex items-center gap-4",children:I.jsx("div",{className:`w-3 h-3 rounded-full transition-all duration-500 ${e?"bg-lime-400 shadow-[0_0_15px_rgba(163,230,53,0.8)]":"bg-stone-200"}`})})]}),I.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center relative z-10 px-6",children:[I.jsxs("div",{className:"relative",children:[e&&I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"absolute -inset-24 rounded-full border border-white/5 animate-[ping_3s_linear_infinite] opacity-20"}),I.jsx("div",{className:"absolute -inset-16 rounded-full border border-white/10 animate-[pulse_2s_ease-in-out_infinite] opacity-30"})]}),I.jsx("div",{className:`w-44 h-44 rounded-full flex items-center justify-center text-7xl shadow-2xl transition-all duration-700 relative z-20 ${e?"bg-white ring-[12px] ring-white/10":"bg-stone-50"}`,children:I.jsx("div",{className:`transition-transform duration-500 ${e?"scale-110":"scale-100"}`,children:e?a?"":d?"":"":""})})]}),I.jsx("div",{className:"mt-20 w-full max-w-xs h-16 flex items-center justify-center",children:I.jsx("svg",{viewBox:"0 0 200 60",className:"w-full h-full",children:[...Array(e?3:0)].map((xe,Z)=>I.jsx("path",{d:"M0 30 Q 25 10, 50 30 T 100 30 T 150 30 T 200 30",fill:"none",stroke:a?"#a3e635":d?"#60a5fa":"#ffffff44",strokeWidth:"2",className:`transition-all duration-500 ${e?"animate-wave":""}`,style:{opacity:1-Z*.3,animationDelay:`${Z*-.5}s`,transform:`scaleY(${e?a||d?1.5:.2:0})`}},Z))})})]}),I.jsx("div",{className:`min-h-[140px] px-12 py-10 transition-all duration-500 relative z-20 ${e?"bg-black/40 text-white":"bg-stone-50/80 text-stone-400"}`,children:I.jsxs("div",{className:"flex flex-col gap-3",children:[I.jsx("p",{className:"text-xl font-bold leading-snug italic line-clamp-2 transition-all",children:e?U||C||"Go ahead, ask Kisan Mitra anything...":"Connect to speak with our AI expert."}),e&&!a&&!d&&!C&&I.jsx("div",{className:"flex gap-2 mt-4 overflow-x-auto pb-2 no-scrollbar animate-fadeInUp",children:ke.map((xe,Z)=>I.jsx("button",{className:"px-3 py-1.5 bg-white/10 border border-white/10 rounded-full text-[10px] font-bold whitespace-nowrap hover:bg-white/20 transition-all",children:xe},Z))})]})}),I.jsx("div",{className:`p-10 flex justify-center items-center gap-10 relative z-20 transition-all ${e?"bg-black/60":"bg-white"}`,children:e?I.jsx("div",{className:"flex items-center gap-10",children:I.jsx("button",{onClick:V,className:"w-24 h-24 bg-red-600 text-white rounded-full flex items-center justify-center text-4xl shadow-2xl hover:bg-red-700 transition-all",children:""})}):I.jsxs("button",{onClick:q,disabled:i,className:"group relative w-28 h-28 bg-green-700 text-white rounded-full transition-all shadow-2xl hover:bg-green-800 hover:scale-105 active:scale-90 disabled:opacity-50",children:[I.jsx("div",{className:"absolute inset-0 rounded-full bg-green-500 animate-[ping_2s_linear_infinite] opacity-20"}),I.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[I.jsx("span",{className:"text-4xl",children:i?"":""}),I.jsx("p",{className:"text-[8px] font-black uppercase tracking-widest mt-1 opacity-60",children:"Consult"})]})]})})]}),I.jsx("style",{children:`
        @keyframes wave {
          0% { transform: scaleY(1.5) translateX(-20px); }
          50% { transform: scaleY(0.8) translateX(20px); }
          100% { transform: scaleY(1.5) translateX(-20px); }
        }
        .animate-wave { animation: wave 3s ease-in-out infinite; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
      `})]})},k4=()=>{};var hw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},V4=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const a=n[t++];e[i++]=String.fromCharCode((r&31)<<6|a&63)}else if(r>239&&r<365){const a=n[t++],u=n[t++],d=n[t++],p=((r&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const a=n[t++],u=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(a&63)<<6|u&63)}}return e.join("")},_R={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const a=n[r],u=r+1<n.length,d=u?n[r+1]:0,p=r+2<n.length,h=p?n[r+2]:0,_=a>>2,T=(a&3)<<4|d>>4;let E=(d&15)<<2|h>>6,C=h&63;p||(C=64,u||(E=64)),i.push(t[_],t[T],t[E],t[C])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(yR(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):V4(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const a=t[n.charAt(r++)],d=r<n.length?t[n.charAt(r)]:0;++r;const h=r<n.length?t[n.charAt(r)]:64;++r;const T=r<n.length?t[n.charAt(r)]:64;if(++r,a==null||d==null||h==null||T==null)throw new U4;const E=a<<2|d>>4;if(i.push(E),h!==64){const C=d<<4&240|h>>2;if(i.push(C),T!==64){const M=h<<6&192|T;i.push(M)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class U4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const L4=function(n){const e=yR(n);return _R.encodeByteArray(e,!0)},gh=function(n){return L4(n).replace(/\./g,"")},vR=function(n){try{return _R.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4=()=>O4().__FIREBASE_DEFAULTS__,B4=()=>{if(typeof process>"u"||typeof hw>"u")return;const n=hw.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},q4=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&vR(n[1]);return e&&JSON.parse(e)},Zh=()=>{try{return k4()||F4()||B4()||q4()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},TR=n=>{var e,t;return(t=(e=Zh())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},G4=n=>{const e=TR(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},ER=()=>{var n;return(n=Zh())==null?void 0:n.config},SR=n=>{var e;return(e=Zh())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function AR(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z4(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[gh(JSON.stringify(t)),gh(JSON.stringify(u)),""].join(".")}const rc={};function $4(){const n={prod:[],emulator:[]};for(const e of Object.keys(rc))rc[e]?n.emulator.push(e):n.prod.push(e);return n}function J4(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let pw=!1;function wR(n,e){if(typeof window>"u"||typeof document>"u"||!Sl(window.location.host)||rc[n]===e||rc[n]||pw)return;rc[n]=e;function t(E){return`__firebase__banner__${E}`}const i="__firebase__banner",a=$4().prod.length>0;function u(){const E=document.getElementById(i);E&&E.remove()}function d(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function p(E,C){E.setAttribute("width","24"),E.setAttribute("id",C),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function h(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{pw=!0,u()},E}function _(E,C){E.setAttribute("id",C),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function T(){const E=J4(i),C=t("text"),M=document.getElementById(C)||document.createElement("span"),U=t("learnmore"),P=document.getElementById(U)||document.createElement("a"),$=t("preprendIcon"),H=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const z=E.element;d(z),_(P,U);const X=h();p(H,$),z.append(H,M,P,X),document.body.appendChild(z)}a?(M.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function K4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(En())}function Y4(){var e;const n=(e=Zh())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function W4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Q4(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function X4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function j4(){const n=En();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Z4(){return!Y4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function e3(){try{return typeof indexedDB=="object"}catch{return!1}}function t3(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var a;e(((a=r.error)==null?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n3="FirebaseError";class js extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=n3,Object.setPrototypeOf(this,js.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ic.prototype.create)}}class Ic{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},r=`${this.service}/${e}`,a=this.errors[e],u=a?i3(a,i):"Error",d=`${this.serviceName}: ${u} (${r}).`;return new js(r,d,i)}}function i3(n,e){return n.replace(s3,(t,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const s3=/\{\$([^}]+)}/g;function r3(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Fo(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const r of t){if(!i.includes(r))return!1;const a=n[r],u=e[r];if(mw(a)&&mw(u)){if(!Fo(a,u))return!1}else if(a!==u)return!1}for(const r of i)if(!t.includes(r))return!1;return!0}function mw(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bc(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function o3(n,e){const t=new a3(n,e);return t.subscribe.bind(t)}class a3{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");l3(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=Og),r.error===void 0&&(r.error=Og),r.complete===void 0&&(r.complete=Og);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function l3(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Og(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(n){return n&&n._delegate?n._delegate:n}class Bo{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new H4;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(d3(e))try{this.getOrInitializeService({instanceIdentifier:Mo})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:r});i.resolve(a)}catch{}}}}clearInstance(e=Mo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Mo){return this.instances.has(e)}getOptions(e=Mo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);i===d&&u.resolve(r)}return r}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const a=this.instances.get(i);return a&&e(a,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:c3(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Mo){return this.component?this.component.multipleInstances?e:Mo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function c3(n){return n===Mo?void 0:n}function d3(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new u3(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Qe||(Qe={}));const h3={debug:Qe.DEBUG,verbose:Qe.VERBOSE,info:Qe.INFO,warn:Qe.WARN,error:Qe.ERROR,silent:Qe.SILENT},p3=Qe.INFO,m3={[Qe.DEBUG]:"log",[Qe.VERBOSE]:"log",[Qe.INFO]:"info",[Qe.WARN]:"warn",[Qe.ERROR]:"error"},g3=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),r=m3[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class k_{constructor(e){this.name=e,this._logLevel=p3,this._logHandler=g3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?h3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Qe.DEBUG,...e),this._logHandler(this,Qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Qe.VERBOSE,...e),this._logHandler(this,Qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Qe.INFO,...e),this._logHandler(this,Qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Qe.WARN,...e),this._logHandler(this,Qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Qe.ERROR,...e),this._logHandler(this,Qe.ERROR,...e)}}const y3=(n,e)=>e.some(t=>n instanceof t);let gw,yw;function _3(){return gw||(gw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function v3(){return yw||(yw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const CR=new WeakMap,by=new WeakMap,IR=new WeakMap,Fg=new WeakMap,V_=new WeakMap;function T3(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(Fr(n.result)),r()},u=()=>{i(n.error),r()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&CR.set(t,n)}).catch(()=>{}),V_.set(e,n),e}function E3(n){if(by.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),r()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});by.set(n,e)}let Ry={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return by.get(n);if(e==="objectStoreNames")return n.objectStoreNames||IR.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Fr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function S3(n){Ry=n(Ry)}function A3(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Bg(this),e,...t);return IR.set(i,e.sort?e.sort():[e]),Fr(i)}:v3().includes(n)?function(...e){return n.apply(Bg(this),e),Fr(CR.get(this))}:function(...e){return Fr(n.apply(Bg(this),e))}}function w3(n){return typeof n=="function"?A3(n):(n instanceof IDBTransaction&&E3(n),y3(n,_3())?new Proxy(n,Ry):n)}function Fr(n){if(n instanceof IDBRequest)return T3(n);if(Fg.has(n))return Fg.get(n);const e=w3(n);return e!==n&&(Fg.set(n,e),V_.set(e,n)),e}const Bg=n=>V_.get(n);function C3(n,e,{blocked:t,upgrade:i,blocking:r,terminated:a}={}){const u=indexedDB.open(n,e),d=Fr(u);return i&&u.addEventListener("upgradeneeded",p=>{i(Fr(u.result),p.oldVersion,p.newVersion,Fr(u.transaction),p)}),t&&u.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{a&&p.addEventListener("close",()=>a()),r&&p.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),d}const I3=["get","getKey","getAll","getAllKeys","count"],b3=["put","add","delete","clear"],qg=new Map;function _w(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(qg.get(e))return qg.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=b3.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||I3.includes(t)))return;const a=async function(u,...d){const p=this.transaction(u,r?"readwrite":"readonly");let h=p.store;return i&&(h=h.index(d.shift())),(await Promise.all([h[t](...d),r&&p.done]))[0]};return qg.set(e,a),a}S3(n=>({...n,get:(e,t,i)=>_w(e,t)||n.get(e,t,i),has:(e,t)=>!!_w(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(x3(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function x3(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const xy="@firebase/app",vw="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s=new k_("@firebase/app"),N3="@firebase/app-compat",M3="@firebase/analytics-compat",D3="@firebase/analytics",P3="@firebase/app-check-compat",k3="@firebase/app-check",V3="@firebase/auth",U3="@firebase/auth-compat",L3="@firebase/database",O3="@firebase/data-connect",F3="@firebase/database-compat",B3="@firebase/functions",q3="@firebase/functions-compat",G3="@firebase/installations",H3="@firebase/installations-compat",z3="@firebase/messaging",$3="@firebase/messaging-compat",J3="@firebase/performance",K3="@firebase/performance-compat",Y3="@firebase/remote-config",W3="@firebase/remote-config-compat",Q3="@firebase/storage",X3="@firebase/storage-compat",j3="@firebase/firestore",Z3="@firebase/ai",e6="@firebase/firestore-compat",t6="firebase",n6="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny="[DEFAULT]",i6={[xy]:"fire-core",[N3]:"fire-core-compat",[D3]:"fire-analytics",[M3]:"fire-analytics-compat",[k3]:"fire-app-check",[P3]:"fire-app-check-compat",[V3]:"fire-auth",[U3]:"fire-auth-compat",[L3]:"fire-rtdb",[O3]:"fire-data-connect",[F3]:"fire-rtdb-compat",[B3]:"fire-fn",[q3]:"fire-fn-compat",[G3]:"fire-iid",[H3]:"fire-iid-compat",[z3]:"fire-fcm",[$3]:"fire-fcm-compat",[J3]:"fire-perf",[K3]:"fire-perf-compat",[Y3]:"fire-rc",[W3]:"fire-rc-compat",[Q3]:"fire-gcs",[X3]:"fire-gcs-compat",[j3]:"fire-fst",[e6]:"fire-fst-compat",[Z3]:"fire-vertex","fire-js":"fire-js",[t6]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yh=new Map,s6=new Map,My=new Map;function Tw(n,e){try{n.container.addComponent(e)}catch(t){$s.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ul(n){const e=n.name;if(My.has(e))return $s.debug(`There were multiple attempts to register component ${e}.`),!1;My.set(e,n);for(const t of yh.values())Tw(t,n);for(const t of s6.values())Tw(t,n);return!0}function U_(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function xi(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Br=new Ic("app","Firebase",r6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o6{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Bo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Br.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Al=n6;function bR(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:Ny,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw Br.create("bad-app-name",{appName:String(r)});if(t||(t=ER()),!t)throw Br.create("no-options");const a=yh.get(r);if(a){if(Fo(t,a.options)&&Fo(i,a.config))return a;throw Br.create("duplicate-app",{appName:r})}const u=new f3(r);for(const p of My.values())u.addComponent(p);const d=new o6(t,i,u);return yh.set(r,d),d}function RR(n=Ny){const e=yh.get(n);if(!e&&n===Ny&&ER())return bR();if(!e)throw Br.create("no-app",{appName:n});return e}function qr(n,e,t){let i=i6[n]??n;t&&(i+=`-${t}`);const r=i.match(/\s|\//),a=e.match(/\s|\//);if(r||a){const u=[`Unable to register library "${i}" with version "${e}":`];r&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$s.warn(u.join(" "));return}ul(new Bo(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a6="firebase-heartbeat-database",l6=1,pc="firebase-heartbeat-store";let Gg=null;function xR(){return Gg||(Gg=C3(a6,l6,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(pc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Br.create("idb-open",{originalErrorMessage:n.message})})),Gg}async function u6(n){try{const t=(await xR()).transaction(pc),i=await t.objectStore(pc).get(NR(n));return await t.done,i}catch(e){if(e instanceof js)$s.warn(e.message);else{const t=Br.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});$s.warn(t.message)}}}async function Ew(n,e){try{const i=(await xR()).transaction(pc,"readwrite");await i.objectStore(pc).put(e,NR(n)),await i.done}catch(t){if(t instanceof js)$s.warn(t.message);else{const i=Br.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});$s.warn(i.message)}}}function NR(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c6=1024,d6=30;class f6{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new p6(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Sw();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:r}),this._heartbeatsCache.heartbeats.length>d6){const u=m6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){$s.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Sw(),{heartbeatsToSend:i,unsentEntries:r}=h6(this._heartbeatsCache.heartbeats),a=gh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return $s.warn(t),""}}}function Sw(){return new Date().toISOString().substring(0,10)}function h6(n,e=c6){const t=[];let i=n.slice();for(const r of n){const a=t.find(u=>u.agent===r.agent);if(a){if(a.dates.push(r.date),Aw(t)>e){a.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),Aw(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class p6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return e3()?t3().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await u6(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Ew(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Ew(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Aw(n){return gh(JSON.stringify({version:2,heartbeats:n})).length}function m6(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g6(n){ul(new Bo("platform-logger",e=>new R3(e),"PRIVATE")),ul(new Bo("heartbeat",e=>new f6(e),"PRIVATE")),qr(xy,vw,n),qr(xy,vw,"esm2020"),qr("fire-js","")}g6("");var y6="firebase",_6="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qr(y6,_6,"app");function MR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const v6=MR,DR=new Ic("auth","Firebase",MR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h=new k_("@firebase/auth");function T6(n,...e){_h.logLevel<=Qe.WARN&&_h.warn(`Auth (${Al}): ${n}`,...e)}function zf(n,...e){_h.logLevel<=Qe.ERROR&&_h.error(`Auth (${Al}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ys(n,...e){throw O_(n,...e)}function ki(n,...e){return O_(n,...e)}function L_(n,e,t){const i={...v6(),[e]:t};return new Ic("auth","Firebase",i).create(e,{appName:n.name})}function Lo(n){return L_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function E6(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&ys(n,"argument-error"),L_(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function O_(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return DR.create(n,...e)}function Me(n,e,...t){if(!n)throw O_(e,...t)}function qs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw zf(e),new Error(e)}function Js(n,e){n||qs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dy(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function S6(){return ww()==="http:"||ww()==="https:"}function ww(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(S6()||Q4()||"connection"in navigator)?navigator.onLine:!0}function w6(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Js(t>e,"Short delay should be less than long delay!"),this.isMobile=K4()||X4()}get(){return A6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F_(n,e){Js(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I6=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],b6=new Rc(3e4,6e4);function B_(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function wl(n,e,t,i,r={}){return kR(n,r,async()=>{let a={},u={};i&&(e==="GET"?u=i:a={body:JSON.stringify(i)});const d=bc({key:n.config.apiKey,...u}).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const h={method:e,headers:p,...a};return W4()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&Sl(n.emulatorConfig.host)&&(h.credentials="include"),PR.fetch()(await VR(n,n.config.apiHost,t,d),h)})}async function kR(n,e,t){n._canInitEmulator=!1;const i={...C6,...e};try{const r=new x6(n),a=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw If(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const d=a.ok?u.errorMessage:u.error.message,[p,h]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw If(n,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw If(n,"email-already-in-use",u);if(p==="USER_DISABLED")throw If(n,"user-disabled",u);const _=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw L_(n,_,h);ys(n,_)}}catch(r){if(r instanceof js)throw r;ys(n,"network-request-failed",{message:String(r)})}}async function R6(n,e,t,i,r={}){const a=await wl(n,e,t,i,r);return"mfaPendingCredential"in a&&ys(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function VR(n,e,t,i){const r=`${e}${t}?${i}`,a=n,u=a.config.emulator?F_(n.config,r):`${n.config.apiScheme}://${r}`;return I6.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}class x6{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(ki(this.auth,"network-request-failed")),b6.get())})}}function If(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const r=ki(n,e,i);return r.customData._tokenResponse=t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N6(n,e){return wl(n,"POST","/v1/accounts:delete",e)}async function vh(n,e){return wl(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function M6(n,e=!1){const t=bn(n),i=await t.getIdToken(e),r=q_(i);Me(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const a=typeof r.firebase=="object"?r.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:r,token:i,authTime:oc(Hg(r.auth_time)),issuedAtTime:oc(Hg(r.iat)),expirationTime:oc(Hg(r.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Hg(n){return Number(n)*1e3}function q_(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return zf("JWT malformed, contained fewer than 3 sections"),null;try{const r=vR(t);return r?JSON.parse(r):(zf("Failed to decode base64 JWT payload"),null)}catch(r){return zf("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function Cw(n){const e=q_(n);return Me(e,"internal-error"),Me(typeof e.exp<"u","internal-error"),Me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mc(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof js&&D6(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function D6({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P6{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=oc(this.lastLoginAt),this.creationTime=oc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Th(n){var T;const e=n.auth,t=await n.getIdToken(),i=await mc(n,vh(e,{idToken:t}));Me(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];n._notifyReloadListener(r);const a=(T=r.providerUserInfo)!=null&&T.length?UR(r.providerUserInfo):[],u=V6(n.providerData,a),d=n.isAnonymous,p=!(n.email&&r.passwordHash)&&!(u!=null&&u.length),h=d?p:!1,_={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:u,metadata:new Py(r.createdAt,r.lastLoginAt),isAnonymous:h};Object.assign(n,_)}async function k6(n){const e=bn(n);await Th(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function V6(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function UR(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U6(n,e){const t=await kR(n,{},async()=>{const i=bc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:a}=n.config,u=await VR(n,r,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:i};return n.emulatorConfig&&Sl(n.emulatorConfig.host)&&(p.credentials="include"),PR.fetch()(u,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function L6(n,e){return wl(n,"POST","/v2/accounts:revokeToken",B_(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Me(e.idToken,"internal-error"),Me(typeof e.idToken<"u","internal-error"),Me(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Cw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Me(e.length!==0,"internal-error");const t=Cw(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:r,expiresIn:a}=await U6(e,t);this.updateTokensAndExpiration(i,r,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:r,expirationTime:a}=t,u=new nl;return i&&(Me(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),r&&(Me(typeof r=="string","internal-error",{appName:e}),u.accessToken=r),a&&(Me(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new nl,this.toJSON())}_performRefresh(){return qs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(n,e){Me(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ni{constructor({uid:e,auth:t,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new P6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Py(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await mc(this,this.stsTokenManager.getToken(this.auth,e));return Me(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return M6(this,e)}reload(){return k6(this)}_assign(e){this!==e&&(Me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ni({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Th(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xi(this.auth.app))return Promise.reject(Lo(this.auth));const e=await this.getIdToken();return await mc(this,N6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,r=t.email??void 0,a=t.phoneNumber??void 0,u=t.photoURL??void 0,d=t.tenantId??void 0,p=t._redirectEventId??void 0,h=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:T,emailVerified:E,isAnonymous:C,providerData:M,stsTokenManager:U}=t;Me(T&&U,e,"internal-error");const P=nl.fromJSON(this.name,U);Me(typeof T=="string",e,"internal-error"),kr(i,e.name),kr(r,e.name),Me(typeof E=="boolean",e,"internal-error"),Me(typeof C=="boolean",e,"internal-error"),kr(a,e.name),kr(u,e.name),kr(d,e.name),kr(p,e.name),kr(h,e.name),kr(_,e.name);const $=new Ni({uid:T,auth:e,email:r,emailVerified:E,displayName:i,isAnonymous:C,photoURL:u,phoneNumber:a,tenantId:d,stsTokenManager:P,createdAt:h,lastLoginAt:_});return M&&Array.isArray(M)&&($.providerData=M.map(H=>({...H}))),p&&($._redirectEventId=p),$}static async _fromIdTokenResponse(e,t,i=!1){const r=new nl;r.updateFromServerResponse(t);const a=new Ni({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Th(a),a}static async _fromGetAccountInfoResponse(e,t,i){const r=t.users[0];Me(r.localId!==void 0,"internal-error");const a=r.providerUserInfo!==void 0?UR(r.providerUserInfo):[],u=!(r.email&&r.passwordHash)&&!(a!=null&&a.length),d=new nl;d.updateFromIdToken(i);const p=new Ni({uid:r.localId,auth:e,stsTokenManager:d,isAnonymous:u}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Py(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(a!=null&&a.length)};return Object.assign(p,h),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw=new Map;function Gs(n){Js(n instanceof Function,"Expected a class definition");let e=Iw.get(n);return e?(Js(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Iw.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}LR.type="NONE";const bw=LR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $f(n,e,t){return`firebase:${n}:${e}:${t}`}class il{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:r,name:a}=this.auth;this.fullUserKey=$f(this.userKey,r.apiKey,a),this.fullPersistenceKey=$f("persistence",r.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await vh(this.auth,{idToken:e}).catch(()=>{});return t?Ni._fromGetAccountInfoResponse(this.auth,t,e):null}return Ni._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new il(Gs(bw),e,i);const r=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=r[0]||Gs(bw);const u=$f(i,e.config.apiKey,e.name);let d=null;for(const h of t)try{const _=await h._get(u);if(_){let T;if(typeof _=="string"){const E=await vh(e,{idToken:_}).catch(()=>{});if(!E)break;T=await Ni._fromGetAccountInfoResponse(e,E,_)}else T=Ni._fromJSON(e,_);h!==a&&(d=T),a=h;break}}catch{}const p=r.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!p.length?new il(a,e,i):(a=p[0],d&&await a._set(u,d.toJSON()),await Promise.all(t.map(async h=>{if(h!==a)try{await h._remove(u)}catch{}})),new il(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rw(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(qR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(OR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(HR(e))return"Blackberry";if(zR(e))return"Webos";if(FR(e))return"Safari";if((e.includes("chrome/")||BR(e))&&!e.includes("edge/"))return"Chrome";if(GR(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function OR(n=En()){return/firefox\//i.test(n)}function FR(n=En()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function BR(n=En()){return/crios\//i.test(n)}function qR(n=En()){return/iemobile/i.test(n)}function GR(n=En()){return/android/i.test(n)}function HR(n=En()){return/blackberry/i.test(n)}function zR(n=En()){return/webos/i.test(n)}function G_(n=En()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function O6(n=En()){var e;return G_(n)&&!!((e=window.navigator)!=null&&e.standalone)}function F6(){return j4()&&document.documentMode===10}function $R(n=En()){return G_(n)||GR(n)||zR(n)||HR(n)||/windows phone/i.test(n)||qR(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JR(n,e=[]){let t;switch(n){case"Browser":t=Rw(En());break;case"Worker":t=`${Rw(En())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Al}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((u,d)=>{try{const p=e(a);u(p)}catch(p){d(p)}});i.onAbort=t,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q6(n,e={}){return wl(n,"GET","/v2/passwordPolicy",B_(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G6=6;class H6{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??G6,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xw(this),this.idTokenSubscription=new xw(this),this.beforeStateQueue=new B6(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=DR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Gs(t)),this._initializationPromise=this.queue(async()=>{var i,r,a;if(!this._deleted&&(this.persistenceManager=await il.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await vh(this,{idToken:e}),i=await Ni._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(xi(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(a=this.redirectUser)==null?void 0:a._redirectEventId,d=i==null?void 0:i._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===d)&&(p!=null&&p.user)&&(i=p.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Th(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=w6()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xi(this.app))return Promise.reject(Lo(this));const t=e?bn(e):null;return t&&Me(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xi(this.app)?Promise.reject(Lo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xi(this.app)?Promise.reject(Lo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Gs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await q6(this),t=new H6(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ic("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await L6(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Gs(e)||this._popupRedirectResolver;Me(t,this,"argument-error"),this.redirectPersistenceManager=await il.create(this,[Gs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Me(d,this,"internal-error"),d.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,r);return()=>{u=!0,p()}}else{const p=e.addObserver(t);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=JR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(xi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&T6(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ep(n){return bn(n)}class xw{constructor(e){this.auth=e,this.observer=null,this.addObserver=o3(t=>this.observer=t)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let H_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $6(n){H_=n}function J6(n){return H_.loadJS(n)}function K6(){return H_.gapiScript}function Y6(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W6(n,e){const t=U_(n,"auth");if(t.isInitialized()){const r=t.getImmediate(),a=t.getOptions();if(Fo(a,e??{}))return r;ys(r,"already-initialized")}return t.initialize({options:e})}function Q6(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Gs);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function X6(n,e,t){const i=ep(n);Me(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,a=KR(e),{host:u,port:d}=j6(e),p=d===null?"":`:${d}`,h={url:`${a}//${u}${p}/`},_=Object.freeze({host:u,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){Me(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Me(Fo(h,i.config.emulator)&&Fo(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,Sl(u)?(AR(`${a}//${u}${p}`),wR("Auth",!0)):Z6()}function KR(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function j6(n){const e=KR(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const a=r[1];return{host:a,port:Nw(i.substr(a.length+1))}}else{const[a,u]=i.split(":");return{host:a,port:Nw(u)}}}function Nw(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function Z6(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return qs("not implemented")}_getIdTokenResponse(e){return qs("not implemented")}_linkToIdToken(e,t){return qs("not implemented")}_getReauthenticationResolver(e){return qs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sl(n,e){return R6(n,"POST","/v1/accounts:signInWithIdp",B_(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eF="http://localhost";class qo extends YR{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new qo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ys("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...a}=t;if(!i||!r)return null;const u=new qo(i,r);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return sl(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,sl(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,sl(e,t)}buildRequest(){const e={requestUri:eF,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=bc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc extends z_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr extends xc{constructor(){super("facebook.com")}static credential(e){return qo._fromParams({providerId:Vr.PROVIDER_ID,signInMethod:Vr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vr.credentialFromTaggedObject(e)}static credentialFromError(e){return Vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vr.credential(e.oauthAccessToken)}catch{return null}}}Vr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Vr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs extends xc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return qo._fromParams({providerId:Bs.PROVIDER_ID,signInMethod:Bs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Bs.credentialFromTaggedObject(e)}static credentialFromError(e){return Bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Bs.credential(t,i)}catch{return null}}}Bs.GOOGLE_SIGN_IN_METHOD="google.com";Bs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur extends xc{constructor(){super("github.com")}static credential(e){return qo._fromParams({providerId:Ur.PROVIDER_ID,signInMethod:Ur.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ur.credentialFromTaggedObject(e)}static credentialFromError(e){return Ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ur.credential(e.oauthAccessToken)}catch{return null}}}Ur.GITHUB_SIGN_IN_METHOD="github.com";Ur.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr extends xc{constructor(){super("twitter.com")}static credential(e,t){return qo._fromParams({providerId:Lr.PROVIDER_ID,signInMethod:Lr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Lr.credentialFromTaggedObject(e)}static credentialFromError(e){return Lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Lr.credential(t,i)}catch{return null}}}Lr.TWITTER_SIGN_IN_METHOD="twitter.com";Lr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,r=!1){const a=await Ni._fromIdTokenResponse(e,i,r),u=Mw(i);return new cl({user:a,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const r=Mw(i);return new cl({user:e,providerId:r,_tokenResponse:i,operationType:t})}}function Mw(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh extends js{constructor(e,t,i,r){super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Eh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new Eh(e,t,i,r)}}function WR(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Eh._fromErrorAndOperation(n,a,e,i):a})}async function tF(n,e,t=!1){const i=await mc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return cl._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nF(n,e,t=!1){const{auth:i}=n;if(xi(i.app))return Promise.reject(Lo(i));const r="reauthenticate";try{const a=await mc(n,WR(i,r,e,n),t);Me(a.idToken,i,"internal-error");const u=q_(a.idToken);Me(u,i,"internal-error");const{sub:d}=u;return Me(n.uid===d,i,"user-mismatch"),cl._forOperation(n,r,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&ys(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iF(n,e,t=!1){if(xi(n.app))return Promise.reject(Lo(n));const i="signIn",r=await WR(n,i,e),a=await cl._fromIdTokenResponse(n,i,r);return t||await n._updateCurrentUser(a.user),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sF(n,e){return bn(n).setPersistence(e)}function rF(n,e,t,i){return bn(n).onIdTokenChanged(e,t,i)}function oF(n,e,t){return bn(n).beforeAuthStateChanged(e,t)}function aF(n,e,t,i){return bn(n).onAuthStateChanged(e,t,i)}function lF(n){return bn(n).signOut()}const Sh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Sh,"1"),this.storage.removeItem(Sh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uF=1e3,cF=10;class XR extends QR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=$R(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),r=this.localCache[t];i!==r&&e(t,r,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,p)=>{this.notifyListeners(u,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);F6()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,cF):r()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},uF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}XR.type="LOCAL";const jR=XR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR extends QR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ZR.type="SESSION";const ex=ZR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dF(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const i=new tp(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:r,data:a}=t.data,u=this.handlersMap[r];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const d=Array.from(u).map(async h=>h(t.origin,a)),p=await dF(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}tp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $_(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fF{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let a,u;return new Promise((d,p)=>{const h=$_("",20);r.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},i);u={messageChannel:r,onMessage(T){const E=T;if(E.data.eventId===h)switch(E.data.status){case"ack":clearTimeout(_),a=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(E.data.response);break;default:clearTimeout(_),clearTimeout(a),p(new Error("invalid_response"));break}}},this.handlers.add(u),r.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[r.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ds(){return window}function hF(n){ds().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tx(){return typeof ds().WorkerGlobalScope<"u"&&typeof ds().importScripts=="function"}async function pF(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function mF(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function gF(){return tx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx="firebaseLocalStorageDb",yF=1,Ah="firebaseLocalStorage",ix="fbase_key";class Nc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function np(n,e){return n.transaction([Ah],e?"readwrite":"readonly").objectStore(Ah)}function _F(){const n=indexedDB.deleteDatabase(nx);return new Nc(n).toPromise()}function ky(){const n=indexedDB.open(nx,yF);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Ah,{keyPath:ix})}catch(r){t(r)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Ah)?e(i):(i.close(),await _F(),e(await ky()))})})}async function Dw(n,e,t){const i=np(n,!0).put({[ix]:e,value:t});return new Nc(i).toPromise()}async function vF(n,e){const t=np(n,!1).get(e),i=await new Nc(t).toPromise();return i===void 0?null:i.value}function Pw(n,e){const t=np(n,!0).delete(e);return new Nc(t).toPromise()}const TF=800,EF=3;class sx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ky(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>EF)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return tx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=tp._getInstance(gF()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await pF(),!this.activeServiceWorker)return;this.sender=new fF(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||mF()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ky();return await Dw(e,Sh,"1"),await Pw(e,Sh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Dw(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>vF(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Pw(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const a=np(r,!1).getAll();return new Nc(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:a}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(a)&&(this.notifyListeners(r,a),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),TF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}sx.type="LOCAL";const SF=sx;new Rc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rx(n,e){return e?Gs(e):(Me(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_ extends YR{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return sl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return sl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return sl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function AF(n){return iF(n.auth,new J_(n),n.bypassAuthState)}function wF(n){const{auth:e,user:t}=n;return Me(t,e,"internal-error"),nF(t,new J_(n),n.bypassAuthState)}async function CF(n){const{auth:e,user:t}=n;return Me(t,e,"internal-error"),tF(t,new J_(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e,t,i,r,a=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:r,tenantId:a,error:u,type:d}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return AF;case"linkViaPopup":case"linkViaRedirect":return CF;case"reauthViaPopup":case"reauthViaRedirect":return wF;default:ys(this.auth,"internal-error")}}resolve(e){Js(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Js(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IF=new Rc(2e3,1e4);async function bF(n,e,t){if(xi(n.app))return Promise.reject(ki(n,"operation-not-supported-in-this-environment"));const i=ep(n);E6(n,e,z_);const r=rx(i,t);return new Vo(i,"signInViaPopup",e,r).executeNotNull()}class Vo extends ox{constructor(e,t,i,r,a){super(e,t,r,a),this.provider=i,this.authWindow=null,this.pollId=null,Vo.currentPopupAction&&Vo.currentPopupAction.cancel(),Vo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Me(e,this.auth,"internal-error"),e}async onExecution(){Js(this.filter.length===1,"Popup operations only handle one event");const e=$_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ki(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ki(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ki(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,IF.get())};e()}}Vo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RF="pendingRedirect",Jf=new Map;class xF extends ox{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Jf.get(this.auth._key());if(!e){try{const i=await NF(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Jf.set(this.auth._key(),e)}return this.bypassAuthState||Jf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function NF(n,e){const t=PF(e),i=DF(n);if(!await i._isAvailable())return!1;const r=await i._get(t)==="true";return await i._remove(t),r}function MF(n,e){Jf.set(n._key(),e)}function DF(n){return Gs(n._redirectPersistence)}function PF(n){return $f(RF,n.config.apiKey,n.name)}async function kF(n,e,t=!1){if(xi(n.app))return Promise.reject(Lo(n));const i=ep(n),r=rx(i,e),u=await new xF(i,r,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VF=600*1e3;class UF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!LF(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!ax(e)){const r=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(ki(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=VF&&this.cachedEventUids.clear(),this.cachedEventUids.has(kw(e))}saveEventToCache(e){this.cachedEventUids.add(kw(e)),this.lastProcessedEventTime=Date.now()}}function kw(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function ax({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function LF(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ax(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OF(n,e={}){return wl(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,BF=/^https?/;async function qF(n){if(n.config.emulator)return;const{authorizedDomains:e}=await OF(n);for(const t of e)try{if(GF(t))return}catch{}ys(n,"unauthorized-domain")}function GF(n){const e=Dy(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!BF.test(t))return!1;if(FF.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HF=new Rc(3e4,6e4);function Vw(){const n=ds().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function zF(n){return new Promise((e,t)=>{var r,a,u;function i(){Vw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Vw(),t(ki(n,"network-request-failed"))},timeout:HF.get()})}if((a=(r=ds().gapi)==null?void 0:r.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((u=ds().gapi)!=null&&u.load)i();else{const d=Y6("iframefcb");return ds()[d]=()=>{gapi.load?i():t(ki(n,"network-request-failed"))},J6(`${K6()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw Kf=null,e})}let Kf=null;function $F(n){return Kf=Kf||zF(n),Kf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JF=new Rc(5e3,15e3),KF="__/auth/iframe",YF="emulator/auth/iframe",WF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},QF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function XF(n){const e=n.config;Me(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?F_(e,YF):`https://${n.config.authDomain}/${KF}`,i={apiKey:e.apiKey,appName:n.name,v:Al},r=QF.get(n.config.apiHost);r&&(i.eid=r);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${bc(i).slice(1)}`}async function jF(n){const e=await $F(n),t=ds().gapi;return Me(t,n,"internal-error"),e.open({where:document.body,url:XF(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:WF,dontclear:!0},i=>new Promise(async(r,a)=>{await i.restyle({setHideOnLeave:!1});const u=ki(n,"network-request-failed"),d=ds().setTimeout(()=>{a(u)},JF.get());function p(){ds().clearTimeout(d),r(i)}i.ping(p).then(p,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},eB=500,tB=600,nB="_blank",iB="http://localhost";class Uw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function sB(n,e,t,i=eB,r=tB){const a=Math.max((window.screen.availHeight-r)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const p={...ZF,width:i.toString(),height:r.toString(),top:a,left:u},h=En().toLowerCase();t&&(d=BR(h)?nB:t),OR(h)&&(e=e||iB,p.scrollbars="yes");const _=Object.entries(p).reduce((E,[C,M])=>`${E}${C}=${M},`,"");if(O6(h)&&d!=="_self")return rB(e||"",d),new Uw(null);const T=window.open(e||"",d,_);Me(T,n,"popup-blocked");try{T.focus()}catch{}return new Uw(T)}function rB(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oB="__/auth/handler",aB="emulator/auth/handler",lB=encodeURIComponent("fac");async function Lw(n,e,t,i,r,a){Me(n.config.authDomain,n,"auth-domain-config-required"),Me(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Al,eventId:r};if(e instanceof z_){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",r3(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,T]of Object.entries({}))u[_]=T}if(e instanceof xc){const _=e.getScopes().filter(T=>T!=="");_.length>0&&(u.scopes=_.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const p=await n._getAppCheckToken(),h=p?`#${lB}=${encodeURIComponent(p)}`:"";return`${uB(n)}?${bc(d).slice(1)}${h}`}function uB({config:n}){return n.emulator?F_(n,aB):`https://${n.authDomain}/${oB}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zg="webStorageSupport";class cB{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ex,this._completeRedirectFn=kF,this._overrideRedirectResult=MF}async _openPopup(e,t,i,r){var u;Js((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const a=await Lw(e,t,i,Dy(),r);return sB(e,a,$_())}async _openRedirect(e,t,i,r){await this._originValidation(e);const a=await Lw(e,t,i,Dy(),r);return hF(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:a}=this.eventManagers[t];return r?Promise.resolve(r):(Js(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await jF(e),i=new UF(e);return t.register("authEvent",r=>(Me(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(zg,{type:zg},r=>{var u;const a=(u=r==null?void 0:r[0])==null?void 0:u[zg];a!==void 0&&t(!!a),ys(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=qF(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return $R()||FR()||G_()}}const dB=cB;var Ow="@firebase/auth",Fw="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fB{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hB(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function pB(n){ul(new Bo("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=i.options;Me(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:JR(n)},h=new z6(i,r,a,p);return Q6(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),ul(new Bo("auth-internal",e=>{const t=ep(e.getProvider("auth").getImmediate());return(i=>new fB(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),qr(Ow,Fw,hB(n)),qr(Ow,Fw,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mB=300,gB=SR("authIdTokenMaxAge")||mB;let Bw=null;const yB=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>gB)return;const r=t==null?void 0:t.token;Bw!==r&&(Bw=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function _B(n=RR()){const e=U_(n,"auth");if(e.isInitialized())return e.getImmediate();const t=W6(n,{popupRedirectResolver:dB,persistence:[SF,jR,ex]}),i=SR("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const u=yB(a.toString());oF(t,u,()=>u(t.currentUser)),rF(t,d=>u(d))}}const r=TR("auth");return r&&X6(t,`http://${r}`),t}function vB(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}$6({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{const a=ki("internal-error");a.customData=r,t(a)},i.type="text/javascript",i.charset="UTF-8",vB().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});pB("Browser");var qw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Gr,lx;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,D){function x(){}x.prototype=D.prototype,N.F=D.prototype,N.prototype=new x,N.prototype.constructor=N,N.D=function(L,k,q){for(var V=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)V[ke-2]=arguments[ke];return D.prototype[k].apply(L,V)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(N,D,x){x||(x=0);const L=Array(16);if(typeof D=="string")for(var k=0;k<16;++k)L[k]=D.charCodeAt(x++)|D.charCodeAt(x++)<<8|D.charCodeAt(x++)<<16|D.charCodeAt(x++)<<24;else for(k=0;k<16;++k)L[k]=D[x++]|D[x++]<<8|D[x++]<<16|D[x++]<<24;D=N.g[0],x=N.g[1],k=N.g[2];let q=N.g[3],V;V=D+(q^x&(k^q))+L[0]+3614090360&4294967295,D=x+(V<<7&4294967295|V>>>25),V=q+(k^D&(x^k))+L[1]+3905402710&4294967295,q=D+(V<<12&4294967295|V>>>20),V=k+(x^q&(D^x))+L[2]+606105819&4294967295,k=q+(V<<17&4294967295|V>>>15),V=x+(D^k&(q^D))+L[3]+3250441966&4294967295,x=k+(V<<22&4294967295|V>>>10),V=D+(q^x&(k^q))+L[4]+4118548399&4294967295,D=x+(V<<7&4294967295|V>>>25),V=q+(k^D&(x^k))+L[5]+1200080426&4294967295,q=D+(V<<12&4294967295|V>>>20),V=k+(x^q&(D^x))+L[6]+2821735955&4294967295,k=q+(V<<17&4294967295|V>>>15),V=x+(D^k&(q^D))+L[7]+4249261313&4294967295,x=k+(V<<22&4294967295|V>>>10),V=D+(q^x&(k^q))+L[8]+1770035416&4294967295,D=x+(V<<7&4294967295|V>>>25),V=q+(k^D&(x^k))+L[9]+2336552879&4294967295,q=D+(V<<12&4294967295|V>>>20),V=k+(x^q&(D^x))+L[10]+4294925233&4294967295,k=q+(V<<17&4294967295|V>>>15),V=x+(D^k&(q^D))+L[11]+2304563134&4294967295,x=k+(V<<22&4294967295|V>>>10),V=D+(q^x&(k^q))+L[12]+1804603682&4294967295,D=x+(V<<7&4294967295|V>>>25),V=q+(k^D&(x^k))+L[13]+4254626195&4294967295,q=D+(V<<12&4294967295|V>>>20),V=k+(x^q&(D^x))+L[14]+2792965006&4294967295,k=q+(V<<17&4294967295|V>>>15),V=x+(D^k&(q^D))+L[15]+1236535329&4294967295,x=k+(V<<22&4294967295|V>>>10),V=D+(k^q&(x^k))+L[1]+4129170786&4294967295,D=x+(V<<5&4294967295|V>>>27),V=q+(x^k&(D^x))+L[6]+3225465664&4294967295,q=D+(V<<9&4294967295|V>>>23),V=k+(D^x&(q^D))+L[11]+643717713&4294967295,k=q+(V<<14&4294967295|V>>>18),V=x+(q^D&(k^q))+L[0]+3921069994&4294967295,x=k+(V<<20&4294967295|V>>>12),V=D+(k^q&(x^k))+L[5]+3593408605&4294967295,D=x+(V<<5&4294967295|V>>>27),V=q+(x^k&(D^x))+L[10]+38016083&4294967295,q=D+(V<<9&4294967295|V>>>23),V=k+(D^x&(q^D))+L[15]+3634488961&4294967295,k=q+(V<<14&4294967295|V>>>18),V=x+(q^D&(k^q))+L[4]+3889429448&4294967295,x=k+(V<<20&4294967295|V>>>12),V=D+(k^q&(x^k))+L[9]+568446438&4294967295,D=x+(V<<5&4294967295|V>>>27),V=q+(x^k&(D^x))+L[14]+3275163606&4294967295,q=D+(V<<9&4294967295|V>>>23),V=k+(D^x&(q^D))+L[3]+4107603335&4294967295,k=q+(V<<14&4294967295|V>>>18),V=x+(q^D&(k^q))+L[8]+1163531501&4294967295,x=k+(V<<20&4294967295|V>>>12),V=D+(k^q&(x^k))+L[13]+2850285829&4294967295,D=x+(V<<5&4294967295|V>>>27),V=q+(x^k&(D^x))+L[2]+4243563512&4294967295,q=D+(V<<9&4294967295|V>>>23),V=k+(D^x&(q^D))+L[7]+1735328473&4294967295,k=q+(V<<14&4294967295|V>>>18),V=x+(q^D&(k^q))+L[12]+2368359562&4294967295,x=k+(V<<20&4294967295|V>>>12),V=D+(x^k^q)+L[5]+4294588738&4294967295,D=x+(V<<4&4294967295|V>>>28),V=q+(D^x^k)+L[8]+2272392833&4294967295,q=D+(V<<11&4294967295|V>>>21),V=k+(q^D^x)+L[11]+1839030562&4294967295,k=q+(V<<16&4294967295|V>>>16),V=x+(k^q^D)+L[14]+4259657740&4294967295,x=k+(V<<23&4294967295|V>>>9),V=D+(x^k^q)+L[1]+2763975236&4294967295,D=x+(V<<4&4294967295|V>>>28),V=q+(D^x^k)+L[4]+1272893353&4294967295,q=D+(V<<11&4294967295|V>>>21),V=k+(q^D^x)+L[7]+4139469664&4294967295,k=q+(V<<16&4294967295|V>>>16),V=x+(k^q^D)+L[10]+3200236656&4294967295,x=k+(V<<23&4294967295|V>>>9),V=D+(x^k^q)+L[13]+681279174&4294967295,D=x+(V<<4&4294967295|V>>>28),V=q+(D^x^k)+L[0]+3936430074&4294967295,q=D+(V<<11&4294967295|V>>>21),V=k+(q^D^x)+L[3]+3572445317&4294967295,k=q+(V<<16&4294967295|V>>>16),V=x+(k^q^D)+L[6]+76029189&4294967295,x=k+(V<<23&4294967295|V>>>9),V=D+(x^k^q)+L[9]+3654602809&4294967295,D=x+(V<<4&4294967295|V>>>28),V=q+(D^x^k)+L[12]+3873151461&4294967295,q=D+(V<<11&4294967295|V>>>21),V=k+(q^D^x)+L[15]+530742520&4294967295,k=q+(V<<16&4294967295|V>>>16),V=x+(k^q^D)+L[2]+3299628645&4294967295,x=k+(V<<23&4294967295|V>>>9),V=D+(k^(x|~q))+L[0]+4096336452&4294967295,D=x+(V<<6&4294967295|V>>>26),V=q+(x^(D|~k))+L[7]+1126891415&4294967295,q=D+(V<<10&4294967295|V>>>22),V=k+(D^(q|~x))+L[14]+2878612391&4294967295,k=q+(V<<15&4294967295|V>>>17),V=x+(q^(k|~D))+L[5]+4237533241&4294967295,x=k+(V<<21&4294967295|V>>>11),V=D+(k^(x|~q))+L[12]+1700485571&4294967295,D=x+(V<<6&4294967295|V>>>26),V=q+(x^(D|~k))+L[3]+2399980690&4294967295,q=D+(V<<10&4294967295|V>>>22),V=k+(D^(q|~x))+L[10]+4293915773&4294967295,k=q+(V<<15&4294967295|V>>>17),V=x+(q^(k|~D))+L[1]+2240044497&4294967295,x=k+(V<<21&4294967295|V>>>11),V=D+(k^(x|~q))+L[8]+1873313359&4294967295,D=x+(V<<6&4294967295|V>>>26),V=q+(x^(D|~k))+L[15]+4264355552&4294967295,q=D+(V<<10&4294967295|V>>>22),V=k+(D^(q|~x))+L[6]+2734768916&4294967295,k=q+(V<<15&4294967295|V>>>17),V=x+(q^(k|~D))+L[13]+1309151649&4294967295,x=k+(V<<21&4294967295|V>>>11),V=D+(k^(x|~q))+L[4]+4149444226&4294967295,D=x+(V<<6&4294967295|V>>>26),V=q+(x^(D|~k))+L[11]+3174756917&4294967295,q=D+(V<<10&4294967295|V>>>22),V=k+(D^(q|~x))+L[2]+718787259&4294967295,k=q+(V<<15&4294967295|V>>>17),V=x+(q^(k|~D))+L[9]+3951481745&4294967295,N.g[0]=N.g[0]+D&4294967295,N.g[1]=N.g[1]+(k+(V<<21&4294967295|V>>>11))&4294967295,N.g[2]=N.g[2]+k&4294967295,N.g[3]=N.g[3]+q&4294967295}i.prototype.v=function(N,D){D===void 0&&(D=N.length);const x=D-this.blockSize,L=this.C;let k=this.h,q=0;for(;q<D;){if(k==0)for(;q<=x;)r(this,N,q),q+=this.blockSize;if(typeof N=="string"){for(;q<D;)if(L[k++]=N.charCodeAt(q++),k==this.blockSize){r(this,L),k=0;break}}else for(;q<D;)if(L[k++]=N[q++],k==this.blockSize){r(this,L),k=0;break}}this.h=k,this.o+=D},i.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var D=1;D<N.length-8;++D)N[D]=0;D=this.o*8;for(var x=N.length-8;x<N.length;++x)N[x]=D&255,D/=256;for(this.v(N),N=Array(16),D=0,x=0;x<4;++x)for(let L=0;L<32;L+=8)N[D++]=this.g[x]>>>L&255;return N};function a(N,D){var x=d;return Object.prototype.hasOwnProperty.call(x,N)?x[N]:x[N]=D(N)}function u(N,D){this.h=D;const x=[];let L=!0;for(let k=N.length-1;k>=0;k--){const q=N[k]|0;L&&q==D||(x[k]=q,L=!1)}this.g=x}var d={};function p(N){return-128<=N&&N<128?a(N,function(D){return new u([D|0],D<0?-1:0)}):new u([N|0],N<0?-1:0)}function h(N){if(isNaN(N)||!isFinite(N))return T;if(N<0)return P(h(-N));const D=[];let x=1;for(let L=0;N>=x;L++)D[L]=N/x|0,x*=4294967296;return new u(D,0)}function _(N,D){if(N.length==0)throw Error("number format error: empty string");if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(N.charAt(0)=="-")return P(_(N.substring(1),D));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const x=h(Math.pow(D,8));let L=T;for(let q=0;q<N.length;q+=8){var k=Math.min(8,N.length-q);const V=parseInt(N.substring(q,q+k),D);k<8?(k=h(Math.pow(D,k)),L=L.j(k).add(h(V))):(L=L.j(x),L=L.add(h(V)))}return L}var T=p(0),E=p(1),C=p(16777216);n=u.prototype,n.m=function(){if(U(this))return-P(this).m();let N=0,D=1;for(let x=0;x<this.g.length;x++){const L=this.i(x);N+=(L>=0?L:4294967296+L)*D,D*=4294967296}return N},n.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(M(this))return"0";if(U(this))return"-"+P(this).toString(N);const D=h(Math.pow(N,6));var x=this;let L="";for(;;){const k=X(x,D).g;x=$(x,k.j(D));let q=((x.g.length>0?x.g[0]:x.h)>>>0).toString(N);if(x=k,M(x))return q+L;for(;q.length<6;)q="0"+q;L=q+L}},n.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function M(N){if(N.h!=0)return!1;for(let D=0;D<N.g.length;D++)if(N.g[D]!=0)return!1;return!0}function U(N){return N.h==-1}n.l=function(N){return N=$(this,N),U(N)?-1:M(N)?0:1};function P(N){const D=N.g.length,x=[];for(let L=0;L<D;L++)x[L]=~N.g[L];return new u(x,~N.h).add(E)}n.abs=function(){return U(this)?P(this):this},n.add=function(N){const D=Math.max(this.g.length,N.g.length),x=[];let L=0;for(let k=0;k<=D;k++){let q=L+(this.i(k)&65535)+(N.i(k)&65535),V=(q>>>16)+(this.i(k)>>>16)+(N.i(k)>>>16);L=V>>>16,q&=65535,V&=65535,x[k]=V<<16|q}return new u(x,x[x.length-1]&-2147483648?-1:0)};function $(N,D){return N.add(P(D))}n.j=function(N){if(M(this)||M(N))return T;if(U(this))return U(N)?P(this).j(P(N)):P(P(this).j(N));if(U(N))return P(this.j(P(N)));if(this.l(C)<0&&N.l(C)<0)return h(this.m()*N.m());const D=this.g.length+N.g.length,x=[];for(var L=0;L<2*D;L++)x[L]=0;for(L=0;L<this.g.length;L++)for(let k=0;k<N.g.length;k++){const q=this.i(L)>>>16,V=this.i(L)&65535,ke=N.i(k)>>>16,xe=N.i(k)&65535;x[2*L+2*k]+=V*xe,H(x,2*L+2*k),x[2*L+2*k+1]+=q*xe,H(x,2*L+2*k+1),x[2*L+2*k+1]+=V*ke,H(x,2*L+2*k+1),x[2*L+2*k+2]+=q*ke,H(x,2*L+2*k+2)}for(N=0;N<D;N++)x[N]=x[2*N+1]<<16|x[2*N];for(N=D;N<2*D;N++)x[N]=0;return new u(x,0)};function H(N,D){for(;(N[D]&65535)!=N[D];)N[D+1]+=N[D]>>>16,N[D]&=65535,D++}function z(N,D){this.g=N,this.h=D}function X(N,D){if(M(D))throw Error("division by zero");if(M(N))return new z(T,T);if(U(N))return D=X(P(N),D),new z(P(D.g),P(D.h));if(U(D))return D=X(N,P(D)),new z(P(D.g),D.h);if(N.g.length>30){if(U(N)||U(D))throw Error("slowDivide_ only works with positive integers.");for(var x=E,L=D;L.l(N)<=0;)x=ue(x),L=ue(L);var k=W(x,1),q=W(L,1);for(L=W(L,2),x=W(x,2);!M(L);){var V=q.add(L);V.l(N)<=0&&(k=k.add(x),q=V),L=W(L,1),x=W(x,1)}return D=$(N,k.j(D)),new z(k,D)}for(k=T;N.l(D)>=0;){for(x=Math.max(1,Math.floor(N.m()/D.m())),L=Math.ceil(Math.log(x)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),q=h(x),V=q.j(D);U(V)||V.l(N)>0;)x-=L,q=h(x),V=q.j(D);M(q)&&(q=E),k=k.add(q),N=$(N,V)}return new z(k,N)}n.B=function(N){return X(this,N).h},n.and=function(N){const D=Math.max(this.g.length,N.g.length),x=[];for(let L=0;L<D;L++)x[L]=this.i(L)&N.i(L);return new u(x,this.h&N.h)},n.or=function(N){const D=Math.max(this.g.length,N.g.length),x=[];for(let L=0;L<D;L++)x[L]=this.i(L)|N.i(L);return new u(x,this.h|N.h)},n.xor=function(N){const D=Math.max(this.g.length,N.g.length),x=[];for(let L=0;L<D;L++)x[L]=this.i(L)^N.i(L);return new u(x,this.h^N.h)};function ue(N){const D=N.g.length+1,x=[];for(let L=0;L<D;L++)x[L]=N.i(L)<<1|N.i(L-1)>>>31;return new u(x,N.h)}function W(N,D){const x=D>>5;D%=32;const L=N.g.length-x,k=[];for(let q=0;q<L;q++)k[q]=D>0?N.i(q+x)>>>D|N.i(q+x+1)<<32-D:N.i(q+x);return new u(k,N.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,lx=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=h,u.fromString=_,Gr=u}).apply(typeof qw<"u"?qw:typeof self<"u"?self:typeof window<"u"?window:{});var bf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ux,ju,cx,Yf,Vy,dx,fx,hx;(function(){var n,e=Object.defineProperty;function t(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof bf=="object"&&bf];for(var S=0;S<g.length;++S){var w=g[S];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var i=t(this);function r(g,S){if(S)e:{var w=i;g=g.split(".");for(var R=0;R<g.length-1;R++){var J=g[R];if(!(J in w))break e;w=w[J]}g=g[g.length-1],R=w[g],S=S(R),S!=R&&S!=null&&e(w,g,{configurable:!0,writable:!0,value:S})}}r("Symbol.dispose",function(g){return g||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(g){return g||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(g){return g||function(S){var w=[],R;for(R in S)Object.prototype.hasOwnProperty.call(S,R)&&w.push([R,S[R]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},u=this||self;function d(g){var S=typeof g;return S=="object"&&g!=null||S=="function"}function p(g,S,w){return g.call.apply(g.bind,arguments)}function h(g,S,w){return h=p,h.apply(null,arguments)}function _(g,S){var w=Array.prototype.slice.call(arguments,1);return function(){var R=w.slice();return R.push.apply(R,arguments),g.apply(this,R)}}function T(g,S){function w(){}w.prototype=S.prototype,g.Z=S.prototype,g.prototype=new w,g.prototype.constructor=g,g.Ob=function(R,J,ee){for(var de=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)de[Fe-2]=arguments[Fe];return S.prototype[J].apply(R,de)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?g=>g&&AsyncContext.Snapshot.wrap(g):g=>g;function C(g){const S=g.length;if(S>0){const w=Array(S);for(let R=0;R<S;R++)w[R]=g[R];return w}return[]}function M(g,S){for(let R=1;R<arguments.length;R++){const J=arguments[R];var w=typeof J;if(w=w!="object"?w:J?Array.isArray(J)?"array":w:"null",w=="array"||w=="object"&&typeof J.length=="number"){w=g.length||0;const ee=J.length||0;g.length=w+ee;for(let de=0;de<ee;de++)g[w+de]=J[de]}else g.push(J)}}class U{constructor(S,w){this.i=S,this.j=w,this.h=0,this.g=null}get(){let S;return this.h>0?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function P(g){u.setTimeout(()=>{throw g},0)}function $(){var g=N;let S=null;return g.g&&(S=g.g,g.g=g.g.next,g.g||(g.h=null),S.next=null),S}class H{constructor(){this.h=this.g=null}add(S,w){const R=z.get();R.set(S,w),this.h?this.h.next=R:this.g=R,this.h=R}}var z=new U(()=>new X,g=>g.reset());class X{constructor(){this.next=this.g=this.h=null}set(S,w){this.h=S,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,W=!1,N=new H,D=()=>{const g=Promise.resolve(void 0);ue=()=>{g.then(x)}};function x(){for(var g;g=$();){try{g.h.call(g.g)}catch(w){P(w)}var S=z;S.j(g),S.h<100&&(S.h++,g.next=S.g,S.g=g)}W=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(g,S){this.type=g,this.g=this.target=S,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var g=!1,S=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const w=()=>{};u.addEventListener("test",w,S),u.removeEventListener("test",w,S)}catch{}return g})();function V(g){return/^[\s\xa0]*$/.test(g)}function ke(g,S){k.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g&&this.init(g,S)}T(ke,k),ke.prototype.init=function(g,S){const w=this.type=g.type,R=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;this.target=g.target||g.srcElement,this.g=S,S=g.relatedTarget,S||(w=="mouseover"?S=g.fromElement:w=="mouseout"&&(S=g.toElement)),this.relatedTarget=S,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=g.pointerType,this.state=g.state,this.i=g,g.defaultPrevented&&ke.Z.h.call(this)},ke.prototype.h=function(){ke.Z.h.call(this);const g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var xe="closure_listenable_"+(Math.random()*1e6|0),Z=0;function ce(g,S,w,R,J){this.listener=g,this.proxy=null,this.src=S,this.type=w,this.capture=!!R,this.ha=J,this.key=++Z,this.da=this.fa=!1}function fe(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function be(g,S,w){for(const R in g)S.call(w,g[R],R,g)}function ze(g,S){for(const w in g)S.call(void 0,g[w],w,g)}function F(g){const S={};for(const w in g)S[w]=g[w];return S}const ie="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function he(g,S){let w,R;for(let J=1;J<arguments.length;J++){R=arguments[J];for(w in R)g[w]=R[w];for(let ee=0;ee<ie.length;ee++)w=ie[ee],Object.prototype.hasOwnProperty.call(R,w)&&(g[w]=R[w])}}function me(g){this.src=g,this.g={},this.h=0}me.prototype.add=function(g,S,w,R,J){const ee=g.toString();g=this.g[ee],g||(g=this.g[ee]=[],this.h++);const de=De(g,S,R,J);return de>-1?(S=g[de],w||(S.fa=!1)):(S=new ce(S,this.src,ee,!!R,J),S.fa=w,g.push(S)),S};function Ce(g,S){const w=S.type;if(w in g.g){var R=g.g[w],J=Array.prototype.indexOf.call(R,S,void 0),ee;(ee=J>=0)&&Array.prototype.splice.call(R,J,1),ee&&(fe(S),g.g[w].length==0&&(delete g.g[w],g.h--))}}function De(g,S,w,R){for(let J=0;J<g.length;++J){const ee=g[J];if(!ee.da&&ee.listener==S&&ee.capture==!!w&&ee.ha==R)return J}return-1}var Pe="closure_lm_"+(Math.random()*1e6|0),wt={};function $e(g,S,w,R,J){if(Array.isArray(S)){for(let ee=0;ee<S.length;ee++)$e(g,S[ee],w,R,J);return null}return w=Dl(w),g&&g[xe]?g.J(S,w,d(R)?!!R.capture:!1,J):Oi(g,S,w,!1,R,J)}function Oi(g,S,w,R,J,ee){if(!S)throw Error("Invalid event type");const de=d(J)?!!J.capture:!!J;let Fe=jr(g);if(Fe||(g[Pe]=Fe=new me(g)),w=Fe.add(S,w,R,de,ee),w.proxy)return w;if(R=On(),w.proxy=R,R.src=g,R.listener=w,g.addEventListener)q||(J=de),J===void 0&&(J=!1),g.addEventListener(S.toString(),R,J);else if(g.attachEvent)g.attachEvent(Fi(S.toString()),R);else if(g.addListener&&g.removeListener)g.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return w}function On(){function g(w){return S.call(g.src,g.listener,w)}const S=Nl;return g}function Qo(g,S,w,R,J){if(Array.isArray(S))for(var ee=0;ee<S.length;ee++)Qo(g,S[ee],w,R,J);else R=d(R)?!!R.capture:!!R,w=Dl(w),g&&g[xe]?(g=g.i,ee=String(S).toString(),ee in g.g&&(S=g.g[ee],w=De(S,w,R,J),w>-1&&(fe(S[w]),Array.prototype.splice.call(S,w,1),S.length==0&&(delete g.g[ee],g.h--)))):g&&(g=jr(g))&&(S=g.g[S.toString()],g=-1,S&&(g=De(S,w,R,J)),(w=g>-1?S[g]:null)&&Xo(w))}function Xo(g){if(typeof g!="number"&&g&&!g.da){var S=g.src;if(S&&S[xe])Ce(S.i,g);else{var w=g.type,R=g.proxy;S.removeEventListener?S.removeEventListener(w,R,g.capture):S.detachEvent?S.detachEvent(Fi(w),R):S.addListener&&S.removeListener&&S.removeListener(R),(w=jr(S))?(Ce(w,g),w.h==0&&(w.src=null,S[Pe]=null)):fe(g)}}}function Fi(g){return g in wt?wt[g]:wt[g]="on"+g}function Nl(g,S){if(g.da)g=!0;else{S=new ke(S,this);const w=g.listener,R=g.ha||g.src;g.fa&&Xo(g),g=w.call(R,S)}return g}function jr(g){return g=g[Pe],g instanceof me?g:null}var Ml="__closure_events_fn_"+(Math.random()*1e9>>>0);function Dl(g){return typeof g=="function"?g:(g[Ml]||(g[Ml]=function(S){return g.handleEvent(S)}),g[Ml])}function Pt(){L.call(this),this.i=new me(this),this.M=this,this.G=null}T(Pt,L),Pt.prototype[xe]=!0,Pt.prototype.removeEventListener=function(g,S,w,R){Qo(this,g,S,w,R)};function Jt(g,S){var w,R=g.G;if(R)for(w=[];R;R=R.G)w.push(R);if(g=g.M,R=S.type||S,typeof S=="string")S=new k(S,g);else if(S instanceof k)S.target=S.target||g;else{var J=S;S=new k(R,g),he(S,J)}J=!0;let ee,de;if(w)for(de=w.length-1;de>=0;de--)ee=S.g=w[de],J=Zs(ee,R,!0,S)&&J;if(ee=S.g=g,J=Zs(ee,R,!0,S)&&J,J=Zs(ee,R,!1,S)&&J,w)for(de=0;de<w.length;de++)ee=S.g=w[de],J=Zs(ee,R,!1,S)&&J}Pt.prototype.N=function(){if(Pt.Z.N.call(this),this.i){var g=this.i;for(const S in g.g){const w=g.g[S];for(let R=0;R<w.length;R++)fe(w[R]);delete g.g[S],g.h--}}this.G=null},Pt.prototype.J=function(g,S,w,R){return this.i.add(String(g),S,!1,w,R)},Pt.prototype.K=function(g,S,w,R){return this.i.add(String(g),S,!0,w,R)};function Zs(g,S,w,R){if(S=g.i.g[String(S)],!S)return!0;S=S.concat();let J=!0;for(let ee=0;ee<S.length;++ee){const de=S[ee];if(de&&!de.da&&de.capture==w){const Fe=de.listener,xt=de.ha||de.src;de.fa&&Ce(g.i,de),J=Fe.call(xt,R)!==!1&&J}}return J&&!R.defaultPrevented}function yp(g,S){if(typeof g!="function")if(g&&typeof g.handleEvent=="function")g=h(g.handleEvent,g);else throw Error("Invalid listener argument");return Number(S)>2147483647?-1:u.setTimeout(g,S||0)}function Oc(g){g.g=yp(()=>{g.g=null,g.i&&(g.i=!1,Oc(g))},g.l);const S=g.h;g.h=null,g.m.apply(null,S)}class Sn extends L{constructor(S,w){super(),this.m=S,this.l=w,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:Oc(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zr(g){L.call(this),this.h=g,this.g={}}T(Zr,L);var Pl=[];function kl(g){be(g.g,function(S,w){this.g.hasOwnProperty(w)&&Xo(S)},g),g.g={}}Zr.prototype.N=function(){Zr.Z.N.call(this),kl(this)},Zr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var er=u.JSON.stringify,_p=u.JSON.parse,Fc=class{stringify(g){return u.JSON.stringify(g,void 0)}parse(g){return u.JSON.parse(g,void 0)}};function Bc(){}function qc(){}var gi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function rn(){k.call(this,"d")}T(rn,k);function jn(){k.call(this,"c")}T(jn,k);var Rt={},Gc=null;function jo(){return Gc=Gc||new Pt}Rt.Ia="serverreachability";function Hc(g){k.call(this,Rt.Ia,g)}T(Hc,k);function Bi(g){const S=jo();Jt(S,new Hc(S))}Rt.STAT_EVENT="statevent";function eo(g,S){k.call(this,Rt.STAT_EVENT,g),this.stat=S}T(eo,k);function kt(g){const S=jo();Jt(S,new eo(S,g))}Rt.Ja="timingevent";function qi(g,S){k.call(this,Rt.Ja,g),this.size=S}T(qi,k);function Gi(g,S){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){g()},S)}function yi(){this.g=!0}yi.prototype.ua=function(){this.g=!1};function vp(g,S,w,R,J,ee){g.info(function(){if(g.g)if(ee){var de="",Fe=ee.split("&");for(let st=0;st<Fe.length;st++){var xt=Fe[st].split("=");if(xt.length>1){const vt=xt[0];xt=xt[1];const ni=vt.split("_");de=ni.length>=2&&ni[1]=="type"?de+(vt+"="+xt+"&"):de+(vt+"=redacted&")}}}else de=null;else de=ee;return"XMLHTTP REQ ("+R+") [attempt "+J+"]: "+S+`
`+w+`
`+de})}function zc(g,S,w,R,J,ee,de){g.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+J+"]: "+S+`
`+w+`
`+ee+" "+de})}function Hi(g,S,w,R){g.info(function(){return"XMLHTTP TEXT ("+S+"): "+Tp(g,w)+(R?" "+R:"")})}function to(g,S){g.info(function(){return"TIMEOUT: "+S})}yi.prototype.info=function(){};function Tp(g,S){if(!g.g)return S;if(!S)return null;try{const ee=JSON.parse(S);if(ee){for(g=0;g<ee.length;g++)if(Array.isArray(ee[g])){var w=ee[g];if(!(w.length<2)){var R=w[1];if(Array.isArray(R)&&!(R.length<1)){var J=R[0];if(J!="noop"&&J!="stop"&&J!="close")for(let de=1;de<R.length;de++)R[de]=""}}}}return er(ee)}catch{return S}}var no={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Vl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ul;function io(){}T(io,Bc),io.prototype.g=function(){return new XMLHttpRequest},Ul=new io;function vs(g){return encodeURIComponent(String(g))}function $c(g){var S=1;g=g.split(":");const w=[];for(;S>0&&g.length;)w.push(g.shift()),S--;return g.length&&w.push(g.join(":")),w}function _i(g,S,w,R){this.j=g,this.i=S,this.l=w,this.S=R||1,this.V=new Zr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new vi}function vi(){this.i=null,this.g="",this.h=!1}var Vt={},Xt={};function zi(g,S,w){g.M=1,g.A=so(Lt(S)),g.u=w,g.R=!0,Zo(g,null)}function Zo(g,S){g.F=Date.now(),$i(g),g.B=Lt(g.A);var w=g.B,R=g.S;Array.isArray(R)||(R=[String(R)]),ia(w.i,"t",R),g.C=0,w=g.j.L,g.h=new vi,g.g=od(g.j,w?S:null,!g.u),g.P>0&&(g.O=new Sn(h(g.Y,g,g.g),g.P)),S=g.V,w=g.g,R=g.ba;var J="readystatechange";Array.isArray(J)||(J&&(Pl[0]=J.toString()),J=Pl);for(let ee=0;ee<J.length;ee++){const de=$e(w,J[ee],R||S.handleEvent,!1,S.h||S);if(!de)break;S.g[de.key]=de}S=g.J?F(g.J):{},g.u?(g.v||(g.v="POST"),S["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.B,g.v,g.u,S)):(g.v="GET",g.g.ea(g.B,g.v,null,S)),Bi(),vp(g.i,g.v,g.B,g.l,g.S,g.u)}_i.prototype.ba=function(g){g=g.target;const S=this.O;S&&Si(g)==3?S.j():this.Y(g)},_i.prototype.Y=function(g){try{if(g==this.g)e:{const Fe=Si(this.g),xt=this.g.ya(),st=this.g.ca();if(!(Fe<3)&&(Fe!=3||this.g&&(this.h.h||this.g.la()||on(this.g)))){this.K||Fe!=4||xt==7||(xt==8||st<=0?Bi(3):Bi(2)),Ji(this);var S=this.g.ca();this.X=S;var w=Ep(this);if(this.o=S==200,zc(this.i,this.v,this.B,this.l,this.S,Fe,S),this.o){if(this.U&&!this.L){t:{if(this.g){var R,J=this.g;if((R=J.g?J.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(R)){var ee=R;break t}}ee=null}if(g=ee)Hi(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ki(this,g);else{this.o=!1,this.m=3,kt(12),Fn(this),Zn(this);break e}}if(this.R){g=!0;let vt;for(;!this.K&&this.C<w.length;)if(vt=Kc(this,w),vt==Xt){Fe==4&&(this.m=4,kt(14),g=!1),Hi(this.i,this.l,null,"[Incomplete Response]");break}else if(vt==Vt){this.m=4,kt(15),Hi(this.i,this.l,w,"[Invalid Chunk]"),g=!1;break}else Hi(this.i,this.l,vt,null),Ki(this,vt);if(Jc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Fe!=4||w.length!=0||this.h.h||(this.m=1,kt(16),g=!1),this.o=this.o&&g,!g)Hi(this.i,this.l,w,"[Invalid Chunked Response]"),Fn(this),Zn(this);else if(w.length>0&&!this.W){this.W=!0;var de=this.j;de.g==this&&de.aa&&!de.P&&(de.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),Xl(de),de.P=!0,kt(11))}}else Hi(this.i,this.l,w,null),Ki(this,w);Fe==4&&Fn(this),this.o&&!this.K&&(Fe==4?nd(this.j,this):(this.o=!1,$i(this)))}else Es(this.g),S==400&&w.indexOf("Unknown SID")>0?(this.m=3,kt(12)):(this.m=0,kt(13)),Fn(this),Zn(this)}}}catch{}finally{}};function Ep(g){if(!Jc(g))return g.g.la();const S=on(g.g);if(S==="")return"";let w="";const R=S.length,J=Si(g.g)==4;if(!g.h.i){if(typeof TextDecoder>"u")return Fn(g),Zn(g),"";g.h.i=new u.TextDecoder}for(let ee=0;ee<R;ee++)g.h.h=!0,w+=g.h.i.decode(S[ee],{stream:!(J&&ee==R-1)});return S.length=0,g.h.g+=w,g.C=0,g.h.g}function Jc(g){return g.g?g.v=="GET"&&g.M!=2&&g.j.Aa:!1}function Kc(g,S){var w=g.C,R=S.indexOf(`
`,w);return R==-1?Xt:(w=Number(S.substring(w,R)),isNaN(w)?Vt:(R+=1,R+w>S.length?Xt:(S=S.slice(R,R+w),g.C=R+w,S)))}_i.prototype.cancel=function(){this.K=!0,Fn(this)};function $i(g){g.T=Date.now()+g.H,ea(g,g.H)}function ea(g,S){if(g.D!=null)throw Error("WatchDog timer not null");g.D=Gi(h(g.aa,g),S)}function Ji(g){g.D&&(u.clearTimeout(g.D),g.D=null)}_i.prototype.aa=function(){this.D=null;const g=Date.now();g-this.T>=0?(to(this.i,this.B),this.M!=2&&(Bi(),kt(17)),Fn(this),this.m=2,Zn(this)):ea(this,this.T-g)};function Zn(g){g.j.I==0||g.K||nd(g.j,g)}function Fn(g){Ji(g);var S=g.O;S&&typeof S.dispose=="function"&&S.dispose(),g.O=null,kl(g.V),g.g&&(S=g.g,g.g=null,S.abort(),S.dispose())}function Ki(g,S){try{var w=g.j;if(w.I!=0&&(w.g==g||Wi(w.h,g))){if(!g.L&&Wi(w.h,g)&&w.I==3){try{var R=w.Ba.g.parse(S)}catch{R=null}if(Array.isArray(R)&&R.length==3){var J=R;if(J[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<g.F)la(w),lr(w);else break e;fo(w),kt(18)}}else w.xa=J[1],0<w.xa-w.K&&J[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=Gi(h(w.Va,w),6e3));Yi(w.h)<=1&&w.ta&&(w.ta=void 0)}else ts(w,11)}else if((g.L||w.g==g)&&la(w),!V(S))for(J=w.Ba.g.parse(S),S=0;S<J.length;S++){let st=J[S];const vt=st[0];if(!(vt<=w.K))if(w.K=vt,st=st[1],w.I==2)if(st[0]=="c"){w.M=st[1],w.ba=st[2];const ni=st[3];ni!=null&&(w.ka=ni,w.j.info("VER="+w.ka));const ns=st[4];ns!=null&&(w.za=ns,w.j.info("SVER="+w.za));const Ai=st[5];Ai!=null&&typeof Ai=="number"&&Ai>0&&(R=1.5*Ai,w.O=R,w.j.info("backChannelRequestTimeoutMs_="+R)),R=w;const wi=g.g;if(wi){const ho=wi.g?wi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ho){var ee=R.h;ee.g||ho.indexOf("spdy")==-1&&ho.indexOf("quic")==-1&&ho.indexOf("h2")==-1||(ee.j=ee.l,ee.g=new Set,ee.h&&(Fl(ee,ee.h),ee.h=null))}if(R.G){const ua=wi.g?wi.g.getResponseHeader("X-HTTP-Session-Id"):null;ua&&(R.wa=ua,at(R.J,R.G,ua))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-g.F,w.j.info("Handshake RTT: "+w.T+"ms")),R=w;var de=g;if(R.na=rd(R,R.L?R.ba:null,R.W),de.L){Bl(R.h,de);var Fe=de,xt=R.O;xt&&(Fe.H=xt),Fe.D&&(Ji(Fe),$i(Fe)),R.g=de}else ed(R);w.i.length>0&&es(w)}else st[0]!="stop"&&st[0]!="close"||ts(w,7);else w.I==3&&(st[0]=="stop"||st[0]=="close"?st[0]=="stop"?ts(w,7):Wl(w):st[0]!="noop"&&w.l&&w.l.qa(st),w.A=0)}}Bi(4)}catch{}}var Ut=class{constructor(g,S){this.g=g,this.map=S}};function Ll(g){this.l=g||10,u.PerformanceNavigationTiming?(g=u.performance.getEntriesByType("navigation"),g=g.length>0&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ol(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function Yi(g){return g.h?1:g.g?g.g.size:0}function Wi(g,S){return g.h?g.h==S:g.g?g.g.has(S):!1}function Fl(g,S){g.g?g.g.add(S):g.h=S}function Bl(g,S){g.h&&g.h==S?g.h=null:g.g&&g.g.has(S)&&g.g.delete(S)}Ll.prototype.cancel=function(){if(this.i=ql(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function ql(g){if(g.h!=null)return g.i.concat(g.h.G);if(g.g!=null&&g.g.size!==0){let S=g.i;for(const w of g.g.values())S=S.concat(w.G);return S}return C(g.i)}var Yc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ta(g,S){if(g){g=g.split("&");for(let w=0;w<g.length;w++){const R=g[w].indexOf("=");let J,ee=null;R>=0?(J=g[w].substring(0,R),ee=g[w].substring(R+1)):J=g[w],S(J,ee?decodeURIComponent(ee.replace(/\+/g," ")):"")}}}function Bn(g){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let S;g instanceof Bn?(this.l=g.l,jt(this,g.j),this.o=g.o,this.g=g.g,tr(this,g.u),this.h=g.h,Gl(this,jc(g.i)),this.m=g.m):g&&(S=String(g).match(Yc))?(this.l=!1,jt(this,S[1]||"",!0),this.o=Qi(S[2]||""),this.g=Qi(S[3]||"",!0),tr(this,S[4]),this.h=Qi(S[5]||"",!0),Gl(this,S[6]||"",!0),this.m=Qi(S[7]||"")):(this.l=!1,this.i=new ir(null,this.l))}Bn.prototype.toString=function(){const g=[];var S=this.j;S&&g.push(ro(S,na,!0),":");var w=this.g;return(w||S=="file")&&(g.push("//"),(S=this.o)&&g.push(ro(S,na,!0),"@"),g.push(vs(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&g.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&g.push("/"),g.push(ro(w,w.charAt(0)=="/"?Hl:Wc,!0))),(w=this.i.toString())&&g.push("?",w),(w=this.m)&&g.push("#",ro(w,Qc)),g.join("")},Bn.prototype.resolve=function(g){const S=Lt(this);let w=!!g.j;w?jt(S,g.j):w=!!g.o,w?S.o=g.o:w=!!g.g,w?S.g=g.g:w=g.u!=null;var R=g.h;if(w)tr(S,g.u);else if(w=!!g.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var J=S.h.lastIndexOf("/");J!=-1&&(R=S.h.slice(0,J+1)+R)}if(J=R,J==".."||J==".")R="";else if(J.indexOf("./")!=-1||J.indexOf("/.")!=-1){R=J.lastIndexOf("/",0)==0,J=J.split("/");const ee=[];for(let de=0;de<J.length;){const Fe=J[de++];Fe=="."?R&&de==J.length&&ee.push(""):Fe==".."?((ee.length>1||ee.length==1&&ee[0]!="")&&ee.pop(),R&&de==J.length&&ee.push("")):(ee.push(Fe),R=!0)}R=ee.join("/")}else R=J}return w?S.h=R:w=g.i.toString()!=="",w?Gl(S,jc(g.i)):w=!!g.m,w&&(S.m=g.m),S};function Lt(g){return new Bn(g)}function jt(g,S,w){g.j=w?Qi(S,!0):S,g.j&&(g.j=g.j.replace(/:$/,""))}function tr(g,S){if(S){if(S=Number(S),isNaN(S)||S<0)throw Error("Bad port number "+S);g.u=S}else g.u=null}function Gl(g,S,w){S instanceof ir?(g.i=S,sa(g.i,g.l)):(w||(S=ro(S,nr)),g.i=new ir(S,g.l))}function at(g,S,w){g.i.set(S,w)}function so(g){return at(g,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),g}function Qi(g,S){return g?S?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function ro(g,S,w){return typeof g=="string"?(g=encodeURI(g).replace(S,Rn),w&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function Rn(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var na=/[#\/\?@]/g,Wc=/[#\?:]/g,Hl=/[#\?]/g,nr=/[#\?@]/g,Qc=/#/g;function ir(g,S){this.h=this.g=null,this.i=g||null,this.j=!!S}function xn(g){g.g||(g.g=new Map,g.h=0,g.i&&ta(g.i,function(S,w){g.add(decodeURIComponent(S.replace(/\+/g," ")),w)}))}n=ir.prototype,n.add=function(g,S){xn(this),this.i=null,g=sr(this,g);let w=this.g.get(g);return w||this.g.set(g,w=[]),w.push(S),this.h+=1,this};function Xc(g,S){xn(g),S=sr(g,S),g.g.has(S)&&(g.i=null,g.h-=g.g.get(S).length,g.g.delete(S))}function zl(g,S){return xn(g),S=sr(g,S),g.g.has(S)}n.forEach=function(g,S){xn(this),this.g.forEach(function(w,R){w.forEach(function(J){g.call(S,J,R,this)},this)},this)};function $l(g,S){xn(g);let w=[];if(typeof S=="string")zl(g,S)&&(w=w.concat(g.g.get(sr(g,S))));else for(g=Array.from(g.g.values()),S=0;S<g.length;S++)w=w.concat(g[S]);return w}n.set=function(g,S){return xn(this),this.i=null,g=sr(this,g),zl(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[S]),this.h+=1,this},n.get=function(g,S){return g?(g=$l(this,g),g.length>0?String(g[0]):S):S};function ia(g,S,w){Xc(g,S),w.length>0&&(g.i=null,g.g.set(sr(g,S),C(w)),g.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],S=Array.from(this.g.keys());for(let R=0;R<S.length;R++){var w=S[R];const J=vs(w);w=$l(this,w);for(let ee=0;ee<w.length;ee++){let de=J;w[ee]!==""&&(de+="="+vs(w[ee])),g.push(de)}}return this.i=g.join("&")};function jc(g){const S=new ir;return S.i=g.i,g.g&&(S.g=new Map(g.g),S.h=g.h),S}function sr(g,S){return S=String(S),g.j&&(S=S.toLowerCase()),S}function sa(g,S){S&&!g.j&&(xn(g),g.i=null,g.g.forEach(function(w,R){const J=R.toLowerCase();R!=J&&(Xc(this,R),ia(this,J,w))},g)),g.j=S}function Ti(g,S){const w=new yi;if(u.Image){const R=new Image;R.onload=_(ei,w,"TestLoadImage: loaded",!0,S,R),R.onerror=_(ei,w,"TestLoadImage: error",!1,S,R),R.onabort=_(ei,w,"TestLoadImage: abort",!1,S,R),R.ontimeout=_(ei,w,"TestLoadImage: timeout",!1,S,R),u.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=g}else S(!1)}function Jl(g,S){const w=new yi,R=new AbortController,J=setTimeout(()=>{R.abort(),ei(w,"TestPingServer: timeout",!1,S)},1e4);fetch(g,{signal:R.signal}).then(ee=>{clearTimeout(J),ee.ok?ei(w,"TestPingServer: ok",!0,S):ei(w,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(J),ei(w,"TestPingServer: error",!1,S)})}function ei(g,S,w,R,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),R(w)}catch{}}function rr(){this.g=new Fc}function Xi(g){this.i=g.Sb||null,this.h=g.ab||!1}T(Xi,Bc),Xi.prototype.g=function(){return new oo(this.i,this.h)};function oo(g,S){Pt.call(this),this.H=g,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(oo,Pt),n=oo.prototype,n.open=function(g,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=g,this.D=S,this.readyState=1,Ei(this)},n.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const S={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};g&&(S.body=g),(this.H||u).fetch(new Request(this.D,S)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,or(this)),this.readyState=0},n.Pa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,Ei(this)),this.g&&(this.readyState=3,Ei(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ra(this)}else g.text().then(this.Oa.bind(this),this.ga.bind(this))};function ra(g){g.j.read().then(g.Ma.bind(g)).catch(g.ga.bind(g))}n.Ma=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var S=g.value?g.value:new Uint8Array(0);(S=this.B.decode(S,{stream:!g.done}))&&(this.response=this.responseText+=S)}g.done?or(this):Ei(this),this.readyState==3&&ra(this)}},n.Oa=function(g){this.g&&(this.response=this.responseText=g,or(this))},n.Na=function(g){this.g&&(this.response=g,or(this))},n.ga=function(){this.g&&or(this)};function or(g){g.readyState=4,g.l=null,g.j=null,g.B=null,Ei(g)}n.setRequestHeader=function(g,S){this.A.append(g,S)},n.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],S=this.h.entries();for(var w=S.next();!w.done;)w=w.value,g.push(w[0]+": "+w[1]),w=S.next();return g.join(`\r
`)};function Ei(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(oo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function ti(g){let S="";return be(g,function(w,R){S+=R,S+=":",S+=w,S+=`\r
`}),S}function ao(g,S,w){e:{for(R in w){var R=!1;break e}R=!0}R||(w=ti(w),typeof g=="string"?w!=null&&vs(w):at(g,S,w))}function ct(g){Pt.call(this),this.headers=new Map,this.L=g||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(ct,Pt);var ji=/^https?$/i,Kl=["POST","PUT"];n=ct.prototype,n.Fa=function(g){this.H=g},n.ea=function(g,S,w,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);S=S?S.toUpperCase():"GET",this.D=g,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ul.g(),this.g.onreadystatechange=E(h(this.Ca,this));try{this.B=!0,this.g.open(S,String(g),!0),this.B=!1}catch(ee){lo(this,ee);return}if(g=w||"",w=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var J in R)w.set(J,R[J]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const ee of R.keys())w.set(ee,R.get(ee));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(w.keys()).find(ee=>ee.toLowerCase()=="content-type"),J=u.FormData&&g instanceof u.FormData,!(Array.prototype.indexOf.call(Kl,S,void 0)>=0)||R||J||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ee,de]of w)this.g.setRequestHeader(ee,de);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(g),this.v=!1}catch(ee){lo(this,ee)}};function lo(g,S){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=S,g.o=5,Yl(g),Ts(g)}function Yl(g){g.A||(g.A=!0,Jt(g,"complete"),Jt(g,"error"))}n.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=g||7,Jt(this,"complete"),Jt(this,"abort"),Ts(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ts(this,!0)),ct.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?uo(this):this.Xa())},n.Xa=function(){uo(this)};function uo(g){if(g.h&&typeof a<"u"){if(g.v&&Si(g)==4)setTimeout(g.Ca.bind(g),0);else if(Jt(g,"readystatechange"),Si(g)==4){g.h=!1;try{const ee=g.ca();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var w;if(!(w=S)){var R;if(R=ee===0){let de=String(g.D).match(Yc)[1]||null;!de&&u.self&&u.self.location&&(de=u.self.location.protocol.slice(0,-1)),R=!ji.test(de?de.toLowerCase():"")}w=R}if(w)Jt(g,"complete"),Jt(g,"success");else{g.o=6;try{var J=Si(g)>2?g.g.statusText:""}catch{J=""}g.l=J+" ["+g.ca()+"]",Yl(g)}}finally{Ts(g)}}}}function Ts(g,S){if(g.g){g.m&&(clearTimeout(g.m),g.m=null);const w=g.g;g.g=null,S||Jt(g,"ready");try{w.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Si(g){return g.g?g.g.readyState:0}n.ca=function(){try{return Si(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(g){if(this.g){var S=this.g.responseText;return g&&S.indexOf(g)==0&&(S=S.substring(g.length)),_p(S)}};function on(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.F){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function Es(g){const S={};g=(g.g&&Si(g)>=2&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<g.length;R++){if(V(g[R]))continue;var w=$c(g[R]);const J=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const ee=S[J]||[];S[J]=ee,ee.push(w)}ze(S,function(R){return R.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Zi(g,S,w){return w&&w.internalChannelParams&&w.internalChannelParams[g]||S}function ar(g){this.za=0,this.i=[],this.j=new yi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Zi("failFast",!1,g),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Zi("baseRetryDelayMs",5e3,g),this.Za=Zi("retryDelaySeedMs",1e4,g),this.Ta=Zi("forwardChannelMaxRetries",2,g),this.va=Zi("forwardChannelRequestTimeoutMs",2e4,g),this.ma=g&&g.xmlHttpFactory||void 0,this.Ua=g&&g.Rb||void 0,this.Aa=g&&g.useFetchStreams||!1,this.O=void 0,this.L=g&&g.supportsCrossDomainXhr||!1,this.M="",this.h=new Ll(g&&g.concurrentRequestLimit),this.Ba=new rr,this.S=g&&g.fastHandshake||!1,this.R=g&&g.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=g&&g.Pb||!1,g&&g.ua&&this.j.ua(),g&&g.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&g&&g.detectBufferingProxy||!1,this.ia=void 0,g&&g.longPollingTimeout&&g.longPollingTimeout>0&&(this.ia=g.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=ar.prototype,n.ka=8,n.I=1,n.connect=function(g,S,w,R){kt(0),this.W=g,this.H=S||{},w&&R!==void 0&&(this.H.OSID=w,this.H.OAID=R),this.F=this.X,this.J=rd(this,null,this.W),es(this)};function Wl(g){if(oa(g),g.I==3){var S=g.V++,w=Lt(g.J);if(at(w,"SID",g.M),at(w,"RID",S),at(w,"TYPE","terminate"),co(g,w),S=new _i(g,g.j,S),S.M=2,S.A=so(Lt(w)),w=!1,u.navigator&&u.navigator.sendBeacon)try{w=u.navigator.sendBeacon(S.A.toString(),"")}catch{}!w&&u.Image&&(new Image().src=S.A,w=!0),w||(S.g=od(S.j,null),S.g.ea(S.A)),S.F=Date.now(),$i(S)}sd(g)}function lr(g){g.g&&(Xl(g),g.g.cancel(),g.g=null)}function oa(g){lr(g),g.v&&(u.clearTimeout(g.v),g.v=null),la(g),g.h.cancel(),g.m&&(typeof g.m=="number"&&u.clearTimeout(g.m),g.m=null)}function es(g){if(!Ol(g.h)&&!g.m){g.m=!0;var S=g.Ea;ue||D(),W||(ue(),W=!0),N.add(S,g),g.D=0}}function aa(g,S){return Yi(g.h)>=g.h.j-(g.m?1:0)?!1:g.m?(g.i=S.G.concat(g.i),!0):g.I==1||g.I==2||g.D>=(g.Sa?0:g.Ta)?!1:(g.m=Gi(h(g.Ea,g,S),id(g,g.D)),g.D++,!0)}n.Ea=function(g){if(this.m)if(this.m=null,this.I==1){if(!g){this.V=Math.floor(Math.random()*1e5),g=this.V++;const J=new _i(this,this.j,g);let ee=this.o;if(this.U&&(ee?(ee=F(ee),he(ee,this.U)):ee=this.U),this.u!==null||this.R||(J.J=ee,ee=null),this.S)e:{for(var S=0,w=0;w<this.i.length;w++){t:{var R=this.i[w];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(S+=R,S>4096){S=w;break e}if(S===4096||w===this.i.length-1){S=w+1;break e}}S=1e3}else S=1e3;S=Zc(this,J,S),w=Lt(this.J),at(w,"RID",g),at(w,"CVER",22),this.G&&at(w,"X-HTTP-Session-Id",this.G),co(this,w),ee&&(this.R?S="headers="+vs(ti(ee))+"&"+S:this.u&&ao(w,this.u,ee)),Fl(this.h,J),this.Ra&&at(w,"TYPE","init"),this.S?(at(w,"$req",S),at(w,"SID","null"),J.U=!0,zi(J,w,null)):zi(J,w,S),this.I=2}}else this.I==3&&(g?Ql(this,g):this.i.length==0||Ol(this.h)||Ql(this))};function Ql(g,S){var w;S?w=S.l:w=g.V++;const R=Lt(g.J);at(R,"SID",g.M),at(R,"RID",w),at(R,"AID",g.K),co(g,R),g.u&&g.o&&ao(R,g.u,g.o),w=new _i(g,g.j,w,g.D+1),g.u===null&&(w.J=g.o),S&&(g.i=S.G.concat(g.i)),S=Zc(g,w,1e3),w.H=Math.round(g.va*.5)+Math.round(g.va*.5*Math.random()),Fl(g.h,w),zi(w,R,S)}function co(g,S){g.H&&be(g.H,function(w,R){at(S,R,w)}),g.l&&be({},function(w,R){at(S,R,w)})}function Zc(g,S,w){w=Math.min(g.i.length,w);const R=g.l?h(g.l.Ka,g.l,g):null;e:{var J=g.i;let Fe=-1;for(;;){const xt=["count="+w];Fe==-1?w>0?(Fe=J[0].g,xt.push("ofs="+Fe)):Fe=0:xt.push("ofs="+Fe);let st=!0;for(let vt=0;vt<w;vt++){var ee=J[vt].g;const ni=J[vt].map;if(ee-=Fe,ee<0)Fe=Math.max(0,J[vt].g-100),st=!1;else try{ee="req"+ee+"_"||"";try{var de=ni instanceof Map?ni:Object.entries(ni);for(const[ns,Ai]of de){let wi=Ai;d(Ai)&&(wi=er(Ai)),xt.push(ee+ns+"="+encodeURIComponent(wi))}}catch(ns){throw xt.push(ee+"type="+encodeURIComponent("_badmap")),ns}}catch{R&&R(ni)}}if(st){de=xt.join("&");break e}}de=void 0}return g=g.i.splice(0,w),S.G=g,de}function ed(g){if(!g.g&&!g.v){g.Y=1;var S=g.Da;ue||D(),W||(ue(),W=!0),N.add(S,g),g.A=0}}function fo(g){return g.g||g.v||g.A>=3?!1:(g.Y++,g.v=Gi(h(g.Da,g),id(g,g.A)),g.A++,!0)}n.Da=function(){if(this.v=null,td(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var g=4*this.T;this.j.info("BP detection timer enabled: "+g),this.B=Gi(h(this.Wa,this),g)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,kt(10),lr(this),td(this))};function Xl(g){g.B!=null&&(u.clearTimeout(g.B),g.B=null)}function td(g){g.g=new _i(g,g.j,"rpc",g.Y),g.u===null&&(g.g.J=g.o),g.g.P=0;var S=Lt(g.na);at(S,"RID","rpc"),at(S,"SID",g.M),at(S,"AID",g.K),at(S,"CI",g.F?"0":"1"),!g.F&&g.ia&&at(S,"TO",g.ia),at(S,"TYPE","xmlhttp"),co(g,S),g.u&&g.o&&ao(S,g.u,g.o),g.O&&(g.g.H=g.O);var w=g.g;g=g.ba,w.M=1,w.A=so(Lt(S)),w.u=null,w.R=!0,Zo(w,g)}n.Va=function(){this.C!=null&&(this.C=null,lr(this),fo(this),kt(19))};function la(g){g.C!=null&&(u.clearTimeout(g.C),g.C=null)}function nd(g,S){var w=null;if(g.g==S){la(g),Xl(g),g.g=null;var R=2}else if(Wi(g.h,S))w=S.G,Bl(g.h,S),R=1;else return;if(g.I!=0){if(S.o)if(R==1){w=S.u?S.u.length:0,S=Date.now()-S.F;var J=g.D;R=jo(),Jt(R,new qi(R,w)),es(g)}else ed(g);else if(J=S.m,J==3||J==0&&S.X>0||!(R==1&&aa(g,S)||R==2&&fo(g)))switch(w&&w.length>0&&(S=g.h,S.i=S.i.concat(w)),J){case 1:ts(g,5);break;case 4:ts(g,10);break;case 3:ts(g,6);break;default:ts(g,2)}}}function id(g,S){let w=g.Qa+Math.floor(Math.random()*g.Za);return g.isActive()||(w*=2),w*S}function ts(g,S){if(g.j.info("Error code "+S),S==2){var w=h(g.bb,g),R=g.Ua;const J=!R;R=new Bn(R||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||jt(R,"https"),so(R),J?Ti(R.toString(),w):Jl(R.toString(),w)}else kt(2);g.I=0,g.l&&g.l.pa(S),sd(g),oa(g)}n.bb=function(g){g?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function sd(g){if(g.I=0,g.ja=[],g.l){const S=ql(g.h);(S.length!=0||g.i.length!=0)&&(M(g.ja,S),M(g.ja,g.i),g.h.i.length=0,C(g.i),g.i.length=0),g.l.oa()}}function rd(g,S,w){var R=w instanceof Bn?Lt(w):new Bn(w);if(R.g!="")S&&(R.g=S+"."+R.g),tr(R,R.u);else{var J=u.location;R=J.protocol,S=S?S+"."+J.hostname:J.hostname,J=+J.port;const ee=new Bn(null);R&&jt(ee,R),S&&(ee.g=S),J&&tr(ee,J),w&&(ee.h=w),R=ee}return w=g.G,S=g.wa,w&&S&&at(R,w,S),at(R,"VER",g.ka),co(g,R),R}function od(g,S,w){if(S&&!g.L)throw Error("Can't create secondary domain capable XhrIo object.");return S=g.Aa&&!g.ma?new ct(new Xi({ab:w})):new ct(g.ma),S.Fa(g.L),S}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ad(){}n=ad.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function ur(){}ur.prototype.g=function(g,S){return new An(g,S)};function An(g,S){Pt.call(this),this.g=new ar(S),this.l=g,this.h=S&&S.messageUrlParams||null,g=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(g?g["X-WebChannel-Content-Type"]=S.messageContentType:g={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.sa&&(g?g["X-WebChannel-Client-Profile"]=S.sa:g={"X-WebChannel-Client-Profile":S.sa}),this.g.U=g,(g=S&&S.Qb)&&!V(g)&&(this.g.u=g),this.A=S&&S.supportsCrossDomainXhr||!1,this.v=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!V(S)&&(this.g.G=S,g=this.h,g!==null&&S in g&&(g=this.h,S in g&&delete g[S])),this.j=new Ss(this)}T(An,Pt),An.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},An.prototype.close=function(){Wl(this.g)},An.prototype.o=function(g){var S=this.g;if(typeof g=="string"){var w={};w.__data__=g,g=w}else this.v&&(w={},w.__data__=er(g),g=w);S.i.push(new Ut(S.Ya++,g)),S.I==3&&es(S)},An.prototype.N=function(){this.g.l=null,delete this.j,Wl(this.g),delete this.g,An.Z.N.call(this)};function ld(g){rn.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var S=g.__sm__;if(S){e:{for(const w in S){g=w;break e}g=void 0}(this.i=g)&&(g=this.i,S=S!==null&&g in S?S[g]:void 0),this.data=S}else this.data=g}T(ld,rn);function ud(){jn.call(this),this.status=1}T(ud,jn);function Ss(g){this.g=g}T(Ss,ad),Ss.prototype.ra=function(){Jt(this.g,"a")},Ss.prototype.qa=function(g){Jt(this.g,new ld(g))},Ss.prototype.pa=function(g){Jt(this.g,new ud)},Ss.prototype.oa=function(){Jt(this.g,"b")},ur.prototype.createWebChannel=ur.prototype.g,An.prototype.send=An.prototype.o,An.prototype.open=An.prototype.m,An.prototype.close=An.prototype.close,hx=function(){return new ur},fx=function(){return jo()},dx=Rt,Vy={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},no.NO_ERROR=0,no.TIMEOUT=8,no.HTTP_ERROR=6,Yf=no,Vl.COMPLETE="complete",cx=Vl,qc.EventType=gi,gi.OPEN="a",gi.CLOSE="b",gi.ERROR="c",gi.MESSAGE="d",Pt.prototype.listen=Pt.prototype.J,ju=qc,ct.prototype.listenOnce=ct.prototype.K,ct.prototype.getLastError=ct.prototype.Ha,ct.prototype.getLastErrorCode=ct.prototype.ya,ct.prototype.getStatus=ct.prototype.ca,ct.prototype.getResponseJson=ct.prototype.La,ct.prototype.getResponseText=ct.prototype.la,ct.prototype.send=ct.prototype.ea,ct.prototype.setWithCredentials=ct.prototype.Fa,ux=ct}).apply(typeof bf<"u"?bf:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vn.UNAUTHENTICATED=new vn(null),vn.GOOGLE_CREDENTIALS=new vn("google-credentials-uid"),vn.FIRST_PARTY=new vn("first-party-uid"),vn.MOCK_USER=new vn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cl="12.9.0";function TB(n){Cl=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go=new k_("@firebase/firestore");function Ya(){return Go.logLevel}function ye(n,...e){if(Go.logLevel<=Qe.DEBUG){const t=e.map(K_);Go.debug(`Firestore (${Cl}): ${n}`,...t)}}function Ks(n,...e){if(Go.logLevel<=Qe.ERROR){const t=e.map(K_);Go.error(`Firestore (${Cl}): ${n}`,...t)}}function Ho(n,...e){if(Go.logLevel<=Qe.WARN){const t=e.map(K_);Go.warn(`Firestore (${Cl}): ${n}`,...t)}}function K_(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,px(n,i,t)}function px(n,e,t){let i=`FIRESTORE (${Cl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Ks(i),new Error(i)}function ot(n,e,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,n||px(e,r,i)}function Oe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends js{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class EB{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(vn.UNAUTHENTICATED)))}shutdown(){}}class SB{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class AB{constructor(e){this.t=e,this.currentUser=vn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ot(this.o===void 0,42304);let i=this.i;const r=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let a=new Hs;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Hs,e.enqueueRetryable((()=>r(this.currentUser)))};const u=()=>{const p=a;e.enqueueRetryable((async()=>{await p.promise,await r(this.currentUser)}))},d=p=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Hs)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ot(typeof i.accessToken=="string",31837,{l:i}),new mx(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ot(e===null||typeof e=="string",2055,{h:e}),new vn(e)}}class wB{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=vn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class CB{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new wB(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(vn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Gw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class IB{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ot(this.o===void 0,3512);const i=a=>{a.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,ye("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const r=a=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>r(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?r(a):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Gw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ot(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Gw(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bB(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=bB(40);for(let a=0;a<r.length;++a)i.length<20&&r[a]<t&&(i+=e.charAt(r[a]%62))}return i}}function Xe(n,e){return n<e?-1:n>e?1:0}function Uy(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const r=n.charAt(i),a=e.charAt(i);if(r!==a)return $g(r)===$g(a)?Xe(r,a):$g(r)?1:-1}return Xe(n.length,e.length)}const RB=55296,xB=57343;function $g(n){const e=n.charCodeAt(0);return e>=RB&&e<=xB}function dl(n,e,t){return n.length===e.length&&n.every(((i,r)=>t(i,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw="__name__";class us{constructor(e,t,i){t===void 0?t=0:t>e.length&&Re(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Re(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return us.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof us?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const a=us.compareSegments(e.get(r),t.get(r));if(a!==0)return a}return Xe(e.length,t.length)}static compareSegments(e,t){const i=us.isNumericId(e),r=us.isNumericId(t);return i&&!r?-1:!i&&r?1:i&&r?us.extractNumericId(e).compare(us.extractNumericId(t)):Uy(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Gr.fromString(e.substring(4,e.length-2))}}class mt extends us{construct(e,t,i){return new mt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ge(oe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((r=>r.length>0)))}return new mt(t)}static emptyPath(){return new mt([])}}const NB=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pn extends us{construct(e,t,i){return new pn(e,t,i)}static isValidIdentifier(e){return NB.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Hw}static keyField(){return new pn([Hw])}static fromServerFormat(e){const t=[];let i="",r=0;const a=()=>{if(i.length===0)throw new ge(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;r<e.length;){const d=e[r];if(d==="\\"){if(r+1===e.length)throw new ge(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[r+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ge(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,r+=2}else d==="`"?(u=!u,r++):d!=="."||u?(i+=d,r++):(a(),r++)}if(a(),u)throw new ge(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pn(t)}static emptyPath(){return new pn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.path=e}static fromPath(e){return new we(mt.fromString(e))}static fromName(e){return new we(mt.fromString(e).popFirst(5))}static empty(){return new we(mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&mt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return mt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new mt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gx(n,e,t){if(!t)throw new ge(oe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function MB(n,e,t,i){if(e===!0&&i===!0)throw new ge(oe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function zw(n){if(!we.isDocumentKey(n))throw new ge(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function $w(n){if(we.isDocumentKey(n))throw new ge(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function yx(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function ip(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Re(12329,{type:typeof n})}function zr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ge(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ip(n);throw new ge(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Mc(n,e){if(!yx(n))throw new ge(oe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const r=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const u=n[i];if(r&&typeof u!==r){t=`JSON field '${i}' must be a ${r}.`;break}if(a!==void 0&&u!==a.value){t=`Expected '${i}' field to equal '${a.value}'`;break}}if(t)throw new ge(oe.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jw=-62135596800,Kw=1e6;class _t{static now(){return _t.fromMillis(Date.now())}static fromDate(e){return _t.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Kw);return new _t(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Jw)throw new ge(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Kw}_compareTo(e){return this.seconds===e.seconds?Xe(this.nanoseconds,e.nanoseconds):Xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:_t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Mc(e,_t._jsonSchema))return new _t(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Jw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}_t._jsonSchemaVersion="firestore/timestamp/1.0",_t._jsonSchema={type:zt("string",_t._jsonSchemaVersion),seconds:zt("number"),nanoseconds:zt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{static fromTimestamp(e){return new Ue(e)}static min(){return new Ue(new _t(0,0))}static max(){return new Ue(new _t(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gc=-1;function DB(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Ue.fromTimestamp(i===1e9?new _t(t+1,0):new _t(t,i));return new $r(r,we.empty(),e)}function PB(n){return new $r(n.readTime,n.key,gc)}class $r{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new $r(Ue.min(),we.empty(),gc)}static max(){return new $r(Ue.max(),we.empty(),gc)}}function kB(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=we.comparator(n.documentKey,e.documentKey),t!==0?t:Xe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class UB{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Il(n){if(n.code!==oe.FAILED_PRECONDITION||n.message!==VB)throw n;ye("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ae(((i,r)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,r)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ae?t:ae.resolve(t)}catch(t){return ae.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ae.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ae.reject(t)}static resolve(e){return new ae(((t,i)=>{t(e)}))}static reject(e){return new ae(((t,i)=>{i(e)}))}static waitFor(e){return new ae(((t,i)=>{let r=0,a=0,u=!1;e.forEach((d=>{++r,d.next((()=>{++a,u&&a===r&&t()}),(p=>i(p)))})),u=!0,a===r&&t()}))}static or(e){let t=ae.resolve(!1);for(const i of e)t=t.next((r=>r?ae.resolve(r):i()));return t}static forEach(e,t){const i=[];return e.forEach(((r,a)=>{i.push(t.call(this,r,a))})),this.waitFor(i)}static mapArray(e,t){return new ae(((i,r)=>{const a=e.length,u=new Array(a);let d=0;for(let p=0;p<a;p++){const h=p;t(e[h]).next((_=>{u[h]=_,++d,d===a&&i(u)}),(_=>r(_)))}}))}static doWhile(e,t){return new ae(((i,r)=>{const a=()=>{e()===!0?t().next((()=>{a()}),r):i()};a()}))}}function LB(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function bl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}sp.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_=-1;function rp(n){return n==null}function wh(n){return n===0&&1/n==-1/0}function OB(n){return typeof n=="number"&&Number.isInteger(n)&&!wh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x="";function FB(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Yw(e)),e=BB(n.get(t),e);return Yw(e)}function BB(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const a=n.charAt(r);switch(a){case"\0":t+="";break;case _x:t+="";break;default:t+=a}}return t}function Yw(n){return n+_x+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ww(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Jo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function vx(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,t){this.comparator=e,this.root=t||hn.EMPTY}insert(e,t){return new At(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,hn.BLACK,null,null))}remove(e){return new At(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Rf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Rf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Rf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Rf(this.root,e,this.comparator,!0)}}class Rf{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&r&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class hn{constructor(e,t,i,r,a){this.key=e,this.value=t,this.color=i??hn.RED,this.left=r??hn.EMPTY,this.right=a??hn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,a){return new hn(e??this.key,t??this.value,i??this.color,r??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const a=i(e,r.key);return r=a<0?r.copy(null,null,null,r.left.insert(e,t,i),null):a===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return hn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return hn.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,hn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,hn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Re(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Re(27949);return e+(this.isRed()?0:1)}}hn.EMPTY=null,hn.RED=!0,hn.BLACK=!1;hn.EMPTY=new class{constructor(){this.size=0}get key(){throw Re(57766)}get value(){throw Re(16141)}get color(){throw Re(16727)}get left(){throw Re(29726)}get right(){throw Re(36894)}copy(e,t,i,r,a){return this}insert(e,t,i){return new hn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.comparator=e,this.data=new At(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Qw(this.data.getIterator())}getIteratorFrom(e){return new Qw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Qt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,a=i.getNext().key;if(this.comparator(r,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Qt(this.comparator);return t.data=e,t}}class Qw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e){this.fields=e,e.sort(pn.comparator)}static empty(){return new Mi([])}unionWith(e){let t=new Qt(pn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Mi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return dl(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Tx("Invalid base64 string: "+a):a}})(e);return new gn(t)}static fromUint8Array(e){const t=(function(r){let a="";for(let u=0;u<r.length;++u)a+=String.fromCharCode(r[u]);return a})(e);return new gn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gn.EMPTY_BYTE_STRING=new gn("");const qB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jr(n){if(ot(!!n,39018),typeof n=="string"){let e=0;const t=qB.exec(n);if(ot(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Dt(n.seconds),nanos:Dt(n.nanos)}}function Dt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Kr(n){return typeof n=="string"?gn.fromBase64String(n):gn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex="server_timestamp",Sx="__type__",Ax="__previous_value__",wx="__local_write_time__";function Q_(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[Sx])==null?void 0:i.stringValue)===Ex}function op(n){const e=n.mapValue.fields[Ax];return Q_(e)?op(e):e}function yc(n){const e=Jr(n.mapValue.fields[wx].timestampValue);return new _t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GB{constructor(e,t,i,r,a,u,d,p,h,_,T){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=h,this.isUsingEmulator=_,this.apiKey=T}}const Ch="(default)";class _c{constructor(e,t){this.projectId=e,this.database=t||Ch}static empty(){return new _c("","")}get isDefaultDatabase(){return this.database===Ch}isEqual(e){return e instanceof _c&&e.projectId===this.projectId&&e.database===this.database}}function HB(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new ge(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _c(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx="__type__",zB="__max__",xf={mapValue:{}},Ix="__vector__",Ih="value";function Yr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Q_(n)?4:JB(n)?9007199254740991:$B(n)?10:11:Re(28295,{value:n})}function _s(n,e){if(n===e)return!0;const t=Yr(n);if(t!==Yr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return yc(n).isEqual(yc(e));case 3:return(function(r,a){if(typeof r.timestampValue=="string"&&typeof a.timestampValue=="string"&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;const u=Jr(r.timestampValue),d=Jr(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,a){return Kr(r.bytesValue).isEqual(Kr(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,a){return Dt(r.geoPointValue.latitude)===Dt(a.geoPointValue.latitude)&&Dt(r.geoPointValue.longitude)===Dt(a.geoPointValue.longitude)})(n,e);case 2:return(function(r,a){if("integerValue"in r&&"integerValue"in a)return Dt(r.integerValue)===Dt(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){const u=Dt(r.doubleValue),d=Dt(a.doubleValue);return u===d?wh(u)===wh(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return dl(n.arrayValue.values||[],e.arrayValue.values||[],_s);case 10:case 11:return(function(r,a){const u=r.mapValue.fields||{},d=a.mapValue.fields||{};if(Ww(u)!==Ww(d))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(d[p]===void 0||!_s(u[p],d[p])))return!1;return!0})(n,e);default:return Re(52216,{left:n})}}function vc(n,e){return(n.values||[]).find((t=>_s(t,e)))!==void 0}function fl(n,e){if(n===e)return 0;const t=Yr(n),i=Yr(e);if(t!==i)return Xe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Xe(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const d=Dt(a.integerValue||a.doubleValue),p=Dt(u.integerValue||u.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(n,e);case 3:return Xw(n.timestampValue,e.timestampValue);case 4:return Xw(yc(n),yc(e));case 5:return Uy(n.stringValue,e.stringValue);case 6:return(function(a,u){const d=Kr(a),p=Kr(u);return d.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const d=a.split("/"),p=u.split("/");for(let h=0;h<d.length&&h<p.length;h++){const _=Xe(d[h],p[h]);if(_!==0)return _}return Xe(d.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const d=Xe(Dt(a.latitude),Dt(u.latitude));return d!==0?d:Xe(Dt(a.longitude),Dt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return jw(n.arrayValue,e.arrayValue);case 10:return(function(a,u){var E,C,M,U;const d=a.fields||{},p=u.fields||{},h=(E=d[Ih])==null?void 0:E.arrayValue,_=(C=p[Ih])==null?void 0:C.arrayValue,T=Xe(((M=h==null?void 0:h.values)==null?void 0:M.length)||0,((U=_==null?void 0:_.values)==null?void 0:U.length)||0);return T!==0?T:jw(h,_)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===xf.mapValue&&u===xf.mapValue)return 0;if(a===xf.mapValue)return 1;if(u===xf.mapValue)return-1;const d=a.fields||{},p=Object.keys(d),h=u.fields||{},_=Object.keys(h);p.sort(),_.sort();for(let T=0;T<p.length&&T<_.length;++T){const E=Uy(p[T],_[T]);if(E!==0)return E;const C=fl(d[p[T]],h[_[T]]);if(C!==0)return C}return Xe(p.length,_.length)})(n.mapValue,e.mapValue);default:throw Re(23264,{he:t})}}function Xw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Xe(n,e);const t=Jr(n),i=Jr(e),r=Xe(t.seconds,i.seconds);return r!==0?r:Xe(t.nanos,i.nanos)}function jw(n,e){const t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){const a=fl(t[r],i[r]);if(a)return a}return Xe(t.length,i.length)}function hl(n){return Ly(n)}function Ly(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Jr(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Kr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return we.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",r=!0;for(const a of t.values||[])r?r=!1:i+=",",i+=Ly(a);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let r="{",a=!0;for(const u of i)a?a=!1:r+=",",r+=`${u}:${Ly(t.fields[u])}`;return r+"}"})(n.mapValue):Re(61005,{value:n})}function Wf(n){switch(Yr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=op(n);return e?16+Wf(e):16;case 5:return 2*n.stringValue.length;case 6:return Kr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((r,a)=>r+Wf(a)),0)})(n.arrayValue);case 10:case 11:return(function(i){let r=0;return Jo(i.fields,((a,u)=>{r+=a.length+Wf(u)})),r})(n.mapValue);default:throw Re(13486,{value:n})}}function Zw(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Oy(n){return!!n&&"integerValue"in n}function X_(n){return!!n&&"arrayValue"in n}function eC(n){return!!n&&"nullValue"in n}function tC(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Qf(n){return!!n&&"mapValue"in n}function $B(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[Cx])==null?void 0:i.stringValue)===Ix}function ac(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Jo(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=ac(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ac(n.arrayValue.values[t]);return e}return{...n}}function JB(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===zB}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this.value=e}static empty(){return new di({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Qf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ac(t)}setAll(e){let t=pn.emptyPath(),i={},r=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,i,r),i={},r=[],t=d.popLast()}u?i[d.lastSegment()]=ac(u):r.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,i,r)}delete(e){const t=this.field(e.popLast());Qf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return _s(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];Qf(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){Jo(t,((r,a)=>e[r]=a));for(const r of i)delete e[r]}clone(){return new di(ac(this.value))}}function bx(n){const e=[];return Jo(n.fields,((t,i)=>{const r=new pn([t]);if(Qf(i)){const a=bx(i.mapValue).fields;if(a.length===0)e.push(r);else for(const u of a)e.push(r.child(u))}else e.push(r)})),new Mi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e,t,i,r,a,u,d){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new Tn(e,0,Ue.min(),Ue.min(),Ue.min(),di.empty(),0)}static newFoundDocument(e,t,i,r){return new Tn(e,1,t,Ue.min(),i,r,0)}static newNoDocument(e,t){return new Tn(e,2,t,Ue.min(),Ue.min(),di.empty(),0)}static newUnknownDocument(e,t){return new Tn(e,3,t,Ue.min(),Ue.min(),di.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=di.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=di.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e,t){this.position=e,this.inclusive=t}}function nC(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const a=e[r],u=n.position[r];if(a.field.isKeyField()?i=we.comparator(we.fromName(u.referenceValue),t.key):i=fl(u,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function iC(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!_s(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,t="asc"){this.field=e,this.dir=t}}function KB(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{}class Ht extends Rx{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new WB(e,t,i):t==="array-contains"?new jB(e,i):t==="in"?new ZB(e,i):t==="not-in"?new eq(e,i):t==="array-contains-any"?new tq(e,i):new Ht(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new QB(e,i):new XB(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(fl(t,this.value)):t!==null&&Yr(this.value)===Yr(t)&&this.matchesComparison(fl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ui extends Rx{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ui(e,t)}matches(e){return xx(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function xx(n){return n.op==="and"}function Nx(n){return YB(n)&&xx(n)}function YB(n){for(const e of n.filters)if(e instanceof Ui)return!1;return!0}function Fy(n){if(n instanceof Ht)return n.field.canonicalString()+n.op.toString()+hl(n.value);if(Nx(n))return n.filters.map((e=>Fy(e))).join(",");{const e=n.filters.map((t=>Fy(t))).join(",");return`${n.op}(${e})`}}function Mx(n,e){return n instanceof Ht?(function(i,r){return r instanceof Ht&&i.op===r.op&&i.field.isEqual(r.field)&&_s(i.value,r.value)})(n,e):n instanceof Ui?(function(i,r){return r instanceof Ui&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce(((a,u,d)=>a&&Mx(u,r.filters[d])),!0):!1})(n,e):void Re(19439)}function Dx(n){return n instanceof Ht?(function(t){return`${t.field.canonicalString()} ${t.op} ${hl(t.value)}`})(n):n instanceof Ui?(function(t){return t.op.toString()+" {"+t.getFilters().map(Dx).join(" ,")+"}"})(n):"Filter"}class WB extends Ht{constructor(e,t,i){super(e,t,i),this.key=we.fromName(i.referenceValue)}matches(e){const t=we.comparator(e.key,this.key);return this.matchesComparison(t)}}class QB extends Ht{constructor(e,t){super(e,"in",t),this.keys=Px("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class XB extends Ht{constructor(e,t){super(e,"not-in",t),this.keys=Px("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Px(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>we.fromName(i.referenceValue)))}class jB extends Ht{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return X_(t)&&vc(t.arrayValue,this.value)}}class ZB extends Ht{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&vc(this.value.arrayValue,t)}}class eq extends Ht{constructor(e,t){super(e,"not-in",t)}matches(e){if(vc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!vc(this.value.arrayValue,t)}}class tq extends Ht{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!X_(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>vc(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nq{constructor(e,t=null,i=[],r=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=a,this.startAt=u,this.endAt=d,this.Te=null}}function sC(n,e=null,t=[],i=[],r=null,a=null,u=null){return new nq(n,e,t,i,r,a,u)}function j_(n){const e=Oe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Fy(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),rp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>hl(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>hl(i))).join(",")),e.Te=t}return e.Te}function Z_(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!KB(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Mx(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!iC(n.startAt,e.startAt)&&iC(n.endAt,e.endAt)}function By(n){return we.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e,t=null,i=[],r=[],a=null,u="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=p,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function iq(n,e,t,i,r,a,u,d){return new Dc(n,e,t,i,r,a,u,d)}function ev(n){return new Dc(n)}function rC(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function sq(n){return we.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function kx(n){return n.collectionGroup!==null}function lc(n){const e=Oe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Qt(pn.comparator);return u.filters.forEach((p=>{p.getFlattenedFilters().forEach((h=>{h.isInequality()&&(d=d.add(h.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Rh(a,i))})),t.has(pn.keyField().canonicalString())||e.Ie.push(new Rh(pn.keyField(),i))}return e.Ie}function fs(n){const e=Oe(n);return e.Ee||(e.Ee=rq(e,lc(n))),e.Ee}function rq(n,e){if(n.limitType==="F")return sC(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((r=>{const a=r.dir==="desc"?"asc":"desc";return new Rh(r.field,a)}));const t=n.endAt?new bh(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new bh(n.startAt.position,n.startAt.inclusive):null;return sC(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function qy(n,e){const t=n.filters.concat([e]);return new Dc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Gy(n,e,t){return new Dc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ap(n,e){return Z_(fs(n),fs(e))&&n.limitType===e.limitType}function Vx(n){return`${j_(fs(n))}|lt:${n.limitType}`}function Wa(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((r=>Dx(r))).join(", ")}]`),rp(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((r=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(r))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((r=>hl(r))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((r=>hl(r))).join(",")),`Target(${i})`})(fs(n))}; limitType=${n.limitType})`}function lp(n,e){return e.isFoundDocument()&&(function(i,r){const a=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):we.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(n,e)&&(function(i,r){for(const a of lc(i))if(!a.field.isKeyField()&&r.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(i,r){for(const a of i.filters)if(!a.matches(r))return!1;return!0})(n,e)&&(function(i,r){return!(i.startAt&&!(function(u,d,p){const h=nC(u,d,p);return u.inclusive?h<=0:h<0})(i.startAt,lc(i),r)||i.endAt&&!(function(u,d,p){const h=nC(u,d,p);return u.inclusive?h>=0:h>0})(i.endAt,lc(i),r))})(n,e)}function oq(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Ux(n){return(e,t)=>{let i=!1;for(const r of lc(n)){const a=aq(r,e,t);if(a!==0)return a;i=i||r.field.isKeyField()}return 0}}function aq(n,e,t){const i=n.field.isKeyField()?we.comparator(e.key,t.key):(function(a,u,d){const p=u.data.field(a),h=d.data.field(a);return p!==null&&h!==null?fl(p,h):Re(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Re(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[r,a]of i)if(this.equalsFn(r,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return void(r[a]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Jo(this.inner,((t,i)=>{for(const[r,a]of i)e(r,a)}))}isEmpty(){return vx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lq=new At(we.comparator);function Ys(){return lq}const Lx=new At(we.comparator);function Zu(...n){let e=Lx;for(const t of n)e=e.insert(t.key,t);return e}function Ox(n){let e=Lx;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Uo(){return uc()}function Fx(){return uc()}function uc(){return new Ko((n=>n.toString()),((n,e)=>n.isEqual(e)))}const uq=new At(we.comparator),cq=new Qt(we.comparator);function je(...n){let e=cq;for(const t of n)e=e.add(t);return e}const dq=new Qt(Xe);function fq(){return dq}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wh(e)?"-0":e}}function Bx(n){return{integerValue:""+n}}function hq(n,e){return OB(e)?Bx(e):tv(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(){this._=void 0}}function pq(n,e,t){return n instanceof xh?(function(r,a){const u={fields:{[Sx]:{stringValue:Ex},[wx]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return a&&Q_(a)&&(a=op(a)),a&&(u.fields[Ax]=a),{mapValue:u}})(t,e):n instanceof Tc?Gx(n,e):n instanceof Ec?Hx(n,e):(function(r,a){const u=qx(r,a),d=oC(u)+oC(r.Ae);return Oy(u)&&Oy(r.Ae)?Bx(d):tv(r.serializer,d)})(n,e)}function mq(n,e,t){return n instanceof Tc?Gx(n,e):n instanceof Ec?Hx(n,e):t}function qx(n,e){return n instanceof Nh?(function(i){return Oy(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class xh extends up{}class Tc extends up{constructor(e){super(),this.elements=e}}function Gx(n,e){const t=zx(e);for(const i of n.elements)t.some((r=>_s(r,i)))||t.push(i);return{arrayValue:{values:t}}}class Ec extends up{constructor(e){super(),this.elements=e}}function Hx(n,e){let t=zx(e);for(const i of n.elements)t=t.filter((r=>!_s(r,i)));return{arrayValue:{values:t}}}class Nh extends up{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function oC(n){return Dt(n.integerValue||n.doubleValue)}function zx(n){return X_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function gq(n,e){return n.field.isEqual(e.field)&&(function(i,r){return i instanceof Tc&&r instanceof Tc||i instanceof Ec&&r instanceof Ec?dl(i.elements,r.elements,_s):i instanceof Nh&&r instanceof Nh?_s(i.Ae,r.Ae):i instanceof xh&&r instanceof xh})(n.transform,e.transform)}class yq{constructor(e,t){this.version=e,this.transformResults=t}}class hs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new hs}static exists(e){return new hs(void 0,e)}static updateTime(e){return new hs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class cp{}function $x(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Kx(n.key,hs.none()):new Pc(n.key,n.data,hs.none());{const t=n.data,i=di.empty();let r=new Qt(pn.comparator);for(let a of e.fields)if(!r.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?i.delete(a):i.set(a,u),r=r.add(a)}return new Yo(n.key,i,new Mi(r.toArray()),hs.none())}}function _q(n,e,t){n instanceof Pc?(function(r,a,u){const d=r.value.clone(),p=lC(r.fieldTransforms,a,u.transformResults);d.setAll(p),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Yo?(function(r,a,u){if(!Xf(r.precondition,a))return void a.convertToUnknownDocument(u.version);const d=lC(r.fieldTransforms,a,u.transformResults),p=a.data;p.setAll(Jx(r)),p.setAll(d),a.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(n,e,t):(function(r,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function cc(n,e,t,i){return n instanceof Pc?(function(a,u,d,p){if(!Xf(a.precondition,u))return d;const h=a.value.clone(),_=uC(a.fieldTransforms,p,u);return h.setAll(_),u.convertToFoundDocument(u.version,h).setHasLocalMutations(),null})(n,e,t,i):n instanceof Yo?(function(a,u,d,p){if(!Xf(a.precondition,u))return d;const h=uC(a.fieldTransforms,p,u),_=u.data;return _.setAll(Jx(a)),_.setAll(h),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((T=>T.field)))})(n,e,t,i):(function(a,u,d){return Xf(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function vq(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),a=qx(i.transform,r||null);a!=null&&(t===null&&(t=di.empty()),t.set(i.field,a))}return t||null}function aC(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&dl(i,r,((a,u)=>gq(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Pc extends cp{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Yo extends cp{constructor(e,t,i,r,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Jx(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function lC(n,e,t){const i=new Map;ot(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let r=0;r<t.length;r++){const a=n[r],u=a.transform,d=e.data.field(a.field);i.set(a.field,mq(u,d,t[r]))}return i}function uC(n,e,t){const i=new Map;for(const r of n){const a=r.transform,u=t.data.field(r.field);i.set(r.field,pq(a,u,e))}return i}class Kx extends cp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Tq extends cp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eq{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const a=this.mutations[r];a.key.isEqual(e.key)&&_q(a,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=cc(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=cc(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Fx();return this.mutations.forEach((r=>{const a=e.get(r.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=t.has(r.key)?null:d;const p=$x(u,d);p!==null&&i.set(r.key,p),u.isValidDocument()||u.convertToNoDocument(Ue.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),je())}isEqual(e){return this.batchId===e.batchId&&dl(this.mutations,e.mutations,((t,i)=>aC(t,i)))&&dl(this.baseMutations,e.baseMutations,((t,i)=>aC(t,i)))}}class nv{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){ot(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=(function(){return uq})();const a=e.mutations;for(let u=0;u<a.length;u++)r=r.insert(a[u].key,i[u].version);return new nv(e,t,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sq{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aq{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gt,et;function wq(n){switch(n){case oe.OK:return Re(64938);case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0;default:return Re(15467,{code:n})}}function Yx(n){if(n===void 0)return Ks("GRPC error has no .code"),oe.UNKNOWN;switch(n){case Gt.OK:return oe.OK;case Gt.CANCELLED:return oe.CANCELLED;case Gt.UNKNOWN:return oe.UNKNOWN;case Gt.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case Gt.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case Gt.INTERNAL:return oe.INTERNAL;case Gt.UNAVAILABLE:return oe.UNAVAILABLE;case Gt.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case Gt.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case Gt.NOT_FOUND:return oe.NOT_FOUND;case Gt.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case Gt.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case Gt.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case Gt.ABORTED:return oe.ABORTED;case Gt.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case Gt.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case Gt.DATA_LOSS:return oe.DATA_LOSS;default:return Re(39323,{code:n})}}(et=Gt||(Gt={}))[et.OK=0]="OK",et[et.CANCELLED=1]="CANCELLED",et[et.UNKNOWN=2]="UNKNOWN",et[et.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",et[et.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",et[et.NOT_FOUND=5]="NOT_FOUND",et[et.ALREADY_EXISTS=6]="ALREADY_EXISTS",et[et.PERMISSION_DENIED=7]="PERMISSION_DENIED",et[et.UNAUTHENTICATED=16]="UNAUTHENTICATED",et[et.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",et[et.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",et[et.ABORTED=10]="ABORTED",et[et.OUT_OF_RANGE=11]="OUT_OF_RANGE",et[et.UNIMPLEMENTED=12]="UNIMPLEMENTED",et[et.INTERNAL=13]="INTERNAL",et[et.UNAVAILABLE=14]="UNAVAILABLE",et[et.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cq(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iq=new Gr([4294967295,4294967295],0);function cC(n){const e=Cq().encode(n),t=new lx;return t.update(e),new Uint8Array(t.digest())}function dC(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Gr([t,i],0),new Gr([r,a],0)]}class iv{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new ec(`Invalid padding: ${t}`);if(i<0)throw new ec(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ec(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new ec(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Gr.fromNumber(this.ge)}ye(e,t,i){let r=e.add(t.multiply(Gr.fromNumber(i)));return r.compare(Iq)===1&&(r=new Gr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=cC(e),[i,r]=dC(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,r,a);if(!this.we(u))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new iv(a,r,t);return i.forEach((d=>u.insert(d))),u}insert(e){if(this.ge===0)return;const t=cC(e),[i,r]=dC(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,r,a);this.be(u)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class ec extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,t,i,r,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,kc.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new dp(Ue.min(),r,new At(Xe),Ys(),je())}}class kc{constructor(e,t,i,r,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new kc(i,t,je(),je(),je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e,t,i,r){this.Se=e,this.removedTargetIds=t,this.key=i,this.De=r}}class Wx{constructor(e,t){this.targetId=e,this.Ce=t}}class Qx{constructor(e,t,i=gn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class fC{constructor(){this.ve=0,this.Fe=hC(),this.Me=gn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=je(),t=je(),i=je();return this.Fe.forEach(((r,a)=>{switch(a){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:Re(38017,{changeType:a})}})),new kc(this.Me,this.xe,e,t,i)}Ke(){this.Oe=!1,this.Fe=hC()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,ot(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class bq{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ys(),this.He=Nf(),this.Je=Nf(),this.Ze=new At(Xe)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Re(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,i=e.Ce.count,r=this.ot(t);if(r){const a=r.target;if(By(a))if(i===0){const u=new we(a.path);this.et(t,u,Tn.newNoDocument(u,Ue.min()))}else ot(i===1,20013,{expectedCount:i});else{const u=this._t(t);if(u!==i){const d=this.ut(e),p=d?this.ct(d,e,u):1;if(p!==0){this.it(t);const h=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:a=0}=t;let u,d;try{u=Kr(i).toUint8Array()}catch(p){if(p instanceof Tx)return Ho("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new iv(u,r,a)}catch(p){return Ho(p instanceof ec?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.ge===0?null:d}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let r=0;return i.forEach((a=>{const u=this.Ge.ht(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.et(t,a,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((a,u)=>{const d=this.ot(u);if(d){if(a.current&&By(d.target)){const p=new we(d.target.path);this.It(p).has(u)||this.Et(u,p)||this.et(u,p,Tn.newNoDocument(p,e))}a.Be&&(t.set(u,a.ke()),a.Ke())}}));let i=je();this.Je.forEach(((a,u)=>{let d=!0;u.forEachWhile((p=>{const h=this.ot(p);return!h||h.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(a))})),this.je.forEach(((a,u)=>u.setReadTime(e)));const r=new dp(e,t,this.Ze,this.je,i);return this.je=Ys(),this.He=Nf(),this.Je=Nf(),this.Ze=new At(Xe),r}Ye(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,i),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.qe(t,1):r.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new fC,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Qt(Xe),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Qt(Xe),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ye("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new fC),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Nf(){return new At(we.comparator)}function hC(){return new At(we.comparator)}const Rq={asc:"ASCENDING",desc:"DESCENDING"},xq={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Nq={and:"AND",or:"OR"};class Mq{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Hy(n,e){return n.useProto3Json||rp(e)?e:{value:e}}function Mh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Xx(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Dq(n,e){return Mh(n,e.toTimestamp())}function ps(n){return ot(!!n,49232),Ue.fromTimestamp((function(t){const i=Jr(t);return new _t(i.seconds,i.nanos)})(n))}function sv(n,e){return zy(n,e).canonicalString()}function zy(n,e){const t=(function(r){return new mt(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function jx(n){const e=mt.fromString(n);return ot(iN(e),10190,{key:e.toString()}),e}function $y(n,e){return sv(n.databaseId,e.path)}function Jg(n,e){const t=jx(e);if(t.get(1)!==n.databaseId.projectId)throw new ge(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ge(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new we(eN(t))}function Zx(n,e){return sv(n.databaseId,e)}function Pq(n){const e=jx(n);return e.length===4?mt.emptyPath():eN(e)}function Jy(n){return new mt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function eN(n){return ot(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function pC(n,e,t){return{name:$y(n,e),fields:t.value.mapValue.fields}}function kq(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Re(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],a=(function(h,_){return h.useProto3Json?(ot(_===void 0||typeof _=="string",58123),gn.fromBase64String(_||"")):(ot(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),gn.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(h){const _=h.code===void 0?oe.UNKNOWN:Yx(h.code);return new ge(_,h.message||"")})(u);t=new Qx(i,r,a,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Jg(n,i.document.name),a=ps(i.document.updateTime),u=i.document.createTime?ps(i.document.createTime):Ue.min(),d=new di({mapValue:{fields:i.document.fields}}),p=Tn.newFoundDocument(r,a,u,d),h=i.targetIds||[],_=i.removedTargetIds||[];t=new jf(h,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Jg(n,i.document),a=i.readTime?ps(i.readTime):Ue.min(),u=Tn.newNoDocument(r,a),d=i.removedTargetIds||[];t=new jf([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Jg(n,i.document),a=i.removedTargetIds||[];t=new jf([],a,r,null)}else{if(!("filter"in e))return Re(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:a}=i,u=new Aq(r,a),d=i.targetId;t=new Wx(d,u)}}return t}function Vq(n,e){let t;if(e instanceof Pc)t={update:pC(n,e.key,e.value)};else if(e instanceof Kx)t={delete:$y(n,e.key)};else if(e instanceof Yo)t={update:pC(n,e.key,e.data),updateMask:zq(e.fieldMask)};else{if(!(e instanceof Tq))return Re(16599,{dt:e.type});t={verify:$y(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(a,u){const d=u.transform;if(d instanceof xh)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Tc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Ec)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Nh)return{fieldPath:u.field.canonicalString(),increment:d.Ae};throw Re(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(r,a){return a.updateTime!==void 0?{updateTime:Dq(r,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Re(27497)})(n,e.precondition)),t}function Uq(n,e){return n&&n.length>0?(ot(e!==void 0,14353),n.map((t=>(function(r,a){let u=r.updateTime?ps(r.updateTime):ps(a);return u.isEqual(Ue.min())&&(u=ps(a)),new yq(u,r.transformResults||[])})(t,e)))):[]}function Lq(n,e){return{documents:[Zx(n,e.path)]}}function Oq(n,e){const t={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=Zx(n,r);const a=(function(h){if(h.length!==0)return nN(Ui.create(h,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(h){if(h.length!==0)return h.map((_=>(function(E){return{field:Qa(E.field),direction:qq(E.dir)}})(_)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=Hy(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:r}}function Fq(n){let e=Pq(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){ot(i===1,65062);const _=t.from[0];_.allDescendants?r=_.collectionId:e=e.child(_.collectionId)}let a=[];t.where&&(a=(function(T){const E=tN(T);return E instanceof Ui&&Nx(E)?E.getFilters():[E]})(t.where));let u=[];t.orderBy&&(u=(function(T){return T.map((E=>(function(M){return new Rh(Xa(M.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(M.direction))})(E)))})(t.orderBy));let d=null;t.limit&&(d=(function(T){let E;return E=typeof T=="object"?T.value:T,rp(E)?null:E})(t.limit));let p=null;t.startAt&&(p=(function(T){const E=!!T.before,C=T.values||[];return new bh(C,E)})(t.startAt));let h=null;return t.endAt&&(h=(function(T){const E=!T.before,C=T.values||[];return new bh(C,E)})(t.endAt)),iq(e,r,u,a,d,"F",p,h)}function Bq(n,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function tN(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Xa(t.unaryFilter.field);return Ht.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Xa(t.unaryFilter.field);return Ht.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Xa(t.unaryFilter.field);return Ht.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Xa(t.unaryFilter.field);return Ht.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Re(61313);default:return Re(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ht.create(Xa(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Re(58110);default:return Re(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ui.create(t.compositeFilter.filters.map((i=>tN(i))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Re(1026)}})(t.compositeFilter.op))})(n):Re(30097,{filter:n})}function qq(n){return Rq[n]}function Gq(n){return xq[n]}function Hq(n){return Nq[n]}function Qa(n){return{fieldPath:n.canonicalString()}}function Xa(n){return pn.fromServerFormat(n.fieldPath)}function nN(n){return n instanceof Ht?(function(t){if(t.op==="=="){if(tC(t.value))return{unaryFilter:{field:Qa(t.field),op:"IS_NAN"}};if(eC(t.value))return{unaryFilter:{field:Qa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(tC(t.value))return{unaryFilter:{field:Qa(t.field),op:"IS_NOT_NAN"}};if(eC(t.value))return{unaryFilter:{field:Qa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qa(t.field),op:Gq(t.op),value:t.value}}})(n):n instanceof Ui?(function(t){const i=t.getFilters().map((r=>nN(r)));return i.length===1?i[0]:{compositeFilter:{op:Hq(t.op),filters:i}}})(n):Re(54877,{filter:n})}function zq(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function iN(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function sN(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,t,i,r,a=Ue.min(),u=Ue.min(),d=gn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new Or(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Or(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Or(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Or(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $q{constructor(e){this.yt=e}}function Jq(n){const e=Fq({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Gy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kq{constructor(){this.Sn=new Yq}addToCollectionParentIndex(e,t){return this.Sn.add(t),ae.resolve()}getCollectionParents(e,t){return ae.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return ae.resolve()}deleteFieldIndex(e,t){return ae.resolve()}deleteAllFieldIndexes(e){return ae.resolve()}createTargetIndexes(e,t){return ae.resolve()}getDocumentsMatchingTarget(e,t){return ae.resolve(null)}getIndexType(e,t){return ae.resolve(0)}getFieldIndexes(e,t){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,t){return ae.resolve($r.min())}getMinOffsetFromCollectionGroup(e,t){return ae.resolve($r.min())}updateCollectionGroup(e,t,i){return ae.resolve()}updateIndexEntries(e,t){return ae.resolve()}}class Yq{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new Qt(mt.comparator),a=!r.has(i);return this.index[t]=r.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Qt(mt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},rN=41943040;class Vn{static withCacheSize(e){return new Vn(e,Vn.DEFAULT_COLLECTION_PERCENTILE,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vn.DEFAULT_COLLECTION_PERCENTILE=10,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vn.DEFAULT=new Vn(rN,Vn.DEFAULT_COLLECTION_PERCENTILE,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vn.DISABLED=new Vn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new pl(0)}static ar(){return new pl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC="LruGarbageCollector",Wq=1048576;function yC([n,e],[t,i]){const r=Xe(n,t);return r===0?Xe(e,i):r}class Qq{constructor(e){this.Pr=e,this.buffer=new Qt(yC),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();yC(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Xq{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){ye(gC,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){bl(t)?ye(gC,"Ignoring IndexedDB error during garbage collection: ",t):await Il(t)}await this.Ar(3e5)}))}}class jq{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return ae.resolve(sp.ce);const i=new Qq(t);return this.Vr.forEachTarget(e,(r=>i.Er(r.sequenceNumber))).next((()=>this.Vr.mr(e,(r=>i.Er(r))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ye("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(mC)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),mC):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let i,r,a,u,d,p,h;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),r=this.params.maximumSequenceNumbersToCollect):r=T,u=Date.now(),this.nthSequenceNumber(e,r)))).next((T=>(i=T,d=Date.now(),this.removeTargets(e,i,t)))).next((T=>(a=T,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(h=Date.now(),Ya()<=Qe.DEBUG&&ye("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-_}ms
	Determined least recently used ${r} in `+(d-u)+`ms
	Removed ${a} targets in `+(p-d)+`ms
	Removed ${T} documents in `+(h-p)+`ms
Total Duration: ${h-_}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:a,documentsRemoved:T}))))}}function Zq(n,e){return new jq(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e5{constructor(){this.changes=new Ko((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Tn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ae.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n5{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(i=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(i!==null&&cc(i.mutation,r,Mi.empty(),_t.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,je()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=je()){const r=Uo();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,i).next((a=>{let u=Zu();return a.forEach(((d,p)=>{u=u.insert(d,p.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=Uo();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,je())))}populateOverlays(e,t,i){const r=[];return i.forEach((a=>{t.has(a)||r.push(a)})),this.documentOverlayCache.getOverlays(e,r).next((a=>{a.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,i,r){let a=Ys();const u=uc(),d=(function(){return uc()})();return t.forEach(((p,h)=>{const _=i.get(h.key);r.has(h.key)&&(_===void 0||_.mutation instanceof Yo)?a=a.insert(h.key,h):_!==void 0?(u.set(h.key,_.mutation.getFieldMask()),cc(_.mutation,h,_.mutation.getFieldMask(),_t.now())):u.set(h.key,Mi.empty())})),this.recalculateAndSaveOverlays(e,a).next((p=>(p.forEach(((h,_)=>u.set(h,_))),t.forEach(((h,_)=>d.set(h,new t5(_,u.get(h)??null)))),d)))}recalculateAndSaveOverlays(e,t){const i=uc();let r=new At(((u,d)=>u-d)),a=je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((p=>{const h=t.get(p);if(h===null)return;let _=i.get(p)||Mi.empty();_=d.applyToLocalView(h,_),i.set(p,_);const T=(r.get(d.batchId)||je()).add(p);r=r.insert(d.batchId,T)}))})).next((()=>{const u=[],d=r.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),h=p.key,_=p.value,T=Fx();_.forEach((E=>{if(!a.has(E)){const C=$x(t.get(E),i.get(E));C!==null&&T.set(E,C),a=a.add(E)}})),u.push(this.documentOverlayCache.saveOverlays(e,h,T))}return ae.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,r){return sq(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):kx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next((a=>{const u=r-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-a.size):ae.resolve(Uo());let d=gc,p=a;return u.next((h=>ae.forEach(h,((_,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),a.get(_)?ae.resolve():this.remoteDocumentCache.getEntry(e,_).next((E=>{p=p.insert(_,E)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,p,h,je()))).next((_=>({batchId:d,changes:Ox(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new we(t)).next((i=>{let r=Zu();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){const a=t.collectionGroup;let u=Zu();return this.indexManager.getCollectionParents(e,a).next((d=>ae.forEach(d,(p=>{const h=(function(T,E){return new Dc(E,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,p.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,i,r).next((_=>{_.forEach(((T,E)=>{u=u.insert(T,E)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,r){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,r)))).next((u=>{a.forEach(((p,h)=>{const _=h.getKey();u.get(_)===null&&(u=u.insert(_,Tn.newInvalidDocument(_)))}));let d=Zu();return u.forEach(((p,h)=>{const _=a.get(p);_!==void 0&&cc(_.mutation,h,Mi.empty(),_t.now()),lp(t,h)&&(d=d.insert(p,h))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i5{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return ae.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:ps(r.createTime)}})(t)),ae.resolve()}getNamedQuery(e,t){return ae.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(r){return{name:r.name,query:Jq(r.bundledQuery),readTime:ps(r.readTime)}})(t)),ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5{constructor(){this.overlays=new At(we.comparator),this.Lr=new Map}getOverlay(e,t){return ae.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Uo();return ae.forEach(t,(r=>this.getOverlay(e,r).next((a=>{a!==null&&i.set(r,a)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((r,a)=>{this.bt(e,t,a)})),ae.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.Lr.get(i);return r!==void 0&&(r.forEach((a=>this.overlays=this.overlays.remove(a))),this.Lr.delete(i)),ae.resolve()}getOverlaysForCollection(e,t,i){const r=Uo(),a=t.length+1,u=new we(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const p=d.getNext().value,h=p.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===a&&p.largestBatchId>i&&r.set(p.getKey(),p)}return ae.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let a=new At(((h,_)=>h-_));const u=this.overlays.getIterator();for(;u.hasNext();){const h=u.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>i){let _=a.get(h.largestBatchId);_===null&&(_=Uo(),a=a.insert(h.largestBatchId,_)),_.set(h.getKey(),h)}}const d=Uo(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((h,_)=>d.set(h,_))),!(d.size()>=r)););return ae.resolve(d)}bt(e,t,i){const r=this.overlays.get(i.key);if(r!==null){const u=this.Lr.get(r.largestBatchId).delete(i.key);this.Lr.set(r.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new Sq(t,i));let a=this.Lr.get(t);a===void 0&&(a=je(),this.Lr.set(t,a)),this.Lr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{constructor(){this.sessionToken=gn.EMPTY_BYTE_STRING}getSessionToken(e){return ae.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ae.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(){this.kr=new Qt(tn.Kr),this.qr=new Qt(tn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const i=new tn(e,t);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new tn(e,t))}Qr(e,t){e.forEach((i=>this.removeReference(i,t)))}Gr(e){const t=new we(new mt([])),i=new tn(t,e),r=new tn(t,e+1),a=[];return this.qr.forEachInRange([i,r],(u=>{this.Wr(u),a.push(u.key)})),a}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new we(new mt([])),i=new tn(t,e),r=new tn(t,e+1);let a=je();return this.qr.forEachInRange([i,r],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new tn(e,0),i=this.kr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class tn{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return we.comparator(e.key,t.key)||Xe(e.Hr,t.Hr)}static Ur(e,t){return Xe(e.Hr,t.Hr)||we.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Qt(tn.Kr)}checkEmpty(e){return ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){const a=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new Eq(a,t,i,r);this.mutationQueue.push(u);for(const d of r)this.Jr=this.Jr.add(new tn(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ae.resolve(u)}lookupMutationBatch(e,t){return ae.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=this.Xr(i),a=r<0?0:r;return ae.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(this.mutationQueue.length===0?W_:this.Yn-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new tn(t,0),r=new tn(t,Number.POSITIVE_INFINITY),a=[];return this.Jr.forEachInRange([i,r],(u=>{const d=this.Zr(u.Hr);a.push(d)})),ae.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Qt(Xe);return t.forEach((r=>{const a=new tn(r,0),u=new tn(r,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([a,u],(d=>{i=i.add(d.Hr)}))})),ae.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let a=i;we.isDocumentKey(a)||(a=a.child(""));const u=new tn(new we(a),0);let d=new Qt(Xe);return this.Jr.forEachWhile((p=>{const h=p.key.path;return!!i.isPrefixOf(h)&&(h.length===r&&(d=d.add(p.Hr)),!0)}),u),ae.resolve(this.Yr(d))}Yr(e){const t=[];return e.forEach((i=>{const r=this.Zr(i);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){ot(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return ae.forEach(t.mutations,(r=>{const a=new tn(r.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,t){const i=new tn(t,0),r=this.Jr.firstAfterOrEqual(i);return ae.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ae.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a5{constructor(e){this.ti=e,this.docs=(function(){return new At(we.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),a=r?r.size:0,u=this.ti(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ae.resolve(i?i.document.mutableCopy():Tn.newInvalidDocument(t))}getEntries(e,t){let i=Ys();return t.forEach((r=>{const a=this.docs.get(r);i=i.insert(r,a?a.document.mutableCopy():Tn.newInvalidDocument(r))})),ae.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let a=Ys();const u=t.path,d=new we(u.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:h,value:{document:_}}=p.getNext();if(!u.isPrefixOf(h.path))break;h.path.length>u.length+1||kB(PB(_),i)<=0||(r.has(_.key)||lp(t,_))&&(a=a.insert(_.key,_.mutableCopy()))}return ae.resolve(a)}getAllFromCollectionGroup(e,t,i,r){Re(9500)}ni(e,t){return ae.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new l5(this)}getSize(e){return ae.resolve(this.size)}}class l5 extends e5{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,r)=>{r.isValidDocument()?t.push(this.Mr.addEntry(e,r)):this.Mr.removeEntry(i)})),ae.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u5{constructor(e){this.persistence=e,this.ri=new Ko((t=>j_(t)),Z_),this.lastRemoteSnapshotVersion=Ue.min(),this.highestTargetId=0,this.ii=0,this.si=new rv,this.targetCount=0,this.oi=pl._r()}forEachTarget(e,t){return this.ri.forEach(((i,r)=>t(r))),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ii&&(this.ii=t),ae.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new pl(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,ae.resolve()}updateTargetData(e,t){return this.lr(t),ae.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,t,i){let r=0;const a=[];return this.ri.forEach(((u,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.ri.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),r++)})),ae.waitFor(a).next((()=>r))}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,t){const i=this.ri.get(t)||null;return ae.resolve(i)}addMatchingKeys(e,t,i){return this.si.$r(t,i),ae.resolve()}removeMatchingKeys(e,t,i){this.si.Qr(t,i);const r=this.persistence.referenceDelegate,a=[];return r&&t.forEach((u=>{a.push(r.markPotentiallyOrphaned(e,u))})),ae.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),ae.resolve()}getMatchingKeysForTargetId(e,t){const i=this.si.jr(t);return ae.resolve(i)}containsKey(e,t){return ae.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e,t){this._i={},this.overlays={},this.ai=new sp(0),this.ui=!1,this.ui=!0,this.ci=new r5,this.referenceDelegate=e(this),this.li=new u5(this),this.indexManager=new Kq,this.remoteDocumentCache=(function(r){return new a5(r)})((i=>this.referenceDelegate.hi(i))),this.serializer=new $q(t),this.Pi=new i5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new s5,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this._i[e.toKey()];return i||(i=new o5(t,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,i){ye("MemoryPersistence","Starting transaction:",e);const r=new c5(this.ai.next());return this.referenceDelegate.Ti(),i(r).next((a=>this.referenceDelegate.Ii(r).next((()=>a)))).toPromise().then((a=>(r.raiseOnCommittedEvent(),a)))}Ei(e,t){return ae.or(Object.values(this._i).map((i=>()=>i.containsKey(e,t))))}}class c5 extends UB{constructor(e){super(),this.currentSequenceNumber=e}}class ov{constructor(e){this.persistence=e,this.Ri=new rv,this.Ai=null}static Vi(e){return new ov(e)}get di(){if(this.Ai)return this.Ai;throw Re(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.di.delete(i.toString()),ae.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.di.add(i.toString()),ae.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),ae.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((r=>this.di.add(r.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((a=>this.di.add(a.toString())))})).next((()=>i.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.di,(i=>{const r=we.fromPath(i);return this.mi(e,r).next((a=>{a||t.removeEntry(r,Ue.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return ae.or([()=>ae.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Dh{constructor(e,t){this.persistence=e,this.fi=new Ko((i=>FB(i.path)),((i,r)=>i.isEqual(r))),this.garbageCollector=Zq(this,t)}static Vi(e,t){return new Dh(e,t)}Ti(){}Ii(e){return ae.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((r=>i+r))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}mr(e,t){return ae.forEach(this.fi,((i,r)=>this.wr(e,i,r).next((a=>a?ae.resolve():t(r)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const r=this.persistence.getRemoteDocumentCache(),a=r.newChangeBuffer();return r.ni(e,(u=>this.wr(e,u,t).next((d=>{d||(i++,a.removeEntry(u,Ue.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),ae.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),ae.resolve()}removeReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),ae.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),ae.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Wf(e.data.value)),t}wr(e,t,i){return ae.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.fi.get(t);return ae.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Ts=i,this.Is=r}static Es(e,t){let i=je(),r=je();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}return new av(e,t.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return Z4()?8:LB(En())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,r){const a={result:null};return this.gs(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ps(e,t,r,i).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new d5;return this.ys(e,t,u).next((d=>{if(a.result=d,this.As)return this.ws(e,t,u,d.size)}))})).next((()=>a.result))}ws(e,t,i,r){return i.documentReadCount<this.Vs?(Ya()<=Qe.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",Wa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ae.resolve()):(Ya()<=Qe.DEBUG&&ye("QueryEngine","Query:",Wa(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.ds*r?(Ya()<=Qe.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",Wa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,fs(t))):ae.resolve())}gs(e,t){if(rC(t))return ae.resolve(null);let i=fs(t);return this.indexManager.getIndexType(e,i).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=Gy(t,null,"F"),i=fs(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const u=je(...a);return this.fs.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,i).next((p=>{const h=this.bs(t,d);return this.Ss(t,h,u,p.readTime)?this.gs(e,Gy(t,null,"F")):this.Ds(e,h,t,p)}))))})))))}ps(e,t,i,r){return rC(t)||r.isEqual(Ue.min())?ae.resolve(null):this.fs.getDocuments(e,i).next((a=>{const u=this.bs(t,a);return this.Ss(t,u,i,r)?ae.resolve(null):(Ya()<=Qe.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Wa(t)),this.Ds(e,u,t,DB(r,gc)).next((d=>d)))}))}bs(e,t){let i=new Qt(Ux(e));return t.forEach(((r,a)=>{lp(e,a)&&(i=i.add(a))})),i}Ss(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}ys(e,t,i){return Ya()<=Qe.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",Wa(t)),this.fs.getDocumentsMatchingQuery(e,t,$r.min(),i)}Ds(e,t,i,r){return this.fs.getDocumentsMatchingQuery(e,i,r).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lv="LocalStore",h5=3e8;class p5{constructor(e,t,i,r){this.persistence=e,this.Cs=t,this.serializer=r,this.vs=new At(Xe),this.Fs=new Ko((a=>j_(a)),Z_),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new n5(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function m5(n,e,t,i){return new p5(n,e,t,i)}async function aN(n,e){const t=Oe(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next((a=>(r=a,t.Os(e),t.mutationQueue.getAllMutationBatches(i)))).next((a=>{const u=[],d=[];let p=je();for(const h of r){u.push(h.batchId);for(const _ of h.mutations)p=p.add(_.key)}for(const h of a){d.push(h.batchId);for(const _ of h.mutations)p=p.add(_.key)}return t.localDocuments.getDocuments(i,p).next((h=>({Ns:h,removedBatchIds:u,addedBatchIds:d})))}))}))}function g5(n,e){const t=Oe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const r=e.batch.keys(),a=t.xs.newChangeBuffer({trackRemovals:!0});return(function(d,p,h,_){const T=h.batch,E=T.keys();let C=ae.resolve();return E.forEach((M=>{C=C.next((()=>_.getEntry(p,M))).next((U=>{const P=h.docVersions.get(M);ot(P!==null,48541),U.version.compareTo(P)<0&&(T.applyToRemoteDocument(U,h),U.isValidDocument()&&(U.setReadTime(h.commitVersion),_.addEntry(U)))}))})),C.next((()=>d.mutationQueue.removeMutationBatch(p,T)))})(t,i,e,a).next((()=>a.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let p=je();for(let h=0;h<d.mutationResults.length;++h)d.mutationResults[h].transformResults.length>0&&(p=p.add(d.batch.mutations[h].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(i,r)))}))}function lN(n){const e=Oe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function y5(n,e){const t=Oe(n),i=e.snapshotVersion;let r=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.xs.newChangeBuffer({trackRemovals:!0});r=t.vs;const d=[];e.targetChanges.forEach(((_,T)=>{const E=r.get(T);if(!E)return;d.push(t.li.removeMatchingKeys(a,_.removedDocuments,T).next((()=>t.li.addMatchingKeys(a,_.addedDocuments,T))));let C=E.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(T)!==null?C=C.withResumeToken(gn.EMPTY_BYTE_STRING,Ue.min()).withLastLimboFreeSnapshotVersion(Ue.min()):_.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(_.resumeToken,i)),r=r.insert(T,C),(function(U,P,$){return U.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=h5?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0})(E,C,_)&&d.push(t.li.updateTargetData(a,C))}));let p=Ys(),h=je();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,_))})),d.push(_5(a,u,e.documentUpdates).next((_=>{p=_.Bs,h=_.Ls}))),!i.isEqual(Ue.min())){const _=t.li.getLastRemoteSnapshotVersion(a).next((T=>t.li.setTargetsMetadata(a,a.currentSequenceNumber,i)));d.push(_)}return ae.waitFor(d).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,p,h))).next((()=>p))})).then((a=>(t.vs=r,a)))}function _5(n,e,t){let i=je(),r=je();return t.forEach((a=>i=i.add(a))),e.getEntries(n,i).next((a=>{let u=Ys();return t.forEach(((d,p)=>{const h=a.get(d);p.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(d)),p.isNoDocument()&&p.version.isEqual(Ue.min())?(e.removeEntry(d,p.readTime),u=u.insert(d,p)):!h.isValidDocument()||p.version.compareTo(h.version)>0||p.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(p),u=u.insert(d,p)):ye(lv,"Ignoring outdated watch update for ",d,". Current version:",h.version," Watch version:",p.version)})),{Bs:u,Ls:r}}))}function v5(n,e){const t=Oe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=W_),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function T5(n,e){const t=Oe(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let r;return t.li.getTargetData(i,e).next((a=>a?(r=a,ae.resolve(r)):t.li.allocateTargetId(i).next((u=>(r=new Or(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.li.addTargetData(i,r).next((()=>r)))))))})).then((i=>{const r=t.vs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.vs=t.vs.insert(i.targetId,i),t.Fs.set(e,i.targetId)),i}))}async function Ky(n,e,t){const i=Oe(n),r=i.vs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,(u=>i.persistence.referenceDelegate.removeTarget(u,r)))}catch(u){if(!bl(u))throw u;ye(lv,`Failed to update sequence numbers for target ${e}: ${u}`)}i.vs=i.vs.remove(e),i.Fs.delete(r.target)}function _C(n,e,t){const i=Oe(n);let r=Ue.min(),a=je();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(p,h,_){const T=Oe(p),E=T.Fs.get(_);return E!==void 0?ae.resolve(T.vs.get(E)):T.li.getTargetData(h,_)})(i,u,fs(e)).next((d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(u,d.targetId).next((p=>{a=p}))})).next((()=>i.Cs.getDocumentsMatchingQuery(u,e,t?r:Ue.min(),t?a:je()))).next((d=>(E5(i,oq(e),d),{documents:d,ks:a})))))}function E5(n,e,t){let i=n.Ms.get(e)||Ue.min();t.forEach(((r,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),n.Ms.set(e,i)}class vC{constructor(){this.activeTargetIds=fq()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class S5{constructor(){this.vo=new vC,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,i){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new vC,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A5{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC="ConnectivityMonitor";class EC{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ye(TC,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){ye(TC,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mf=null;function Yy(){return Mf===null?Mf=(function(){return 268435456+Math.round(2147483648*Math.random())})():Mf++,"0x"+Mf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kg="RestConnection",w5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class C5{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${i}/databases/${r}`,this.$o=this.databaseId.database===Ch?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Wo(e,t,i,r,a){const u=Yy(),d=this.Qo(e,t.toUriEncodedString());ye(Kg,`Sending RPC '${e}' ${u}:`,d,i);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(p,r,a);const{host:h}=new URL(d),_=Sl(h);return this.zo(e,d,p,i,_).then((T=>(ye(Kg,`Received RPC '${e}' ${u}: `,T),T)),(T=>{throw Ho(Kg,`RPC '${e}' ${u} failed with error: `,T,"url: ",d,"request:",i),T}))}jo(e,t,i,r,a,u){return this.Wo(e,t,i,r,a)}Go(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Cl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,a)=>e[a]=r)),i&&i.headers.forEach(((r,a)=>e[a]=r))}Qo(e,t){const i=w5[e];let r=`${this.qo}/v1/${t}:${i}`;return this.databaseInfo.apiKey&&(r=`${r}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),r}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I5{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _n="WebChannelConnection",Bu=(n,e,t)=>{n.listen(e,(i=>{try{t(i)}catch(r){setTimeout((()=>{throw r}),0)}}))};class rl extends C5{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!rl.c_){const e=fx();Bu(e,dx.STAT_EVENT,(t=>{t.stat===Vy.PROXY?ye(_n,"STAT_EVENT: detected buffering proxy"):t.stat===Vy.NOPROXY&&ye(_n,"STAT_EVENT: detected no buffering proxy")})),rl.c_=!0}}zo(e,t,i,r,a){const u=Yy();return new Promise(((d,p)=>{const h=new ux;h.setWithCredentials(!0),h.listenOnce(cx.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Yf.NO_ERROR:const T=h.getResponseJson();ye(_n,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(T)),d(T);break;case Yf.TIMEOUT:ye(_n,`RPC '${e}' ${u} timed out`),p(new ge(oe.DEADLINE_EXCEEDED,"Request time out"));break;case Yf.HTTP_ERROR:const E=h.getStatus();if(ye(_n,`RPC '${e}' ${u} failed with status:`,E,"response text:",h.getResponseText()),E>0){let C=h.getResponseJson();Array.isArray(C)&&(C=C[0]);const M=C==null?void 0:C.error;if(M&&M.status&&M.message){const U=(function($){const H=$.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(H)>=0?H:oe.UNKNOWN})(M.status);p(new ge(U,M.message))}else p(new ge(oe.UNKNOWN,"Server responded with status "+h.getStatus()))}else p(new ge(oe.UNAVAILABLE,"Connection failed."));break;default:Re(9055,{l_:e,streamId:u,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{ye(_n,`RPC '${e}' ${u} completed.`)}}));const _=JSON.stringify(r);ye(_n,`RPC '${e}' ${u} sending request:`,r),h.send(t,"POST",_,i,15)}))}T_(e,t,i){const r=Yy(),a=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=this.createWebChannelTransport(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Go(d.initMessageHeaders,t,i),d.encodeInitMessageHeaders=!0;const h=a.join("");ye(_n,`Creating RPC '${e}' stream ${r}: ${h}`,d);const _=u.createWebChannel(h,d);this.I_(_);let T=!1,E=!1;const C=new I5({Ho:M=>{E?ye(_n,`Not sending because RPC '${e}' stream ${r} is closed:`,M):(T||(ye(_n,`Opening RPC '${e}' stream ${r} transport.`),_.open(),T=!0),ye(_n,`RPC '${e}' stream ${r} sending:`,M),_.send(M))},Jo:()=>_.close()});return Bu(_,ju.EventType.OPEN,(()=>{E||(ye(_n,`RPC '${e}' stream ${r} transport opened.`),C.i_())})),Bu(_,ju.EventType.CLOSE,(()=>{E||(E=!0,ye(_n,`RPC '${e}' stream ${r} transport closed`),C.o_(),this.E_(_))})),Bu(_,ju.EventType.ERROR,(M=>{E||(E=!0,Ho(_n,`RPC '${e}' stream ${r} transport errored. Name:`,M.name,"Message:",M.message),C.o_(new ge(oe.UNAVAILABLE,"The operation could not be completed")))})),Bu(_,ju.EventType.MESSAGE,(M=>{var U;if(!E){const P=M.data[0];ot(!!P,16349);const $=P,H=($==null?void 0:$.error)||((U=$[0])==null?void 0:U.error);if(H){ye(_n,`RPC '${e}' stream ${r} received error:`,H);const z=H.status;let X=(function(N){const D=Gt[N];if(D!==void 0)return Yx(D)})(z),ue=H.message;z==="NOT_FOUND"&&ue.includes("database")&&ue.includes("does not exist")&&ue.includes(this.databaseId.database)&&Ho(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),X===void 0&&(X=oe.INTERNAL,ue="Unknown error status: "+z+" with message "+H.message),E=!0,C.o_(new ge(X,ue)),_.close()}else ye(_n,`RPC '${e}' stream ${r} received:`,P),C.__(P)}})),rl.u_(),setTimeout((()=>{C.s_()}),0),C}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,i){super.Go(e,t,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return hx()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b5(n){return new rl(n)}function Yg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fp(n){return new Mq(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rl.c_=!1;class uN{constructor(e,t,i=1e3,r=1.5,a=6e4){this.Ci=e,this.timerId=t,this.R_=i,this.A_=r,this.V_=a,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-i);r>0&&ye("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC="PersistentStream";class cN{constructor(e,t,i,r,a,u,d,p){this.Ci=e,this.b_=i,this.S_=r,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new uN(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===oe.RESOURCE_EXHAUSTED?(Ks(t.toString()),Ks("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,r])=>{this.D_===t&&this.G_(i,r)}),(i=>{e((()=>{const r=new ge(oe.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)}))}))}G_(e,t){const i=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((r=>{i((()=>this.z_(r)))})),this.stream.onMessage((r=>{i((()=>++this.F_==1?this.H_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ye(SC,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(ye(SC,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class R5 extends cN{constructor(e,t,i,r,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,u),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=kq(this.serializer,e),i=(function(a){if(!("targetChange"in a))return Ue.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Ue.min():u.readTime?ps(u.readTime):Ue.min()})(e);return this.listener.J_(t,i)}Z_(e){const t={};t.database=Jy(this.serializer),t.addTarget=(function(a,u){let d;const p=u.target;if(d=By(p)?{documents:Lq(a,p)}:{query:Oq(a,p).ft},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=Xx(a,u.resumeToken);const h=Hy(a,u.expectedCount);h!==null&&(d.expectedCount=h)}else if(u.snapshotVersion.compareTo(Ue.min())>0){d.readTime=Mh(a,u.snapshotVersion.toTimestamp());const h=Hy(a,u.expectedCount);h!==null&&(d.expectedCount=h)}return d})(this.serializer,e);const i=Bq(this.serializer,e);i&&(t.labels=i),this.K_(t)}X_(e){const t={};t.database=Jy(this.serializer),t.removeTarget=e,this.K_(t)}}class x5 extends cN{constructor(e,t,i,r,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,u),this.serializer=a}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return ot(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ot(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ot(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=Uq(e.writeResults,e.commitTime),i=ps(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Jy(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>Vq(this.serializer,i)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N5{}class M5 extends N5{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new ge(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Wo(e,zy(t,i),r,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ge(oe.UNKNOWN,a.toString())}))}jo(e,t,i,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.jo(e,zy(t,i),r,u,d,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ge(oe.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function D5(n,e,t,i){return new M5(n,e,t,i)}class P5{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ks(t),this.aa=!1):ye("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo="RemoteStore";class k5{constructor(e,t,i,r,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=a,this.Aa.Mo((u=>{i.enqueueAndForget((async()=>{Wo(this)&&(ye(zo,"Restarting streams for network reachability change."),await(async function(p){const h=Oe(p);h.Ea.add(4),await Vc(h),h.Va.set("Unknown"),h.Ea.delete(4),await hp(h)})(this))}))})),this.Va=new P5(i,r)}}async function hp(n){if(Wo(n))for(const e of n.Ra)await e(!0)}async function Vc(n){for(const e of n.Ra)await e(!1)}function dN(n,e){const t=Oe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),fv(t)?dv(t):Rl(t).O_()&&cv(t,e))}function uv(n,e){const t=Oe(n),i=Rl(t);t.Ia.delete(e),i.O_()&&fN(t,e),t.Ia.size===0&&(i.O_()?i.L_():Wo(t)&&t.Va.set("Unknown"))}function cv(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ue.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Rl(n).Z_(e)}function fN(n,e){n.da.$e(e),Rl(n).X_(e)}function dv(n){n.da=new bq({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Rl(n).start(),n.Va.ua()}function fv(n){return Wo(n)&&!Rl(n).x_()&&n.Ia.size>0}function Wo(n){return Oe(n).Ea.size===0}function hN(n){n.da=void 0}async function V5(n){n.Va.set("Online")}async function U5(n){n.Ia.forEach(((e,t)=>{cv(n,e)}))}async function L5(n,e){hN(n),fv(n)?(n.Va.ha(e),dv(n)):n.Va.set("Unknown")}async function O5(n,e,t){if(n.Va.set("Online"),e instanceof Qx&&e.state===2&&e.cause)try{await(async function(r,a){const u=a.cause;for(const d of a.targetIds)r.Ia.has(d)&&(await r.remoteSyncer.rejectListen(d,u),r.Ia.delete(d),r.da.removeTarget(d))})(n,e)}catch(i){ye(zo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Ph(n,i)}else if(e instanceof jf?n.da.Xe(e):e instanceof Wx?n.da.st(e):n.da.tt(e),!t.isEqual(Ue.min()))try{const i=await lN(n.localStore);t.compareTo(i)>=0&&await(function(a,u){const d=a.da.Tt(u);return d.targetChanges.forEach(((p,h)=>{if(p.resumeToken.approximateByteSize()>0){const _=a.Ia.get(h);_&&a.Ia.set(h,_.withResumeToken(p.resumeToken,u))}})),d.targetMismatches.forEach(((p,h)=>{const _=a.Ia.get(p);if(!_)return;a.Ia.set(p,_.withResumeToken(gn.EMPTY_BYTE_STRING,_.snapshotVersion)),fN(a,p);const T=new Or(_.target,p,h,_.sequenceNumber);cv(a,T)})),a.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(i){ye(zo,"Failed to raise snapshot:",i),await Ph(n,i)}}async function Ph(n,e,t){if(!bl(e))throw e;n.Ea.add(1),await Vc(n),n.Va.set("Offline"),t||(t=()=>lN(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ye(zo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await hp(n)}))}function pN(n,e){return e().catch((t=>Ph(n,t,e)))}async function pp(n){const e=Oe(n),t=Wr(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:W_;for(;F5(e);)try{const r=await v5(e.localStore,i);if(r===null){e.Ta.length===0&&t.L_();break}i=r.batchId,B5(e,r)}catch(r){await Ph(e,r)}mN(e)&&gN(e)}function F5(n){return Wo(n)&&n.Ta.length<10}function B5(n,e){n.Ta.push(e);const t=Wr(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function mN(n){return Wo(n)&&!Wr(n).x_()&&n.Ta.length>0}function gN(n){Wr(n).start()}async function q5(n){Wr(n).ra()}async function G5(n){const e=Wr(n);for(const t of n.Ta)e.ea(t.mutations)}async function H5(n,e,t){const i=n.Ta.shift(),r=nv.from(i,e,t);await pN(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await pp(n)}async function z5(n,e){e&&Wr(n).Y_&&await(async function(i,r){if((function(u){return wq(u)&&u!==oe.ABORTED})(r.code)){const a=i.Ta.shift();Wr(i).B_(),await pN(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,r))),await pp(i)}})(n,e),mN(n)&&gN(n)}async function AC(n,e){const t=Oe(n);t.asyncQueue.verifyOperationInProgress(),ye(zo,"RemoteStore received new credentials");const i=Wo(t);t.Ea.add(3),await Vc(t),i&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await hp(t)}async function $5(n,e){const t=Oe(n);e?(t.Ea.delete(2),await hp(t)):e||(t.Ea.add(2),await Vc(t),t.Va.set("Unknown"))}function Rl(n){return n.ma||(n.ma=(function(t,i,r){const a=Oe(t);return a.sa(),new R5(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)})(n.datastore,n.asyncQueue,{Zo:V5.bind(null,n),Yo:U5.bind(null,n),t_:L5.bind(null,n),J_:O5.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),fv(n)?dv(n):n.Va.set("Unknown")):(await n.ma.stop(),hN(n))}))),n.ma}function Wr(n){return n.fa||(n.fa=(function(t,i,r){const a=Oe(t);return a.sa(),new x5(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:q5.bind(null,n),t_:z5.bind(null,n),ta:G5.bind(null,n),na:H5.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await pp(n)):(await n.fa.stop(),n.Ta.length>0&&(ye(zo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e,t,i,r,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=a,this.deferred=new Hs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,a){const u=Date.now()+i,d=new hv(e,t,u,r,a);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pv(n,e){if(Ks("AsyncQueue",`${e}: ${n}`),bl(n))return new ge(oe.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{static emptySet(e){return new ol(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||we.comparator(t.key,i.key):(t,i)=>we.comparator(t.key,i.key),this.keyedMap=Zu(),this.sortedSet=new At(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ol)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,a=i.getNext().key;if(!r.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new ol;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(){this.ga=new At(we.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Re(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class ml{constructor(e,t,i,r,a,u,d,p,h){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=h}static fromInitialDocuments(e,t,i,r,a){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new ml(e,t,ol.emptySet(t),u,i,r,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ap(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J5{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class K5{constructor(){this.queries=CC(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const r=Oe(t),a=r.queries;r.queries=CC(),a.forEach(((u,d)=>{for(const p of d.ba)p.onError(i)}))})(this,new ge(oe.ABORTED,"Firestore shutting down"))}}function CC(){return new Ko((n=>Vx(n)),ap)}async function yN(n,e){const t=Oe(n);let i=3;const r=e.query;let a=t.queries.get(r);a?!a.Sa()&&e.Da()&&(i=2):(a=new J5,i=e.Da()?0:1);try{switch(i){case 0:a.wa=await t.onListen(r,!0);break;case 1:a.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(u){const d=pv(u,`Initialization of query '${Wa(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,a),a.ba.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&mv(t)}async function _N(n,e){const t=Oe(n),i=e.query;let r=3;const a=t.queries.get(i);if(a){const u=a.ba.indexOf(e);u>=0&&(a.ba.splice(u,1),a.ba.length===0?r=e.Da()?0:1:!a.Sa()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function Y5(n,e){const t=Oe(n);let i=!1;for(const r of e){const a=r.query,u=t.queries.get(a);if(u){for(const d of u.ba)d.Fa(r)&&(i=!0);u.wa=r}}i&&mv(t)}function W5(n,e,t){const i=Oe(n),r=i.queries.get(e);if(r)for(const a of r.ba)a.onError(t);i.queries.delete(e)}function mv(n){n.Ca.forEach((e=>{e.next()}))}var Wy,IC;(IC=Wy||(Wy={})).Ma="default",IC.Cache="cache";class vN{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new ml(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ml.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Wy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e){this.key=e}}class EN{constructor(e){this.key=e}}class Q5{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=je(),this.mutatedKeys=je(),this.eu=Ux(e),this.tu=new ol(this.eu)}get nu(){return this.Za}ru(e,t){const i=t?t.iu:new wC,r=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,u=r,d=!1;const p=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((_,T)=>{const E=r.get(_),C=lp(this.query,T)?T:null,M=!!E&&this.mutatedKeys.has(E.key),U=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let P=!1;E&&C?E.data.isEqual(C.data)?M!==U&&(i.track({type:3,doc:C}),P=!0):this.su(E,C)||(i.track({type:2,doc:C}),P=!0,(p&&this.eu(C,p)>0||h&&this.eu(C,h)<0)&&(d=!0)):!E&&C?(i.track({type:0,doc:C}),P=!0):E&&!C&&(i.track({type:1,doc:E}),P=!0,(p||h)&&(d=!0)),P&&(C?(u=u.add(C),a=U?a.add(_):a.delete(_)):(u=u.delete(_),a=a.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),a=a.delete(_.key),i.track({type:1,doc:_})}return{tu:u,iu:i,Ss:d,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((_,T)=>(function(C,M){const U=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re(20277,{Vt:P})}};return U(C)-U(M)})(_.type,T.type)||this.eu(_.doc,T.doc))),this.ou(i),r=r??!1;const d=t&&!r?this._u():[],p=this.Ya.size===0&&this.current&&!r?1:0,h=p!==this.Xa;return this.Xa=p,u.length!==0||h?{snapshot:new ml(this.query,e.tu,a,u,e.mutatedKeys,p===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new wC,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=je(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const t=[];return e.forEach((i=>{this.Ya.has(i)||t.push(new EN(i))})),this.Ya.forEach((i=>{e.has(i)||t.push(new TN(i))})),t}cu(e){this.Za=e.ks,this.Ya=je();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ml.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const gv="SyncEngine";class X5{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class j5{constructor(e){this.key=e,this.hu=!1}}class Z5{constructor(e,t,i,r,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Ko((d=>Vx(d)),ap),this.Iu=new Map,this.Eu=new Set,this.Ru=new At(we.comparator),this.Au=new Map,this.Vu=new rv,this.du={},this.mu=new Map,this.fu=pl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function eG(n,e,t=!0){const i=bN(n);let r;const a=i.Tu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),r=a.view.lu()):r=await SN(i,e,t,!0),r}async function tG(n,e){const t=bN(n);await SN(t,e,!0,!1)}async function SN(n,e,t,i){const r=await T5(n.localStore,fs(e)),a=r.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let d;return i&&(d=await nG(n,e,a,u==="current",r.resumeToken)),n.isPrimaryClient&&t&&dN(n.remoteStore,r),d}async function nG(n,e,t,i,r){n.pu=(T,E,C)=>(async function(U,P,$,H){let z=P.view.ru($);z.Ss&&(z=await _C(U.localStore,P.query,!1).then((({documents:N})=>P.view.ru(N,z))));const X=H&&H.targetChanges.get(P.targetId),ue=H&&H.targetMismatches.get(P.targetId)!=null,W=P.view.applyChanges(z,U.isPrimaryClient,X,ue);return RC(U,P.targetId,W.au),W.snapshot})(n,T,E,C);const a=await _C(n.localStore,e,!0),u=new Q5(e,a.ks),d=u.ru(a.documents),p=kc.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),h=u.applyChanges(d,n.isPrimaryClient,p);RC(n,t,h.au);const _=new X5(e,t,u);return n.Tu.set(e,_),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),h.snapshot}async function iG(n,e,t){const i=Oe(n),r=i.Tu.get(e),a=i.Iu.get(r.targetId);if(a.length>1)return i.Iu.set(r.targetId,a.filter((u=>!ap(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Ky(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),t&&uv(i.remoteStore,r.targetId),Qy(i,r.targetId)})).catch(Il)):(Qy(i,r.targetId),await Ky(i.localStore,r.targetId,!0))}async function sG(n,e){const t=Oe(n),i=t.Tu.get(e),r=t.Iu.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),uv(t.remoteStore,i.targetId))}async function rG(n,e,t){const i=fG(n);try{const r=await(function(u,d){const p=Oe(u),h=_t.now(),_=d.reduce(((C,M)=>C.add(M.key)),je());let T,E;return p.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let M=Ys(),U=je();return p.xs.getEntries(C,_).next((P=>{M=P,M.forEach((($,H)=>{H.isValidDocument()||(U=U.add($))}))})).next((()=>p.localDocuments.getOverlayedDocuments(C,M))).next((P=>{T=P;const $=[];for(const H of d){const z=vq(H,T.get(H.key).overlayedDocument);z!=null&&$.push(new Yo(H.key,z,bx(z.value.mapValue),hs.exists(!0)))}return p.mutationQueue.addMutationBatch(C,h,$,d)})).next((P=>{E=P;const $=P.applyToLocalDocumentSet(T,U);return p.documentOverlayCache.saveOverlays(C,P.batchId,$)}))})).then((()=>({batchId:E.batchId,changes:Ox(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),(function(u,d,p){let h=u.du[u.currentUser.toKey()];h||(h=new At(Xe)),h=h.insert(d,p),u.du[u.currentUser.toKey()]=h})(i,r.batchId,t),await Uc(i,r.changes),await pp(i.remoteStore)}catch(r){const a=pv(r,"Failed to persist write");t.reject(a)}}async function AN(n,e){const t=Oe(n);try{const i=await y5(t.localStore,e);e.targetChanges.forEach(((r,a)=>{const u=t.Au.get(a);u&&(ot(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?u.hu=!0:r.modifiedDocuments.size>0?ot(u.hu,14607):r.removedDocuments.size>0&&(ot(u.hu,42227),u.hu=!1))})),await Uc(t,i,e)}catch(i){await Il(i)}}function bC(n,e,t){const i=Oe(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const r=[];i.Tu.forEach(((a,u)=>{const d=u.view.va(e);d.snapshot&&r.push(d.snapshot)})),(function(u,d){const p=Oe(u);p.onlineState=d;let h=!1;p.queries.forEach(((_,T)=>{for(const E of T.ba)E.va(d)&&(h=!0)})),h&&mv(p)})(i.eventManager,e),r.length&&i.Pu.J_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function oG(n,e,t){const i=Oe(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.Au.get(e),a=r&&r.key;if(a){let u=new At(we.comparator);u=u.insert(a,Tn.newNoDocument(a,Ue.min()));const d=je().add(a),p=new dp(Ue.min(),new Map,new At(Xe),u,d);await AN(i,p),i.Ru=i.Ru.remove(a),i.Au.delete(e),yv(i)}else await Ky(i.localStore,e,!1).then((()=>Qy(i,e,t))).catch(Il)}async function aG(n,e){const t=Oe(n),i=e.batch.batchId;try{const r=await g5(t.localStore,e);CN(t,i,null),wN(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Uc(t,r)}catch(r){await Il(r)}}async function lG(n,e,t){const i=Oe(n);try{const r=await(function(u,d){const p=Oe(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let _;return p.mutationQueue.lookupMutationBatch(h,d).next((T=>(ot(T!==null,37113),_=T.keys(),p.mutationQueue.removeMutationBatch(h,T)))).next((()=>p.mutationQueue.performConsistencyCheck(h))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(h,_,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,_))).next((()=>p.localDocuments.getDocuments(h,_)))}))})(i.localStore,e);CN(i,e,t),wN(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Uc(i,r)}catch(r){await Il(r)}}function wN(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function CN(n,e,t){const i=Oe(n);let r=i.du[i.currentUser.toKey()];if(r){const a=r.get(e);a&&(t?a.reject(t):a.resolve(),r=r.remove(e)),i.du[i.currentUser.toKey()]=r}}function Qy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((i=>{n.Vu.containsKey(i)||IN(n,i)}))}function IN(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(uv(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),yv(n))}function RC(n,e,t){for(const i of t)i instanceof TN?(n.Vu.addReference(i.key,e),uG(n,i)):i instanceof EN?(ye(gv,"Document no longer in limbo: "+i.key),n.Vu.removeReference(i.key,e),n.Vu.containsKey(i.key)||IN(n,i.key)):Re(19791,{wu:i})}function uG(n,e){const t=e.key,i=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(i)||(ye(gv,"New document in limbo: "+t),n.Eu.add(i),yv(n))}function yv(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new we(mt.fromString(e)),i=n.fu.next();n.Au.set(i,new j5(t)),n.Ru=n.Ru.insert(t,i),dN(n.remoteStore,new Or(fs(ev(t.path)),i,"TargetPurposeLimboResolution",sp.ce))}}async function Uc(n,e,t){const i=Oe(n),r=[],a=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((d,p)=>{u.push(i.pu(p,e,t).then((h=>{var _;if((h||t)&&i.isPrimaryClient){const T=h?!h.fromCache:(_=t==null?void 0:t.targetChanges.get(p.targetId))==null?void 0:_.current;i.sharedClientState.updateQueryState(p.targetId,T?"current":"not-current")}if(h){r.push(h);const T=av.Es(p.targetId,h);a.push(T)}})))})),await Promise.all(u),i.Pu.J_(r),await(async function(p,h){const _=Oe(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>ae.forEach(h,(E=>ae.forEach(E.Ts,(C=>_.persistence.referenceDelegate.addReference(T,E.targetId,C))).next((()=>ae.forEach(E.Is,(C=>_.persistence.referenceDelegate.removeReference(T,E.targetId,C)))))))))}catch(T){if(!bl(T))throw T;ye(lv,"Failed to update sequence numbers: "+T)}for(const T of h){const E=T.targetId;if(!T.fromCache){const C=_.vs.get(E),M=C.snapshotVersion,U=C.withLastLimboFreeSnapshotVersion(M);_.vs=_.vs.insert(E,U)}}})(i.localStore,a))}async function cG(n,e){const t=Oe(n);if(!t.currentUser.isEqual(e)){ye(gv,"User change. New user:",e.toKey());const i=await aN(t.localStore,e);t.currentUser=e,(function(a,u){a.mu.forEach((d=>{d.forEach((p=>{p.reject(new ge(oe.CANCELLED,u))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Uc(t,i.Ns)}}function dG(n,e){const t=Oe(n),i=t.Au.get(e);if(i&&i.hu)return je().add(i.key);{let r=je();const a=t.Iu.get(e);if(!a)return r;for(const u of a){const d=t.Tu.get(u);r=r.unionWith(d.view.nu)}return r}}function bN(n){const e=Oe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=AN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=oG.bind(null,e),e.Pu.J_=Y5.bind(null,e.eventManager),e.Pu.yu=W5.bind(null,e.eventManager),e}function fG(n){const e=Oe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=aG.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lG.bind(null,e),e}class kh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=fp(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return m5(this.persistence,new f5,e.initialUser,this.serializer)}Cu(e){return new oN(ov.Vi,this.serializer)}Du(e){return new S5}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}kh.provider={build:()=>new kh};class hG extends kh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ot(this.persistence.referenceDelegate instanceof Dh,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new Xq(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Vn.withCacheSize(this.cacheSizeBytes):Vn.DEFAULT;return new oN((i=>Dh.Vi(i,t)),this.serializer)}}class Xy{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>bC(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=cG.bind(null,this.syncEngine),await $5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new K5})()}createDatastore(e){const t=fp(e.databaseInfo.databaseId),i=b5(e.databaseInfo);return D5(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,r,a,u,d){return new k5(i,r,a,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>bC(this.syncEngine,t,0)),(function(){return EC.v()?new EC:new A5})())}createSyncEngine(e,t){return(function(r,a,u,d,p,h,_){const T=new Z5(r,a,u,d,p,h);return _&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(r){const a=Oe(r);ye(zo,"RemoteStore shutting down."),a.Ea.add(5),await Vc(a),a.Aa.shutdown(),a.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Xy.provider={build:()=>new Xy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ks("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qr="FirestoreClient";class pG{constructor(e,t,i,r,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this._databaseInfo=r,this.user=vn.UNAUTHENTICATED,this.clientId=Y_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async u=>{ye(Qr,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(ye(Qr,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Hs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=pv(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Wg(n,e){n.asyncQueue.verifyOperationInProgress(),ye(Qr,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async r=>{i.isEqual(r)||(await aN(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function xC(n,e){n.asyncQueue.verifyOperationInProgress();const t=await mG(n);ye(Qr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>AC(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,r)=>AC(e.remoteStore,r))),n._onlineComponents=e}async function mG(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ye(Qr,"Using user provided OfflineComponentProvider");try{await Wg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===oe.FAILED_PRECONDITION||r.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;Ho("Error using user provided cache. Falling back to memory cache: "+t),await Wg(n,new kh)}}else ye(Qr,"Using default OfflineComponentProvider"),await Wg(n,new hG(void 0));return n._offlineComponents}async function xN(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ye(Qr,"Using user provided OnlineComponentProvider"),await xC(n,n._uninitializedComponentsProvider._online)):(ye(Qr,"Using default OnlineComponentProvider"),await xC(n,new Xy))),n._onlineComponents}function gG(n){return xN(n).then((e=>e.syncEngine))}async function NN(n){const e=await xN(n),t=e.eventManager;return t.onListen=eG.bind(null,e.syncEngine),t.onUnlisten=iG.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=tG.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=sG.bind(null,e.syncEngine),t}function yG(n,e,t={}){const i=new Hs;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,p,h){const _=new RN({next:E=>{_.Nu(),u.enqueueAndForget((()=>_N(a,T)));const C=E.docs.has(d);!C&&E.fromCache?h.reject(new ge(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&E.fromCache&&p&&p.source==="server"?h.reject(new ge(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(E)},error:E=>h.reject(E)}),T=new vN(ev(d.path),_,{includeMetadataChanges:!0,Ka:!0});return yN(a,T)})(await NN(n),n.asyncQueue,e,t,i))),i.promise}function _G(n,e,t={}){const i=new Hs;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,p,h){const _=new RN({next:E=>{_.Nu(),u.enqueueAndForget((()=>_N(a,T))),E.fromCache&&p.source==="server"?h.reject(new ge(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(E)},error:E=>h.reject(E)}),T=new vN(d,_,{includeMetadataChanges:!0,Ka:!0});return yN(a,T)})(await NN(n),n.asyncQueue,e,t,i))),i.promise}function vG(n,e){const t=new Hs;return n.asyncQueue.enqueueAndForget((async()=>rG(await gG(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MN(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TG="ComponentProvider",NC=new Map;function EG(n,e,t,i,r){return new GB(n,e,t,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,MN(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN="firestore.googleapis.com",MC=!0;class DC{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ge(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=DN,this.ssl=MC}else this.host=e.host,this.ssl=e.ssl??MC;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=rN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Wq)throw new ge(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}MB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=MN(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ge(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ge(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ge(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mp{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new DC({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new DC(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new EB;switch(i.type){case"firstParty":return new CB(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ge(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=NC.get(t);i&&(ye(TG,"Removing Datastore"),NC.delete(t),i.terminate())})(this),Promise.resolve()}}function SG(n,e,t,i={}){var h;n=zr(n,mp);const r=Sl(e),a=n._getSettings(),u={...a,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;r&&(AR(`https://${d}`),wR("Firestore",!0)),a.host!==DN&&a.host!==d&&Ho("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...a,host:d,ssl:r,emulatorOptions:i};if(!Fo(p,u)&&(n._setSettings(p),i.mockUserToken)){let _,T;if(typeof i.mockUserToken=="string")_=i.mockUserToken,T=vn.MOCK_USER;else{_=z4(i.mockUserToken,(h=n._app)==null?void 0:h.options.projectId);const E=i.mockUserToken.sub||i.mockUserToken.user_id;if(!E)throw new ge(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new vn(E)}n._authCredentials=new SB(new mx(_,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new xl(this.firestore,e,this._query)}}class $t{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $t(this.firestore,e,this._key)}toJSON(){return{type:$t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Mc(t,$t._jsonSchema))return new $t(e,i||null,new we(mt.fromString(t.referencePath)))}}$t._jsonSchemaVersion="firestore/documentReference/1.0",$t._jsonSchema={type:zt("string",$t._jsonSchemaVersion),referencePath:zt("string")};class Hr extends xl{constructor(e,t,i){super(e,t,ev(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $t(this.firestore,null,new we(e))}withConverter(e){return new Hr(this.firestore,e,this._path)}}function PN(n,e,...t){if(n=bn(n),gx("collection","path",e),n instanceof mp){const i=mt.fromString(e,...t);return $w(i),new Hr(n,null,i)}{if(!(n instanceof $t||n instanceof Hr))throw new ge(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(mt.fromString(e,...t));return $w(i),new Hr(n.firestore,null,i)}}function gp(n,e,...t){if(n=bn(n),arguments.length===1&&(e=Y_.newId()),gx("doc","path",e),n instanceof mp){const i=mt.fromString(e,...t);return zw(i),new $t(n,null,new we(i))}{if(!(n instanceof $t||n instanceof Hr))throw new ge(oe.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(mt.fromString(e,...t));return zw(i),new $t(n.firestore,n instanceof Hr?n.converter:null,new we(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC="AsyncQueue";class kC{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new uN(this,"async_queue_retry"),this._c=()=>{const i=Yg();i&&ye(PC,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Yg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Yg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Hs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!bl(e))throw e;ye(PC,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Ks("INTERNAL UNHANDLED ERROR: ",VC(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=hv.createAndSchedule(this,e,t,i,(a=>this.hc(a)));return this.tc.push(r),r}uc(){this.nc&&Re(47125,{Pc:VC(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function VC(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Lc extends mp{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new kC,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new kC(e),this._firestoreClient=void 0,await e}}}function AG(n,e){const t=typeof n=="object"?n:RR(),i=typeof n=="string"?n:Ch,r=U_(t,"firestore").getImmediate({identifier:i});if(!r._initialized){const a=G4("firestore");a&&SG(r,...a)}return r}function _v(n){if(n._terminated)throw new ge(oe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||wG(n),n._firestoreClient}function wG(n){var i,r,a,u;const e=n._freezeSettings(),t=EG(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,(r=n._app)==null?void 0:r.options.apiKey,e);n._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new pG(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(p){const h=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(h),_online:h}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fi(gn.fromBase64String(e))}catch(t){throw new ge(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new fi(gn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:fi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Mc(e,fi._jsonSchema))return fi.fromBase64String(e.bytes)}}fi._jsonSchemaVersion="firestore/bytes/1.0",fi._jsonSchema={type:zt("string",fi._jsonSchemaVersion),bytes:zt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ge(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Xe(this._lat,e._lat)||Xe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ms._jsonSchemaVersion}}static fromJSON(e){if(Mc(e,ms._jsonSchema))return new ms(e.latitude,e.longitude)}}ms._jsonSchemaVersion="firestore/geoPoint/1.0",ms._jsonSchema={type:zt("string",ms._jsonSchemaVersion),latitude:zt("number"),longitude:zt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,r){if(i.length!==r.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==r[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Vi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Mc(e,Vi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Vi(e.vectorValues);throw new ge(oe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Vi._jsonSchemaVersion="firestore/vectorValue/1.0",Vi._jsonSchema={type:zt("string",Vi._jsonSchemaVersion),vectorValues:zt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CG=/^__.*__$/;class IG{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Yo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Pc(e,this.data,t,this.fieldTransforms)}}function UN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re(40011,{dataSource:n})}}class vv{constructor(e,t,i,r,a,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,a===void 0&&this.validatePath(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new vv({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var r;const t=(r=this.path)==null?void 0:r.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var r;const t=(r=this.path)==null?void 0:r.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Vh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(UN(this.dataSource)&&CG.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class bG{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||fp(e)}createContext(e,t,i,r=!1){return new vv({dataSource:e,methodName:t,targetDoc:i,path:pn.emptyPath(),arrayElement:!1,hasConverter:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Tv(n){const e=n._freezeSettings(),t=fp(n._databaseId);return new bG(n._databaseId,!!e.ignoreUndefinedProperties,t)}function LN(n,e,t,i,r,a={}){const u=n.createContext(a.merge||a.mergeFields?2:0,e,t,r);BN("Data must be an object, but it was:",u,i);const d=ON(i,u);let p,h;if(a.merge)p=new Mi(u.fieldMask),h=u.fieldTransforms;else if(a.mergeFields){const _=[];for(const T of a.mergeFields){const E=Sv(e,T,t);if(!u.contains(E))throw new ge(oe.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);MG(_,E)||_.push(E)}p=new Mi(_),h=u.fieldTransforms.filter((T=>p.covers(T.field)))}else p=null,h=u.fieldTransforms;return new IG(new di(d),p,h)}function RG(n,e,t,i=!1){return Ev(t,n.createContext(i?4:3,e))}function Ev(n,e){if(FN(n=bn(n)))return BN("Unsupported field value:",e,n),ON(n,e);if(n instanceof VN)return(function(i,r){if(!UN(r.dataSource))throw r.createError(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.createError(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(r);a&&r.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,r){const a=[];let u=0;for(const d of i){let p=Ev(d,r.childContextForArray(u));p==null&&(p={nullValue:"NULL_VALUE"}),a.push(p),u++}return{arrayValue:{values:a}}})(n,e)}return(function(i,r){if((i=bn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return hq(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=_t.fromDate(i);return{timestampValue:Mh(r.serializer,a)}}if(i instanceof _t){const a=new _t(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Mh(r.serializer,a)}}if(i instanceof ms)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof fi)return{bytesValue:Xx(r.serializer,i._byteString)};if(i instanceof $t){const a=r.databaseId,u=i.firestore._databaseId;if(!u.isEqual(a))throw r.createError(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:sv(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Vi)return(function(u,d){const p=u instanceof Vi?u.toArray():u;return{mapValue:{fields:{[Cx]:{stringValue:Ix},[Ih]:{arrayValue:{values:p.map((_=>{if(typeof _!="number")throw d.createError("VectorValues must only contain numeric values.");return tv(d.serializer,_)}))}}}}}})(i,r);if(sN(i))return i._toProto(r.serializer);throw r.createError(`Unsupported field value: ${ip(i)}`)})(n,e)}function ON(n,e){const t={};return vx(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Jo(n,((i,r)=>{const a=Ev(r,e.childContextForField(i));a!=null&&(t[i]=a)})),{mapValue:{fields:t}}}function FN(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof _t||n instanceof ms||n instanceof fi||n instanceof $t||n instanceof VN||n instanceof Vi||sN(n))}function BN(n,e,t){if(!FN(t)||!yx(t)){const i=ip(t);throw i==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+i)}}function Sv(n,e,t){if((e=bn(e))instanceof kN)return e._internalPath;if(typeof e=="string")return NG(n,e);throw Vh("Field path arguments must be of type string or ",n,!1,void 0,t)}const xG=new RegExp("[~\\*/\\[\\]]");function NG(n,e,t){if(e.search(xG)>=0)throw Vh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new kN(...e.split("."))._internalPath}catch{throw Vh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Vh(n,e,t,i,r){const a=i&&!i.isEmpty(),u=r!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(a||u)&&(p+=" (found",a&&(p+=` in field ${i}`),u&&(p+=` in document ${r}`),p+=")"),new ge(oe.INVALID_ARGUMENT,d+n+p)}function MG(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DG{convertValue(e,t="none"){switch(Yr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Kr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Re(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Jo(e,((r,a)=>{i[r]=this.convertValue(a,t)})),i}convertVectorValue(e){var i,r,a;const t=(a=(r=(i=e.fields)==null?void 0:i[Ih].arrayValue)==null?void 0:r.values)==null?void 0:a.map((u=>Dt(u.doubleValue)));return new Vi(t)}convertGeoPoint(e){return new ms(Dt(e.latitude),Dt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=op(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(yc(e));default:return null}}convertTimestamp(e){const t=Jr(e);return new _t(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=mt.fromString(e);ot(iN(i),9688,{name:e});const r=new _c(i.get(1),i.get(3)),a=new we(i.popFirst(5));return r.isEqual(t)||Ks(`Document ${a} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN extends DG{constructor(e){super(),this.firestore=e}convertBytes(e){return new fi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $t(this.firestore,null,t)}}const UC="@firebase/firestore",LC="4.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e,t,i,r,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new $t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new PG(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(Sv("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class PG extends GN{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kG(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ge(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Av{}class VG extends Av{}function UG(n,e,...t){let i=[];e instanceof Av&&i.push(e),i=i.concat(t),(function(a){const u=a.filter((p=>p instanceof Cv)).length,d=a.filter((p=>p instanceof wv)).length;if(u>1||u>0&&d>0)throw new ge(oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const r of i)n=r._apply(n);return n}class wv extends VG{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new wv(e,t,i)}_apply(e){const t=this._parse(e);return HN(e._query,t),new xl(e.firestore,e.converter,qy(e._query,t))}_parse(e){const t=Tv(e.firestore);return(function(a,u,d,p,h,_,T){let E;if(h.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ge(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){FC(T,_);const M=[];for(const U of T)M.push(OC(p,a,U));E={arrayValue:{values:M}}}else E=OC(p,a,T)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||FC(T,_),E=RG(d,u,T,_==="in"||_==="not-in");return Ht.create(h,_,E)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class Cv extends Av{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Cv(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Ui.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(r,a){let u=r;const d=a.getFlattenedFilters();for(const p of d)HN(u,p),u=qy(u,p)})(e._query,t),new xl(e.firestore,e.converter,qy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function OC(n,e,t){if(typeof(t=bn(t))=="string"){if(t==="")throw new ge(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kx(e)&&t.indexOf("/")!==-1)throw new ge(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(mt.fromString(t));if(!we.isDocumentKey(i))throw new ge(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Zw(n,new we(i))}if(t instanceof $t)return Zw(n,t._key);throw new ge(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ip(t)}.`)}function FC(n,e){if(!Array.isArray(n)||n.length===0)throw new ge(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function HN(n,e){const t=(function(r,a){for(const u of r)for(const d of u.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ge(oe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ge(oe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function zN(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class tc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Oo extends GN{constructor(e,t,i,r,a,u){super(e,t,i,r,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Zf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Sv("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(oe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Oo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Oo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Oo._jsonSchema={type:zt("string",Oo._jsonSchemaVersion),bundleSource:zt("string","DocumentSnapshot"),bundleName:zt("string"),bundle:zt("string")};class Zf extends Oo{data(e={}){return super.data(e)}}class al{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new tc(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Zf(this._firestore,this._userDataWriter,i.key,i,new tc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,a){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map((d=>{const p=new Zf(r._firestore,r._userDataWriter,d.doc.key,d.doc,new tc(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const p=new Zf(r._firestore,r._userDataWriter,d.doc.key,d.doc,new tc(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,_=-1;return d.type!==0&&(h=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),_=u.indexOf(d.doc.key)),{type:LG(d.type),doc:p,oldIndex:h,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(oe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=al._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Y_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],r=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),r.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function LG(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */al._jsonSchemaVersion="firestore/querySnapshot/1.0",al._jsonSchema={type:zt("string",al._jsonSchemaVersion),bundleSource:zt("string","QuerySnapshot"),bundleName:zt("string"),bundle:zt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N(n){n=zr(n,$t);const e=zr(n.firestore,Lc),t=_v(e);return yG(t,n._key).then((i=>qG(e,n,i)))}function OG(n){n=zr(n,xl);const e=zr(n.firestore,Lc),t=_v(e),i=new qN(e);return kG(n._query),_G(t,n._query).then((r=>new al(e,i,n,r)))}function FG(n,e,t){n=zr(n,$t);const i=zr(n.firestore,Lc),r=zN(n.converter,e,t),a=Tv(i);return JN(i,[LN(a,"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,hs.none())])}function BG(n,e){const t=zr(n.firestore,Lc),i=gp(n),r=zN(n.converter,e),a=Tv(n.firestore);return JN(t,[LN(a,"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,hs.exists(!1))]).then((()=>i))}function JN(n,e){const t=_v(n);return vG(t,e)}function qG(n,e,t){const i=t.docs.get(e._key),r=new qN(n);return new Oo(n,r,e._key,i,new tc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){TB(Al),ul(new Bo("firestore",((i,{instanceIdentifier:r,options:a})=>{const u=i.getProvider("app").getImmediate(),d=new Lc(new AB(i.getProvider("auth-internal")),new IB(u,i.getProvider("app-check-internal")),HB(u,r),u);return a={useFetchStreams:t,...a},d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),qr(UC,LC,e),qr(UC,LC,"esm2020")})();const GG={apiKey:"AIzaSyAOifhW06Co4FoqrKWqW43hVKqF-43EoD0",authDomain:"kisan-mitra-ai-a362f.firebaseapp.com",projectId:"kisan-mitra-ai-a362f",storageBucket:"kisan-mitra-ai-a362f.firebasestorage.app",messagingSenderId:"483867268048",appId:"1:483867268048:web:2da049c9ba94e0cf339fd5",measurementId:"G-E47146W11C"};let Ga=null,Df=null,Qg=null,Ha=null;const HG=()=>{if(Ga)return{app:Ga,auth:Df,db:Qg,googleProvider:Ha};try{return Ga=bR(GG),Df=_B(Ga),Qg=AG(Ga),Ha=new Bs,Ha.addScope("profile"),Ha.addScope("email"),Ha.setCustomParameters({prompt:"consent"}),sF(Df,jR).catch(n=>{console.warn("Persistence setup failed:",n.message)}),console.log("Firebase initialized successfully"),{app:Ga,auth:Df,db:Qg,googleProvider:Ha}}catch(n){throw console.error("Firebase initialization error:",n),new Error(`Firebase init failed: ${n.message}`)}},{app:xH,auth:gl,db:Ws,googleProvider:BC}=HG(),zG=async()=>{try{if(!gl||!BC)throw new Error("Firebase not initialized. Check Firebase configuration.");const e=(await bF(gl,BC)).user;if(!e.uid)throw new Error("User ID not found");return console.log("User signed in:",e.email),(await $N(gp(Ws,"users",e.uid))).exists()||(console.log("Creating new user profile"),await KN({uid:e.uid,name:e.displayName||"Farmer",email:e.email||"",phone:e.phoneNumber||"",photoURL:e.photoURL||"",onboarded:!1,aiProvider:0,language:"en",address:"",farmSize:0,crops:[]})),e}catch(n){throw console.error("Google Sign-In Error:",n),n.code==="auth/configuration-not-found"?new Error(" Firebase Auth not enabled. Enable Google Sign-In in Firebase Console  Authentication  Google provider."):n.code==="auth/popup-closed-by-user"?new Error("You closed the sign-in popup. Please try again."):n.code==="auth/unauthorized-domain"?new Error(' Domain not authorized. Add "onkar86.github.io" in Firebase Console  Authentication  Settings  Authorized domains.'):n.code==="auth/operation-not-supported-in-this-environment"?new Error("Sign-in not supported. Try a different browser or clear cache."):n.code==="auth/invalid-api-key"?new Error(" Invalid Firebase API key. Check Firebase configuration."):n}},$G=async()=>{try{gl&&(await lF(gl),console.log("User signed out"))}catch(n){throw console.error("Sign Out Error:",n),n}},JG=n=>gl?aF(gl,n):(console.error("Auth not initialized"),()=>{}),KN=async n=>{try{if(!Ws||!n.uid){console.warn("No database or user ID");return}const e=gp(Ws,"users",n.uid);await FG(e,{...n,updatedAt:new Date().toISOString(),createdAt:n.createdAt||new Date().toISOString()},{merge:!0}),console.log("Profile saved for user:",n.uid)}catch(e){throw console.error("Error saving user profile:",e),e}},KG=async n=>{try{if(!Ws)return null;const e=gp(Ws,"users",n),t=await $N(e);return t.exists()?t.data():null}catch(e){return console.error("Error getting user profile:",e),null}},YG=async(n,e)=>{try{if(!Ws)throw new Error("Database not initialized");const t=PN(Ws,"users",n,"history");return(await BG(t,{...e,timestamp:new Date().toISOString()})).id}catch(t){throw console.error("Error saving diagnosis result:",t),t}},WG=async n=>{try{if(!Ws)return[];const e=PN(Ws,"users",n,"history"),t=UG(e),i=await OG(t),r=[];return i.forEach(a=>{r.push({id:a.id,...a.data()})}),r.sort((a,u)=>{const d=new Date(a.timestamp||0).getTime();return new Date(u.timestamp||0).getTime()-d})}catch(e){return console.error("Error getting user history:",e),[]}},QG=({onLoginSuccess:n})=>{const[e,t]=He.useState(!1),[i,r]=He.useState(null),a=async()=>{t(!0),r(null);try{await zG(),n()}catch(u){const d=u.message||"Failed to sign in. Please try again.";console.error("Auth error:",u),r(d)}finally{t(!1)}};return I.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-green-900 via-green-950 to-black flex flex-col items-center justify-center gap-8 p-6",children:[I.jsxs("div",{className:"text-center mb-8",children:[I.jsx("h1",{className:"text-5xl font-black text-lime-400 tracking-[0.3em] uppercase",children:"Kisan Mitra AI"}),I.jsx("p",{className:"text-white/60 text-sm mt-2 tracking-widest",children:"SMART FARMER ASSISTANT"}),I.jsx("p",{className:"text-white/40 text-xs mt-1",children:"By Onkar Mahamuni"})]}),I.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-lime-500/20 rounded-2xl p-8 w-full max-w-md shadow-2xl",children:[I.jsx("h2",{className:"text-white text-2xl font-bold mb-1 text-center",children:"Welcome to the Farm"}),I.jsx("p",{className:"text-white/60 text-center text-sm mb-8",children:"Sign in to access your AI farming assistant and save your data securely."}),I.jsx("button",{onClick:a,disabled:e,className:"w-full bg-white hover:bg-white/90 disabled:bg-white/50 text-gray-900 font-bold py-3 px-6 rounded-lg flex items-center justify-center gap-3 transition-all active:scale-95 shadow-lg mb-3",children:e?I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"w-5 h-5 border-2 border-lime-500 border-t-transparent rounded-full animate-spin"}),I.jsx("span",{children:"Signing in..."})]}):I.jsxs(I.Fragment,{children:[I.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[I.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),I.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),I.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),I.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),I.jsx("span",{children:"Sign in with Google"})]})}),i&&I.jsxs("div",{className:"mb-6 p-4 bg-red-500/20 border border-red-500/50 rounded-lg",children:[I.jsx("p",{className:"text-red-300 text-sm font-semibold mb-2",children:" Error:"}),I.jsx("p",{className:"text-red-300 text-xs leading-relaxed whitespace-pre-wrap",children:i})]}),I.jsxs("div",{className:"space-y-2 text-white/50 text-xs text-center leading-relaxed",children:[I.jsx("p",{children:" One-click sign in with your Google account"}),I.jsx("p",{children:" Your data is saved securely in the cloud"}),I.jsx("p",{children:" Access from any device"}),I.jsx("p",{children:" 100% Free - No credit card needed"})]})]}),I.jsxs("div",{className:"w-full max-w-md mt-8 grid grid-cols-3 gap-4",children:[I.jsxs("div",{className:"bg-lime-500/10 border border-lime-500/30 rounded-lg p-4 text-center",children:[I.jsx("div",{className:"text-2xl mb-2",children:""}),I.jsx("p",{className:"text-white/70 text-xs font-semibold",children:"AI Diagnosis"})]}),I.jsxs("div",{className:"bg-lime-500/10 border border-lime-500/30 rounded-lg p-4 text-center",children:[I.jsx("div",{className:"text-2xl mb-2",children:""}),I.jsx("p",{className:"text-white/70 text-xs font-semibold",children:"Cloud Storage"})]}),I.jsxs("div",{className:"bg-lime-500/10 border border-lime-500/30 rounded-lg p-4 text-center",children:[I.jsx("div",{className:"text-2xl mb-2",children:""}),I.jsx("p",{className:"text-white/70 text-xs font-semibold",children:"Multi-Device"})]})]}),I.jsxs("div",{className:"w-full max-w-md mt-8 text-center text-white/40 text-xs border-t border-white/10 pt-6",children:[I.jsx("p",{className:"mb-2",children:"Having trouble signing in?"}),I.jsx("p",{className:"text-white/30",children:"Make sure:"}),I.jsxs("ul",{className:"text-white/30 text-xs mt-2 space-y-1",children:[I.jsx("li",{children:" JavaScript is enabled"}),I.jsx("li",{children:" Pop-ups are allowed for this site"}),I.jsx("li",{children:" You're using a modern browser"})]})]})]})},XG=()=>{const[n,e]=He.useState(St.DASHBOARD),[t,i]=He.useState(null),[r,a]=He.useState([]),[u,d]=He.useState(!0),[p,h]=He.useState(!1),[_,T]=He.useState(null);He.useEffect(()=>{const $=JG(async H=>{if(H){h(!0),T(H.uid);const z=await KG(H.uid);if(z){i(z);const X=await WG(H.uid);a(X)}else i(null)}else h(!1),T(null),i(null),a([]);d(!1)});return()=>$()},[]);const E=()=>{},C=async $=>{if(!_)return;const H={...$,uid:_,onboarded:!0};i(H);try{await KN(H)}catch(z){console.error("Error saving profile:",z)}},M=async $=>{if(_)try{const H=await YG(_,$),z=[{...$,id:H},...r];a(z)}catch(H){console.error("Error saving diagnosis:",H)}},U=async()=>{if(confirm("Sign out? You will need to sign in again."))try{await $G(),i(null),a([]),T(null),h(!1),e(St.DASHBOARD)}catch($){console.error("Error signing out:",$)}};if(u)return I.jsxs("div",{className:"min-h-screen bg-green-950 flex flex-col items-center justify-center gap-6",children:[I.jsxs("div",{className:"relative",children:[I.jsx("div",{className:"w-24 h-24 border-8 border-lime-500/20 rounded-full"}),I.jsx("div",{className:"absolute inset-0 w-24 h-24 border-8 border-lime-500 border-t-transparent rounded-full animate-spin"})]}),I.jsxs("div",{className:"text-center",children:[I.jsx("p",{className:"text-lime-400 font-black tracking-[0.3em] text-xs uppercase animate-pulse",children:"Kisan Mitra AI"}),I.jsx("p",{className:"text-white/20 text-[8px] font-black uppercase tracking-[0.5em] mt-2",children:"By Onkar Mahamuni"})]})]});if(!p)return I.jsx(QG,{onLoginSuccess:E});if(!(t!=null&&t.onboarded))return I.jsx(N4,{onComplete:C});const P=()=>{switch(n){case St.DASHBOARD:return I.jsx(fw,{userProfile:t,setView:e});case St.DIAGNOSTIC:return I.jsx(I4,{userProfile:t,onSaveHistory:M});case St.ADVISOR:return I.jsx(b4,{userProfile:t});case St.RAJIV_WISDOM:return I.jsx(x4,{});case St.HISTORY:return I.jsx(M4,{history:r});case St.PROFILE:return I.jsx(D4,{userProfile:t,onUpdate:C,onLogout:U});case St.LIVE_VOICE:return I.jsx(P4,{userProfile:t});default:return I.jsx(fw,{userProfile:t,setView:e})}};return I.jsxs(UM,{currentView:n,setView:e,userProfile:t,children:[P(),n!==St.LIVE_VOICE&&I.jsx("button",{onClick:()=>e(St.LIVE_VOICE),className:"fixed bottom-8 right-8 w-16 h-16 bg-green-700 text-white rounded-full shadow-2xl flex items-center justify-center text-3xl hover:bg-green-800 transition-all active:scale-90 z-40 border-4 border-white",children:""})]})};VM.createRoot(document.getElementById("root")).render(I.jsx(bM.StrictMode,{children:I.jsx(XG,{})}));
