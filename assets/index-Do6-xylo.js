(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();function Jy(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var cg={exports:{}},Nu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GE;function _M(){if(GE)return Nu;GE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,a){var u=null;if(a!==void 0&&(u=""+a),r.key!==void 0&&(u=""+r.key),"key"in r){a={};for(var d in r)d!=="key"&&(a[d]=r[d])}else a=r;return r=a.ref,{$$typeof:n,type:i,key:u,ref:r!==void 0?r:null,props:a}}return Nu.Fragment=e,Nu.jsx=t,Nu.jsxs=t,Nu}var HE;function vM(){return HE||(HE=1,cg.exports=_M()),cg.exports}var I=vM(),dg={exports:{}},Le={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zE;function TM(){if(zE)return Le;zE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),E=Symbol.iterator;function C(F){return F===null||typeof F!="object"?null:(F=E&&F[E]||F["@@iterator"],typeof F=="function"?F:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,P={};function $(F,ie,he){this.props=F,this.context=ie,this.refs=P,this.updater=he||M}$.prototype.isReactComponent={},$.prototype.setState=function(F,ie){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,ie,"setState")},$.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function H(){}H.prototype=$.prototype;function z(F,ie,he){this.props=F,this.context=ie,this.refs=P,this.updater=he||M}var X=z.prototype=new H;X.constructor=z,U(X,$.prototype),X.isPureReactComponent=!0;var ue=Array.isArray;function W(){}var N={H:null,A:null,T:null,S:null},D=Object.prototype.hasOwnProperty;function x(F,ie,he){var me=he.ref;return{$$typeof:n,type:F,key:ie,ref:me!==void 0?me:null,props:he}}function L(F,ie){return x(F.type,ie,F.props)}function k(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function q(F){var ie={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(he){return ie[he]})}var V=/\/+/g;function ke(F,ie){return typeof F=="object"&&F!==null&&F.key!=null?q(""+F.key):ie.toString(36)}function xe(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(W,W):(F.status="pending",F.then(function(ie){F.status==="pending"&&(F.status="fulfilled",F.value=ie)},function(ie){F.status==="pending"&&(F.status="rejected",F.reason=ie)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function Z(F,ie,he,me,Ce){var De=typeof F;(De==="undefined"||De==="boolean")&&(F=null);var Pe=!1;if(F===null)Pe=!0;else switch(De){case"bigint":case"string":case"number":Pe=!0;break;case"object":switch(F.$$typeof){case n:case e:Pe=!0;break;case _:return Pe=F._init,Z(Pe(F._payload),ie,he,me,Ce)}}if(Pe)return Ce=Ce(F),Pe=me===""?"."+ke(F,0):me,ue(Ce)?(he="",Pe!=null&&(he=Pe.replace(V,"$&/")+"/"),Z(Ce,ie,he,"",function(Oi){return Oi})):Ce!=null&&(k(Ce)&&(Ce=L(Ce,he+(Ce.key==null||F&&F.key===Ce.key?"":(""+Ce.key).replace(V,"$&/")+"/")+Pe)),ie.push(Ce)),1;Pe=0;var wt=me===""?".":me+":";if(ue(F))for(var $e=0;$e<F.length;$e++)me=F[$e],De=wt+ke(me,$e),Pe+=Z(me,ie,he,De,Ce);else if($e=C(F),typeof $e=="function")for(F=$e.call(F),$e=0;!(me=F.next()).done;)me=me.value,De=wt+ke(me,$e++),Pe+=Z(me,ie,he,De,Ce);else if(De==="object"){if(typeof F.then=="function")return Z(xe(F),ie,he,me,Ce);throw ie=String(F),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return Pe}function ce(F,ie,he){if(F==null)return F;var me=[],Ce=0;return Z(F,me,"","",function(De){return ie.call(he,De,Ce++)}),me}function fe(F){if(F._status===-1){var ie=F._result;ie=ie(),ie.then(function(he){(F._status===0||F._status===-1)&&(F._status=1,F._result=he)},function(he){(F._status===0||F._status===-1)&&(F._status=2,F._result=he)}),F._status===-1&&(F._status=0,F._result=ie)}if(F._status===1)return F._result.default;throw F._result}var be=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},ze={map:ce,forEach:function(F,ie,he){ce(F,function(){ie.apply(this,arguments)},he)},count:function(F){var ie=0;return ce(F,function(){ie++}),ie},toArray:function(F){return ce(F,function(ie){return ie})||[]},only:function(F){if(!k(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return Le.Activity=T,Le.Children=ze,Le.Component=$,Le.Fragment=t,Le.Profiler=r,Le.PureComponent=z,Le.StrictMode=i,Le.Suspense=p,Le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,Le.__COMPILER_RUNTIME={__proto__:null,c:function(F){return N.H.useMemoCache(F)}},Le.cache=function(F){return function(){return F.apply(null,arguments)}},Le.cacheSignal=function(){return null},Le.cloneElement=function(F,ie,he){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var me=U({},F.props),Ce=F.key;if(ie!=null)for(De in ie.key!==void 0&&(Ce=""+ie.key),ie)!D.call(ie,De)||De==="key"||De==="__self"||De==="__source"||De==="ref"&&ie.ref===void 0||(me[De]=ie[De]);var De=arguments.length-2;if(De===1)me.children=he;else if(1<De){for(var Pe=Array(De),wt=0;wt<De;wt++)Pe[wt]=arguments[wt+2];me.children=Pe}return x(F.type,Ce,me)},Le.createContext=function(F){return F={$$typeof:u,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:a,_context:F},F},Le.createElement=function(F,ie,he){var me,Ce={},De=null;if(ie!=null)for(me in ie.key!==void 0&&(De=""+ie.key),ie)D.call(ie,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(Ce[me]=ie[me]);var Pe=arguments.length-2;if(Pe===1)Ce.children=he;else if(1<Pe){for(var wt=Array(Pe),$e=0;$e<Pe;$e++)wt[$e]=arguments[$e+2];Ce.children=wt}if(F&&F.defaultProps)for(me in Pe=F.defaultProps,Pe)Ce[me]===void 0&&(Ce[me]=Pe[me]);return x(F,De,Ce)},Le.createRef=function(){return{current:null}},Le.forwardRef=function(F){return{$$typeof:d,render:F}},Le.isValidElement=k,Le.lazy=function(F){return{$$typeof:_,_payload:{_status:-1,_result:F},_init:fe}},Le.memo=function(F,ie){return{$$typeof:h,type:F,compare:ie===void 0?null:ie}},Le.startTransition=function(F){var ie=N.T,he={};N.T=he;try{var me=F(),Ce=N.S;Ce!==null&&Ce(he,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(W,be)}catch(De){be(De)}finally{ie!==null&&he.types!==null&&(ie.types=he.types),N.T=ie}},Le.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},Le.use=function(F){return N.H.use(F)},Le.useActionState=function(F,ie,he){return N.H.useActionState(F,ie,he)},Le.useCallback=function(F,ie){return N.H.useCallback(F,ie)},Le.useContext=function(F){return N.H.useContext(F)},Le.useDebugValue=function(){},Le.useDeferredValue=function(F,ie){return N.H.useDeferredValue(F,ie)},Le.useEffect=function(F,ie){return N.H.useEffect(F,ie)},Le.useEffectEvent=function(F){return N.H.useEffectEvent(F)},Le.useId=function(){return N.H.useId()},Le.useImperativeHandle=function(F,ie,he){return N.H.useImperativeHandle(F,ie,he)},Le.useInsertionEffect=function(F,ie){return N.H.useInsertionEffect(F,ie)},Le.useLayoutEffect=function(F,ie){return N.H.useLayoutEffect(F,ie)},Le.useMemo=function(F,ie){return N.H.useMemo(F,ie)},Le.useOptimistic=function(F,ie){return N.H.useOptimistic(F,ie)},Le.useReducer=function(F,ie,he){return N.H.useReducer(F,ie,he)},Le.useRef=function(F){return N.H.useRef(F)},Le.useState=function(F){return N.H.useState(F)},Le.useSyncExternalStore=function(F,ie,he){return N.H.useSyncExternalStore(F,ie,he)},Le.useTransition=function(){return N.H.useTransition()},Le.version="19.2.4",Le}var $E;function Ky(){return $E||($E=1,dg.exports=TM()),dg.exports}var He=Ky();const EM=Jy(He);var fg={exports:{}},Mu={},hg={exports:{}},pg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JE;function SM(){return JE||(JE=1,(function(n){function e(Z,ce){var fe=Z.length;Z.push(ce);e:for(;0<fe;){var be=fe-1>>>1,ze=Z[be];if(0<r(ze,ce))Z[be]=ce,Z[fe]=ze,fe=be;else break e}}function t(Z){return Z.length===0?null:Z[0]}function i(Z){if(Z.length===0)return null;var ce=Z[0],fe=Z.pop();if(fe!==ce){Z[0]=fe;e:for(var be=0,ze=Z.length,F=ze>>>1;be<F;){var ie=2*(be+1)-1,he=Z[ie],me=ie+1,Ce=Z[me];if(0>r(he,fe))me<ze&&0>r(Ce,he)?(Z[be]=Ce,Z[me]=fe,be=me):(Z[be]=he,Z[ie]=fe,be=ie);else if(me<ze&&0>r(Ce,fe))Z[be]=Ce,Z[me]=fe,be=me;else break e}}return ce}function r(Z,ce){var fe=Z.sortIndex-ce.sortIndex;return fe!==0?fe:Z.id-ce.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var p=[],h=[],_=1,T=null,E=3,C=!1,M=!1,U=!1,P=!1,$=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function X(Z){for(var ce=t(h);ce!==null;){if(ce.callback===null)i(h);else if(ce.startTime<=Z)i(h),ce.sortIndex=ce.expirationTime,e(p,ce);else break;ce=t(h)}}function ue(Z){if(U=!1,X(Z),!M)if(t(p)!==null)M=!0,W||(W=!0,q());else{var ce=t(h);ce!==null&&xe(ue,ce.startTime-Z)}}var W=!1,N=-1,D=5,x=-1;function L(){return P?!0:!(n.unstable_now()-x<D)}function k(){if(P=!1,W){var Z=n.unstable_now();x=Z;var ce=!0;try{e:{M=!1,U&&(U=!1,H(N),N=-1),C=!0;var fe=E;try{t:{for(X(Z),T=t(p);T!==null&&!(T.expirationTime>Z&&L());){var be=T.callback;if(typeof be=="function"){T.callback=null,E=T.priorityLevel;var ze=be(T.expirationTime<=Z);if(Z=n.unstable_now(),typeof ze=="function"){T.callback=ze,X(Z),ce=!0;break t}T===t(p)&&i(p),X(Z)}else i(p);T=t(p)}if(T!==null)ce=!0;else{var F=t(h);F!==null&&xe(ue,F.startTime-Z),ce=!1}}break e}finally{T=null,E=fe,C=!1}ce=void 0}}finally{ce?q():W=!1}}}var q;if(typeof z=="function")q=function(){z(k)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,ke=V.port2;V.port1.onmessage=k,q=function(){ke.postMessage(null)}}else q=function(){$(k,0)};function xe(Z,ce){N=$(function(){Z(n.unstable_now())},ce)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Z){Z.callback=null},n.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<Z?Math.floor(1e3/Z):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_next=function(Z){switch(E){case 1:case 2:case 3:var ce=3;break;default:ce=E}var fe=E;E=ce;try{return Z()}finally{E=fe}},n.unstable_requestPaint=function(){P=!0},n.unstable_runWithPriority=function(Z,ce){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var fe=E;E=Z;try{return ce()}finally{E=fe}},n.unstable_scheduleCallback=function(Z,ce,fe){var be=n.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?be+fe:be):fe=be,Z){case 1:var ze=-1;break;case 2:ze=250;break;case 5:ze=1073741823;break;case 4:ze=1e4;break;default:ze=5e3}return ze=fe+ze,Z={id:_++,callback:ce,priorityLevel:Z,startTime:fe,expirationTime:ze,sortIndex:-1},fe>be?(Z.sortIndex=fe,e(h,Z),t(p)===null&&Z===t(h)&&(U?(H(N),N=-1):U=!0,xe(ue,fe-be))):(Z.sortIndex=ze,e(p,Z),M||C||(M=!0,W||(W=!0,q()))),Z},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(Z){var ce=E;return function(){var fe=E;E=ce;try{return Z.apply(this,arguments)}finally{E=fe}}}})(pg)),pg}var KE;function AM(){return KE||(KE=1,hg.exports=SM()),hg.exports}var mg={exports:{}},yn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YE;function wM(){if(YE)return yn;YE=1;var n=Ky();function e(p){var h="https://react.dev/errors/"+p;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)h+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+p+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(p,h,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:T==null?null:""+T,children:p,containerInfo:h,implementation:_}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,h){if(p==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return yn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,yn.createPortal=function(p,h){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(p,h,null,_)},yn.flushSync=function(p){var h=u.T,_=i.p;try{if(u.T=null,i.p=2,p)return p()}finally{u.T=h,i.p=_,i.d.f()}},yn.preconnect=function(p,h){typeof p=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(p,h))},yn.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},yn.preinit=function(p,h){if(typeof p=="string"&&h&&typeof h.as=="string"){var _=h.as,T=d(_,h.crossOrigin),E=typeof h.integrity=="string"?h.integrity:void 0,C=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;_==="style"?i.d.S(p,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:T,integrity:E,fetchPriority:C}):_==="script"&&i.d.X(p,{crossOrigin:T,integrity:E,fetchPriority:C,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},yn.preinitModule=function(p,h){if(typeof p=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var _=d(h.as,h.crossOrigin);i.d.M(p,{crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(p)},yn.preload=function(p,h){if(typeof p=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var _=h.as,T=d(_,h.crossOrigin);i.d.L(p,_,{crossOrigin:T,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},yn.preloadModule=function(p,h){if(typeof p=="string")if(h){var _=d(h.as,h.crossOrigin);i.d.m(p,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(p)},yn.requestFormReset=function(p){i.d.r(p)},yn.unstable_batchedUpdates=function(p,h){return p(h)},yn.useFormState=function(p,h,_){return u.H.useFormState(p,h,_)},yn.useFormStatus=function(){return u.H.useHostTransitionStatus()},yn.version="19.2.4",yn}var WE;function CM(){if(WE)return mg.exports;WE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),mg.exports=wM(),mg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QE;function IM(){if(QE)return Mu;QE=1;var n=AM(),e=Ky(),t=CM();function i(s){var o="https://react.dev/errors/"+s;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var o=s,l=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(l=o.return),s=o.return;while(s)}return o.tag===3?l:null}function u(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function d(s){if(s.tag===31){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function p(s){if(a(s)!==s)throw Error(i(188))}function h(s){var o=s.alternate;if(!o){if(o=a(s),o===null)throw Error(i(188));return o!==s?null:s}for(var l=s,c=o;;){var y=l.return;if(y===null)break;var v=y.alternate;if(v===null){if(c=y.return,c!==null){l=c;continue}break}if(y.child===v.child){for(v=y.child;v;){if(v===l)return p(y),s;if(v===c)return p(y),o;v=v.sibling}throw Error(i(188))}if(l.return!==c.return)l=y,c=v;else{for(var A=!1,b=y.child;b;){if(b===l){A=!0,l=y,c=v;break}if(b===c){A=!0,c=y,l=v;break}b=b.sibling}if(!A){for(b=v.child;b;){if(b===l){A=!0,l=v,c=y;break}if(b===c){A=!0,c=v,l=y;break}b=b.sibling}if(!A)throw Error(i(189))}}if(l.alternate!==c)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?s:o}function _(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s;for(s=s.child;s!==null;){if(o=_(s),o!==null)return o;s=s.sibling}return null}var T=Object.assign,E=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),M=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),H=Symbol.for("react.consumer"),z=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),ue=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function q(s){return s===null||typeof s!="object"?null:(s=k&&s[k]||s["@@iterator"],typeof s=="function"?s:null)}var V=Symbol.for("react.client.reference");function ke(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===V?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case U:return"Fragment";case $:return"Profiler";case P:return"StrictMode";case ue:return"Suspense";case W:return"SuspenseList";case x:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case M:return"Portal";case z:return s.displayName||"Context";case H:return(s._context.displayName||"Context")+".Consumer";case X:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case N:return o=s.displayName||null,o!==null?o:ke(s.type)||"Memo";case D:o=s._payload,s=s._init;try{return ke(s(o))}catch{}}return null}var xe=Array.isArray,Z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe={pending:!1,data:null,method:null,action:null},be=[],ze=-1;function F(s){return{current:s}}function ie(s){0>ze||(s.current=be[ze],be[ze]=null,ze--)}function he(s,o){ze++,be[ze]=s.current,s.current=o}var me=F(null),Ce=F(null),De=F(null),Pe=F(null);function wt(s,o){switch(he(De,o),he(Ce,s),he(me,null),o.nodeType){case 9:case 11:s=(s=o.documentElement)&&(s=s.namespaceURI)?dE(s):0;break;default:if(s=o.tagName,o=o.namespaceURI)o=dE(o),s=fE(o,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ie(me),he(me,s)}function $e(){ie(me),ie(Ce),ie(De)}function Oi(s){s.memoizedState!==null&&he(Pe,s);var o=me.current,l=fE(o,s.type);o!==l&&(he(Ce,s),he(me,l))}function On(s){Ce.current===s&&(ie(me),ie(Ce)),Pe.current===s&&(ie(Pe),Iu._currentValue=fe)}var Wo,Qo;function Fi(s){if(Wo===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);Wo=o&&o[1]||"",Qo=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Wo+s+Qo}var Il=!1;function Xr(s,o){if(!s||Il)return"";Il=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(o){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(te){var j=te}Reflect.construct(s,[],re)}else{try{re.call()}catch(te){j=te}s.call(re.prototype)}}else{try{throw Error()}catch(te){j=te}(re=s())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(te){if(te&&j&&typeof te.stack=="string")return[te.stack,j.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=c.DetermineComponentFrameRoot(),A=v[0],b=v[1];if(A&&b){var O=A.split(`
`),Y=b.split(`
`);for(y=c=0;c<O.length&&!O[c].includes("DetermineComponentFrameRoot");)c++;for(;y<Y.length&&!Y[y].includes("DetermineComponentFrameRoot");)y++;if(c===O.length||y===Y.length)for(c=O.length-1,y=Y.length-1;1<=c&&0<=y&&O[c]!==Y[y];)y--;for(;1<=c&&0<=y;c--,y--)if(O[c]!==Y[y]){if(c!==1||y!==1)do if(c--,y--,0>y||O[c]!==Y[y]){var ne=`
`+O[c].replace(" at new "," at ");return s.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",s.displayName)),ne}while(1<=c&&0<=y);break}}}finally{Il=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?Fi(l):""}function bl(s,o){switch(s.tag){case 26:case 27:case 5:return Fi(s.type);case 16:return Fi("Lazy");case 13:return s.child!==o&&o!==null?Fi("Suspense Fallback"):Fi("Suspense");case 19:return Fi("SuspenseList");case 0:case 15:return Xr(s.type,!1);case 11:return Xr(s.type.render,!1);case 1:return Xr(s.type,!0);case 31:return Fi("Activity");default:return""}}function Rl(s){try{var o="",l=null;do o+=bl(s,l),l=s,s=s.return;while(s);return o}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Pt=Object.prototype.hasOwnProperty,Jt=n.unstable_scheduleCallback,js=n.unstable_cancelCallback,fp=n.unstable_shouldYield,kc=n.unstable_requestPaint,Sn=n.unstable_now,jr=n.unstable_getCurrentPriorityLevel,xl=n.unstable_ImmediatePriority,Nl=n.unstable_UserBlockingPriority,Zs=n.unstable_NormalPriority,hp=n.unstable_LowPriority,Vc=n.unstable_IdlePriority,Uc=n.log,Lc=n.unstable_setDisableYieldValue,gi=null,rn=null;function jn(s){if(typeof Uc=="function"&&Lc(s),rn&&typeof rn.setStrictMode=="function")try{rn.setStrictMode(gi,s)}catch{}}var Rt=Math.clz32?Math.clz32:Fc,Oc=Math.log,Xo=Math.LN2;function Fc(s){return s>>>=0,s===0?32:31-(Oc(s)/Xo|0)|0}var Bi=256,Zr=262144,kt=4194304;function qi(s){var o=s&42;if(o!==0)return o;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Gi(s,o,l){var c=s.pendingLanes;if(c===0)return 0;var y=0,v=s.suspendedLanes,A=s.pingedLanes;s=s.warmLanes;var b=c&134217727;return b!==0?(c=b&~v,c!==0?y=qi(c):(A&=b,A!==0?y=qi(A):l||(l=b&~s,l!==0&&(y=qi(l))))):(b=c&~v,b!==0?y=qi(b):A!==0?y=qi(A):l||(l=c&~s,l!==0&&(y=qi(l)))),y===0?0:o!==0&&o!==y&&(o&v)===0&&(v=y&-y,l=o&-o,v>=l||v===32&&(l&4194048)!==0)?o:y}function yi(s,o){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&o)===0}function pp(s,o){switch(s){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bc(){var s=kt;return kt<<=1,(kt&62914560)===0&&(kt=4194304),s}function Hi(s){for(var o=[],l=0;31>l;l++)o.push(s);return o}function eo(s,o){s.pendingLanes|=o,o!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function mp(s,o,l,c,y,v){var A=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var b=s.entanglements,O=s.expirationTimes,Y=s.hiddenUpdates;for(l=A&~l;0<l;){var ne=31-Rt(l),re=1<<ne;b[ne]=0,O[ne]=-1;var j=Y[ne];if(j!==null)for(Y[ne]=null,ne=0;ne<j.length;ne++){var te=j[ne];te!==null&&(te.lane&=-536870913)}l&=~re}c!==0&&to(s,c,0),v!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=v&~(A&~o))}function to(s,o,l){s.pendingLanes|=o,s.suspendedLanes&=~o;var c=31-Rt(o);s.entangledLanes|=o,s.entanglements[c]=s.entanglements[c]|1073741824|l&261930}function Ml(s,o){var l=s.entangledLanes|=o;for(s=s.entanglements;l;){var c=31-Rt(l),y=1<<c;y&o|s[c]&o&&(s[c]|=o),l&=~y}}function Dl(s,o){var l=o&-o;return l=(l&42)!==0?1:no(l),(l&(s.suspendedLanes|o))!==0?0:l}function no(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function vs(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function qc(){var s=ce.p;return s!==0?s:(s=window.event,s===void 0?32:VE(s.type))}function _i(s,o){var l=ce.p;try{return ce.p=s,o()}finally{ce.p=l}}var vi=Math.random().toString(36).slice(2),Vt="__reactFiber$"+vi,Xt="__reactProps$"+vi,zi="__reactContainer$"+vi,jo="__reactEvents$"+vi,gp="__reactListeners$"+vi,Gc="__reactHandles$"+vi,Hc="__reactResources$"+vi,$i="__reactMarker$"+vi;function Zo(s){delete s[Vt],delete s[Xt],delete s[jo],delete s[gp],delete s[Gc]}function Ji(s){var o=s[Vt];if(o)return o;for(var l=s.parentNode;l;){if(o=l[zi]||l[Vt]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(s=vE(s);s!==null;){if(l=s[Vt])return l;s=vE(s)}return o}s=l,l=s.parentNode}return null}function Zn(s){if(s=s[Vt]||s[zi]){var o=s.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return s}return null}function Fn(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s.stateNode;throw Error(i(33))}function Ki(s){var o=s[Hc];return o||(o=s[Hc]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Ut(s){s[$i]=!0}var Pl=new Set,kl={};function Yi(s,o){Wi(s,o),Wi(s+"Capture",o)}function Wi(s,o){for(kl[s]=o,s=0;s<o.length;s++)Pl.add(o[s])}var Vl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ul={},Ll={};function zc(s){return Pt.call(Ll,s)?!0:Pt.call(Ul,s)?!1:Vl.test(s)?Ll[s]=!0:(Ul[s]=!0,!1)}function ea(s,o,l){if(zc(o))if(l===null)s.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(o);return;case"boolean":var c=o.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(o);return}}s.setAttribute(o,""+l)}}function Bn(s,o,l){if(l===null)s.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttribute(o,""+l)}}function Lt(s,o,l,c){if(c===null)s.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(o,l,""+c)}}function jt(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function er(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ol(s,o,l){var c=Object.getOwnPropertyDescriptor(s.constructor.prototype,o);if(!s.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,v=c.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return y.call(this)},set:function(A){l=""+A,v.call(this,A)}}),Object.defineProperty(s,o,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(A){l=""+A},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function at(s){if(!s._valueTracker){var o=er(s)?"checked":"value";s._valueTracker=Ol(s,o,""+s[o])}}function io(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var l=o.getValue(),c="";return s&&(c=er(s)?s.checked?"true":"false":s.value),s=c,s!==l?(o.setValue(s),!0):!1}function Qi(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var so=/[\n"\\]/g;function bn(s){return s.replace(so,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function ta(s,o,l,c,y,v,A,b){s.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?s.type=A:s.removeAttribute("type"),o!=null?A==="number"?(o===0&&s.value===""||s.value!=o)&&(s.value=""+jt(o)):s.value!==""+jt(o)&&(s.value=""+jt(o)):A!=="submit"&&A!=="reset"||s.removeAttribute("value"),o!=null?Fl(s,A,jt(o)):l!=null?Fl(s,A,jt(l)):c!=null&&s.removeAttribute("value"),y==null&&v!=null&&(s.defaultChecked=!!v),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?s.name=""+jt(b):s.removeAttribute("name")}function $c(s,o,l,c,y,v,A,b){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(s.type=v),o!=null||l!=null){if(!(v!=="submit"&&v!=="reset"||o!=null)){at(s);return}l=l!=null?""+jt(l):"",o=o!=null?""+jt(o):l,b||o===s.value||(s.value=o),s.defaultValue=o}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=b?s.checked:!!c,s.defaultChecked=!!c,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(s.name=A),at(s)}function Fl(s,o,l){o==="number"&&Qi(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function tr(s,o,l,c){if(s=s.options,o){o={};for(var y=0;y<l.length;y++)o["$"+l[y]]=!0;for(l=0;l<s.length;l++)y=o.hasOwnProperty("$"+s[l].value),s[l].selected!==y&&(s[l].selected=y),y&&c&&(s[l].defaultSelected=!0)}else{for(l=""+jt(l),o=null,y=0;y<s.length;y++){if(s[y].value===l){s[y].selected=!0,c&&(s[y].defaultSelected=!0);return}o!==null||s[y].disabled||(o=s[y])}o!==null&&(o.selected=!0)}}function Jc(s,o,l){if(o!=null&&(o=""+jt(o),o!==s.value&&(s.value=o),l==null)){s.defaultValue!==o&&(s.defaultValue=o);return}s.defaultValue=l!=null?""+jt(l):""}function nr(s,o,l,c){if(o==null){if(c!=null){if(l!=null)throw Error(i(92));if(xe(c)){if(1<c.length)throw Error(i(93));c=c[0]}l=c}l==null&&(l=""),o=l}l=jt(o),s.defaultValue=l,c=s.textContent,c===l&&c!==""&&c!==null&&(s.value=c),at(s)}function Rn(s,o){if(o){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=o;return}}s.textContent=o}var Kc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Bl(s,o,l){var c=o.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="":c?s.setProperty(o,l):typeof l!="number"||l===0||Kc.has(o)?o==="float"?s.cssFloat=l:s[o]=(""+l).trim():s[o]=l+"px"}function ql(s,o,l){if(o!=null&&typeof o!="object")throw Error(i(62));if(s=s.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||o!=null&&o.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var y in o)c=o[y],o.hasOwnProperty(y)&&l[y]!==c&&Bl(s,y,c)}else for(var v in o)o.hasOwnProperty(v)&&Bl(s,v,o[v])}function na(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ir=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ia(s){return ir.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Ti(){}var Gl=null;function ei(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var sr=null,Xi=null;function ro(s){var o=Zn(s);if(o&&(s=o.stateNode)){var l=s[Xt]||null;e:switch(s=o.stateNode,o.type){case"input":if(ta(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),o=l.name,l.type==="radio"&&o!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+bn(""+o)+'"][type="radio"]'),o=0;o<l.length;o++){var c=l[o];if(c!==s&&c.form===s.form){var y=c[Xt]||null;if(!y)throw Error(i(90));ta(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(o=0;o<l.length;o++)c=l[o],c.form===s.form&&io(c)}break e;case"textarea":Jc(s,l.value,l.defaultValue);break e;case"select":o=l.value,o!=null&&tr(s,!!l.multiple,o,!1)}}}var sa=!1;function rr(s,o,l){if(sa)return s(o,l);sa=!0;try{var c=s(o);return c}finally{if(sa=!1,(sr!==null||Xi!==null)&&(qd(),sr&&(o=sr,s=Xi,Xi=sr=null,ro(o),s)))for(o=0;o<s.length;o++)ro(s[o])}}function Ei(s,o){var l=s.stateNode;if(l===null)return null;var c=l[Xt]||null;if(c===null)return null;l=c[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(i(231,o,typeof l));return l}var ti=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),oo=!1;if(ti)try{var ct={};Object.defineProperty(ct,"passive",{get:function(){oo=!0}}),window.addEventListener("test",ct,ct),window.removeEventListener("test",ct,ct)}catch{oo=!1}var ji=null,Hl=null,ao=null;function zl(){if(ao)return ao;var s,o=Hl,l=o.length,c,y="value"in ji?ji.value:ji.textContent,v=y.length;for(s=0;s<l&&o[s]===y[s];s++);var A=l-s;for(c=1;c<=A&&o[l-c]===y[v-c];c++);return ao=y.slice(s,1<c?1-c:void 0)}function lo(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function Ts(){return!0}function Si(){return!1}function on(s){function o(l,c,y,v,A){this._reactName=l,this._targetInst=y,this.type=c,this.nativeEvent=v,this.target=A,this.currentTarget=null;for(var b in s)s.hasOwnProperty(b)&&(l=s[b],this[b]=l?l(v):v[b]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Ts:Si,this.isPropagationStopped=Si,this}return T(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Ts)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Ts)},persist:function(){},isPersistent:Ts}),o}var Es={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zi=on(Es),or=T({},Es,{view:0,detail:0}),$l=on(or),ar,ra,es,oa=T({},or,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lr,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==es&&(es&&s.type==="mousemove"?(ar=s.screenX-es.screenX,ra=s.screenY-es.screenY):ra=ar=0,es=s),ar)},movementY:function(s){return"movementY"in s?s.movementY:ra}}),Jl=on(oa),uo=T({},oa,{dataTransfer:0}),Wc=on(uo),Qc=T({},or,{relatedTarget:0}),co=on(Qc),Kl=T({},Es,{animationName:0,elapsedTime:0,pseudoElement:0}),Xc=on(Kl),aa=T({},Es,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),jc=on(aa),Zc=T({},Es,{data:0}),ts=on(Zc),ed={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},td={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function id(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=nd[s])?!!o[s]:!1}function lr(){return id}var An=T({},or,{key:function(s){if(s.key){var o=ed[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=lo(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?td[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lr,charCode:function(s){return s.type==="keypress"?lo(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?lo(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),sd=on(An),rd=T({},oa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ss=on(rd),g=T({},or,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lr}),S=on(g),w=T({},Es,{propertyName:0,elapsedTime:0,pseudoElement:0}),R=on(w),J=T({},oa,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),ee=on(J),de=T({},Es,{newState:0,oldState:0}),Fe=on(de),xt=[9,13,27,32],st=ti&&"CompositionEvent"in window,vt=null;ti&&"documentMode"in document&&(vt=document.documentMode);var ni=ti&&"TextEvent"in window&&!vt,ns=ti&&(!st||vt&&8<vt&&11>=vt),Ai=" ",wi=!1;function fo(s,o){switch(s){case"keyup":return xt.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function la(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ua=!1;function GN(s,o){switch(s){case"compositionend":return la(o);case"keypress":return o.which!==32?null:(wi=!0,Ai);case"textInput":return s=o.data,s===Ai&&wi?null:s;default:return null}}function HN(s,o){if(ua)return s==="compositionend"||!st&&fo(s,o)?(s=zl(),ao=Hl=ji=null,ua=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return ns&&o.locale!=="ko"?null:o.data;default:return null}}var zN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sv(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!zN[s.type]:o==="textarea"}function Av(s,o,l,c){sr?Xi?Xi.push(c):Xi=[c]:sr=c,o=Yd(o,"onChange"),0<o.length&&(l=new Zi("onChange","change",null,l,c),s.push({event:l,listeners:o}))}var Yl=null,Wl=null;function $N(s){rE(s,0)}function od(s){var o=Fn(s);if(io(o))return s}function wv(s,o){if(s==="change")return o}var Cv=!1;if(ti){var yp;if(ti){var _p="oninput"in document;if(!_p){var Iv=document.createElement("div");Iv.setAttribute("oninput","return;"),_p=typeof Iv.oninput=="function"}yp=_p}else yp=!1;Cv=yp&&(!document.documentMode||9<document.documentMode)}function bv(){Yl&&(Yl.detachEvent("onpropertychange",Rv),Wl=Yl=null)}function Rv(s){if(s.propertyName==="value"&&od(Wl)){var o=[];Av(o,Wl,s,ei(s)),rr($N,o)}}function JN(s,o,l){s==="focusin"?(bv(),Yl=o,Wl=l,Yl.attachEvent("onpropertychange",Rv)):s==="focusout"&&bv()}function KN(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return od(Wl)}function YN(s,o){if(s==="click")return od(o)}function WN(s,o){if(s==="input"||s==="change")return od(o)}function QN(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var qn=typeof Object.is=="function"?Object.is:QN;function Ql(s,o){if(qn(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var l=Object.keys(s),c=Object.keys(o);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var y=l[c];if(!Pt.call(o,y)||!qn(s[y],o[y]))return!1}return!0}function xv(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Nv(s,o){var l=xv(s);s=0;for(var c;l;){if(l.nodeType===3){if(c=s+l.textContent.length,s<=o&&c>=o)return{node:l,offset:o-s};s=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=xv(l)}}function Mv(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?Mv(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function Dv(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var o=Qi(s.document);o instanceof s.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)s=o.contentWindow;else break;o=Qi(s.document)}return o}function vp(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}var XN=ti&&"documentMode"in document&&11>=document.documentMode,ca=null,Tp=null,Xl=null,Ep=!1;function Pv(s,o,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Ep||ca==null||ca!==Qi(c)||(c=ca,"selectionStart"in c&&vp(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Xl&&Ql(Xl,c)||(Xl=c,c=Yd(Tp,"onSelect"),0<c.length&&(o=new Zi("onSelect","select",null,o,l),s.push({event:o,listeners:c}),o.target=ca)))}function ho(s,o){var l={};return l[s.toLowerCase()]=o.toLowerCase(),l["Webkit"+s]="webkit"+o,l["Moz"+s]="moz"+o,l}var da={animationend:ho("Animation","AnimationEnd"),animationiteration:ho("Animation","AnimationIteration"),animationstart:ho("Animation","AnimationStart"),transitionrun:ho("Transition","TransitionRun"),transitionstart:ho("Transition","TransitionStart"),transitioncancel:ho("Transition","TransitionCancel"),transitionend:ho("Transition","TransitionEnd")},Sp={},kv={};ti&&(kv=document.createElement("div").style,"AnimationEvent"in window||(delete da.animationend.animation,delete da.animationiteration.animation,delete da.animationstart.animation),"TransitionEvent"in window||delete da.transitionend.transition);function po(s){if(Sp[s])return Sp[s];if(!da[s])return s;var o=da[s],l;for(l in o)if(o.hasOwnProperty(l)&&l in kv)return Sp[s]=o[l];return s}var Vv=po("animationend"),Uv=po("animationiteration"),Lv=po("animationstart"),jN=po("transitionrun"),ZN=po("transitionstart"),e1=po("transitioncancel"),Ov=po("transitionend"),Fv=new Map,Ap="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ap.push("scrollEnd");function Ci(s,o){Fv.set(s,o),Yi(o,[s])}var ad=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},ii=[],fa=0,wp=0;function ld(){for(var s=fa,o=wp=fa=0;o<s;){var l=ii[o];ii[o++]=null;var c=ii[o];ii[o++]=null;var y=ii[o];ii[o++]=null;var v=ii[o];if(ii[o++]=null,c!==null&&y!==null){var A=c.pending;A===null?y.next=y:(y.next=A.next,A.next=y),c.pending=y}v!==0&&Bv(l,y,v)}}function ud(s,o,l,c){ii[fa++]=s,ii[fa++]=o,ii[fa++]=l,ii[fa++]=c,wp|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function Cp(s,o,l,c){return ud(s,o,l,c),cd(s)}function mo(s,o){return ud(s,null,null,o),cd(s)}function Bv(s,o,l){s.lanes|=l;var c=s.alternate;c!==null&&(c.lanes|=l);for(var y=!1,v=s.return;v!==null;)v.childLanes|=l,c=v.alternate,c!==null&&(c.childLanes|=l),v.tag===22&&(s=v.stateNode,s===null||s._visibility&1||(y=!0)),s=v,v=v.return;return s.tag===3?(v=s.stateNode,y&&o!==null&&(y=31-Rt(l),s=v.hiddenUpdates,c=s[y],c===null?s[y]=[o]:c.push(o),o.lane=l|536870912),v):null}function cd(s){if(50<vu)throw vu=0,km=null,Error(i(185));for(var o=s.return;o!==null;)s=o,o=s.return;return s.tag===3?s.stateNode:null}var ha={};function t1(s,o,l,c){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(s,o,l,c){return new t1(s,o,l,c)}function Ip(s){return s=s.prototype,!(!s||!s.isReactComponent)}function As(s,o){var l=s.alternate;return l===null?(l=Gn(s.tag,o,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=o,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,o=s.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function qv(s,o){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=o,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,o=l.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s}function dd(s,o,l,c,y,v){var A=0;if(c=s,typeof s=="function")Ip(s)&&(A=1);else if(typeof s=="string")A=oM(s,l,me.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case x:return s=Gn(31,l,o,y),s.elementType=x,s.lanes=v,s;case U:return go(l.children,y,v,o);case P:A=8,y|=24;break;case $:return s=Gn(12,l,o,y|2),s.elementType=$,s.lanes=v,s;case ue:return s=Gn(13,l,o,y),s.elementType=ue,s.lanes=v,s;case W:return s=Gn(19,l,o,y),s.elementType=W,s.lanes=v,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case z:A=10;break e;case H:A=9;break e;case X:A=11;break e;case N:A=14;break e;case D:A=16,c=null;break e}A=29,l=Error(i(130,s===null?"null":typeof s,"")),c=null}return o=Gn(A,l,o,y),o.elementType=s,o.type=c,o.lanes=v,o}function go(s,o,l,c){return s=Gn(7,s,c,o),s.lanes=l,s}function bp(s,o,l){return s=Gn(6,s,null,o),s.lanes=l,s}function Gv(s){var o=Gn(18,null,null,0);return o.stateNode=s,o}function Rp(s,o,l){return o=Gn(4,s.children!==null?s.children:[],s.key,o),o.lanes=l,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}var Hv=new WeakMap;function si(s,o){if(typeof s=="object"&&s!==null){var l=Hv.get(s);return l!==void 0?l:(o={value:s,source:o,stack:Rl(o)},Hv.set(s,o),o)}return{value:s,source:o,stack:Rl(o)}}var pa=[],ma=0,fd=null,jl=0,ri=[],oi=0,ur=null,is=1,ss="";function ws(s,o){pa[ma++]=jl,pa[ma++]=fd,fd=s,jl=o}function zv(s,o,l){ri[oi++]=is,ri[oi++]=ss,ri[oi++]=ur,ur=s;var c=is;s=ss;var y=32-Rt(c)-1;c&=~(1<<y),l+=1;var v=32-Rt(o)+y;if(30<v){var A=y-y%5;v=(c&(1<<A)-1).toString(32),c>>=A,y-=A,is=1<<32-Rt(o)+y|l<<y|c,ss=v+s}else is=1<<v|l<<y|c,ss=s}function xp(s){s.return!==null&&(ws(s,1),zv(s,1,0))}function Np(s){for(;s===fd;)fd=pa[--ma],pa[ma]=null,jl=pa[--ma],pa[ma]=null;for(;s===ur;)ur=ri[--oi],ri[oi]=null,ss=ri[--oi],ri[oi]=null,is=ri[--oi],ri[oi]=null}function $v(s,o){ri[oi++]=is,ri[oi++]=ss,ri[oi++]=ur,is=o.id,ss=o.overflow,ur=s}var an=null,gt=null,Ze=!1,cr=null,ai=!1,Mp=Error(i(519));function dr(s){var o=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Zl(si(o,s)),Mp}function Jv(s){var o=s.stateNode,l=s.type,c=s.memoizedProps;switch(o[Vt]=s,o[Xt]=c,l){case"dialog":Ke("cancel",o),Ke("close",o);break;case"iframe":case"object":case"embed":Ke("load",o);break;case"video":case"audio":for(l=0;l<Eu.length;l++)Ke(Eu[l],o);break;case"source":Ke("error",o);break;case"img":case"image":case"link":Ke("error",o),Ke("load",o);break;case"details":Ke("toggle",o);break;case"input":Ke("invalid",o),$c(o,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Ke("invalid",o);break;case"textarea":Ke("invalid",o),nr(o,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||o.textContent===""+l||c.suppressHydrationWarning===!0||uE(o.textContent,l)?(c.popover!=null&&(Ke("beforetoggle",o),Ke("toggle",o)),c.onScroll!=null&&Ke("scroll",o),c.onScrollEnd!=null&&Ke("scrollend",o),c.onClick!=null&&(o.onclick=Ti),o=!0):o=!1,o||dr(s,!0)}function Kv(s){for(an=s.return;an;)switch(an.tag){case 5:case 31:case 13:ai=!1;return;case 27:case 3:ai=!0;return;default:an=an.return}}function ga(s){if(s!==an)return!1;if(!Ze)return Kv(s),Ze=!0,!1;var o=s.tag,l;if((l=o!==3&&o!==27)&&((l=o===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||Wm(s.type,s.memoizedProps)),l=!l),l&&gt&&dr(s),Kv(s),o===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));gt=_E(s)}else if(o===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));gt=_E(s)}else o===27?(o=gt,Cr(s.type)?(s=eg,eg=null,gt=s):gt=o):gt=an?ui(s.stateNode.nextSibling):null;return!0}function yo(){gt=an=null,Ze=!1}function Dp(){var s=cr;return s!==null&&(Dn===null?Dn=s:Dn.push.apply(Dn,s),cr=null),s}function Zl(s){cr===null?cr=[s]:cr.push(s)}var Pp=F(null),_o=null,Cs=null;function fr(s,o,l){he(Pp,o._currentValue),o._currentValue=l}function Is(s){s._currentValue=Pp.current,ie(Pp)}function kp(s,o,l){for(;s!==null;){var c=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,c!==null&&(c.childLanes|=o)):c!==null&&(c.childLanes&o)!==o&&(c.childLanes|=o),s===l)break;s=s.return}}function Vp(s,o,l,c){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var v=y.dependencies;if(v!==null){var A=y.child;v=v.firstContext;e:for(;v!==null;){var b=v;v=y;for(var O=0;O<o.length;O++)if(b.context===o[O]){v.lanes|=l,b=v.alternate,b!==null&&(b.lanes|=l),kp(v.return,l,s),c||(A=null);break e}v=b.next}}else if(y.tag===18){if(A=y.return,A===null)throw Error(i(341));A.lanes|=l,v=A.alternate,v!==null&&(v.lanes|=l),kp(A,l,s),A=null}else A=y.child;if(A!==null)A.return=y;else for(A=y;A!==null;){if(A===s){A=null;break}if(y=A.sibling,y!==null){y.return=A.return,A=y;break}A=A.return}y=A}}function ya(s,o,l,c){s=null;for(var y=o,v=!1;y!==null;){if(!v){if((y.flags&524288)!==0)v=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var A=y.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var b=y.type;qn(y.pendingProps.value,A.value)||(s!==null?s.push(b):s=[b])}}else if(y===Pe.current){if(A=y.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(Iu):s=[Iu])}y=y.return}s!==null&&Vp(o,s,l,c),o.flags|=262144}function hd(s){for(s=s.firstContext;s!==null;){if(!qn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function vo(s){_o=s,Cs=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function ln(s){return Yv(_o,s)}function pd(s,o){return _o===null&&vo(s),Yv(s,o)}function Yv(s,o){var l=o._currentValue;if(o={context:o,memoizedValue:l,next:null},Cs===null){if(s===null)throw Error(i(308));Cs=o,s.dependencies={lanes:0,firstContext:o},s.flags|=524288}else Cs=Cs.next=o;return l}var n1=typeof AbortController<"u"?AbortController:function(){var s=[],o=this.signal={aborted:!1,addEventListener:function(l,c){s.push(c)}};this.abort=function(){o.aborted=!0,s.forEach(function(l){return l()})}},i1=n.unstable_scheduleCallback,s1=n.unstable_NormalPriority,Ot={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Up(){return{controller:new n1,data:new Map,refCount:0}}function eu(s){s.refCount--,s.refCount===0&&i1(s1,function(){s.controller.abort()})}var tu=null,Lp=0,_a=0,va=null;function r1(s,o){if(tu===null){var l=tu=[];Lp=0,_a=Bm(),va={status:"pending",value:void 0,then:function(c){l.push(c)}}}return Lp++,o.then(Wv,Wv),o}function Wv(){if(--Lp===0&&tu!==null){va!==null&&(va.status="fulfilled");var s=tu;tu=null,_a=0,va=null;for(var o=0;o<s.length;o++)(0,s[o])()}}function o1(s,o){var l=[],c={status:"pending",value:null,reason:null,then:function(y){l.push(y)}};return s.then(function(){c.status="fulfilled",c.value=o;for(var y=0;y<l.length;y++)(0,l[y])(o)},function(y){for(c.status="rejected",c.reason=y,y=0;y<l.length;y++)(0,l[y])(void 0)}),c}var Qv=Z.S;Z.S=function(s,o){PT=Sn(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&r1(s,o),Qv!==null&&Qv(s,o)};var To=F(null);function Op(){var s=To.current;return s!==null?s:pt.pooledCache}function md(s,o){o===null?he(To,To.current):he(To,o.pool)}function Xv(){var s=Op();return s===null?null:{parent:Ot._currentValue,pool:s}}var Ta=Error(i(460)),Fp=Error(i(474)),gd=Error(i(542)),yd={then:function(){}};function jv(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Zv(s,o,l){switch(l=s[l],l===void 0?s.push(o):l!==o&&(o.then(Ti,Ti),o=l),o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,t0(s),s;default:if(typeof o.status=="string")o.then(Ti,Ti);else{if(s=pt,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=o,s.status="pending",s.then(function(c){if(o.status==="pending"){var y=o;y.status="fulfilled",y.value=c}},function(c){if(o.status==="pending"){var y=o;y.status="rejected",y.reason=c}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,t0(s),s}throw So=o,Ta}}function Eo(s){try{var o=s._init;return o(s._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(So=l,Ta):l}}var So=null;function e0(){if(So===null)throw Error(i(459));var s=So;return So=null,s}function t0(s){if(s===Ta||s===gd)throw Error(i(483))}var Ea=null,nu=0;function _d(s){var o=nu;return nu+=1,Ea===null&&(Ea=[]),Zv(Ea,s,o)}function iu(s,o){o=o.props.ref,s.ref=o!==void 0?o:null}function vd(s,o){throw o.$$typeof===E?Error(i(525)):(s=Object.prototype.toString.call(o),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s)))}function n0(s){function o(G,B){if(s){var K=G.deletions;K===null?(G.deletions=[B],G.flags|=16):K.push(B)}}function l(G,B){if(!s)return null;for(;B!==null;)o(G,B),B=B.sibling;return null}function c(G){for(var B=new Map;G!==null;)G.key!==null?B.set(G.key,G):B.set(G.index,G),G=G.sibling;return B}function y(G,B){return G=As(G,B),G.index=0,G.sibling=null,G}function v(G,B,K){return G.index=K,s?(K=G.alternate,K!==null?(K=K.index,K<B?(G.flags|=67108866,B):K):(G.flags|=67108866,B)):(G.flags|=1048576,B)}function A(G){return s&&G.alternate===null&&(G.flags|=67108866),G}function b(G,B,K,se){return B===null||B.tag!==6?(B=bp(K,G.mode,se),B.return=G,B):(B=y(B,K),B.return=G,B)}function O(G,B,K,se){var Se=K.type;return Se===U?ne(G,B,K.props.children,se,K.key):B!==null&&(B.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===D&&Eo(Se)===B.type)?(B=y(B,K.props),iu(B,K),B.return=G,B):(B=dd(K.type,K.key,K.props,null,G.mode,se),iu(B,K),B.return=G,B)}function Y(G,B,K,se){return B===null||B.tag!==4||B.stateNode.containerInfo!==K.containerInfo||B.stateNode.implementation!==K.implementation?(B=Rp(K,G.mode,se),B.return=G,B):(B=y(B,K.children||[]),B.return=G,B)}function ne(G,B,K,se,Se){return B===null||B.tag!==7?(B=go(K,G.mode,se,Se),B.return=G,B):(B=y(B,K),B.return=G,B)}function re(G,B,K){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=bp(""+B,G.mode,K),B.return=G,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case C:return K=dd(B.type,B.key,B.props,null,G.mode,K),iu(K,B),K.return=G,K;case M:return B=Rp(B,G.mode,K),B.return=G,B;case D:return B=Eo(B),re(G,B,K)}if(xe(B)||q(B))return B=go(B,G.mode,K,null),B.return=G,B;if(typeof B.then=="function")return re(G,_d(B),K);if(B.$$typeof===z)return re(G,pd(G,B),K);vd(G,B)}return null}function j(G,B,K,se){var Se=B!==null?B.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return Se!==null?null:b(G,B,""+K,se);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case C:return K.key===Se?O(G,B,K,se):null;case M:return K.key===Se?Y(G,B,K,se):null;case D:return K=Eo(K),j(G,B,K,se)}if(xe(K)||q(K))return Se!==null?null:ne(G,B,K,se,null);if(typeof K.then=="function")return j(G,B,_d(K),se);if(K.$$typeof===z)return j(G,B,pd(G,K),se);vd(G,K)}return null}function te(G,B,K,se,Se){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return G=G.get(K)||null,b(B,G,""+se,Se);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case C:return G=G.get(se.key===null?K:se.key)||null,O(B,G,se,Se);case M:return G=G.get(se.key===null?K:se.key)||null,Y(B,G,se,Se);case D:return se=Eo(se),te(G,B,K,se,Se)}if(xe(se)||q(se))return G=G.get(K)||null,ne(B,G,se,Se,null);if(typeof se.then=="function")return te(G,B,K,_d(se),Se);if(se.$$typeof===z)return te(G,B,K,pd(B,se),Se);vd(B,se)}return null}function ve(G,B,K,se){for(var Se=null,tt=null,Te=B,qe=B=0,We=null;Te!==null&&qe<K.length;qe++){Te.index>qe?(We=Te,Te=null):We=Te.sibling;var nt=j(G,Te,K[qe],se);if(nt===null){Te===null&&(Te=We);break}s&&Te&&nt.alternate===null&&o(G,Te),B=v(nt,B,qe),tt===null?Se=nt:tt.sibling=nt,tt=nt,Te=We}if(qe===K.length)return l(G,Te),Ze&&ws(G,qe),Se;if(Te===null){for(;qe<K.length;qe++)Te=re(G,K[qe],se),Te!==null&&(B=v(Te,B,qe),tt===null?Se=Te:tt.sibling=Te,tt=Te);return Ze&&ws(G,qe),Se}for(Te=c(Te);qe<K.length;qe++)We=te(Te,G,qe,K[qe],se),We!==null&&(s&&We.alternate!==null&&Te.delete(We.key===null?qe:We.key),B=v(We,B,qe),tt===null?Se=We:tt.sibling=We,tt=We);return s&&Te.forEach(function(Nr){return o(G,Nr)}),Ze&&ws(G,qe),Se}function Ie(G,B,K,se){if(K==null)throw Error(i(151));for(var Se=null,tt=null,Te=B,qe=B=0,We=null,nt=K.next();Te!==null&&!nt.done;qe++,nt=K.next()){Te.index>qe?(We=Te,Te=null):We=Te.sibling;var Nr=j(G,Te,nt.value,se);if(Nr===null){Te===null&&(Te=We);break}s&&Te&&Nr.alternate===null&&o(G,Te),B=v(Nr,B,qe),tt===null?Se=Nr:tt.sibling=Nr,tt=Nr,Te=We}if(nt.done)return l(G,Te),Ze&&ws(G,qe),Se;if(Te===null){for(;!nt.done;qe++,nt=K.next())nt=re(G,nt.value,se),nt!==null&&(B=v(nt,B,qe),tt===null?Se=nt:tt.sibling=nt,tt=nt);return Ze&&ws(G,qe),Se}for(Te=c(Te);!nt.done;qe++,nt=K.next())nt=te(Te,G,qe,nt.value,se),nt!==null&&(s&&nt.alternate!==null&&Te.delete(nt.key===null?qe:nt.key),B=v(nt,B,qe),tt===null?Se=nt:tt.sibling=nt,tt=nt);return s&&Te.forEach(function(yM){return o(G,yM)}),Ze&&ws(G,qe),Se}function ht(G,B,K,se){if(typeof K=="object"&&K!==null&&K.type===U&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case C:e:{for(var Se=K.key;B!==null;){if(B.key===Se){if(Se=K.type,Se===U){if(B.tag===7){l(G,B.sibling),se=y(B,K.props.children),se.return=G,G=se;break e}}else if(B.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===D&&Eo(Se)===B.type){l(G,B.sibling),se=y(B,K.props),iu(se,K),se.return=G,G=se;break e}l(G,B);break}else o(G,B);B=B.sibling}K.type===U?(se=go(K.props.children,G.mode,se,K.key),se.return=G,G=se):(se=dd(K.type,K.key,K.props,null,G.mode,se),iu(se,K),se.return=G,G=se)}return A(G);case M:e:{for(Se=K.key;B!==null;){if(B.key===Se)if(B.tag===4&&B.stateNode.containerInfo===K.containerInfo&&B.stateNode.implementation===K.implementation){l(G,B.sibling),se=y(B,K.children||[]),se.return=G,G=se;break e}else{l(G,B);break}else o(G,B);B=B.sibling}se=Rp(K,G.mode,se),se.return=G,G=se}return A(G);case D:return K=Eo(K),ht(G,B,K,se)}if(xe(K))return ve(G,B,K,se);if(q(K)){if(Se=q(K),typeof Se!="function")throw Error(i(150));return K=Se.call(K),Ie(G,B,K,se)}if(typeof K.then=="function")return ht(G,B,_d(K),se);if(K.$$typeof===z)return ht(G,B,pd(G,K),se);vd(G,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,B!==null&&B.tag===6?(l(G,B.sibling),se=y(B,K),se.return=G,G=se):(l(G,B),se=bp(K,G.mode,se),se.return=G,G=se),A(G)):l(G,B)}return function(G,B,K,se){try{nu=0;var Se=ht(G,B,K,se);return Ea=null,Se}catch(Te){if(Te===Ta||Te===gd)throw Te;var tt=Gn(29,Te,null,G.mode);return tt.lanes=se,tt.return=G,tt}finally{}}}var Ao=n0(!0),i0=n0(!1),hr=!1;function Bp(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qp(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function pr(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function mr(s,o,l){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,(rt&2)!==0){var y=c.pending;return y===null?o.next=o:(o.next=y.next,y.next=o),c.pending=o,o=cd(s),Bv(s,null,l),o}return ud(s,c,o,l),cd(s)}function su(s,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194048)!==0)){var c=o.lanes;c&=s.pendingLanes,l|=c,o.lanes=l,Ml(s,l)}}function Gp(s,o){var l=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var y=null,v=null;if(l=l.firstBaseUpdate,l!==null){do{var A={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};v===null?y=v=A:v=v.next=A,l=l.next}while(l!==null);v===null?y=v=o:v=v.next=o}else y=v=o;l={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:v,shared:c.shared,callbacks:c.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=o:s.next=o,l.lastBaseUpdate=o}var Hp=!1;function ru(){if(Hp){var s=va;if(s!==null)throw s}}function ou(s,o,l,c){Hp=!1;var y=s.updateQueue;hr=!1;var v=y.firstBaseUpdate,A=y.lastBaseUpdate,b=y.shared.pending;if(b!==null){y.shared.pending=null;var O=b,Y=O.next;O.next=null,A===null?v=Y:A.next=Y,A=O;var ne=s.alternate;ne!==null&&(ne=ne.updateQueue,b=ne.lastBaseUpdate,b!==A&&(b===null?ne.firstBaseUpdate=Y:b.next=Y,ne.lastBaseUpdate=O))}if(v!==null){var re=y.baseState;A=0,ne=Y=O=null,b=v;do{var j=b.lane&-536870913,te=j!==b.lane;if(te?(Ye&j)===j:(c&j)===j){j!==0&&j===_a&&(Hp=!0),ne!==null&&(ne=ne.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var ve=s,Ie=b;j=o;var ht=l;switch(Ie.tag){case 1:if(ve=Ie.payload,typeof ve=="function"){re=ve.call(ht,re,j);break e}re=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=Ie.payload,j=typeof ve=="function"?ve.call(ht,re,j):ve,j==null)break e;re=T({},re,j);break e;case 2:hr=!0}}j=b.callback,j!==null&&(s.flags|=64,te&&(s.flags|=8192),te=y.callbacks,te===null?y.callbacks=[j]:te.push(j))}else te={lane:j,tag:b.tag,payload:b.payload,callback:b.callback,next:null},ne===null?(Y=ne=te,O=re):ne=ne.next=te,A|=j;if(b=b.next,b===null){if(b=y.shared.pending,b===null)break;te=b,b=te.next,te.next=null,y.lastBaseUpdate=te,y.shared.pending=null}}while(!0);ne===null&&(O=re),y.baseState=O,y.firstBaseUpdate=Y,y.lastBaseUpdate=ne,v===null&&(y.shared.lanes=0),Tr|=A,s.lanes=A,s.memoizedState=re}}function s0(s,o){if(typeof s!="function")throw Error(i(191,s));s.call(o)}function r0(s,o){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)s0(l[s],o)}var Sa=F(null),Td=F(0);function o0(s,o){s=Vs,he(Td,s),he(Sa,o),Vs=s|o.baseLanes}function zp(){he(Td,Vs),he(Sa,Sa.current)}function $p(){Vs=Td.current,ie(Sa),ie(Td)}var Hn=F(null),li=null;function gr(s){var o=s.alternate;he(Nt,Nt.current&1),he(Hn,s),li===null&&(o===null||Sa.current!==null||o.memoizedState!==null)&&(li=s)}function Jp(s){he(Nt,Nt.current),he(Hn,s),li===null&&(li=s)}function a0(s){s.tag===22?(he(Nt,Nt.current),he(Hn,s),li===null&&(li=s)):yr()}function yr(){he(Nt,Nt.current),he(Hn,Hn.current)}function zn(s){ie(Hn),li===s&&(li=null),ie(Nt)}var Nt=F(0);function Ed(s){for(var o=s;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||jm(l)||Zm(l)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var bs=0,Be=null,dt=null,Ft=null,Sd=!1,Aa=!1,wo=!1,Ad=0,au=0,wa=null,a1=0;function Ct(){throw Error(i(321))}function Kp(s,o){if(o===null)return!1;for(var l=0;l<o.length&&l<s.length;l++)if(!qn(s[l],o[l]))return!1;return!0}function Yp(s,o,l,c,y,v){return bs=v,Be=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Z.H=s===null||s.memoizedState===null?z0:um,wo=!1,v=l(c,y),wo=!1,Aa&&(v=u0(o,l,c,y)),l0(s),v}function l0(s){Z.H=cu;var o=dt!==null&&dt.next!==null;if(bs=0,Ft=dt=Be=null,Sd=!1,au=0,wa=null,o)throw Error(i(300));s===null||Bt||(s=s.dependencies,s!==null&&hd(s)&&(Bt=!0))}function u0(s,o,l,c){Be=s;var y=0;do{if(Aa&&(wa=null),au=0,Aa=!1,25<=y)throw Error(i(301));if(y+=1,Ft=dt=null,s.updateQueue!=null){var v=s.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}Z.H=$0,v=o(l,c)}while(Aa);return v}function l1(){var s=Z.H,o=s.useState()[0];return o=typeof o.then=="function"?lu(o):o,s=s.useState()[0],(dt!==null?dt.memoizedState:null)!==s&&(Be.flags|=1024),o}function Wp(){var s=Ad!==0;return Ad=0,s}function Qp(s,o,l){o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~l}function Xp(s){if(Sd){for(s=s.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}Sd=!1}bs=0,Ft=dt=Be=null,Aa=!1,au=Ad=0,wa=null}function wn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ft===null?Be.memoizedState=Ft=s:Ft=Ft.next=s,Ft}function Mt(){if(dt===null){var s=Be.alternate;s=s!==null?s.memoizedState:null}else s=dt.next;var o=Ft===null?Be.memoizedState:Ft.next;if(o!==null)Ft=o,dt=s;else{if(s===null)throw Be.alternate===null?Error(i(467)):Error(i(310));dt=s,s={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},Ft===null?Be.memoizedState=Ft=s:Ft=Ft.next=s}return Ft}function wd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function lu(s){var o=au;return au+=1,wa===null&&(wa=[]),s=Zv(wa,s,o),o=Be,(Ft===null?o.memoizedState:Ft.next)===null&&(o=o.alternate,Z.H=o===null||o.memoizedState===null?z0:um),s}function Cd(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return lu(s);if(s.$$typeof===z)return ln(s)}throw Error(i(438,String(s)))}function jp(s){var o=null,l=Be.updateQueue;if(l!==null&&(o=l.memoCache),o==null){var c=Be.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(o={data:c.data.map(function(y){return y.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),l===null&&(l=wd(),Be.updateQueue=l),l.memoCache=o,l=o.data[o.index],l===void 0)for(l=o.data[o.index]=Array(s),c=0;c<s;c++)l[c]=L;return o.index++,l}function Rs(s,o){return typeof o=="function"?o(s):o}function Id(s){var o=Mt();return Zp(o,dt,s)}function Zp(s,o,l){var c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=l;var y=s.baseQueue,v=c.pending;if(v!==null){if(y!==null){var A=y.next;y.next=v.next,v.next=A}o.baseQueue=y=v,c.pending=null}if(v=s.baseState,y===null)s.memoizedState=v;else{o=y.next;var b=A=null,O=null,Y=o,ne=!1;do{var re=Y.lane&-536870913;if(re!==Y.lane?(Ye&re)===re:(bs&re)===re){var j=Y.revertLane;if(j===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),re===_a&&(ne=!0);else if((bs&j)===j){Y=Y.next,j===_a&&(ne=!0);continue}else re={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},O===null?(b=O=re,A=v):O=O.next=re,Be.lanes|=j,Tr|=j;re=Y.action,wo&&l(v,re),v=Y.hasEagerState?Y.eagerState:l(v,re)}else j={lane:re,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},O===null?(b=O=j,A=v):O=O.next=j,Be.lanes|=re,Tr|=re;Y=Y.next}while(Y!==null&&Y!==o);if(O===null?A=v:O.next=b,!qn(v,s.memoizedState)&&(Bt=!0,ne&&(l=va,l!==null)))throw l;s.memoizedState=v,s.baseState=A,s.baseQueue=O,c.lastRenderedState=v}return y===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function em(s){var o=Mt(),l=o.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var c=l.dispatch,y=l.pending,v=o.memoizedState;if(y!==null){l.pending=null;var A=y=y.next;do v=s(v,A.action),A=A.next;while(A!==y);qn(v,o.memoizedState)||(Bt=!0),o.memoizedState=v,o.baseQueue===null&&(o.baseState=v),l.lastRenderedState=v}return[v,c]}function c0(s,o,l){var c=Be,y=Mt(),v=Ze;if(v){if(l===void 0)throw Error(i(407));l=l()}else l=o();var A=!qn((dt||y).memoizedState,l);if(A&&(y.memoizedState=l,Bt=!0),y=y.queue,im(h0.bind(null,c,y,s),[s]),y.getSnapshot!==o||A||Ft!==null&&Ft.memoizedState.tag&1){if(c.flags|=2048,Ca(9,{destroy:void 0},f0.bind(null,c,y,l,o),null),pt===null)throw Error(i(349));v||(bs&127)!==0||d0(c,o,l)}return l}function d0(s,o,l){s.flags|=16384,s={getSnapshot:o,value:l},o=Be.updateQueue,o===null?(o=wd(),Be.updateQueue=o,o.stores=[s]):(l=o.stores,l===null?o.stores=[s]:l.push(s))}function f0(s,o,l,c){o.value=l,o.getSnapshot=c,p0(o)&&m0(s)}function h0(s,o,l){return l(function(){p0(o)&&m0(s)})}function p0(s){var o=s.getSnapshot;s=s.value;try{var l=o();return!qn(s,l)}catch{return!0}}function m0(s){var o=mo(s,2);o!==null&&Pn(o,s,2)}function tm(s){var o=wn();if(typeof s=="function"){var l=s;if(s=l(),wo){jn(!0);try{l()}finally{jn(!1)}}}return o.memoizedState=o.baseState=s,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rs,lastRenderedState:s},o}function g0(s,o,l,c){return s.baseState=l,Zp(s,dt,typeof c=="function"?c:Rs)}function u1(s,o,l,c,y){if(xd(s))throw Error(i(485));if(s=o.action,s!==null){var v={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){v.listeners.push(A)}};Z.T!==null?l(!0):v.isTransition=!1,c(v),l=o.pending,l===null?(v.next=o.pending=v,y0(o,v)):(v.next=l.next,o.pending=l.next=v)}}function y0(s,o){var l=o.action,c=o.payload,y=s.state;if(o.isTransition){var v=Z.T,A={};Z.T=A;try{var b=l(y,c),O=Z.S;O!==null&&O(A,b),_0(s,o,b)}catch(Y){nm(s,o,Y)}finally{v!==null&&A.types!==null&&(v.types=A.types),Z.T=v}}else try{v=l(y,c),_0(s,o,v)}catch(Y){nm(s,o,Y)}}function _0(s,o,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){v0(s,o,c)},function(c){return nm(s,o,c)}):v0(s,o,l)}function v0(s,o,l){o.status="fulfilled",o.value=l,T0(o),s.state=l,o=s.pending,o!==null&&(l=o.next,l===o?s.pending=null:(l=l.next,o.next=l,y0(s,l)))}function nm(s,o,l){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do o.status="rejected",o.reason=l,T0(o),o=o.next;while(o!==c)}s.action=null}function T0(s){s=s.listeners;for(var o=0;o<s.length;o++)(0,s[o])()}function E0(s,o){return o}function S0(s,o){if(Ze){var l=pt.formState;if(l!==null){e:{var c=Be;if(Ze){if(gt){t:{for(var y=gt,v=ai;y.nodeType!==8;){if(!v){y=null;break t}if(y=ui(y.nextSibling),y===null){y=null;break t}}v=y.data,y=v==="F!"||v==="F"?y:null}if(y){gt=ui(y.nextSibling),c=y.data==="F!";break e}}dr(c)}c=!1}c&&(o=l[0])}}return l=wn(),l.memoizedState=l.baseState=o,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:E0,lastRenderedState:o},l.queue=c,l=q0.bind(null,Be,c),c.dispatch=l,c=tm(!1),v=lm.bind(null,Be,!1,c.queue),c=wn(),y={state:o,dispatch:null,action:s,pending:null},c.queue=y,l=u1.bind(null,Be,y,v,l),y.dispatch=l,c.memoizedState=s,[o,l,!1]}function A0(s){var o=Mt();return w0(o,dt,s)}function w0(s,o,l){if(o=Zp(s,o,E0)[0],s=Id(Rs)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var c=lu(o)}catch(A){throw A===Ta?gd:A}else c=o;o=Mt();var y=o.queue,v=y.dispatch;return l!==o.memoizedState&&(Be.flags|=2048,Ca(9,{destroy:void 0},c1.bind(null,y,l),null)),[c,v,s]}function c1(s,o){s.action=o}function C0(s){var o=Mt(),l=dt;if(l!==null)return w0(o,l,s);Mt(),o=o.memoizedState,l=Mt();var c=l.queue.dispatch;return l.memoizedState=s,[o,c,!1]}function Ca(s,o,l,c){return s={tag:s,create:l,deps:c,inst:o,next:null},o=Be.updateQueue,o===null&&(o=wd(),Be.updateQueue=o),l=o.lastEffect,l===null?o.lastEffect=s.next=s:(c=l.next,l.next=s,s.next=c,o.lastEffect=s),s}function I0(){return Mt().memoizedState}function bd(s,o,l,c){var y=wn();Be.flags|=s,y.memoizedState=Ca(1|o,{destroy:void 0},l,c===void 0?null:c)}function Rd(s,o,l,c){var y=Mt();c=c===void 0?null:c;var v=y.memoizedState.inst;dt!==null&&c!==null&&Kp(c,dt.memoizedState.deps)?y.memoizedState=Ca(o,v,l,c):(Be.flags|=s,y.memoizedState=Ca(1|o,v,l,c))}function b0(s,o){bd(8390656,8,s,o)}function im(s,o){Rd(2048,8,s,o)}function d1(s){Be.flags|=4;var o=Be.updateQueue;if(o===null)o=wd(),Be.updateQueue=o,o.events=[s];else{var l=o.events;l===null?o.events=[s]:l.push(s)}}function R0(s){var o=Mt().memoizedState;return d1({ref:o,nextImpl:s}),function(){if((rt&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}function x0(s,o){return Rd(4,2,s,o)}function N0(s,o){return Rd(4,4,s,o)}function M0(s,o){if(typeof o=="function"){s=s();var l=o(s);return function(){typeof l=="function"?l():o(null)}}if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function D0(s,o,l){l=l!=null?l.concat([s]):null,Rd(4,4,M0.bind(null,o,s),l)}function sm(){}function P0(s,o){var l=Mt();o=o===void 0?null:o;var c=l.memoizedState;return o!==null&&Kp(o,c[1])?c[0]:(l.memoizedState=[s,o],s)}function k0(s,o){var l=Mt();o=o===void 0?null:o;var c=l.memoizedState;if(o!==null&&Kp(o,c[1]))return c[0];if(c=s(),wo){jn(!0);try{s()}finally{jn(!1)}}return l.memoizedState=[c,o],c}function rm(s,o,l){return l===void 0||(bs&1073741824)!==0&&(Ye&261930)===0?s.memoizedState=o:(s.memoizedState=l,s=VT(),Be.lanes|=s,Tr|=s,l)}function V0(s,o,l,c){return qn(l,o)?l:Sa.current!==null?(s=rm(s,l,c),qn(s,o)||(Bt=!0),s):(bs&42)===0||(bs&1073741824)!==0&&(Ye&261930)===0?(Bt=!0,s.memoizedState=l):(s=VT(),Be.lanes|=s,Tr|=s,o)}function U0(s,o,l,c,y){var v=ce.p;ce.p=v!==0&&8>v?v:8;var A=Z.T,b={};Z.T=b,lm(s,!1,o,l);try{var O=y(),Y=Z.S;if(Y!==null&&Y(b,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var ne=o1(O,c);uu(s,o,ne,Kn(s))}else uu(s,o,c,Kn(s))}catch(re){uu(s,o,{then:function(){},status:"rejected",reason:re},Kn())}finally{ce.p=v,A!==null&&b.types!==null&&(A.types=b.types),Z.T=A}}function f1(){}function om(s,o,l,c){if(s.tag!==5)throw Error(i(476));var y=L0(s).queue;U0(s,y,o,fe,l===null?f1:function(){return O0(s),l(c)})}function L0(s){var o=s.memoizedState;if(o!==null)return o;o={memoizedState:fe,baseState:fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rs,lastRenderedState:fe},next:null};var l={};return o.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rs,lastRenderedState:l},next:null},s.memoizedState=o,s=s.alternate,s!==null&&(s.memoizedState=o),o}function O0(s){var o=L0(s);o.next===null&&(o=s.alternate.memoizedState),uu(s,o.next.queue,{},Kn())}function am(){return ln(Iu)}function F0(){return Mt().memoizedState}function B0(){return Mt().memoizedState}function h1(s){for(var o=s.return;o!==null;){switch(o.tag){case 24:case 3:var l=Kn();s=pr(l);var c=mr(o,s,l);c!==null&&(Pn(c,o,l),su(c,o,l)),o={cache:Up()},s.payload=o;return}o=o.return}}function p1(s,o,l){var c=Kn();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},xd(s)?G0(o,l):(l=Cp(s,o,l,c),l!==null&&(Pn(l,s,c),H0(l,o,c)))}function q0(s,o,l){var c=Kn();uu(s,o,l,c)}function uu(s,o,l,c){var y={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(xd(s))G0(o,y);else{var v=s.alternate;if(s.lanes===0&&(v===null||v.lanes===0)&&(v=o.lastRenderedReducer,v!==null))try{var A=o.lastRenderedState,b=v(A,l);if(y.hasEagerState=!0,y.eagerState=b,qn(b,A))return ud(s,o,y,0),pt===null&&ld(),!1}catch{}finally{}if(l=Cp(s,o,y,c),l!==null)return Pn(l,s,c),H0(l,o,c),!0}return!1}function lm(s,o,l,c){if(c={lane:2,revertLane:Bm(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},xd(s)){if(o)throw Error(i(479))}else o=Cp(s,l,c,2),o!==null&&Pn(o,s,2)}function xd(s){var o=s.alternate;return s===Be||o!==null&&o===Be}function G0(s,o){Aa=Sd=!0;var l=s.pending;l===null?o.next=o:(o.next=l.next,l.next=o),s.pending=o}function H0(s,o,l){if((l&4194048)!==0){var c=o.lanes;c&=s.pendingLanes,l|=c,o.lanes=l,Ml(s,l)}}var cu={readContext:ln,use:Cd,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useLayoutEffect:Ct,useInsertionEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useSyncExternalStore:Ct,useId:Ct,useHostTransitionStatus:Ct,useFormState:Ct,useActionState:Ct,useOptimistic:Ct,useMemoCache:Ct,useCacheRefresh:Ct};cu.useEffectEvent=Ct;var z0={readContext:ln,use:Cd,useCallback:function(s,o){return wn().memoizedState=[s,o===void 0?null:o],s},useContext:ln,useEffect:b0,useImperativeHandle:function(s,o,l){l=l!=null?l.concat([s]):null,bd(4194308,4,M0.bind(null,o,s),l)},useLayoutEffect:function(s,o){return bd(4194308,4,s,o)},useInsertionEffect:function(s,o){bd(4,2,s,o)},useMemo:function(s,o){var l=wn();o=o===void 0?null:o;var c=s();if(wo){jn(!0);try{s()}finally{jn(!1)}}return l.memoizedState=[c,o],c},useReducer:function(s,o,l){var c=wn();if(l!==void 0){var y=l(o);if(wo){jn(!0);try{l(o)}finally{jn(!1)}}}else y=o;return c.memoizedState=c.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},c.queue=s,s=s.dispatch=p1.bind(null,Be,s),[c.memoizedState,s]},useRef:function(s){var o=wn();return s={current:s},o.memoizedState=s},useState:function(s){s=tm(s);var o=s.queue,l=q0.bind(null,Be,o);return o.dispatch=l,[s.memoizedState,l]},useDebugValue:sm,useDeferredValue:function(s,o){var l=wn();return rm(l,s,o)},useTransition:function(){var s=tm(!1);return s=U0.bind(null,Be,s.queue,!0,!1),wn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,o,l){var c=Be,y=wn();if(Ze){if(l===void 0)throw Error(i(407));l=l()}else{if(l=o(),pt===null)throw Error(i(349));(Ye&127)!==0||d0(c,o,l)}y.memoizedState=l;var v={value:l,getSnapshot:o};return y.queue=v,b0(h0.bind(null,c,v,s),[s]),c.flags|=2048,Ca(9,{destroy:void 0},f0.bind(null,c,v,l,o),null),l},useId:function(){var s=wn(),o=pt.identifierPrefix;if(Ze){var l=ss,c=is;l=(c&~(1<<32-Rt(c)-1)).toString(32)+l,o="_"+o+"R_"+l,l=Ad++,0<l&&(o+="H"+l.toString(32)),o+="_"}else l=a1++,o="_"+o+"r_"+l.toString(32)+"_";return s.memoizedState=o},useHostTransitionStatus:am,useFormState:S0,useActionState:S0,useOptimistic:function(s){var o=wn();o.memoizedState=o.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=l,o=lm.bind(null,Be,!0,l),l.dispatch=o,[s,o]},useMemoCache:jp,useCacheRefresh:function(){return wn().memoizedState=h1.bind(null,Be)},useEffectEvent:function(s){var o=wn(),l={impl:s};return o.memoizedState=l,function(){if((rt&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},um={readContext:ln,use:Cd,useCallback:P0,useContext:ln,useEffect:im,useImperativeHandle:D0,useInsertionEffect:x0,useLayoutEffect:N0,useMemo:k0,useReducer:Id,useRef:I0,useState:function(){return Id(Rs)},useDebugValue:sm,useDeferredValue:function(s,o){var l=Mt();return V0(l,dt.memoizedState,s,o)},useTransition:function(){var s=Id(Rs)[0],o=Mt().memoizedState;return[typeof s=="boolean"?s:lu(s),o]},useSyncExternalStore:c0,useId:F0,useHostTransitionStatus:am,useFormState:A0,useActionState:A0,useOptimistic:function(s,o){var l=Mt();return g0(l,dt,s,o)},useMemoCache:jp,useCacheRefresh:B0};um.useEffectEvent=R0;var $0={readContext:ln,use:Cd,useCallback:P0,useContext:ln,useEffect:im,useImperativeHandle:D0,useInsertionEffect:x0,useLayoutEffect:N0,useMemo:k0,useReducer:em,useRef:I0,useState:function(){return em(Rs)},useDebugValue:sm,useDeferredValue:function(s,o){var l=Mt();return dt===null?rm(l,s,o):V0(l,dt.memoizedState,s,o)},useTransition:function(){var s=em(Rs)[0],o=Mt().memoizedState;return[typeof s=="boolean"?s:lu(s),o]},useSyncExternalStore:c0,useId:F0,useHostTransitionStatus:am,useFormState:C0,useActionState:C0,useOptimistic:function(s,o){var l=Mt();return dt!==null?g0(l,dt,s,o):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:jp,useCacheRefresh:B0};$0.useEffectEvent=R0;function cm(s,o,l,c){o=s.memoizedState,l=l(c,o),l=l==null?o:T({},o,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var dm={enqueueSetState:function(s,o,l){s=s._reactInternals;var c=Kn(),y=pr(c);y.payload=o,l!=null&&(y.callback=l),o=mr(s,y,c),o!==null&&(Pn(o,s,c),su(o,s,c))},enqueueReplaceState:function(s,o,l){s=s._reactInternals;var c=Kn(),y=pr(c);y.tag=1,y.payload=o,l!=null&&(y.callback=l),o=mr(s,y,c),o!==null&&(Pn(o,s,c),su(o,s,c))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var l=Kn(),c=pr(l);c.tag=2,o!=null&&(c.callback=o),o=mr(s,c,l),o!==null&&(Pn(o,s,l),su(o,s,l))}};function J0(s,o,l,c,y,v,A){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,v,A):o.prototype&&o.prototype.isPureReactComponent?!Ql(l,c)||!Ql(y,v):!0}function K0(s,o,l,c){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,c),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,c),o.state!==s&&dm.enqueueReplaceState(o,o.state,null)}function Co(s,o){var l=o;if("ref"in o){l={};for(var c in o)c!=="ref"&&(l[c]=o[c])}if(s=s.defaultProps){l===o&&(l=T({},l));for(var y in s)l[y]===void 0&&(l[y]=s[y])}return l}function Y0(s){ad(s)}function W0(s){console.error(s)}function Q0(s){ad(s)}function Nd(s,o){try{var l=s.onUncaughtError;l(o.value,{componentStack:o.stack})}catch(c){setTimeout(function(){throw c})}}function X0(s,o,l){try{var c=s.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function fm(s,o,l){return l=pr(l),l.tag=3,l.payload={element:null},l.callback=function(){Nd(s,o)},l}function j0(s){return s=pr(s),s.tag=3,s}function Z0(s,o,l,c){var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var v=c.value;s.payload=function(){return y(v)},s.callback=function(){X0(o,l,c)}}var A=l.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(s.callback=function(){X0(o,l,c),typeof y!="function"&&(Er===null?Er=new Set([this]):Er.add(this));var b=c.stack;this.componentDidCatch(c.value,{componentStack:b!==null?b:""})})}function m1(s,o,l,c,y){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(o=l.alternate,o!==null&&ya(o,l,y,!0),l=Hn.current,l!==null){switch(l.tag){case 31:case 13:return li===null?Gd():l.alternate===null&&It===0&&(It=3),l.flags&=-257,l.flags|=65536,l.lanes=y,c===yd?l.flags|=16384:(o=l.updateQueue,o===null?l.updateQueue=new Set([c]):o.add(c),Lm(s,c,y)),!1;case 22:return l.flags|=65536,c===yd?l.flags|=16384:(o=l.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=o):(l=o.retryQueue,l===null?o.retryQueue=new Set([c]):l.add(c)),Lm(s,c,y)),!1}throw Error(i(435,l.tag))}return Lm(s,c,y),Gd(),!1}if(Ze)return o=Hn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=y,c!==Mp&&(s=Error(i(422),{cause:c}),Zl(si(s,l)))):(c!==Mp&&(o=Error(i(423),{cause:c}),Zl(si(o,l))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,c=si(c,l),y=fm(s.stateNode,c,y),Gp(s,y),It!==4&&(It=2)),!1;var v=Error(i(520),{cause:c});if(v=si(v,l),_u===null?_u=[v]:_u.push(v),It!==4&&(It=2),o===null)return!0;c=si(c,l),l=o;do{switch(l.tag){case 3:return l.flags|=65536,s=y&-y,l.lanes|=s,s=fm(l.stateNode,c,s),Gp(l,s),!1;case 1:if(o=l.type,v=l.stateNode,(l.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Er===null||!Er.has(v))))return l.flags|=65536,y&=-y,l.lanes|=y,y=j0(y),Z0(y,s,l,c),Gp(l,y),!1}l=l.return}while(l!==null);return!1}var hm=Error(i(461)),Bt=!1;function un(s,o,l,c){o.child=s===null?i0(o,null,l,c):Ao(o,s.child,l,c)}function eT(s,o,l,c,y){l=l.render;var v=o.ref;if("ref"in c){var A={};for(var b in c)b!=="ref"&&(A[b]=c[b])}else A=c;return vo(o),c=Yp(s,o,l,A,v,y),b=Wp(),s!==null&&!Bt?(Qp(s,o,y),xs(s,o,y)):(Ze&&b&&xp(o),o.flags|=1,un(s,o,c,y),o.child)}function tT(s,o,l,c,y){if(s===null){var v=l.type;return typeof v=="function"&&!Ip(v)&&v.defaultProps===void 0&&l.compare===null?(o.tag=15,o.type=v,nT(s,o,v,c,y)):(s=dd(l.type,null,c,o,o.mode,y),s.ref=o.ref,s.return=o,o.child=s)}if(v=s.child,!Em(s,y)){var A=v.memoizedProps;if(l=l.compare,l=l!==null?l:Ql,l(A,c)&&s.ref===o.ref)return xs(s,o,y)}return o.flags|=1,s=As(v,c),s.ref=o.ref,s.return=o,o.child=s}function nT(s,o,l,c,y){if(s!==null){var v=s.memoizedProps;if(Ql(v,c)&&s.ref===o.ref)if(Bt=!1,o.pendingProps=c=v,Em(s,y))(s.flags&131072)!==0&&(Bt=!0);else return o.lanes=s.lanes,xs(s,o,y)}return pm(s,o,l,c,y)}function iT(s,o,l,c){var y=c.children,v=s!==null?s.memoizedState:null;if(s===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((o.flags&128)!==0){if(v=v!==null?v.baseLanes|l:l,s!==null){for(c=o.child=s.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~v}else c=0,o.child=null;return sT(s,o,v,l,c)}if((l&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},s!==null&&md(o,v!==null?v.cachePool:null),v!==null?o0(o,v):zp(),a0(o);else return c=o.lanes=536870912,sT(s,o,v!==null?v.baseLanes|l:l,l,c)}else v!==null?(md(o,v.cachePool),o0(o,v),yr(),o.memoizedState=null):(s!==null&&md(o,null),zp(),yr());return un(s,o,y,l),o.child}function du(s,o){return s!==null&&s.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function sT(s,o,l,c,y){var v=Op();return v=v===null?null:{parent:Ot._currentValue,pool:v},o.memoizedState={baseLanes:l,cachePool:v},s!==null&&md(o,null),zp(),a0(o),s!==null&&ya(s,o,c,!0),o.childLanes=y,null}function Md(s,o){return o=Pd({mode:o.mode,children:o.children},s.mode),o.ref=s.ref,s.child=o,o.return=s,o}function rT(s,o,l){return Ao(o,s.child,null,l),s=Md(o,o.pendingProps),s.flags|=2,zn(o),o.memoizedState=null,s}function g1(s,o,l){var c=o.pendingProps,y=(o.flags&128)!==0;if(o.flags&=-129,s===null){if(Ze){if(c.mode==="hidden")return s=Md(o,c),o.lanes=536870912,du(null,s);if(Jp(o),(s=gt)?(s=yE(s,ai),s=s!==null&&s.data==="&"?s:null,s!==null&&(o.memoizedState={dehydrated:s,treeContext:ur!==null?{id:is,overflow:ss}:null,retryLane:536870912,hydrationErrors:null},l=Gv(s),l.return=o,o.child=l,an=o,gt=null)):s=null,s===null)throw dr(o);return o.lanes=536870912,null}return Md(o,c)}var v=s.memoizedState;if(v!==null){var A=v.dehydrated;if(Jp(o),y)if(o.flags&256)o.flags&=-257,o=rT(s,o,l);else if(o.memoizedState!==null)o.child=s.child,o.flags|=128,o=null;else throw Error(i(558));else if(Bt||ya(s,o,l,!1),y=(l&s.childLanes)!==0,Bt||y){if(c=pt,c!==null&&(A=Dl(c,l),A!==0&&A!==v.retryLane))throw v.retryLane=A,mo(s,A),Pn(c,s,A),hm;Gd(),o=rT(s,o,l)}else s=v.treeContext,gt=ui(A.nextSibling),an=o,Ze=!0,cr=null,ai=!1,s!==null&&$v(o,s),o=Md(o,c),o.flags|=4096;return o}return s=As(s.child,{mode:c.mode,children:c.children}),s.ref=o.ref,o.child=s,s.return=o,s}function Dd(s,o){var l=o.ref;if(l===null)s!==null&&s.ref!==null&&(o.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(s===null||s.ref!==l)&&(o.flags|=4194816)}}function pm(s,o,l,c,y){return vo(o),l=Yp(s,o,l,c,void 0,y),c=Wp(),s!==null&&!Bt?(Qp(s,o,y),xs(s,o,y)):(Ze&&c&&xp(o),o.flags|=1,un(s,o,l,y),o.child)}function oT(s,o,l,c,y,v){return vo(o),o.updateQueue=null,l=u0(o,c,l,y),l0(s),c=Wp(),s!==null&&!Bt?(Qp(s,o,v),xs(s,o,v)):(Ze&&c&&xp(o),o.flags|=1,un(s,o,l,v),o.child)}function aT(s,o,l,c,y){if(vo(o),o.stateNode===null){var v=ha,A=l.contextType;typeof A=="object"&&A!==null&&(v=ln(A)),v=new l(c,v),o.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=dm,o.stateNode=v,v._reactInternals=o,v=o.stateNode,v.props=c,v.state=o.memoizedState,v.refs={},Bp(o),A=l.contextType,v.context=typeof A=="object"&&A!==null?ln(A):ha,v.state=o.memoizedState,A=l.getDerivedStateFromProps,typeof A=="function"&&(cm(o,l,A,c),v.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(A=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),A!==v.state&&dm.enqueueReplaceState(v,v.state,null),ou(o,c,v,y),ru(),v.state=o.memoizedState),typeof v.componentDidMount=="function"&&(o.flags|=4194308),c=!0}else if(s===null){v=o.stateNode;var b=o.memoizedProps,O=Co(l,b);v.props=O;var Y=v.context,ne=l.contextType;A=ha,typeof ne=="object"&&ne!==null&&(A=ln(ne));var re=l.getDerivedStateFromProps;ne=typeof re=="function"||typeof v.getSnapshotBeforeUpdate=="function",b=o.pendingProps!==b,ne||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(b||Y!==A)&&K0(o,v,c,A),hr=!1;var j=o.memoizedState;v.state=j,ou(o,c,v,y),ru(),Y=o.memoizedState,b||j!==Y||hr?(typeof re=="function"&&(cm(o,l,re,c),Y=o.memoizedState),(O=hr||J0(o,l,O,c,j,Y,A))?(ne||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(o.flags|=4194308)):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=c,o.memoizedState=Y),v.props=c,v.state=Y,v.context=A,c=O):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),c=!1)}else{v=o.stateNode,qp(s,o),A=o.memoizedProps,ne=Co(l,A),v.props=ne,re=o.pendingProps,j=v.context,Y=l.contextType,O=ha,typeof Y=="object"&&Y!==null&&(O=ln(Y)),b=l.getDerivedStateFromProps,(Y=typeof b=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A!==re||j!==O)&&K0(o,v,c,O),hr=!1,j=o.memoizedState,v.state=j,ou(o,c,v,y),ru();var te=o.memoizedState;A!==re||j!==te||hr||s!==null&&s.dependencies!==null&&hd(s.dependencies)?(typeof b=="function"&&(cm(o,l,b,c),te=o.memoizedState),(ne=hr||J0(o,l,ne,c,j,te,O)||s!==null&&s.dependencies!==null&&hd(s.dependencies))?(Y||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,te,O),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,te,O)),typeof v.componentDidUpdate=="function"&&(o.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof v.componentDidUpdate!="function"||A===s.memoizedProps&&j===s.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&j===s.memoizedState||(o.flags|=1024),o.memoizedProps=c,o.memoizedState=te),v.props=c,v.state=te,v.context=O,c=ne):(typeof v.componentDidUpdate!="function"||A===s.memoizedProps&&j===s.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&j===s.memoizedState||(o.flags|=1024),c=!1)}return v=c,Dd(s,o),c=(o.flags&128)!==0,v||c?(v=o.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:v.render(),o.flags|=1,s!==null&&c?(o.child=Ao(o,s.child,null,y),o.child=Ao(o,null,l,y)):un(s,o,l,y),o.memoizedState=v.state,s=o.child):s=xs(s,o,y),s}function lT(s,o,l,c){return yo(),o.flags|=256,un(s,o,l,c),o.child}var mm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function gm(s){return{baseLanes:s,cachePool:Xv()}}function ym(s,o,l){return s=s!==null?s.childLanes&~l:0,o&&(s|=Jn),s}function uT(s,o,l){var c=o.pendingProps,y=!1,v=(o.flags&128)!==0,A;if((A=v)||(A=s!==null&&s.memoizedState===null?!1:(Nt.current&2)!==0),A&&(y=!0,o.flags&=-129),A=(o.flags&32)!==0,o.flags&=-33,s===null){if(Ze){if(y?gr(o):yr(),(s=gt)?(s=yE(s,ai),s=s!==null&&s.data!=="&"?s:null,s!==null&&(o.memoizedState={dehydrated:s,treeContext:ur!==null?{id:is,overflow:ss}:null,retryLane:536870912,hydrationErrors:null},l=Gv(s),l.return=o,o.child=l,an=o,gt=null)):s=null,s===null)throw dr(o);return Zm(s)?o.lanes=32:o.lanes=536870912,null}var b=c.children;return c=c.fallback,y?(yr(),y=o.mode,b=Pd({mode:"hidden",children:b},y),c=go(c,y,l,null),b.return=o,c.return=o,b.sibling=c,o.child=b,c=o.child,c.memoizedState=gm(l),c.childLanes=ym(s,A,l),o.memoizedState=mm,du(null,c)):(gr(o),_m(o,b))}var O=s.memoizedState;if(O!==null&&(b=O.dehydrated,b!==null)){if(v)o.flags&256?(gr(o),o.flags&=-257,o=vm(s,o,l)):o.memoizedState!==null?(yr(),o.child=s.child,o.flags|=128,o=null):(yr(),b=c.fallback,y=o.mode,c=Pd({mode:"visible",children:c.children},y),b=go(b,y,l,null),b.flags|=2,c.return=o,b.return=o,c.sibling=b,o.child=c,Ao(o,s.child,null,l),c=o.child,c.memoizedState=gm(l),c.childLanes=ym(s,A,l),o.memoizedState=mm,o=du(null,c));else if(gr(o),Zm(b)){if(A=b.nextSibling&&b.nextSibling.dataset,A)var Y=A.dgst;A=Y,c=Error(i(419)),c.stack="",c.digest=A,Zl({value:c,source:null,stack:null}),o=vm(s,o,l)}else if(Bt||ya(s,o,l,!1),A=(l&s.childLanes)!==0,Bt||A){if(A=pt,A!==null&&(c=Dl(A,l),c!==0&&c!==O.retryLane))throw O.retryLane=c,mo(s,c),Pn(A,s,c),hm;jm(b)||Gd(),o=vm(s,o,l)}else jm(b)?(o.flags|=192,o.child=s.child,o=null):(s=O.treeContext,gt=ui(b.nextSibling),an=o,Ze=!0,cr=null,ai=!1,s!==null&&$v(o,s),o=_m(o,c.children),o.flags|=4096);return o}return y?(yr(),b=c.fallback,y=o.mode,O=s.child,Y=O.sibling,c=As(O,{mode:"hidden",children:c.children}),c.subtreeFlags=O.subtreeFlags&65011712,Y!==null?b=As(Y,b):(b=go(b,y,l,null),b.flags|=2),b.return=o,c.return=o,c.sibling=b,o.child=c,du(null,c),c=o.child,b=s.child.memoizedState,b===null?b=gm(l):(y=b.cachePool,y!==null?(O=Ot._currentValue,y=y.parent!==O?{parent:O,pool:O}:y):y=Xv(),b={baseLanes:b.baseLanes|l,cachePool:y}),c.memoizedState=b,c.childLanes=ym(s,A,l),o.memoizedState=mm,du(s.child,c)):(gr(o),l=s.child,s=l.sibling,l=As(l,{mode:"visible",children:c.children}),l.return=o,l.sibling=null,s!==null&&(A=o.deletions,A===null?(o.deletions=[s],o.flags|=16):A.push(s)),o.child=l,o.memoizedState=null,l)}function _m(s,o){return o=Pd({mode:"visible",children:o},s.mode),o.return=s,s.child=o}function Pd(s,o){return s=Gn(22,s,null,o),s.lanes=0,s}function vm(s,o,l){return Ao(o,s.child,null,l),s=_m(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function cT(s,o,l){s.lanes|=o;var c=s.alternate;c!==null&&(c.lanes|=o),kp(s.return,o,l)}function Tm(s,o,l,c,y,v){var A=s.memoizedState;A===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:y,treeForkCount:v}:(A.isBackwards=o,A.rendering=null,A.renderingStartTime=0,A.last=c,A.tail=l,A.tailMode=y,A.treeForkCount=v)}function dT(s,o,l){var c=o.pendingProps,y=c.revealOrder,v=c.tail;c=c.children;var A=Nt.current,b=(A&2)!==0;if(b?(A=A&1|2,o.flags|=128):A&=1,he(Nt,A),un(s,o,c,l),c=Ze?jl:0,!b&&s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&cT(s,l,o);else if(s.tag===19)cT(s,l,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(y){case"forwards":for(l=o.child,y=null;l!==null;)s=l.alternate,s!==null&&Ed(s)===null&&(y=l),l=l.sibling;l=y,l===null?(y=o.child,o.child=null):(y=l.sibling,l.sibling=null),Tm(o,!1,y,l,v,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,y=o.child,o.child=null;y!==null;){if(s=y.alternate,s!==null&&Ed(s)===null){o.child=y;break}s=y.sibling,y.sibling=l,l=y,y=s}Tm(o,!0,l,null,v,c);break;case"together":Tm(o,!1,null,null,void 0,c);break;default:o.memoizedState=null}return o.child}function xs(s,o,l){if(s!==null&&(o.dependencies=s.dependencies),Tr|=o.lanes,(l&o.childLanes)===0)if(s!==null){if(ya(s,o,l,!1),(l&o.childLanes)===0)return null}else return null;if(s!==null&&o.child!==s.child)throw Error(i(153));if(o.child!==null){for(s=o.child,l=As(s,s.pendingProps),o.child=l,l.return=o;s.sibling!==null;)s=s.sibling,l=l.sibling=As(s,s.pendingProps),l.return=o;l.sibling=null}return o.child}function Em(s,o){return(s.lanes&o)!==0?!0:(s=s.dependencies,!!(s!==null&&hd(s)))}function y1(s,o,l){switch(o.tag){case 3:wt(o,o.stateNode.containerInfo),fr(o,Ot,s.memoizedState.cache),yo();break;case 27:case 5:Oi(o);break;case 4:wt(o,o.stateNode.containerInfo);break;case 10:fr(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Jp(o),null;break;case 13:var c=o.memoizedState;if(c!==null)return c.dehydrated!==null?(gr(o),o.flags|=128,null):(l&o.child.childLanes)!==0?uT(s,o,l):(gr(o),s=xs(s,o,l),s!==null?s.sibling:null);gr(o);break;case 19:var y=(s.flags&128)!==0;if(c=(l&o.childLanes)!==0,c||(ya(s,o,l,!1),c=(l&o.childLanes)!==0),y){if(c)return dT(s,o,l);o.flags|=128}if(y=o.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),he(Nt,Nt.current),c)break;return null;case 22:return o.lanes=0,iT(s,o,l,o.pendingProps);case 24:fr(o,Ot,s.memoizedState.cache)}return xs(s,o,l)}function fT(s,o,l){if(s!==null)if(s.memoizedProps!==o.pendingProps)Bt=!0;else{if(!Em(s,l)&&(o.flags&128)===0)return Bt=!1,y1(s,o,l);Bt=(s.flags&131072)!==0}else Bt=!1,Ze&&(o.flags&1048576)!==0&&zv(o,jl,o.index);switch(o.lanes=0,o.tag){case 16:e:{var c=o.pendingProps;if(s=Eo(o.elementType),o.type=s,typeof s=="function")Ip(s)?(c=Co(s,c),o.tag=1,o=aT(null,o,s,c,l)):(o.tag=0,o=pm(null,o,s,c,l));else{if(s!=null){var y=s.$$typeof;if(y===X){o.tag=11,o=eT(null,o,s,c,l);break e}else if(y===N){o.tag=14,o=tT(null,o,s,c,l);break e}}throw o=ke(s)||s,Error(i(306,o,""))}}return o;case 0:return pm(s,o,o.type,o.pendingProps,l);case 1:return c=o.type,y=Co(c,o.pendingProps),aT(s,o,c,y,l);case 3:e:{if(wt(o,o.stateNode.containerInfo),s===null)throw Error(i(387));c=o.pendingProps;var v=o.memoizedState;y=v.element,qp(s,o),ou(o,c,null,l);var A=o.memoizedState;if(c=A.cache,fr(o,Ot,c),c!==v.cache&&Vp(o,[Ot],l,!0),ru(),c=A.element,v.isDehydrated)if(v={element:c,isDehydrated:!1,cache:A.cache},o.updateQueue.baseState=v,o.memoizedState=v,o.flags&256){o=lT(s,o,c,l);break e}else if(c!==y){y=si(Error(i(424)),o),Zl(y),o=lT(s,o,c,l);break e}else{switch(s=o.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(gt=ui(s.firstChild),an=o,Ze=!0,cr=null,ai=!0,l=i0(o,null,c,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(yo(),c===y){o=xs(s,o,l);break e}un(s,o,c,l)}o=o.child}return o;case 26:return Dd(s,o),s===null?(l=AE(o.type,null,o.pendingProps,null))?o.memoizedState=l:Ze||(l=o.type,s=o.pendingProps,c=Wd(De.current).createElement(l),c[Vt]=o,c[Xt]=s,cn(c,l,s),Ut(c),o.stateNode=c):o.memoizedState=AE(o.type,s.memoizedProps,o.pendingProps,s.memoizedState),null;case 27:return Oi(o),s===null&&Ze&&(c=o.stateNode=TE(o.type,o.pendingProps,De.current),an=o,ai=!0,y=gt,Cr(o.type)?(eg=y,gt=ui(c.firstChild)):gt=y),un(s,o,o.pendingProps.children,l),Dd(s,o),s===null&&(o.flags|=4194304),o.child;case 5:return s===null&&Ze&&((y=c=gt)&&(c=K1(c,o.type,o.pendingProps,ai),c!==null?(o.stateNode=c,an=o,gt=ui(c.firstChild),ai=!1,y=!0):y=!1),y||dr(o)),Oi(o),y=o.type,v=o.pendingProps,A=s!==null?s.memoizedProps:null,c=v.children,Wm(y,v)?c=null:A!==null&&Wm(y,A)&&(o.flags|=32),o.memoizedState!==null&&(y=Yp(s,o,l1,null,null,l),Iu._currentValue=y),Dd(s,o),un(s,o,c,l),o.child;case 6:return s===null&&Ze&&((s=l=gt)&&(l=Y1(l,o.pendingProps,ai),l!==null?(o.stateNode=l,an=o,gt=null,s=!0):s=!1),s||dr(o)),null;case 13:return uT(s,o,l);case 4:return wt(o,o.stateNode.containerInfo),c=o.pendingProps,s===null?o.child=Ao(o,null,c,l):un(s,o,c,l),o.child;case 11:return eT(s,o,o.type,o.pendingProps,l);case 7:return un(s,o,o.pendingProps,l),o.child;case 8:return un(s,o,o.pendingProps.children,l),o.child;case 12:return un(s,o,o.pendingProps.children,l),o.child;case 10:return c=o.pendingProps,fr(o,o.type,c.value),un(s,o,c.children,l),o.child;case 9:return y=o.type._context,c=o.pendingProps.children,vo(o),y=ln(y),c=c(y),o.flags|=1,un(s,o,c,l),o.child;case 14:return tT(s,o,o.type,o.pendingProps,l);case 15:return nT(s,o,o.type,o.pendingProps,l);case 19:return dT(s,o,l);case 31:return g1(s,o,l);case 22:return iT(s,o,l,o.pendingProps);case 24:return vo(o),c=ln(Ot),s===null?(y=Op(),y===null&&(y=pt,v=Up(),y.pooledCache=v,v.refCount++,v!==null&&(y.pooledCacheLanes|=l),y=v),o.memoizedState={parent:c,cache:y},Bp(o),fr(o,Ot,y)):((s.lanes&l)!==0&&(qp(s,o),ou(o,null,null,l),ru()),y=s.memoizedState,v=o.memoizedState,y.parent!==c?(y={parent:c,cache:c},o.memoizedState=y,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=y),fr(o,Ot,c)):(c=v.cache,fr(o,Ot,c),c!==y.cache&&Vp(o,[Ot],l,!0))),un(s,o,o.pendingProps.children,l),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function Ns(s){s.flags|=4}function Sm(s,o,l,c,y){if((o=(s.mode&32)!==0)&&(o=!1),o){if(s.flags|=16777216,(y&335544128)===y)if(s.stateNode.complete)s.flags|=8192;else if(FT())s.flags|=8192;else throw So=yd,Fp}else s.flags&=-16777217}function hT(s,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!RE(o))if(FT())s.flags|=8192;else throw So=yd,Fp}function kd(s,o){o!==null&&(s.flags|=4),s.flags&16384&&(o=s.tag!==22?Bc():536870912,s.lanes|=o,xa|=o)}function fu(s,o){if(!Ze)switch(s.tailMode){case"hidden":o=s.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function yt(s){var o=s.alternate!==null&&s.alternate.child===s.child,l=0,c=0;if(o)for(var y=s.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=c,s.childLanes=l,o}function _1(s,o,l){var c=o.pendingProps;switch(Np(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(o),null;case 1:return yt(o),null;case 3:return l=o.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),Is(Ot),$e(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(ga(o)?Ns(o):s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Dp())),yt(o),null;case 26:var y=o.type,v=o.memoizedState;return s===null?(Ns(o),v!==null?(yt(o),hT(o,v)):(yt(o),Sm(o,y,null,c,l))):v?v!==s.memoizedState?(Ns(o),yt(o),hT(o,v)):(yt(o),o.flags&=-16777217):(s=s.memoizedProps,s!==c&&Ns(o),yt(o),Sm(o,y,s,c,l)),null;case 27:if(On(o),l=De.current,y=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==c&&Ns(o);else{if(!c){if(o.stateNode===null)throw Error(i(166));return yt(o),null}s=me.current,ga(o)?Jv(o):(s=TE(y,c,l),o.stateNode=s,Ns(o))}return yt(o),null;case 5:if(On(o),y=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==c&&Ns(o);else{if(!c){if(o.stateNode===null)throw Error(i(166));return yt(o),null}if(v=me.current,ga(o))Jv(o);else{var A=Wd(De.current);switch(v){case 1:v=A.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:v=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":v=A.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":v=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":v=A.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof c.is=="string"?A.createElement("select",{is:c.is}):A.createElement("select"),c.multiple?v.multiple=!0:c.size&&(v.size=c.size);break;default:v=typeof c.is=="string"?A.createElement(y,{is:c.is}):A.createElement(y)}}v[Vt]=o,v[Xt]=c;e:for(A=o.child;A!==null;){if(A.tag===5||A.tag===6)v.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===o)break e;for(;A.sibling===null;){if(A.return===null||A.return===o)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}o.stateNode=v;e:switch(cn(v,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Ns(o)}}return yt(o),Sm(o,o.type,s===null?null:s.memoizedProps,o.pendingProps,l),null;case 6:if(s&&o.stateNode!=null)s.memoizedProps!==c&&Ns(o);else{if(typeof c!="string"&&o.stateNode===null)throw Error(i(166));if(s=De.current,ga(o)){if(s=o.stateNode,l=o.memoizedProps,c=null,y=an,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}s[Vt]=o,s=!!(s.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||uE(s.nodeValue,l)),s||dr(o,!0)}else s=Wd(s).createTextNode(c),s[Vt]=o,o.stateNode=s}return yt(o),null;case 31:if(l=o.memoizedState,s===null||s.memoizedState!==null){if(c=ga(o),l!==null){if(s===null){if(!c)throw Error(i(318));if(s=o.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[Vt]=o}else yo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;yt(o),s=!1}else l=Dp(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=l),s=!0;if(!s)return o.flags&256?(zn(o),o):(zn(o),null);if((o.flags&128)!==0)throw Error(i(558))}return yt(o),null;case 13:if(c=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=ga(o),c!==null&&c.dehydrated!==null){if(s===null){if(!y)throw Error(i(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[Vt]=o}else yo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;yt(o),y=!1}else y=Dp(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return o.flags&256?(zn(o),o):(zn(o),null)}return zn(o),(o.flags&128)!==0?(o.lanes=l,o):(l=c!==null,s=s!==null&&s.memoizedState!==null,l&&(c=o.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),v=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==y&&(c.flags|=2048)),l!==s&&l&&(o.child.flags|=8192),kd(o,o.updateQueue),yt(o),null);case 4:return $e(),s===null&&zm(o.stateNode.containerInfo),yt(o),null;case 10:return Is(o.type),yt(o),null;case 19:if(ie(Nt),c=o.memoizedState,c===null)return yt(o),null;if(y=(o.flags&128)!==0,v=c.rendering,v===null)if(y)fu(c,!1);else{if(It!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(v=Ed(s),v!==null){for(o.flags|=128,fu(c,!1),s=v.updateQueue,o.updateQueue=s,kd(o,s),o.subtreeFlags=0,s=l,l=o.child;l!==null;)qv(l,s),l=l.sibling;return he(Nt,Nt.current&1|2),Ze&&ws(o,c.treeForkCount),o.child}s=s.sibling}c.tail!==null&&Sn()>Fd&&(o.flags|=128,y=!0,fu(c,!1),o.lanes=4194304)}else{if(!y)if(s=Ed(v),s!==null){if(o.flags|=128,y=!0,s=s.updateQueue,o.updateQueue=s,kd(o,s),fu(c,!0),c.tail===null&&c.tailMode==="hidden"&&!v.alternate&&!Ze)return yt(o),null}else 2*Sn()-c.renderingStartTime>Fd&&l!==536870912&&(o.flags|=128,y=!0,fu(c,!1),o.lanes=4194304);c.isBackwards?(v.sibling=o.child,o.child=v):(s=c.last,s!==null?s.sibling=v:o.child=v,c.last=v)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=Sn(),s.sibling=null,l=Nt.current,he(Nt,y?l&1|2:l&1),Ze&&ws(o,c.treeForkCount),s):(yt(o),null);case 22:case 23:return zn(o),$p(),c=o.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(o.flags|=8192):c&&(o.flags|=8192),c?(l&536870912)!==0&&(o.flags&128)===0&&(yt(o),o.subtreeFlags&6&&(o.flags|=8192)):yt(o),l=o.updateQueue,l!==null&&kd(o,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),c=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(c=o.memoizedState.cachePool.pool),c!==l&&(o.flags|=2048),s!==null&&ie(To),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),o.memoizedState.cache!==l&&(o.flags|=2048),Is(Ot),yt(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function v1(s,o){switch(Np(o),o.tag){case 1:return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return Is(Ot),$e(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 26:case 27:case 5:return On(o),null;case 31:if(o.memoizedState!==null){if(zn(o),o.alternate===null)throw Error(i(340));yo()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 13:if(zn(o),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(i(340));yo()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return ie(Nt),null;case 4:return $e(),null;case 10:return Is(o.type),null;case 22:case 23:return zn(o),$p(),s!==null&&ie(To),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 24:return Is(Ot),null;case 25:return null;default:return null}}function pT(s,o){switch(Np(o),o.tag){case 3:Is(Ot),$e();break;case 26:case 27:case 5:On(o);break;case 4:$e();break;case 31:o.memoizedState!==null&&zn(o);break;case 13:zn(o);break;case 19:ie(Nt);break;case 10:Is(o.type);break;case 22:case 23:zn(o),$p(),s!==null&&ie(To);break;case 24:Is(Ot)}}function hu(s,o){try{var l=o.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var y=c.next;l=y;do{if((l.tag&s)===s){c=void 0;var v=l.create,A=l.inst;c=v(),A.destroy=c}l=l.next}while(l!==y)}}catch(b){ut(o,o.return,b)}}function _r(s,o,l){try{var c=o.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var v=y.next;c=v;do{if((c.tag&s)===s){var A=c.inst,b=A.destroy;if(b!==void 0){A.destroy=void 0,y=o;var O=l,Y=b;try{Y()}catch(ne){ut(y,O,ne)}}}c=c.next}while(c!==v)}}catch(ne){ut(o,o.return,ne)}}function mT(s){var o=s.updateQueue;if(o!==null){var l=s.stateNode;try{r0(o,l)}catch(c){ut(s,s.return,c)}}}function gT(s,o,l){l.props=Co(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(c){ut(s,o,c)}}function pu(s,o){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof l=="function"?s.refCleanup=l(c):l.current=c}}catch(y){ut(s,o,y)}}function rs(s,o){var l=s.ref,c=s.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(y){ut(s,o,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(y){ut(s,o,y)}else l.current=null}function yT(s){var o=s.type,l=s.memoizedProps,c=s.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(y){ut(s,s.return,y)}}function Am(s,o,l){try{var c=s.stateNode;q1(c,s.type,l,o),c[Xt]=o}catch(y){ut(s,s.return,y)}}function _T(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Cr(s.type)||s.tag===4}function wm(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||_T(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Cr(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Cm(s,o,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,o?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,o):(o=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,o.appendChild(s),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=Ti));else if(c!==4&&(c===27&&Cr(s.type)&&(l=s.stateNode,o=null),s=s.child,s!==null))for(Cm(s,o,l),s=s.sibling;s!==null;)Cm(s,o,l),s=s.sibling}function Vd(s,o,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,o?l.insertBefore(s,o):l.appendChild(s);else if(c!==4&&(c===27&&Cr(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(Vd(s,o,l),s=s.sibling;s!==null;)Vd(s,o,l),s=s.sibling}function vT(s){var o=s.stateNode,l=s.memoizedProps;try{for(var c=s.type,y=o.attributes;y.length;)o.removeAttributeNode(y[0]);cn(o,c,l),o[Vt]=s,o[Xt]=l}catch(v){ut(s,s.return,v)}}var Ms=!1,qt=!1,Im=!1,TT=typeof WeakSet=="function"?WeakSet:Set,Zt=null;function T1(s,o){if(s=s.containerInfo,Km=nf,s=Dv(s),vp(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var y=c.anchorOffset,v=c.focusNode;c=c.focusOffset;try{l.nodeType,v.nodeType}catch{l=null;break e}var A=0,b=-1,O=-1,Y=0,ne=0,re=s,j=null;t:for(;;){for(var te;re!==l||y!==0&&re.nodeType!==3||(b=A+y),re!==v||c!==0&&re.nodeType!==3||(O=A+c),re.nodeType===3&&(A+=re.nodeValue.length),(te=re.firstChild)!==null;)j=re,re=te;for(;;){if(re===s)break t;if(j===l&&++Y===y&&(b=A),j===v&&++ne===c&&(O=A),(te=re.nextSibling)!==null)break;re=j,j=re.parentNode}re=te}l=b===-1||O===-1?null:{start:b,end:O}}else l=null}l=l||{start:0,end:0}}else l=null;for(Ym={focusedElem:s,selectionRange:l},nf=!1,Zt=o;Zt!==null;)if(o=Zt,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,Zt=s;else for(;Zt!==null;){switch(o=Zt,v=o.alternate,s=o.flags,o.tag){case 0:if((s&4)!==0&&(s=o.updateQueue,s=s!==null?s.events:null,s!==null))for(l=0;l<s.length;l++)y=s[l],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&v!==null){s=void 0,l=o,y=v.memoizedProps,v=v.memoizedState,c=l.stateNode;try{var ve=Co(l.type,y);s=c.getSnapshotBeforeUpdate(ve,v),c.__reactInternalSnapshotBeforeUpdate=s}catch(Ie){ut(l,l.return,Ie)}}break;case 3:if((s&1024)!==0){if(s=o.stateNode.containerInfo,l=s.nodeType,l===9)Xm(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Xm(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=o.sibling,s!==null){s.return=o.return,Zt=s;break}Zt=o.return}}function ET(s,o,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:Ps(s,l),c&4&&hu(5,l);break;case 1:if(Ps(s,l),c&4)if(s=l.stateNode,o===null)try{s.componentDidMount()}catch(A){ut(l,l.return,A)}else{var y=Co(l.type,o.memoizedProps);o=o.memoizedState;try{s.componentDidUpdate(y,o,s.__reactInternalSnapshotBeforeUpdate)}catch(A){ut(l,l.return,A)}}c&64&&mT(l),c&512&&pu(l,l.return);break;case 3:if(Ps(s,l),c&64&&(s=l.updateQueue,s!==null)){if(o=null,l.child!==null)switch(l.child.tag){case 27:case 5:o=l.child.stateNode;break;case 1:o=l.child.stateNode}try{r0(s,o)}catch(A){ut(l,l.return,A)}}break;case 27:o===null&&c&4&&vT(l);case 26:case 5:Ps(s,l),o===null&&c&4&&yT(l),c&512&&pu(l,l.return);break;case 12:Ps(s,l);break;case 31:Ps(s,l),c&4&&wT(s,l);break;case 13:Ps(s,l),c&4&&CT(s,l),c&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=x1.bind(null,l),W1(s,l))));break;case 22:if(c=l.memoizedState!==null||Ms,!c){o=o!==null&&o.memoizedState!==null||qt,y=Ms;var v=qt;Ms=c,(qt=o)&&!v?ks(s,l,(l.subtreeFlags&8772)!==0):Ps(s,l),Ms=y,qt=v}break;case 30:break;default:Ps(s,l)}}function ST(s){var o=s.alternate;o!==null&&(s.alternate=null,ST(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&Zo(o)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Tt=null,xn=!1;function Ds(s,o,l){for(l=l.child;l!==null;)AT(s,o,l),l=l.sibling}function AT(s,o,l){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(gi,l)}catch{}switch(l.tag){case 26:qt||rs(l,o),Ds(s,o,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:qt||rs(l,o);var c=Tt,y=xn;Cr(l.type)&&(Tt=l.stateNode,xn=!1),Ds(s,o,l),Au(l.stateNode),Tt=c,xn=y;break;case 5:qt||rs(l,o);case 6:if(c=Tt,y=xn,Tt=null,Ds(s,o,l),Tt=c,xn=y,Tt!==null)if(xn)try{(Tt.nodeType===9?Tt.body:Tt.nodeName==="HTML"?Tt.ownerDocument.body:Tt).removeChild(l.stateNode)}catch(v){ut(l,o,v)}else try{Tt.removeChild(l.stateNode)}catch(v){ut(l,o,v)}break;case 18:Tt!==null&&(xn?(s=Tt,mE(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),La(s)):mE(Tt,l.stateNode));break;case 4:c=Tt,y=xn,Tt=l.stateNode.containerInfo,xn=!0,Ds(s,o,l),Tt=c,xn=y;break;case 0:case 11:case 14:case 15:_r(2,l,o),qt||_r(4,l,o),Ds(s,o,l);break;case 1:qt||(rs(l,o),c=l.stateNode,typeof c.componentWillUnmount=="function"&&gT(l,o,c)),Ds(s,o,l);break;case 21:Ds(s,o,l);break;case 22:qt=(c=qt)||l.memoizedState!==null,Ds(s,o,l),qt=c;break;default:Ds(s,o,l)}}function wT(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{La(s)}catch(l){ut(o,o.return,l)}}}function CT(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{La(s)}catch(l){ut(o,o.return,l)}}function E1(s){switch(s.tag){case 31:case 13:case 19:var o=s.stateNode;return o===null&&(o=s.stateNode=new TT),o;case 22:return s=s.stateNode,o=s._retryCache,o===null&&(o=s._retryCache=new TT),o;default:throw Error(i(435,s.tag))}}function Ud(s,o){var l=E1(s);o.forEach(function(c){if(!l.has(c)){l.add(c);var y=N1.bind(null,s,c);c.then(y,y)}})}function Nn(s,o){var l=o.deletions;if(l!==null)for(var c=0;c<l.length;c++){var y=l[c],v=s,A=o,b=A;e:for(;b!==null;){switch(b.tag){case 27:if(Cr(b.type)){Tt=b.stateNode,xn=!1;break e}break;case 5:Tt=b.stateNode,xn=!1;break e;case 3:case 4:Tt=b.stateNode.containerInfo,xn=!0;break e}b=b.return}if(Tt===null)throw Error(i(160));AT(v,A,y),Tt=null,xn=!1,v=y.alternate,v!==null&&(v.return=null),y.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)IT(o,s),o=o.sibling}var Ii=null;function IT(s,o){var l=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Nn(o,s),Mn(s),c&4&&(_r(3,s,s.return),hu(3,s),_r(5,s,s.return));break;case 1:Nn(o,s),Mn(s),c&512&&(qt||l===null||rs(l,l.return)),c&64&&Ms&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var y=Ii;if(Nn(o,s),Mn(s),c&512&&(qt||l===null||rs(l,l.return)),c&4){var v=l!==null?l.memoizedState:null;if(c=s.memoizedState,l===null)if(c===null)if(s.stateNode===null){e:{c=s.type,l=s.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":v=y.getElementsByTagName("title")[0],(!v||v[$i]||v[Vt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=y.createElement(c),y.head.insertBefore(v,y.querySelector("head > title"))),cn(v,c,l),v[Vt]=s,Ut(v),c=v;break e;case"link":var A=IE("link","href",y).get(c+(l.href||""));if(A){for(var b=0;b<A.length;b++)if(v=A[b],v.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&v.getAttribute("rel")===(l.rel==null?null:l.rel)&&v.getAttribute("title")===(l.title==null?null:l.title)&&v.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){A.splice(b,1);break t}}v=y.createElement(c),cn(v,c,l),y.head.appendChild(v);break;case"meta":if(A=IE("meta","content",y).get(c+(l.content||""))){for(b=0;b<A.length;b++)if(v=A[b],v.getAttribute("content")===(l.content==null?null:""+l.content)&&v.getAttribute("name")===(l.name==null?null:l.name)&&v.getAttribute("property")===(l.property==null?null:l.property)&&v.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&v.getAttribute("charset")===(l.charSet==null?null:l.charSet)){A.splice(b,1);break t}}v=y.createElement(c),cn(v,c,l),y.head.appendChild(v);break;default:throw Error(i(468,c))}v[Vt]=s,Ut(v),c=v}s.stateNode=c}else bE(y,s.type,s.stateNode);else s.stateNode=CE(y,c,s.memoizedProps);else v!==c?(v===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):v.count--,c===null?bE(y,s.type,s.stateNode):CE(y,c,s.memoizedProps)):c===null&&s.stateNode!==null&&Am(s,s.memoizedProps,l.memoizedProps)}break;case 27:Nn(o,s),Mn(s),c&512&&(qt||l===null||rs(l,l.return)),l!==null&&c&4&&Am(s,s.memoizedProps,l.memoizedProps);break;case 5:if(Nn(o,s),Mn(s),c&512&&(qt||l===null||rs(l,l.return)),s.flags&32){y=s.stateNode;try{Rn(y,"")}catch(ve){ut(s,s.return,ve)}}c&4&&s.stateNode!=null&&(y=s.memoizedProps,Am(s,y,l!==null?l.memoizedProps:y)),c&1024&&(Im=!0);break;case 6:if(Nn(o,s),Mn(s),c&4){if(s.stateNode===null)throw Error(i(162));c=s.memoizedProps,l=s.stateNode;try{l.nodeValue=c}catch(ve){ut(s,s.return,ve)}}break;case 3:if(jd=null,y=Ii,Ii=Qd(o.containerInfo),Nn(o,s),Ii=y,Mn(s),c&4&&l!==null&&l.memoizedState.isDehydrated)try{La(o.containerInfo)}catch(ve){ut(s,s.return,ve)}Im&&(Im=!1,bT(s));break;case 4:c=Ii,Ii=Qd(s.stateNode.containerInfo),Nn(o,s),Mn(s),Ii=c;break;case 12:Nn(o,s),Mn(s);break;case 31:Nn(o,s),Mn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Ud(s,c)));break;case 13:Nn(o,s),Mn(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Od=Sn()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Ud(s,c)));break;case 22:y=s.memoizedState!==null;var O=l!==null&&l.memoizedState!==null,Y=Ms,ne=qt;if(Ms=Y||y,qt=ne||O,Nn(o,s),qt=ne,Ms=Y,Mn(s),c&8192)e:for(o=s.stateNode,o._visibility=y?o._visibility&-2:o._visibility|1,y&&(l===null||O||Ms||qt||Io(s)),l=null,o=s;;){if(o.tag===5||o.tag===26){if(l===null){O=l=o;try{if(v=O.stateNode,y)A=v.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{b=O.stateNode;var re=O.memoizedProps.style,j=re!=null&&re.hasOwnProperty("display")?re.display:null;b.style.display=j==null||typeof j=="boolean"?"":(""+j).trim()}}catch(ve){ut(O,O.return,ve)}}}else if(o.tag===6){if(l===null){O=o;try{O.stateNode.nodeValue=y?"":O.memoizedProps}catch(ve){ut(O,O.return,ve)}}}else if(o.tag===18){if(l===null){O=o;try{var te=O.stateNode;y?gE(te,!0):gE(O.stateNode,!1)}catch(ve){ut(O,O.return,ve)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===s)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;l===o&&(l=null),o=o.return}l===o&&(l=null),o.sibling.return=o.return,o=o.sibling}c&4&&(c=s.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,Ud(s,l))));break;case 19:Nn(o,s),Mn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Ud(s,c)));break;case 30:break;case 21:break;default:Nn(o,s),Mn(s)}}function Mn(s){var o=s.flags;if(o&2){try{for(var l,c=s.return;c!==null;){if(_T(c)){l=c;break}c=c.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var y=l.stateNode,v=wm(s);Vd(s,v,y);break;case 5:var A=l.stateNode;l.flags&32&&(Rn(A,""),l.flags&=-33);var b=wm(s);Vd(s,b,A);break;case 3:case 4:var O=l.stateNode.containerInfo,Y=wm(s);Cm(s,Y,O);break;default:throw Error(i(161))}}catch(ne){ut(s,s.return,ne)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function bT(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var o=s;bT(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),s=s.sibling}}function Ps(s,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)ET(s,o.alternate,o),o=o.sibling}function Io(s){for(s=s.child;s!==null;){var o=s;switch(o.tag){case 0:case 11:case 14:case 15:_r(4,o,o.return),Io(o);break;case 1:rs(o,o.return);var l=o.stateNode;typeof l.componentWillUnmount=="function"&&gT(o,o.return,l),Io(o);break;case 27:Au(o.stateNode);case 26:case 5:rs(o,o.return),Io(o);break;case 22:o.memoizedState===null&&Io(o);break;case 30:Io(o);break;default:Io(o)}s=s.sibling}}function ks(s,o,l){for(l=l&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var c=o.alternate,y=s,v=o,A=v.flags;switch(v.tag){case 0:case 11:case 15:ks(y,v,l),hu(4,v);break;case 1:if(ks(y,v,l),c=v,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(Y){ut(c,c.return,Y)}if(c=v,y=c.updateQueue,y!==null){var b=c.stateNode;try{var O=y.shared.hiddenCallbacks;if(O!==null)for(y.shared.hiddenCallbacks=null,y=0;y<O.length;y++)s0(O[y],b)}catch(Y){ut(c,c.return,Y)}}l&&A&64&&mT(v),pu(v,v.return);break;case 27:vT(v);case 26:case 5:ks(y,v,l),l&&c===null&&A&4&&yT(v),pu(v,v.return);break;case 12:ks(y,v,l);break;case 31:ks(y,v,l),l&&A&4&&wT(y,v);break;case 13:ks(y,v,l),l&&A&4&&CT(y,v);break;case 22:v.memoizedState===null&&ks(y,v,l),pu(v,v.return);break;case 30:break;default:ks(y,v,l)}o=o.sibling}}function bm(s,o){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(s=o.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&eu(l))}function Rm(s,o){s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&eu(s))}function bi(s,o,l,c){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)RT(s,o,l,c),o=o.sibling}function RT(s,o,l,c){var y=o.flags;switch(o.tag){case 0:case 11:case 15:bi(s,o,l,c),y&2048&&hu(9,o);break;case 1:bi(s,o,l,c);break;case 3:bi(s,o,l,c),y&2048&&(s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&eu(s)));break;case 12:if(y&2048){bi(s,o,l,c),s=o.stateNode;try{var v=o.memoizedProps,A=v.id,b=v.onPostCommit;typeof b=="function"&&b(A,o.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(O){ut(o,o.return,O)}}else bi(s,o,l,c);break;case 31:bi(s,o,l,c);break;case 13:bi(s,o,l,c);break;case 23:break;case 22:v=o.stateNode,A=o.alternate,o.memoizedState!==null?v._visibility&2?bi(s,o,l,c):mu(s,o):v._visibility&2?bi(s,o,l,c):(v._visibility|=2,Ia(s,o,l,c,(o.subtreeFlags&10256)!==0||!1)),y&2048&&bm(A,o);break;case 24:bi(s,o,l,c),y&2048&&Rm(o.alternate,o);break;default:bi(s,o,l,c)}}function Ia(s,o,l,c,y){for(y=y&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var v=s,A=o,b=l,O=c,Y=A.flags;switch(A.tag){case 0:case 11:case 15:Ia(v,A,b,O,y),hu(8,A);break;case 23:break;case 22:var ne=A.stateNode;A.memoizedState!==null?ne._visibility&2?Ia(v,A,b,O,y):mu(v,A):(ne._visibility|=2,Ia(v,A,b,O,y)),y&&Y&2048&&bm(A.alternate,A);break;case 24:Ia(v,A,b,O,y),y&&Y&2048&&Rm(A.alternate,A);break;default:Ia(v,A,b,O,y)}o=o.sibling}}function mu(s,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var l=s,c=o,y=c.flags;switch(c.tag){case 22:mu(l,c),y&2048&&bm(c.alternate,c);break;case 24:mu(l,c),y&2048&&Rm(c.alternate,c);break;default:mu(l,c)}o=o.sibling}}var gu=8192;function ba(s,o,l){if(s.subtreeFlags&gu)for(s=s.child;s!==null;)xT(s,o,l),s=s.sibling}function xT(s,o,l){switch(s.tag){case 26:ba(s,o,l),s.flags&gu&&s.memoizedState!==null&&aM(l,Ii,s.memoizedState,s.memoizedProps);break;case 5:ba(s,o,l);break;case 3:case 4:var c=Ii;Ii=Qd(s.stateNode.containerInfo),ba(s,o,l),Ii=c;break;case 22:s.memoizedState===null&&(c=s.alternate,c!==null&&c.memoizedState!==null?(c=gu,gu=16777216,ba(s,o,l),gu=c):ba(s,o,l));break;default:ba(s,o,l)}}function NT(s){var o=s.alternate;if(o!==null&&(s=o.child,s!==null)){o.child=null;do o=s.sibling,s.sibling=null,s=o;while(s!==null)}}function yu(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var c=o[l];Zt=c,DT(c,s)}NT(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)MT(s),s=s.sibling}function MT(s){switch(s.tag){case 0:case 11:case 15:yu(s),s.flags&2048&&_r(9,s,s.return);break;case 3:yu(s);break;case 12:yu(s);break;case 22:var o=s.stateNode;s.memoizedState!==null&&o._visibility&2&&(s.return===null||s.return.tag!==13)?(o._visibility&=-3,Ld(s)):yu(s);break;default:yu(s)}}function Ld(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var c=o[l];Zt=c,DT(c,s)}NT(s)}for(s=s.child;s!==null;){switch(o=s,o.tag){case 0:case 11:case 15:_r(8,o,o.return),Ld(o);break;case 22:l=o.stateNode,l._visibility&2&&(l._visibility&=-3,Ld(o));break;default:Ld(o)}s=s.sibling}}function DT(s,o){for(;Zt!==null;){var l=Zt;switch(l.tag){case 0:case 11:case 15:_r(8,l,o);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:eu(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,Zt=c;else e:for(l=s;Zt!==null;){c=Zt;var y=c.sibling,v=c.return;if(ST(c),c===l){Zt=null;break e}if(y!==null){y.return=v,Zt=y;break e}Zt=v}}}var S1={getCacheForType:function(s){var o=ln(Ot),l=o.data.get(s);return l===void 0&&(l=s(),o.data.set(s,l)),l},cacheSignal:function(){return ln(Ot).controller.signal}},A1=typeof WeakMap=="function"?WeakMap:Map,rt=0,pt=null,Je=null,Ye=0,lt=0,$n=null,vr=!1,Ra=!1,xm=!1,Vs=0,It=0,Tr=0,bo=0,Nm=0,Jn=0,xa=0,_u=null,Dn=null,Mm=!1,Od=0,PT=0,Fd=1/0,Bd=null,Er=null,Kt=0,Sr=null,Na=null,Us=0,Dm=0,Pm=null,kT=null,vu=0,km=null;function Kn(){return(rt&2)!==0&&Ye!==0?Ye&-Ye:Z.T!==null?Bm():qc()}function VT(){if(Jn===0)if((Ye&536870912)===0||Ze){var s=Zr;Zr<<=1,(Zr&3932160)===0&&(Zr=262144),Jn=s}else Jn=536870912;return s=Hn.current,s!==null&&(s.flags|=32),Jn}function Pn(s,o,l){(s===pt&&(lt===2||lt===9)||s.cancelPendingCommit!==null)&&(Ma(s,0),Ar(s,Ye,Jn,!1)),eo(s,l),((rt&2)===0||s!==pt)&&(s===pt&&((rt&2)===0&&(bo|=l),It===4&&Ar(s,Ye,Jn,!1)),os(s))}function UT(s,o,l){if((rt&6)!==0)throw Error(i(327));var c=!l&&(o&127)===0&&(o&s.expiredLanes)===0||yi(s,o),y=c?I1(s,o):Um(s,o,!0),v=c;do{if(y===0){Ra&&!c&&Ar(s,o,0,!1);break}else{if(l=s.current.alternate,v&&!w1(l)){y=Um(s,o,!1),v=!1;continue}if(y===2){if(v=o,s.errorRecoveryDisabledLanes&v)var A=0;else A=s.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){o=A;e:{var b=s;y=_u;var O=b.current.memoizedState.isDehydrated;if(O&&(Ma(b,A).flags|=256),A=Um(b,A,!1),A!==2){if(xm&&!O){b.errorRecoveryDisabledLanes|=v,bo|=v,y=4;break e}v=Dn,Dn=y,v!==null&&(Dn===null?Dn=v:Dn.push.apply(Dn,v))}y=A}if(v=!1,y!==2)continue}}if(y===1){Ma(s,0),Ar(s,o,0,!0);break}e:{switch(c=s,v=y,v){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:Ar(c,o,Jn,!vr);break e;case 2:Dn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(y=Od+300-Sn(),10<y)){if(Ar(c,o,Jn,!vr),Gi(c,0,!0)!==0)break e;Us=o,c.timeoutHandle=hE(LT.bind(null,c,l,Dn,Bd,Mm,o,Jn,bo,xa,vr,v,"Throttled",-0,0),y);break e}LT(c,l,Dn,Bd,Mm,o,Jn,bo,xa,vr,v,null,-0,0)}}break}while(!0);os(s)}function LT(s,o,l,c,y,v,A,b,O,Y,ne,re,j,te){if(s.timeoutHandle=-1,re=o.subtreeFlags,re&8192||(re&16785408)===16785408){re={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ti},xT(o,v,re);var ve=(v&62914560)===v?Od-Sn():(v&4194048)===v?PT-Sn():0;if(ve=lM(re,ve),ve!==null){Us=v,s.cancelPendingCommit=ve($T.bind(null,s,o,v,l,c,y,A,b,O,ne,re,null,j,te)),Ar(s,v,A,!Y);return}}$T(s,o,v,l,c,y,A,b,O)}function w1(s){for(var o=s;;){var l=o.tag;if((l===0||l===11||l===15)&&o.flags&16384&&(l=o.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var y=l[c],v=y.getSnapshot;y=y.value;try{if(!qn(v(),y))return!1}catch{return!1}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ar(s,o,l,c){o&=~Nm,o&=~bo,s.suspendedLanes|=o,s.pingedLanes&=~o,c&&(s.warmLanes|=o),c=s.expirationTimes;for(var y=o;0<y;){var v=31-Rt(y),A=1<<v;c[v]=-1,y&=~A}l!==0&&to(s,l,o)}function qd(){return(rt&6)===0?(Tu(0),!1):!0}function Vm(){if(Je!==null){if(lt===0)var s=Je.return;else s=Je,Cs=_o=null,Xp(s),Ea=null,nu=0,s=Je;for(;s!==null;)pT(s.alternate,s),s=s.return;Je=null}}function Ma(s,o){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,z1(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),Us=0,Vm(),pt=s,Je=l=As(s.current,null),Ye=o,lt=0,$n=null,vr=!1,Ra=yi(s,o),xm=!1,xa=Jn=Nm=bo=Tr=It=0,Dn=_u=null,Mm=!1,(o&8)!==0&&(o|=o&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=o;0<c;){var y=31-Rt(c),v=1<<y;o|=s[y],c&=~v}return Vs=o,ld(),l}function OT(s,o){Be=null,Z.H=cu,o===Ta||o===gd?(o=e0(),lt=3):o===Fp?(o=e0(),lt=4):lt=o===hm?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,$n=o,Je===null&&(It=1,Nd(s,si(o,s.current)))}function FT(){var s=Hn.current;return s===null?!0:(Ye&4194048)===Ye?li===null:(Ye&62914560)===Ye||(Ye&536870912)!==0?s===li:!1}function BT(){var s=Z.H;return Z.H=cu,s===null?cu:s}function qT(){var s=Z.A;return Z.A=S1,s}function Gd(){It=4,vr||(Ye&4194048)!==Ye&&Hn.current!==null||(Ra=!0),(Tr&134217727)===0&&(bo&134217727)===0||pt===null||Ar(pt,Ye,Jn,!1)}function Um(s,o,l){var c=rt;rt|=2;var y=BT(),v=qT();(pt!==s||Ye!==o)&&(Bd=null,Ma(s,o)),o=!1;var A=It;e:do try{if(lt!==0&&Je!==null){var b=Je,O=$n;switch(lt){case 8:Vm(),A=6;break e;case 3:case 2:case 9:case 6:Hn.current===null&&(o=!0);var Y=lt;if(lt=0,$n=null,Da(s,b,O,Y),l&&Ra){A=0;break e}break;default:Y=lt,lt=0,$n=null,Da(s,b,O,Y)}}C1(),A=It;break}catch(ne){OT(s,ne)}while(!0);return o&&s.shellSuspendCounter++,Cs=_o=null,rt=c,Z.H=y,Z.A=v,Je===null&&(pt=null,Ye=0,ld()),A}function C1(){for(;Je!==null;)GT(Je)}function I1(s,o){var l=rt;rt|=2;var c=BT(),y=qT();pt!==s||Ye!==o?(Bd=null,Fd=Sn()+500,Ma(s,o)):Ra=yi(s,o);e:do try{if(lt!==0&&Je!==null){o=Je;var v=$n;t:switch(lt){case 1:lt=0,$n=null,Da(s,o,v,1);break;case 2:case 9:if(jv(v)){lt=0,$n=null,HT(o);break}o=function(){lt!==2&&lt!==9||pt!==s||(lt=7),os(s)},v.then(o,o);break e;case 3:lt=7;break e;case 4:lt=5;break e;case 7:jv(v)?(lt=0,$n=null,HT(o)):(lt=0,$n=null,Da(s,o,v,7));break;case 5:var A=null;switch(Je.tag){case 26:A=Je.memoizedState;case 5:case 27:var b=Je;if(A?RE(A):b.stateNode.complete){lt=0,$n=null;var O=b.sibling;if(O!==null)Je=O;else{var Y=b.return;Y!==null?(Je=Y,Hd(Y)):Je=null}break t}}lt=0,$n=null,Da(s,o,v,5);break;case 6:lt=0,$n=null,Da(s,o,v,6);break;case 8:Vm(),It=6;break e;default:throw Error(i(462))}}b1();break}catch(ne){OT(s,ne)}while(!0);return Cs=_o=null,Z.H=c,Z.A=y,rt=l,Je!==null?0:(pt=null,Ye=0,ld(),It)}function b1(){for(;Je!==null&&!fp();)GT(Je)}function GT(s){var o=fT(s.alternate,s,Vs);s.memoizedProps=s.pendingProps,o===null?Hd(s):Je=o}function HT(s){var o=s,l=o.alternate;switch(o.tag){case 15:case 0:o=oT(l,o,o.pendingProps,o.type,void 0,Ye);break;case 11:o=oT(l,o,o.pendingProps,o.type.render,o.ref,Ye);break;case 5:Xp(o);default:pT(l,o),o=Je=qv(o,Vs),o=fT(l,o,Vs)}s.memoizedProps=s.pendingProps,o===null?Hd(s):Je=o}function Da(s,o,l,c){Cs=_o=null,Xp(o),Ea=null,nu=0;var y=o.return;try{if(m1(s,y,o,l,Ye)){It=1,Nd(s,si(l,s.current)),Je=null;return}}catch(v){if(y!==null)throw Je=y,v;It=1,Nd(s,si(l,s.current)),Je=null;return}o.flags&32768?(Ze||c===1?s=!0:Ra||(Ye&536870912)!==0?s=!1:(vr=s=!0,(c===2||c===9||c===3||c===6)&&(c=Hn.current,c!==null&&c.tag===13&&(c.flags|=16384))),zT(o,s)):Hd(o)}function Hd(s){var o=s;do{if((o.flags&32768)!==0){zT(o,vr);return}s=o.return;var l=_1(o.alternate,o,Vs);if(l!==null){Je=l;return}if(o=o.sibling,o!==null){Je=o;return}Je=o=s}while(o!==null);It===0&&(It=5)}function zT(s,o){do{var l=v1(s.alternate,s);if(l!==null){l.flags&=32767,Je=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!o&&(s=s.sibling,s!==null)){Je=s;return}Je=s=l}while(s!==null);It=6,Je=null}function $T(s,o,l,c,y,v,A,b,O){s.cancelPendingCommit=null;do zd();while(Kt!==0);if((rt&6)!==0)throw Error(i(327));if(o!==null){if(o===s.current)throw Error(i(177));if(v=o.lanes|o.childLanes,v|=wp,mp(s,l,v,A,b,O),s===pt&&(Je=pt=null,Ye=0),Na=o,Sr=s,Us=l,Dm=v,Pm=y,kT=c,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,M1(Zs,function(){return QT(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||c){c=Z.T,Z.T=null,y=ce.p,ce.p=2,A=rt,rt|=4;try{T1(s,o,l)}finally{rt=A,ce.p=y,Z.T=c}}Kt=1,JT(),KT(),YT()}}function JT(){if(Kt===1){Kt=0;var s=Sr,o=Na,l=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||l){l=Z.T,Z.T=null;var c=ce.p;ce.p=2;var y=rt;rt|=4;try{IT(o,s);var v=Ym,A=Dv(s.containerInfo),b=v.focusedElem,O=v.selectionRange;if(A!==b&&b&&b.ownerDocument&&Mv(b.ownerDocument.documentElement,b)){if(O!==null&&vp(b)){var Y=O.start,ne=O.end;if(ne===void 0&&(ne=Y),"selectionStart"in b)b.selectionStart=Y,b.selectionEnd=Math.min(ne,b.value.length);else{var re=b.ownerDocument||document,j=re&&re.defaultView||window;if(j.getSelection){var te=j.getSelection(),ve=b.textContent.length,Ie=Math.min(O.start,ve),ht=O.end===void 0?Ie:Math.min(O.end,ve);!te.extend&&Ie>ht&&(A=ht,ht=Ie,Ie=A);var G=Nv(b,Ie),B=Nv(b,ht);if(G&&B&&(te.rangeCount!==1||te.anchorNode!==G.node||te.anchorOffset!==G.offset||te.focusNode!==B.node||te.focusOffset!==B.offset)){var K=re.createRange();K.setStart(G.node,G.offset),te.removeAllRanges(),Ie>ht?(te.addRange(K),te.extend(B.node,B.offset)):(K.setEnd(B.node,B.offset),te.addRange(K))}}}}for(re=[],te=b;te=te.parentNode;)te.nodeType===1&&re.push({element:te,left:te.scrollLeft,top:te.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<re.length;b++){var se=re[b];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}nf=!!Km,Ym=Km=null}finally{rt=y,ce.p=c,Z.T=l}}s.current=o,Kt=2}}function KT(){if(Kt===2){Kt=0;var s=Sr,o=Na,l=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||l){l=Z.T,Z.T=null;var c=ce.p;ce.p=2;var y=rt;rt|=4;try{ET(s,o.alternate,o)}finally{rt=y,ce.p=c,Z.T=l}}Kt=3}}function YT(){if(Kt===4||Kt===3){Kt=0,kc();var s=Sr,o=Na,l=Us,c=kT;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Kt=5:(Kt=0,Na=Sr=null,WT(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(Er=null),vs(l),o=o.stateNode,rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(gi,o,void 0,(o.current.flags&128)===128)}catch{}if(c!==null){o=Z.T,y=ce.p,ce.p=2,Z.T=null;try{for(var v=s.onRecoverableError,A=0;A<c.length;A++){var b=c[A];v(b.value,{componentStack:b.stack})}}finally{Z.T=o,ce.p=y}}(Us&3)!==0&&zd(),os(s),y=s.pendingLanes,(l&261930)!==0&&(y&42)!==0?s===km?vu++:(vu=0,km=s):vu=0,Tu(0)}}function WT(s,o){(s.pooledCacheLanes&=o)===0&&(o=s.pooledCache,o!=null&&(s.pooledCache=null,eu(o)))}function zd(){return JT(),KT(),YT(),QT()}function QT(){if(Kt!==5)return!1;var s=Sr,o=Dm;Dm=0;var l=vs(Us),c=Z.T,y=ce.p;try{ce.p=32>l?32:l,Z.T=null,l=Pm,Pm=null;var v=Sr,A=Us;if(Kt=0,Na=Sr=null,Us=0,(rt&6)!==0)throw Error(i(331));var b=rt;if(rt|=4,MT(v.current),RT(v,v.current,A,l),rt=b,Tu(0,!1),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(gi,v)}catch{}return!0}finally{ce.p=y,Z.T=c,WT(s,o)}}function XT(s,o,l){o=si(l,o),o=fm(s.stateNode,o,2),s=mr(s,o,2),s!==null&&(eo(s,2),os(s))}function ut(s,o,l){if(s.tag===3)XT(s,s,l);else for(;o!==null;){if(o.tag===3){XT(o,s,l);break}else if(o.tag===1){var c=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Er===null||!Er.has(c))){s=si(l,s),l=j0(2),c=mr(o,l,2),c!==null&&(Z0(l,c,o,s),eo(c,2),os(c));break}}o=o.return}}function Lm(s,o,l){var c=s.pingCache;if(c===null){c=s.pingCache=new A1;var y=new Set;c.set(o,y)}else y=c.get(o),y===void 0&&(y=new Set,c.set(o,y));y.has(l)||(xm=!0,y.add(l),s=R1.bind(null,s,o,l),o.then(s,s))}function R1(s,o,l){var c=s.pingCache;c!==null&&c.delete(o),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,pt===s&&(Ye&l)===l&&(It===4||It===3&&(Ye&62914560)===Ye&&300>Sn()-Od?(rt&2)===0&&Ma(s,0):Nm|=l,xa===Ye&&(xa=0)),os(s)}function jT(s,o){o===0&&(o=Bc()),s=mo(s,o),s!==null&&(eo(s,o),os(s))}function x1(s){var o=s.memoizedState,l=0;o!==null&&(l=o.retryLane),jT(s,l)}function N1(s,o){var l=0;switch(s.tag){case 31:case 13:var c=s.stateNode,y=s.memoizedState;y!==null&&(l=y.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(o),jT(s,l)}function M1(s,o){return Jt(s,o)}var $d=null,Pa=null,Om=!1,Jd=!1,Fm=!1,wr=0;function os(s){s!==Pa&&s.next===null&&(Pa===null?$d=Pa=s:Pa=Pa.next=s),Jd=!0,Om||(Om=!0,P1())}function Tu(s,o){if(!Fm&&Jd){Fm=!0;do for(var l=!1,c=$d;c!==null;){if(s!==0){var y=c.pendingLanes;if(y===0)var v=0;else{var A=c.suspendedLanes,b=c.pingedLanes;v=(1<<31-Rt(42|s)+1)-1,v&=y&~(A&~b),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(l=!0,nE(c,v))}else v=Ye,v=Gi(c,c===pt?v:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(v&3)===0||yi(c,v)||(l=!0,nE(c,v));c=c.next}while(l);Fm=!1}}function D1(){ZT()}function ZT(){Jd=Om=!1;var s=0;wr!==0&&H1()&&(s=wr);for(var o=Sn(),l=null,c=$d;c!==null;){var y=c.next,v=eE(c,o);v===0?(c.next=null,l===null?$d=y:l.next=y,y===null&&(Pa=l)):(l=c,(s!==0||(v&3)!==0)&&(Jd=!0)),c=y}Kt!==0&&Kt!==5||Tu(s),wr!==0&&(wr=0)}function eE(s,o){for(var l=s.suspendedLanes,c=s.pingedLanes,y=s.expirationTimes,v=s.pendingLanes&-62914561;0<v;){var A=31-Rt(v),b=1<<A,O=y[A];O===-1?((b&l)===0||(b&c)!==0)&&(y[A]=pp(b,o)):O<=o&&(s.expiredLanes|=b),v&=~b}if(o=pt,l=Ye,l=Gi(s,s===o?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,l===0||s===o&&(lt===2||lt===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&js(c),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||yi(s,l)){if(o=l&-l,o===s.callbackPriority)return o;switch(c!==null&&js(c),vs(l)){case 2:case 8:l=Nl;break;case 32:l=Zs;break;case 268435456:l=Vc;break;default:l=Zs}return c=tE.bind(null,s),l=Jt(l,c),s.callbackPriority=o,s.callbackNode=l,o}return c!==null&&c!==null&&js(c),s.callbackPriority=2,s.callbackNode=null,2}function tE(s,o){if(Kt!==0&&Kt!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(zd()&&s.callbackNode!==l)return null;var c=Ye;return c=Gi(s,s===pt?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(UT(s,c,o),eE(s,Sn()),s.callbackNode!=null&&s.callbackNode===l?tE.bind(null,s):null)}function nE(s,o){if(zd())return null;UT(s,o,!0)}function P1(){$1(function(){(rt&6)!==0?Jt(xl,D1):ZT()})}function Bm(){if(wr===0){var s=_a;s===0&&(s=Bi,Bi<<=1,(Bi&261888)===0&&(Bi=256)),wr=s}return wr}function iE(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:ia(""+s)}function sE(s,o){var l=o.ownerDocument.createElement("input");return l.name=o.name,l.value=o.value,s.id&&l.setAttribute("form",s.id),o.parentNode.insertBefore(l,o),s=new FormData(s),l.parentNode.removeChild(l),s}function k1(s,o,l,c,y){if(o==="submit"&&l&&l.stateNode===y){var v=iE((y[Xt]||null).action),A=c.submitter;A&&(o=(o=A[Xt]||null)?iE(o.formAction):A.getAttribute("formAction"),o!==null&&(v=o,A=null));var b=new Zi("action","action",null,c,y);s.push({event:b,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(wr!==0){var O=A?sE(y,A):new FormData(y);om(l,{pending:!0,data:O,method:y.method,action:v},null,O)}}else typeof v=="function"&&(b.preventDefault(),O=A?sE(y,A):new FormData(y),om(l,{pending:!0,data:O,method:y.method,action:v},v,O))},currentTarget:y}]})}}for(var qm=0;qm<Ap.length;qm++){var Gm=Ap[qm],V1=Gm.toLowerCase(),U1=Gm[0].toUpperCase()+Gm.slice(1);Ci(V1,"on"+U1)}Ci(Vv,"onAnimationEnd"),Ci(Uv,"onAnimationIteration"),Ci(Lv,"onAnimationStart"),Ci("dblclick","onDoubleClick"),Ci("focusin","onFocus"),Ci("focusout","onBlur"),Ci(jN,"onTransitionRun"),Ci(ZN,"onTransitionStart"),Ci(e1,"onTransitionCancel"),Ci(Ov,"onTransitionEnd"),Wi("onMouseEnter",["mouseout","mouseover"]),Wi("onMouseLeave",["mouseout","mouseover"]),Wi("onPointerEnter",["pointerout","pointerover"]),Wi("onPointerLeave",["pointerout","pointerover"]),Yi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Yi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Yi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Yi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Yi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Yi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Eu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),L1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Eu));function rE(s,o){o=(o&4)!==0;for(var l=0;l<s.length;l++){var c=s[l],y=c.event;c=c.listeners;e:{var v=void 0;if(o)for(var A=c.length-1;0<=A;A--){var b=c[A],O=b.instance,Y=b.currentTarget;if(b=b.listener,O!==v&&y.isPropagationStopped())break e;v=b,y.currentTarget=Y;try{v(y)}catch(ne){ad(ne)}y.currentTarget=null,v=O}else for(A=0;A<c.length;A++){if(b=c[A],O=b.instance,Y=b.currentTarget,b=b.listener,O!==v&&y.isPropagationStopped())break e;v=b,y.currentTarget=Y;try{v(y)}catch(ne){ad(ne)}y.currentTarget=null,v=O}}}}function Ke(s,o){var l=o[jo];l===void 0&&(l=o[jo]=new Set);var c=s+"__bubble";l.has(c)||(oE(o,s,2,!1),l.add(c))}function Hm(s,o,l){var c=0;o&&(c|=4),oE(l,s,c,o)}var Kd="_reactListening"+Math.random().toString(36).slice(2);function zm(s){if(!s[Kd]){s[Kd]=!0,Pl.forEach(function(l){l!=="selectionchange"&&(L1.has(l)||Hm(l,!1,s),Hm(l,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[Kd]||(o[Kd]=!0,Hm("selectionchange",!1,o))}}function oE(s,o,l,c){switch(VE(o)){case 2:var y=dM;break;case 8:y=fM;break;default:y=rg}l=y.bind(null,o,l,s),y=void 0,!oo||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(y=!0),c?y!==void 0?s.addEventListener(o,l,{capture:!0,passive:y}):s.addEventListener(o,l,!0):y!==void 0?s.addEventListener(o,l,{passive:y}):s.addEventListener(o,l,!1)}function $m(s,o,l,c,y){var v=c;if((o&1)===0&&(o&2)===0&&c!==null)e:for(;;){if(c===null)return;var A=c.tag;if(A===3||A===4){var b=c.stateNode.containerInfo;if(b===y)break;if(A===4)for(A=c.return;A!==null;){var O=A.tag;if((O===3||O===4)&&A.stateNode.containerInfo===y)return;A=A.return}for(;b!==null;){if(A=Ji(b),A===null)return;if(O=A.tag,O===5||O===6||O===26||O===27){c=v=A;continue e}b=b.parentNode}}c=c.return}rr(function(){var Y=v,ne=ei(l),re=[];e:{var j=Fv.get(s);if(j!==void 0){var te=Zi,ve=s;switch(s){case"keypress":if(lo(l)===0)break e;case"keydown":case"keyup":te=sd;break;case"focusin":ve="focus",te=co;break;case"focusout":ve="blur",te=co;break;case"beforeblur":case"afterblur":te=co;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=Jl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=Wc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=S;break;case Vv:case Uv:case Lv:te=Xc;break;case Ov:te=R;break;case"scroll":case"scrollend":te=$l;break;case"wheel":te=ee;break;case"copy":case"cut":case"paste":te=jc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=Ss;break;case"toggle":case"beforetoggle":te=Fe}var Ie=(o&4)!==0,ht=!Ie&&(s==="scroll"||s==="scrollend"),G=Ie?j!==null?j+"Capture":null:j;Ie=[];for(var B=Y,K;B!==null;){var se=B;if(K=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||K===null||G===null||(se=Ei(B,G),se!=null&&Ie.push(Su(B,se,K))),ht)break;B=B.return}0<Ie.length&&(j=new te(j,ve,null,l,ne),re.push({event:j,listeners:Ie}))}}if((o&7)===0){e:{if(j=s==="mouseover"||s==="pointerover",te=s==="mouseout"||s==="pointerout",j&&l!==Gl&&(ve=l.relatedTarget||l.fromElement)&&(Ji(ve)||ve[zi]))break e;if((te||j)&&(j=ne.window===ne?ne:(j=ne.ownerDocument)?j.defaultView||j.parentWindow:window,te?(ve=l.relatedTarget||l.toElement,te=Y,ve=ve?Ji(ve):null,ve!==null&&(ht=a(ve),Ie=ve.tag,ve!==ht||Ie!==5&&Ie!==27&&Ie!==6)&&(ve=null)):(te=null,ve=Y),te!==ve)){if(Ie=Jl,se="onMouseLeave",G="onMouseEnter",B="mouse",(s==="pointerout"||s==="pointerover")&&(Ie=Ss,se="onPointerLeave",G="onPointerEnter",B="pointer"),ht=te==null?j:Fn(te),K=ve==null?j:Fn(ve),j=new Ie(se,B+"leave",te,l,ne),j.target=ht,j.relatedTarget=K,se=null,Ji(ne)===Y&&(Ie=new Ie(G,B+"enter",ve,l,ne),Ie.target=K,Ie.relatedTarget=ht,se=Ie),ht=se,te&&ve)t:{for(Ie=O1,G=te,B=ve,K=0,se=G;se;se=Ie(se))K++;se=0;for(var Se=B;Se;Se=Ie(Se))se++;for(;0<K-se;)G=Ie(G),K--;for(;0<se-K;)B=Ie(B),se--;for(;K--;){if(G===B||B!==null&&G===B.alternate){Ie=G;break t}G=Ie(G),B=Ie(B)}Ie=null}else Ie=null;te!==null&&aE(re,j,te,Ie,!1),ve!==null&&ht!==null&&aE(re,ht,ve,Ie,!0)}}e:{if(j=Y?Fn(Y):window,te=j.nodeName&&j.nodeName.toLowerCase(),te==="select"||te==="input"&&j.type==="file")var tt=wv;else if(Sv(j))if(Cv)tt=WN;else{tt=KN;var Te=JN}else te=j.nodeName,!te||te.toLowerCase()!=="input"||j.type!=="checkbox"&&j.type!=="radio"?Y&&na(Y.elementType)&&(tt=wv):tt=YN;if(tt&&(tt=tt(s,Y))){Av(re,tt,l,ne);break e}Te&&Te(s,j,Y),s==="focusout"&&Y&&j.type==="number"&&Y.memoizedProps.value!=null&&Fl(j,"number",j.value)}switch(Te=Y?Fn(Y):window,s){case"focusin":(Sv(Te)||Te.contentEditable==="true")&&(ca=Te,Tp=Y,Xl=null);break;case"focusout":Xl=Tp=ca=null;break;case"mousedown":Ep=!0;break;case"contextmenu":case"mouseup":case"dragend":Ep=!1,Pv(re,l,ne);break;case"selectionchange":if(XN)break;case"keydown":case"keyup":Pv(re,l,ne)}var qe;if(st)e:{switch(s){case"compositionstart":var We="onCompositionStart";break e;case"compositionend":We="onCompositionEnd";break e;case"compositionupdate":We="onCompositionUpdate";break e}We=void 0}else ua?fo(s,l)&&(We="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(We="onCompositionStart");We&&(ns&&l.locale!=="ko"&&(ua||We!=="onCompositionStart"?We==="onCompositionEnd"&&ua&&(qe=zl()):(ji=ne,Hl="value"in ji?ji.value:ji.textContent,ua=!0)),Te=Yd(Y,We),0<Te.length&&(We=new ts(We,s,null,l,ne),re.push({event:We,listeners:Te}),qe?We.data=qe:(qe=la(l),qe!==null&&(We.data=qe)))),(qe=ni?GN(s,l):HN(s,l))&&(We=Yd(Y,"onBeforeInput"),0<We.length&&(Te=new ts("onBeforeInput","beforeinput",null,l,ne),re.push({event:Te,listeners:We}),Te.data=qe)),k1(re,s,Y,l,ne)}rE(re,o)})}function Su(s,o,l){return{instance:s,listener:o,currentTarget:l}}function Yd(s,o){for(var l=o+"Capture",c=[];s!==null;){var y=s,v=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||v===null||(y=Ei(s,l),y!=null&&c.unshift(Su(s,y,v)),y=Ei(s,o),y!=null&&c.push(Su(s,y,v))),s.tag===3)return c;s=s.return}return[]}function O1(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function aE(s,o,l,c,y){for(var v=o._reactName,A=[];l!==null&&l!==c;){var b=l,O=b.alternate,Y=b.stateNode;if(b=b.tag,O!==null&&O===c)break;b!==5&&b!==26&&b!==27||Y===null||(O=Y,y?(Y=Ei(l,v),Y!=null&&A.unshift(Su(l,Y,O))):y||(Y=Ei(l,v),Y!=null&&A.push(Su(l,Y,O)))),l=l.return}A.length!==0&&s.push({event:o,listeners:A})}var F1=/\r\n?/g,B1=/\u0000|\uFFFD/g;function lE(s){return(typeof s=="string"?s:""+s).replace(F1,`
`).replace(B1,"")}function uE(s,o){return o=lE(o),lE(s)===o}function ft(s,o,l,c,y,v){switch(l){case"children":typeof c=="string"?o==="body"||o==="textarea"&&c===""||Rn(s,c):(typeof c=="number"||typeof c=="bigint")&&o!=="body"&&Rn(s,""+c);break;case"className":Bn(s,"class",c);break;case"tabIndex":Bn(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Bn(s,l,c);break;case"style":ql(s,c,v);break;case"data":if(o!=="object"){Bn(s,"data",c);break}case"src":case"href":if(c===""&&(o!=="a"||l!=="href")){s.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=ia(""+c),s.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(l==="formAction"?(o!=="input"&&ft(s,o,"name",y.name,y,null),ft(s,o,"formEncType",y.formEncType,y,null),ft(s,o,"formMethod",y.formMethod,y,null),ft(s,o,"formTarget",y.formTarget,y,null)):(ft(s,o,"encType",y.encType,y,null),ft(s,o,"method",y.method,y,null),ft(s,o,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=ia(""+c),s.setAttribute(l,c);break;case"onClick":c!=null&&(s.onclick=Ti);break;case"onScroll":c!=null&&Ke("scroll",s);break;case"onScrollEnd":c!=null&&Ke("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}l=ia(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""+c):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":c===!0?s.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,c):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(l,c):s.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(l):s.setAttribute(l,c);break;case"popover":Ke("beforetoggle",s),Ke("toggle",s),ea(s,"popover",c);break;case"xlinkActuate":Lt(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Lt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Lt(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Lt(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Lt(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Lt(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Lt(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Lt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Lt(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":ea(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Yc.get(l)||l,ea(s,l,c))}}function Jm(s,o,l,c,y,v){switch(l){case"style":ql(s,c,v);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"children":typeof c=="string"?Rn(s,c):(typeof c=="number"||typeof c=="bigint")&&Rn(s,""+c);break;case"onScroll":c!=null&&Ke("scroll",s);break;case"onScrollEnd":c!=null&&Ke("scrollend",s);break;case"onClick":c!=null&&(s.onclick=Ti);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!kl.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(y=l.endsWith("Capture"),o=l.slice(2,y?l.length-7:void 0),v=s[Xt]||null,v=v!=null?v[l]:null,typeof v=="function"&&s.removeEventListener(o,v,y),typeof c=="function")){typeof v!="function"&&v!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(o,c,y);break e}l in s?s[l]=c:c===!0?s.setAttribute(l,""):ea(s,l,c)}}}function cn(s,o,l){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ke("error",s),Ke("load",s);var c=!1,y=!1,v;for(v in l)if(l.hasOwnProperty(v)){var A=l[v];if(A!=null)switch(v){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:ft(s,o,v,A,l,null)}}y&&ft(s,o,"srcSet",l.srcSet,l,null),c&&ft(s,o,"src",l.src,l,null);return;case"input":Ke("invalid",s);var b=v=A=y=null,O=null,Y=null;for(c in l)if(l.hasOwnProperty(c)){var ne=l[c];if(ne!=null)switch(c){case"name":y=ne;break;case"type":A=ne;break;case"checked":O=ne;break;case"defaultChecked":Y=ne;break;case"value":v=ne;break;case"defaultValue":b=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(137,o));break;default:ft(s,o,c,ne,l,null)}}$c(s,v,b,O,Y,A,y,!1);return;case"select":Ke("invalid",s),c=A=v=null;for(y in l)if(l.hasOwnProperty(y)&&(b=l[y],b!=null))switch(y){case"value":v=b;break;case"defaultValue":A=b;break;case"multiple":c=b;default:ft(s,o,y,b,l,null)}o=v,l=A,s.multiple=!!c,o!=null?tr(s,!!c,o,!1):l!=null&&tr(s,!!c,l,!0);return;case"textarea":Ke("invalid",s),v=y=c=null;for(A in l)if(l.hasOwnProperty(A)&&(b=l[A],b!=null))switch(A){case"value":c=b;break;case"defaultValue":y=b;break;case"children":v=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(i(91));break;default:ft(s,o,A,b,l,null)}nr(s,c,y,v);return;case"option":for(O in l)if(l.hasOwnProperty(O)&&(c=l[O],c!=null))switch(O){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:ft(s,o,O,c,l,null)}return;case"dialog":Ke("beforetoggle",s),Ke("toggle",s),Ke("cancel",s),Ke("close",s);break;case"iframe":case"object":Ke("load",s);break;case"video":case"audio":for(c=0;c<Eu.length;c++)Ke(Eu[c],s);break;case"image":Ke("error",s),Ke("load",s);break;case"details":Ke("toggle",s);break;case"embed":case"source":case"link":Ke("error",s),Ke("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in l)if(l.hasOwnProperty(Y)&&(c=l[Y],c!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:ft(s,o,Y,c,l,null)}return;default:if(na(o)){for(ne in l)l.hasOwnProperty(ne)&&(c=l[ne],c!==void 0&&Jm(s,o,ne,c,l,void 0));return}}for(b in l)l.hasOwnProperty(b)&&(c=l[b],c!=null&&ft(s,o,b,c,l,null))}function q1(s,o,l,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,v=null,A=null,b=null,O=null,Y=null,ne=null;for(te in l){var re=l[te];if(l.hasOwnProperty(te)&&re!=null)switch(te){case"checked":break;case"value":break;case"defaultValue":O=re;default:c.hasOwnProperty(te)||ft(s,o,te,null,c,re)}}for(var j in c){var te=c[j];if(re=l[j],c.hasOwnProperty(j)&&(te!=null||re!=null))switch(j){case"type":v=te;break;case"name":y=te;break;case"checked":Y=te;break;case"defaultChecked":ne=te;break;case"value":A=te;break;case"defaultValue":b=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,o));break;default:te!==re&&ft(s,o,j,te,c,re)}}ta(s,A,b,O,Y,ne,v,y);return;case"select":te=A=b=j=null;for(v in l)if(O=l[v],l.hasOwnProperty(v)&&O!=null)switch(v){case"value":break;case"multiple":te=O;default:c.hasOwnProperty(v)||ft(s,o,v,null,c,O)}for(y in c)if(v=c[y],O=l[y],c.hasOwnProperty(y)&&(v!=null||O!=null))switch(y){case"value":j=v;break;case"defaultValue":b=v;break;case"multiple":A=v;default:v!==O&&ft(s,o,y,v,c,O)}o=b,l=A,c=te,j!=null?tr(s,!!l,j,!1):!!c!=!!l&&(o!=null?tr(s,!!l,o,!0):tr(s,!!l,l?[]:"",!1));return;case"textarea":te=j=null;for(b in l)if(y=l[b],l.hasOwnProperty(b)&&y!=null&&!c.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:ft(s,o,b,null,c,y)}for(A in c)if(y=c[A],v=l[A],c.hasOwnProperty(A)&&(y!=null||v!=null))switch(A){case"value":j=y;break;case"defaultValue":te=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==v&&ft(s,o,A,y,c,v)}Jc(s,j,te);return;case"option":for(var ve in l)if(j=l[ve],l.hasOwnProperty(ve)&&j!=null&&!c.hasOwnProperty(ve))switch(ve){case"selected":s.selected=!1;break;default:ft(s,o,ve,null,c,j)}for(O in c)if(j=c[O],te=l[O],c.hasOwnProperty(O)&&j!==te&&(j!=null||te!=null))switch(O){case"selected":s.selected=j&&typeof j!="function"&&typeof j!="symbol";break;default:ft(s,o,O,j,c,te)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ie in l)j=l[Ie],l.hasOwnProperty(Ie)&&j!=null&&!c.hasOwnProperty(Ie)&&ft(s,o,Ie,null,c,j);for(Y in c)if(j=c[Y],te=l[Y],c.hasOwnProperty(Y)&&j!==te&&(j!=null||te!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(i(137,o));break;default:ft(s,o,Y,j,c,te)}return;default:if(na(o)){for(var ht in l)j=l[ht],l.hasOwnProperty(ht)&&j!==void 0&&!c.hasOwnProperty(ht)&&Jm(s,o,ht,void 0,c,j);for(ne in c)j=c[ne],te=l[ne],!c.hasOwnProperty(ne)||j===te||j===void 0&&te===void 0||Jm(s,o,ne,j,c,te);return}}for(var G in l)j=l[G],l.hasOwnProperty(G)&&j!=null&&!c.hasOwnProperty(G)&&ft(s,o,G,null,c,j);for(re in c)j=c[re],te=l[re],!c.hasOwnProperty(re)||j===te||j==null&&te==null||ft(s,o,re,j,c,te)}function cE(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function G1(){if(typeof performance.getEntriesByType=="function"){for(var s=0,o=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var y=l[c],v=y.transferSize,A=y.initiatorType,b=y.duration;if(v&&b&&cE(A)){for(A=0,b=y.responseEnd,c+=1;c<l.length;c++){var O=l[c],Y=O.startTime;if(Y>b)break;var ne=O.transferSize,re=O.initiatorType;ne&&cE(re)&&(O=O.responseEnd,A+=ne*(O<b?1:(b-Y)/(O-Y)))}if(--c,o+=8*(v+A)/(y.duration/1e3),s++,10<s)break}}if(0<s)return o/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Km=null,Ym=null;function Wd(s){return s.nodeType===9?s:s.ownerDocument}function dE(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function fE(s,o){if(s===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&o==="foreignObject"?0:s}function Wm(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Qm=null;function H1(){var s=window.event;return s&&s.type==="popstate"?s===Qm?!1:(Qm=s,!0):(Qm=null,!1)}var hE=typeof setTimeout=="function"?setTimeout:void 0,z1=typeof clearTimeout=="function"?clearTimeout:void 0,pE=typeof Promise=="function"?Promise:void 0,$1=typeof queueMicrotask=="function"?queueMicrotask:typeof pE<"u"?function(s){return pE.resolve(null).then(s).catch(J1)}:hE;function J1(s){setTimeout(function(){throw s})}function Cr(s){return s==="head"}function mE(s,o){var l=o,c=0;do{var y=l.nextSibling;if(s.removeChild(l),y&&y.nodeType===8)if(l=y.data,l==="/$"||l==="/&"){if(c===0){s.removeChild(y),La(o);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")Au(s.ownerDocument.documentElement);else if(l==="head"){l=s.ownerDocument.head,Au(l);for(var v=l.firstChild;v;){var A=v.nextSibling,b=v.nodeName;v[$i]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&v.rel.toLowerCase()==="stylesheet"||l.removeChild(v),v=A}}else l==="body"&&Au(s.ownerDocument.body);l=y}while(l);La(o)}function gE(s,o){var l=s;s=0;do{var c=l.nextSibling;if(l.nodeType===1?o?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(o?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(s===0)break;s--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||s++;l=c}while(l)}function Xm(s){var o=s.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var l=o;switch(o=o.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Xm(l),Zo(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function K1(s,o,l,c){for(;s.nodeType===1;){var y=l;if(s.nodeName.toLowerCase()!==o.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[$i])switch(o){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(v=s.getAttribute("rel"),v==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(v!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(v=s.getAttribute("src"),(v!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&v&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(o==="input"&&s.type==="hidden"){var v=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===v)return s}else return s;if(s=ui(s.nextSibling),s===null)break}return null}function Y1(s,o,l){if(o==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=ui(s.nextSibling),s===null))return null;return s}function yE(s,o){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!o||(s=ui(s.nextSibling),s===null))return null;return s}function jm(s){return s.data==="$?"||s.data==="$~"}function Zm(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function W1(s,o){var l=s.ownerDocument;if(s.data==="$~")s._reactRetry=o;else if(s.data!=="$?"||l.readyState!=="loading")o();else{var c=function(){o(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function ui(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return s}var eg=null;function _E(s){s=s.nextSibling;for(var o=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"||l==="/&"){if(o===0)return ui(s.nextSibling);o--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||o++}s=s.nextSibling}return null}function vE(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(o===0)return s;o--}else l!=="/$"&&l!=="/&"||o++}s=s.previousSibling}return null}function TE(s,o,l){switch(o=Wd(l),s){case"html":if(s=o.documentElement,!s)throw Error(i(452));return s;case"head":if(s=o.head,!s)throw Error(i(453));return s;case"body":if(s=o.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Au(s){for(var o=s.attributes;o.length;)s.removeAttributeNode(o[0]);Zo(s)}var ci=new Map,EE=new Set;function Qd(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Ls=ce.d;ce.d={f:Q1,r:X1,D:j1,C:Z1,L:eM,m:tM,X:iM,S:nM,M:sM};function Q1(){var s=Ls.f(),o=qd();return s||o}function X1(s){var o=Zn(s);o!==null&&o.tag===5&&o.type==="form"?O0(o):Ls.r(s)}var ka=typeof document>"u"?null:document;function SE(s,o,l){var c=ka;if(c&&typeof o=="string"&&o){var y=bn(o);y='link[rel="'+s+'"][href="'+y+'"]',typeof l=="string"&&(y+='[crossorigin="'+l+'"]'),EE.has(y)||(EE.add(y),s={rel:s,crossOrigin:l,href:o},c.querySelector(y)===null&&(o=c.createElement("link"),cn(o,"link",s),Ut(o),c.head.appendChild(o)))}}function j1(s){Ls.D(s),SE("dns-prefetch",s,null)}function Z1(s,o){Ls.C(s,o),SE("preconnect",s,o)}function eM(s,o,l){Ls.L(s,o,l);var c=ka;if(c&&s&&o){var y='link[rel="preload"][as="'+bn(o)+'"]';o==="image"&&l&&l.imageSrcSet?(y+='[imagesrcset="'+bn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(y+='[imagesizes="'+bn(l.imageSizes)+'"]')):y+='[href="'+bn(s)+'"]';var v=y;switch(o){case"style":v=Va(s);break;case"script":v=Ua(s)}ci.has(v)||(s=T({rel:"preload",href:o==="image"&&l&&l.imageSrcSet?void 0:s,as:o},l),ci.set(v,s),c.querySelector(y)!==null||o==="style"&&c.querySelector(wu(v))||o==="script"&&c.querySelector(Cu(v))||(o=c.createElement("link"),cn(o,"link",s),Ut(o),c.head.appendChild(o)))}}function tM(s,o){Ls.m(s,o);var l=ka;if(l&&s){var c=o&&typeof o.as=="string"?o.as:"script",y='link[rel="modulepreload"][as="'+bn(c)+'"][href="'+bn(s)+'"]',v=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Ua(s)}if(!ci.has(v)&&(s=T({rel:"modulepreload",href:s},o),ci.set(v,s),l.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Cu(v)))return}c=l.createElement("link"),cn(c,"link",s),Ut(c),l.head.appendChild(c)}}}function nM(s,o,l){Ls.S(s,o,l);var c=ka;if(c&&s){var y=Ki(c).hoistableStyles,v=Va(s);o=o||"default";var A=y.get(v);if(!A){var b={loading:0,preload:null};if(A=c.querySelector(wu(v)))b.loading=5;else{s=T({rel:"stylesheet",href:s,"data-precedence":o},l),(l=ci.get(v))&&tg(s,l);var O=A=c.createElement("link");Ut(O),cn(O,"link",s),O._p=new Promise(function(Y,ne){O.onload=Y,O.onerror=ne}),O.addEventListener("load",function(){b.loading|=1}),O.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Xd(A,o,c)}A={type:"stylesheet",instance:A,count:1,state:b},y.set(v,A)}}}function iM(s,o){Ls.X(s,o);var l=ka;if(l&&s){var c=Ki(l).hoistableScripts,y=Ua(s),v=c.get(y);v||(v=l.querySelector(Cu(y)),v||(s=T({src:s,async:!0},o),(o=ci.get(y))&&ng(s,o),v=l.createElement("script"),Ut(v),cn(v,"link",s),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function sM(s,o){Ls.M(s,o);var l=ka;if(l&&s){var c=Ki(l).hoistableScripts,y=Ua(s),v=c.get(y);v||(v=l.querySelector(Cu(y)),v||(s=T({src:s,async:!0,type:"module"},o),(o=ci.get(y))&&ng(s,o),v=l.createElement("script"),Ut(v),cn(v,"link",s),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function AE(s,o,l,c){var y=(y=De.current)?Qd(y):null;if(!y)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(o=Va(l.href),l=Ki(y).hoistableStyles,c=l.get(o),c||(c={type:"style",instance:null,count:0,state:null},l.set(o,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=Va(l.href);var v=Ki(y).hoistableStyles,A=v.get(s);if(A||(y=y.ownerDocument||y,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(s,A),(v=y.querySelector(wu(s)))&&!v._p&&(A.instance=v,A.state.loading=5),ci.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},ci.set(s,l),v||rM(y,s,l,A.state))),o&&c===null)throw Error(i(528,""));return A}if(o&&c!==null)throw Error(i(529,""));return null;case"script":return o=l.async,l=l.src,typeof l=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Ua(l),l=Ki(y).hoistableScripts,c=l.get(o),c||(c={type:"script",instance:null,count:0,state:null},l.set(o,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Va(s){return'href="'+bn(s)+'"'}function wu(s){return'link[rel="stylesheet"]['+s+"]"}function wE(s){return T({},s,{"data-precedence":s.precedence,precedence:null})}function rM(s,o,l,c){s.querySelector('link[rel="preload"][as="style"]['+o+"]")?c.loading=1:(o=s.createElement("link"),c.preload=o,o.addEventListener("load",function(){return c.loading|=1}),o.addEventListener("error",function(){return c.loading|=2}),cn(o,"link",l),Ut(o),s.head.appendChild(o))}function Ua(s){return'[src="'+bn(s)+'"]'}function Cu(s){return"script[async]"+s}function CE(s,o,l){if(o.count++,o.instance===null)switch(o.type){case"style":var c=s.querySelector('style[data-href~="'+bn(l.href)+'"]');if(c)return o.instance=c,Ut(c),c;var y=T({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),Ut(c),cn(c,"style",y),Xd(c,l.precedence,s),o.instance=c;case"stylesheet":y=Va(l.href);var v=s.querySelector(wu(y));if(v)return o.state.loading|=4,o.instance=v,Ut(v),v;c=wE(l),(y=ci.get(y))&&tg(c,y),v=(s.ownerDocument||s).createElement("link"),Ut(v);var A=v;return A._p=new Promise(function(b,O){A.onload=b,A.onerror=O}),cn(v,"link",c),o.state.loading|=4,Xd(v,l.precedence,s),o.instance=v;case"script":return v=Ua(l.src),(y=s.querySelector(Cu(v)))?(o.instance=y,Ut(y),y):(c=l,(y=ci.get(v))&&(c=T({},l),ng(c,y)),s=s.ownerDocument||s,y=s.createElement("script"),Ut(y),cn(y,"link",c),s.head.appendChild(y),o.instance=y);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(c=o.instance,o.state.loading|=4,Xd(c,l.precedence,s));return o.instance}function Xd(s,o,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,v=y,A=0;A<c.length;A++){var b=c[A];if(b.dataset.precedence===o)v=b;else if(v!==y)break}v?v.parentNode.insertBefore(s,v.nextSibling):(o=l.nodeType===9?l.head:l,o.insertBefore(s,o.firstChild))}function tg(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.title==null&&(s.title=o.title)}function ng(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.integrity==null&&(s.integrity=o.integrity)}var jd=null;function IE(s,o,l){if(jd===null){var c=new Map,y=jd=new Map;y.set(l,c)}else y=jd,c=y.get(l),c||(c=new Map,y.set(l,c));if(c.has(s))return c;for(c.set(s,null),l=l.getElementsByTagName(s),y=0;y<l.length;y++){var v=l[y];if(!(v[$i]||v[Vt]||s==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var A=v.getAttribute(o)||"";A=s+A;var b=c.get(A);b?b.push(v):c.set(A,[v])}}return c}function bE(s,o,l){s=s.ownerDocument||s,s.head.insertBefore(l,o==="title"?s.querySelector("head > title"):null)}function oM(s,o,l){if(l===1||o.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return s=o.disabled,typeof o.precedence=="string"&&s==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function RE(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function aM(s,o,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var y=Va(c.href),v=o.querySelector(wu(y));if(v){o=v._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(s.count++,s=Zd.bind(s),o.then(s,s)),l.state.loading|=4,l.instance=v,Ut(v);return}v=o.ownerDocument||o,c=wE(c),(y=ci.get(y))&&tg(c,y),v=v.createElement("link"),Ut(v);var A=v;A._p=new Promise(function(b,O){A.onload=b,A.onerror=O}),cn(v,"link",c),l.instance=v}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(l,o),(o=l.state.preload)&&(l.state.loading&3)===0&&(s.count++,l=Zd.bind(s),o.addEventListener("load",l),o.addEventListener("error",l))}}var ig=0;function lM(s,o){return s.stylesheets&&s.count===0&&tf(s,s.stylesheets),0<s.count||0<s.imgCount?function(l){var c=setTimeout(function(){if(s.stylesheets&&tf(s,s.stylesheets),s.unsuspend){var v=s.unsuspend;s.unsuspend=null,v()}},6e4+o);0<s.imgBytes&&ig===0&&(ig=62500*G1());var y=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&tf(s,s.stylesheets),s.unsuspend)){var v=s.unsuspend;s.unsuspend=null,v()}},(s.imgBytes>ig?50:800)+o);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function Zd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)tf(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var ef=null;function tf(s,o){s.stylesheets=null,s.unsuspend!==null&&(s.count++,ef=new Map,o.forEach(uM,s),ef=null,Zd.call(s))}function uM(s,o){if(!(o.state.loading&4)){var l=ef.get(s);if(l)var c=l.get(null);else{l=new Map,ef.set(s,l);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<y.length;v++){var A=y[v];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(l.set(A.dataset.precedence,A),c=A)}c&&l.set(null,c)}y=o.instance,A=y.getAttribute("data-precedence"),v=l.get(A)||c,v===c&&l.set(null,y),l.set(A,y),this.count++,c=Zd.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),v?v.parentNode.insertBefore(y,v.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),o.state.loading|=4}}var Iu={$$typeof:z,Provider:null,Consumer:null,_currentValue:fe,_currentValue2:fe,_threadCount:0};function cM(s,o,l,c,y,v,A,b,O){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Hi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hi(0),this.hiddenUpdates=Hi(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=v,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function xE(s,o,l,c,y,v,A,b,O,Y,ne,re){return s=new cM(s,o,l,A,O,Y,ne,re,b),o=1,v===!0&&(o|=24),v=Gn(3,null,null,o),s.current=v,v.stateNode=s,o=Up(),o.refCount++,s.pooledCache=o,o.refCount++,v.memoizedState={element:c,isDehydrated:l,cache:o},Bp(v),s}function NE(s){return s?(s=ha,s):ha}function ME(s,o,l,c,y,v){y=NE(y),c.context===null?c.context=y:c.pendingContext=y,c=pr(o),c.payload={element:l},v=v===void 0?null:v,v!==null&&(c.callback=v),l=mr(s,c,o),l!==null&&(Pn(l,s,o),su(l,s,o))}function DE(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<o?l:o}}function sg(s,o){DE(s,o),(s=s.alternate)&&DE(s,o)}function PE(s){if(s.tag===13||s.tag===31){var o=mo(s,67108864);o!==null&&Pn(o,s,67108864),sg(s,67108864)}}function kE(s){if(s.tag===13||s.tag===31){var o=Kn();o=no(o);var l=mo(s,o);l!==null&&Pn(l,s,o),sg(s,o)}}var nf=!0;function dM(s,o,l,c){var y=Z.T;Z.T=null;var v=ce.p;try{ce.p=2,rg(s,o,l,c)}finally{ce.p=v,Z.T=y}}function fM(s,o,l,c){var y=Z.T;Z.T=null;var v=ce.p;try{ce.p=8,rg(s,o,l,c)}finally{ce.p=v,Z.T=y}}function rg(s,o,l,c){if(nf){var y=og(c);if(y===null)$m(s,o,c,sf,l),UE(s,c);else if(pM(y,s,o,l,c))c.stopPropagation();else if(UE(s,c),o&4&&-1<hM.indexOf(s)){for(;y!==null;){var v=Zn(y);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var A=qi(v.pendingLanes);if(A!==0){var b=v;for(b.pendingLanes|=2,b.entangledLanes|=2;A;){var O=1<<31-Rt(A);b.entanglements[1]|=O,A&=~O}os(v),(rt&6)===0&&(Fd=Sn()+500,Tu(0))}}break;case 31:case 13:b=mo(v,2),b!==null&&Pn(b,v,2),qd(),sg(v,2)}if(v=og(c),v===null&&$m(s,o,c,sf,l),v===y)break;y=v}y!==null&&c.stopPropagation()}else $m(s,o,c,null,l)}}function og(s){return s=ei(s),ag(s)}var sf=null;function ag(s){if(sf=null,s=Ji(s),s!==null){var o=a(s);if(o===null)s=null;else{var l=o.tag;if(l===13){if(s=u(o),s!==null)return s;s=null}else if(l===31){if(s=d(o),s!==null)return s;s=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null)}}return sf=s,null}function VE(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(jr()){case xl:return 2;case Nl:return 8;case Zs:case hp:return 32;case Vc:return 268435456;default:return 32}default:return 32}}var lg=!1,Ir=null,br=null,Rr=null,bu=new Map,Ru=new Map,xr=[],hM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function UE(s,o){switch(s){case"focusin":case"focusout":Ir=null;break;case"dragenter":case"dragleave":br=null;break;case"mouseover":case"mouseout":Rr=null;break;case"pointerover":case"pointerout":bu.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ru.delete(o.pointerId)}}function xu(s,o,l,c,y,v){return s===null||s.nativeEvent!==v?(s={blockedOn:o,domEventName:l,eventSystemFlags:c,nativeEvent:v,targetContainers:[y]},o!==null&&(o=Zn(o),o!==null&&PE(o)),s):(s.eventSystemFlags|=c,o=s.targetContainers,y!==null&&o.indexOf(y)===-1&&o.push(y),s)}function pM(s,o,l,c,y){switch(o){case"focusin":return Ir=xu(Ir,s,o,l,c,y),!0;case"dragenter":return br=xu(br,s,o,l,c,y),!0;case"mouseover":return Rr=xu(Rr,s,o,l,c,y),!0;case"pointerover":var v=y.pointerId;return bu.set(v,xu(bu.get(v)||null,s,o,l,c,y)),!0;case"gotpointercapture":return v=y.pointerId,Ru.set(v,xu(Ru.get(v)||null,s,o,l,c,y)),!0}return!1}function LE(s){var o=Ji(s.target);if(o!==null){var l=a(o);if(l!==null){if(o=l.tag,o===13){if(o=u(l),o!==null){s.blockedOn=o,_i(s.priority,function(){kE(l)});return}}else if(o===31){if(o=d(l),o!==null){s.blockedOn=o,_i(s.priority,function(){kE(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function rf(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var l=og(s.nativeEvent);if(l===null){l=s.nativeEvent;var c=new l.constructor(l.type,l);Gl=c,l.target.dispatchEvent(c),Gl=null}else return o=Zn(l),o!==null&&PE(o),s.blockedOn=l,!1;o.shift()}return!0}function OE(s,o,l){rf(s)&&l.delete(o)}function mM(){lg=!1,Ir!==null&&rf(Ir)&&(Ir=null),br!==null&&rf(br)&&(br=null),Rr!==null&&rf(Rr)&&(Rr=null),bu.forEach(OE),Ru.forEach(OE)}function of(s,o){s.blockedOn===o&&(s.blockedOn=null,lg||(lg=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,mM)))}var af=null;function FE(s){af!==s&&(af=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){af===s&&(af=null);for(var o=0;o<s.length;o+=3){var l=s[o],c=s[o+1],y=s[o+2];if(typeof c!="function"){if(ag(c||l)===null)continue;break}var v=Zn(l);v!==null&&(s.splice(o,3),o-=3,om(v,{pending:!0,data:y,method:l.method,action:c},c,y))}}))}function La(s){function o(O){return of(O,s)}Ir!==null&&of(Ir,s),br!==null&&of(br,s),Rr!==null&&of(Rr,s),bu.forEach(o),Ru.forEach(o);for(var l=0;l<xr.length;l++){var c=xr[l];c.blockedOn===s&&(c.blockedOn=null)}for(;0<xr.length&&(l=xr[0],l.blockedOn===null);)LE(l),l.blockedOn===null&&xr.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var y=l[c],v=l[c+1],A=y[Xt]||null;if(typeof v=="function")A||FE(l);else if(A){var b=null;if(v&&v.hasAttribute("formAction")){if(y=v,A=v[Xt]||null)b=A.formAction;else if(ag(y)!==null)continue}else b=A.action;typeof b=="function"?l[c+1]=b:(l.splice(c,3),c-=3),FE(l)}}}function BE(){function s(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(A){return y=A})},focusReset:"manual",scroll:"manual"})}function o(){y!==null&&(y(),y=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),y!==null&&(y(),y=null)}}}function ug(s){this._internalRoot=s}lf.prototype.render=ug.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(i(409));var l=o.current,c=Kn();ME(l,c,s,o,null,null)},lf.prototype.unmount=ug.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;ME(s.current,2,null,s,null,null),qd(),o[zi]=null}};function lf(s){this._internalRoot=s}lf.prototype.unstable_scheduleHydration=function(s){if(s){var o=qc();s={blockedOn:null,target:s,priority:o};for(var l=0;l<xr.length&&o!==0&&o<xr[l].priority;l++);xr.splice(l,0,s),l===0&&LE(s)}};var qE=e.version;if(qE!=="19.2.4")throw Error(i(527,qE,"19.2.4"));ce.findDOMNode=function(s){var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=h(o),s=s!==null?_(s):null,s=s===null?null:s.stateNode,s};var gM={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uf.isDisabled&&uf.supportsFiber)try{gi=uf.inject(gM),rn=uf}catch{}}return Mu.createRoot=function(s,o){if(!r(s))throw Error(i(299));var l=!1,c="",y=Y0,v=W0,A=Q0;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(c=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError)),o=xE(s,1,!1,null,null,l,c,null,y,v,A,BE),s[zi]=o.current,zm(s),new ug(o)},Mu.hydrateRoot=function(s,o,l){if(!r(s))throw Error(i(299));var c=!1,y="",v=Y0,A=W0,b=Q0,O=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(v=l.onUncaughtError),l.onCaughtError!==void 0&&(A=l.onCaughtError),l.onRecoverableError!==void 0&&(b=l.onRecoverableError),l.formState!==void 0&&(O=l.formState)),o=xE(s,1,!0,o,l??null,c,y,O,v,A,b,BE),o.context=NE(null),l=o.current,c=Kn(),c=no(c),y=pr(c),y.callback=null,mr(l,y,c),l=c,o.current.lanes=l,eo(o,l),os(o),s[zi]=o.current,zm(s),new lf(o)},Mu.version="19.2.4",Mu}var XE;function bM(){if(XE)return fg.exports;XE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),fg.exports=IM(),fg.exports}var RM=bM();const xM=Jy(RM);var St=(n=>(n.DASHBOARD="DASHBOARD",n.DIAGNOSTIC="DIAGNOSTIC",n.ADVISOR="ADVISOR",n.RAJIV_WISDOM="RAJIV_WISDOM",n.HISTORY="HISTORY",n.PROFILE="PROFILE",n.LIVE_VOICE="LIVE_VOICE",n))(St||{}),Un=(n=>(n.GEMINI="GEMINI",n.OPENAI="OPENAI",n))(Un||{});const gs={hi:"Hindi - ",mr:"Marathi - ",pa:"Punjabi - ",gu:"Gujarati - ",ta:"Tamil - ",te:"Telugu - ",kn:"Kannada - ",bn:"Bengali - ",ml:"Malayalam - ",or:"Odia - ",en:"English"},NM=({currentView:n,setView:e,userProfile:t,children:i})=>{const r=[{id:St.DASHBOARD,label:"Dashboard",icon:""},{id:St.DIAGNOSTIC,label:"AI Diagnostic",icon:""},{id:St.ADVISOR,label:"Smart Advisor",icon:""},{id:St.LIVE_VOICE,label:"Kisan Mitra AI",icon:""},{id:St.HISTORY,label:"My History",icon:""},{id:St.RAJIV_WISDOM,label:"Natural Wisdom",icon:""}];return I.jsxs("div",{className:"min-h-screen flex flex-col md:flex-row bg-stone-50",children:[I.jsxs("header",{className:"md:hidden bg-green-700 text-white p-4 flex justify-between items-center sticky top-0 z-50 shadow-md",children:[I.jsxs("h1",{className:"font-black text-xl tracking-tight",children:["Kisan ",I.jsx("span",{className:"text-lime-400",children:"Mitra"})]}),I.jsxs("div",{className:"flex items-center gap-3",children:[t&&I.jsx("span",{className:"text-[10px] font-black opacity-80 uppercase tracking-widest",children:t.name.split(" ")[0]}),I.jsx("button",{onClick:()=>e(St.PROFILE),className:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center font-bold",children:""})]})]}),I.jsxs("nav",{className:"w-full md:w-72 bg-green-950 text-white flex-shrink-0 flex md:flex-col sticky top-0 h-auto md:h-screen overflow-x-auto md:overflow-y-auto z-40 scrollbar-hide border-r border-green-900 shadow-2xl",children:[I.jsxs("div",{className:"hidden md:flex p-8 border-b border-green-900 items-center justify-between",children:[I.jsxs("h1",{className:"text-2xl font-black tracking-tighter",children:["Kisan ",I.jsx("span",{className:"text-lime-400",children:"Mitra AI"})]}),I.jsx("div",{className:"w-3 h-3 rounded-full bg-lime-400 shadow-[0_0_15px_rgba(163,230,53,0.5)]"})]}),I.jsx("div",{className:"flex flex-row md:flex-col p-3 md:p-6 gap-2 w-full",children:r.map(a=>I.jsxs("button",{onClick:()=>e(a.id),className:`flex items-center gap-4 px-5 py-4 rounded-2xl transition-all whitespace-nowrap group ${n===a.id?"bg-lime-500 text-green-950 font-black shadow-xl ring-4 ring-lime-500/20":"hover:bg-green-900/50 text-stone-300"}`,children:[I.jsx("span",{className:"text-2xl group-hover:scale-110 transition-transform",children:a.icon}),I.jsx("span",{className:"text-sm font-bold uppercase tracking-widest",children:a.label})]},a.id))}),I.jsxs("div",{className:"mt-auto p-6 hidden md:block border-t border-green-900",children:[t&&I.jsxs("button",{onClick:()=>e(St.PROFILE),className:"w-full flex items-center gap-4 p-4 bg-green-900/40 rounded-3xl hover:bg-green-900 transition-all text-left border border-white/5 mb-4",children:[I.jsx("div",{className:"w-12 h-12 bg-lime-400 rounded-2xl flex items-center justify-center text-2xl text-green-950 font-black shadow-inner",children:t.name.charAt(0)}),I.jsxs("div",{className:"overflow-hidden",children:[I.jsx("p",{className:"font-black text-sm truncate",children:t.name}),I.jsxs("p",{className:"text-[10px] text-lime-400 font-bold uppercase tracking-widest opacity-70",children:["Pro Account  ",t.farmSize," Ac"]})]})]}),I.jsxs("div",{className:"text-center",children:[I.jsx("p",{className:"text-[10px] font-black text-green-600 uppercase tracking-[0.3em] mb-1",children:"Developed By"}),I.jsx("p",{className:"text-sm font-black text-lime-400",children:"Onkar Mahamuni"}),I.jsx("p",{className:"text-[8px] text-white/30 mt-2 uppercase tracking-widest",children:" 2025 All Rights Reserved"})]})]})]}),I.jsxs("main",{className:"flex-1 p-4 md:p-10 overflow-y-auto flex flex-col",children:[I.jsx("div",{className:"max-w-6xl mx-auto flex-1 w-full",children:i}),I.jsx("footer",{className:"mt-12 py-6 border-t border-stone-200 text-center",children:I.jsxs("p",{className:"text-xs font-bold text-stone-400 uppercase tracking-widest",children:["Crafted with Precision by ",I.jsx("span",{className:"text-green-700",children:"Onkar Mahamuni"})]})})]})]})};var Du={exports:{}},gg={},yg,jE;function MM(){if(jE)return yg;jE=1;function n(e,t){typeof t=="boolean"&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}return yg=n,n.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},n.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},n.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=new Date().getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var i=this._timeouts.shift();if(i===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),i=this._cachedTimeouts.slice(-1);else return!1;var r=this;return this._timer=setTimeout(function(){r._attempts++,r._operationTimeoutCb&&(r._timeout=setTimeout(function(){r._operationTimeoutCb(r._attempts)},r._operationTimeout),r._options.unref&&r._timeout.unref()),r._fn(r._attempts)},i),this._options.unref&&this._timer.unref(),!0},n.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var i=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){i._operationTimeoutCb()},i._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},n.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},n.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},n.prototype.start=n.prototype.try,n.prototype.errors=function(){return this._errors},n.prototype.attempts=function(){return this._attempts},n.prototype.mainError=function(){if(this._errors.length===0)return null;for(var e={},t=null,i=0,r=0;r<this._errors.length;r++){var a=this._errors[r],u=a.message,d=(e[u]||0)+1;e[u]=d,d>=i&&(t=a,i=d)}return t},yg}var ZE;function DM(){return ZE||(ZE=1,(function(n){var e=MM();n.operation=function(t){var i=n.timeouts(t);return new e(i,{forever:t&&(t.forever||t.retries===1/0),unref:t&&t.unref,maxRetryTime:t&&t.maxRetryTime})},n.timeouts=function(t){if(t instanceof Array)return[].concat(t);var i={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var r in t)i[r]=t[r];if(i.minTimeout>i.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var a=[],u=0;u<i.retries;u++)a.push(this.createTimeout(u,i));return t&&t.forever&&!a.length&&a.push(this.createTimeout(u,i)),a.sort(function(d,p){return d-p}),a},n.createTimeout=function(t,i){var r=i.randomize?Math.random()+1:1,a=Math.round(r*Math.max(i.minTimeout,1)*Math.pow(i.factor,t));return a=Math.min(a,i.maxTimeout),a},n.wrap=function(t,i,r){if(i instanceof Array&&(r=i,i=null),!r){r=[];for(var a in t)typeof t[a]=="function"&&r.push(a)}for(var u=0;u<r.length;u++){var d=r[u],p=t[d];t[d]=(function(_){var T=n.operation(i),E=Array.prototype.slice.call(arguments,1),C=E.pop();E.push(function(M){T.retry(M)||(M&&(arguments[0]=T.mainError()),C.apply(this,arguments))}),T.attempt(function(){_.apply(t,E)})}).bind(t,p),t[d].options=i}}})(gg)),gg}var _g,eS;function PM(){return eS||(eS=1,_g=DM()),_g}var tS;function kM(){if(tS)return Du.exports;tS=1;const n=PM(),e=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class t extends Error{constructor(d){super(),d instanceof Error?(this.originalError=d,{message:d}=d):(this.originalError=new Error(d),this.originalError.stack=this.stack),this.name="AbortError",this.message=d}}const i=(u,d,p)=>{const h=p.retries-(d-1);return u.attemptNumber=d,u.retriesLeft=h,u},r=u=>e.includes(u),a=(u,d)=>new Promise((p,h)=>{d={onFailedAttempt:()=>{},retries:10,...d};const _=n.operation(d);_.attempt(async T=>{try{p(await u(T))}catch(E){if(!(E instanceof Error)){h(new TypeError(`Non-error was thrown: "${E}". You should only throw errors.`));return}if(E instanceof t)_.stop(),h(E.originalError);else if(E instanceof TypeError&&!r(E.message))_.stop(),h(E);else{i(E,T,d);try{await d.onFailedAttempt(E)}catch(C){h(C);return}_.retry(E)||h(_.mainError())}}})});return Du.exports=a,Du.exports.default=a,Du.exports.AbortError=t,Du.exports}var UC=kM();const VM=Jy(UC);var UM={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let LM,OM;function FM(){return{geminiUrl:LM,vertexUrl:OM}}function BM(n,e,t,i){var r,a;if(!(n!=null&&n.baseUrl)){const u=FM();return e?(r=u.vertexUrl)!==null&&r!==void 0?r:t:(a=u.geminiUrl)!==null&&a!==void 0?a:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ws{}function pe(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const a=e[r];return a!=null?String(a):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function m(n,e,t){for(let a=0;a<e.length-1;a++){const u=e[a];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[d])){const p=n[d];if(Array.isArray(t))for(let h=0;h<p.length;h++){const _=p[h];m(_,e.slice(a+1),t[h])}else for(const h of p)m(h,e.slice(a+1),t)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in n||(n[d]=[{}]);const p=n[d];m(p[0],e.slice(a+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const i=e[e.length-1],r=n[i];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return t;const r=e[i];if(r.endsWith("[]")){const a=r.slice(0,-2);if(a in n){const u=n[a];return Array.isArray(u)?u.map(d=>f(d,e.slice(i+1),t)):t}else return t}else n=n[r]}return n}catch(i){if(i instanceof TypeError)return t;throw i}}function qM(n,e){for(const[t,i]of Object.entries(e)){const r=t.split("."),a=i.split("."),u=new Set;let d=-1;for(let p=0;p<r.length;p++)if(r[p]==="*"){d=p;break}if(d!==-1&&a.length>d)for(let p=d;p<a.length;p++){const h=a[p];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&u.add(h)}$g(n,r,a,0,u)}}function $g(n,e,t,i,r){if(i>=e.length||typeof n!="object"||n===null)return;const a=e[i];if(a.endsWith("[]")){const u=a.slice(0,-2),d=n;if(u in d&&Array.isArray(d[u]))for(const p of d[u])$g(p,e,t,i+1,r)}else if(a==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,d=Object.keys(u).filter(h=>!h.startsWith("_")&&!r.has(h)),p={};for(const h of d)p[h]=u[h];for(const[h,_]of Object.entries(p)){const T=[];for(const E of t.slice(i))E==="*"?T.push(h):T.push(E);m(u,T,_)}for(const h of d)delete u[h]}}else{const u=n;a in u&&$g(u[a],e,t,i+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yy(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GM(n){const e={},t=f(n,["operationName"]);t!=null&&m(e,["operationName"],t);const i=f(n,["resourceName"]);return i!=null&&m(e,["_url","resourceName"],i),e}function HM(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const i=f(n,["metadata"]);i!=null&&m(e,["metadata"],i);const r=f(n,["done"]);r!=null&&m(e,["done"],r);const a=f(n,["error"]);a!=null&&m(e,["error"],a);const u=f(n,["response","generateVideoResponse"]);return u!=null&&m(e,["response"],$M(u)),e}function zM(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const i=f(n,["metadata"]);i!=null&&m(e,["metadata"],i);const r=f(n,["done"]);r!=null&&m(e,["done"],r);const a=f(n,["error"]);a!=null&&m(e,["error"],a);const u=f(n,["response"]);return u!=null&&m(e,["response"],JM(u)),e}function $M(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>KM(u))),m(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&m(e,["raiMediaFilteredCount"],i);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&m(e,["raiMediaFilteredReasons"],r),e}function JM(n){const e={},t=f(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>YM(u))),m(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&m(e,["raiMediaFilteredCount"],i);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&m(e,["raiMediaFilteredReasons"],r),e}function KM(n){const e={},t=f(n,["video"]);return t!=null&&m(e,["video"],eD(t)),e}function YM(n){const e={},t=f(n,["_self"]);return t!=null&&m(e,["video"],tD(t)),e}function WM(n){const e={},t=f(n,["operationName"]);return t!=null&&m(e,["_url","operationName"],t),e}function QM(n){const e={},t=f(n,["operationName"]);return t!=null&&m(e,["_url","operationName"],t),e}function XM(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const i=f(n,["metadata"]);i!=null&&m(e,["metadata"],i);const r=f(n,["done"]);r!=null&&m(e,["done"],r);const a=f(n,["error"]);a!=null&&m(e,["error"],a);const u=f(n,["response"]);return u!=null&&m(e,["response"],jM(u)),e}function jM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&m(e,["parent"],i);const r=f(n,["documentName"]);return r!=null&&m(e,["documentName"],r),e}function LC(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const i=f(n,["metadata"]);i!=null&&m(e,["metadata"],i);const r=f(n,["done"]);r!=null&&m(e,["done"],r);const a=f(n,["error"]);a!=null&&m(e,["error"],a);const u=f(n,["response"]);return u!=null&&m(e,["response"],ZM(u)),e}function ZM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&m(e,["parent"],i);const r=f(n,["documentName"]);return r!=null&&m(e,["documentName"],r),e}function eD(n){const e={},t=f(n,["uri"]);t!=null&&m(e,["uri"],t);const i=f(n,["encodedVideo"]);i!=null&&m(e,["videoBytes"],Yy(i));const r=f(n,["encoding"]);return r!=null&&m(e,["mimeType"],r),e}function tD(n){const e={},t=f(n,["gcsUri"]);t!=null&&m(e,["uri"],t);const i=f(n,["bytesBase64Encoded"]);i!=null&&m(e,["videoBytes"],Yy(i));const r=f(n,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var nS;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(nS||(nS={}));var iS;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(iS||(iS={}));var sS;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(sS||(sS={}));var Et;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Et||(Et={}));var rS;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(rS||(rS={}));var oS;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(oS||(oS={}));var aS;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(aS||(aS={}));var lS;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(lS||(lS={}));var uS;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(uS||(uS={}));var cS;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(cS||(cS={}));var dS;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(dS||(dS={}));var fS;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(fS||(fS={}));var hS;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(hS||(hS={}));var pS;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(pS||(pS={}));var mS;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(mS||(mS={}));var gS;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(gS||(gS={}));var yS;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(yS||(yS={}));var _S;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(_S||(_S={}));var vS;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(vS||(vS={}));var TS;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(TS||(TS={}));var ES;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(ES||(ES={}));var Wf;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Wf||(Wf={}));var SS;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(SS||(SS={}));var AS;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(AS||(AS={}));var wS;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(wS||(wS={}));var Jg;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Jg||(Jg={}));var CS;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(CS||(CS={}));var IS;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(IS||(IS={}));var Kg;(function(n){n.COLLECTION="COLLECTION"})(Kg||(Kg={}));var bS;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(bS||(bS={}));var RS;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(RS||(RS={}));var Qf;(function(n){n.PREDICT="PREDICT",n.EMBED_CONTENT="EMBED_CONTENT"})(Qf||(Qf={}));var xS;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(xS||(xS={}));var NS;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(NS||(NS={}));var MS;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(MS||(MS={}));var DS;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(DS||(DS={}));var PS;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(PS||(PS={}));var kS;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(kS||(kS={}));var VS;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(VS||(VS={}));var US;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(US||(US={}));var LS;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(LS||(LS={}));var OS;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(OS||(OS={}));var FS;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(FS||(FS={}));var BS;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING",n.DISTILLATION="DISTILLATION"})(BS||(BS={}));var qS;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(qS||(qS={}));var GS;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(GS||(GS={}));var HS;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED",n.REGISTERED="REGISTERED"})(HS||(HS={}));var zS;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(zS||(zS={}));var $S;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})($S||($S={}));var JS;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(JS||(JS={}));var KS;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.ACTIVITY_START="ACTIVITY_START",n.ACTIVITY_END="ACTIVITY_END"})(KS||(KS={}));var YS;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(YS||(YS={}));var WS;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(WS||(WS={}));var QS;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(QS||(QS={}));var XS;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(XS||(XS={}));var jS;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(jS||(jS={}));var ZS;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(ZS||(ZS={}));var Wa;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Wa||(Wa={}));class Yg{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Pu{get text(){var e,t,i,r,a,u,d,p;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",_=!1;const T=[];for(const E of(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[C,M]of Object.entries(E))C!=="text"&&C!=="thought"&&C!=="thoughtSignature"&&(M!==null||M!==void 0)&&T.push(C);if(typeof E.text=="string"){if(typeof E.thought=="boolean"&&E.thought)continue;_=!0,h+=E.text}}return T.length>0&&console.warn(`there are non-text parts ${T} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),_?h:void 0}get data(){var e,t,i,r,a,u,d,p;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const _=[];for(const T of(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[E,C]of Object.entries(T))E!=="inlineData"&&(C!==null||C!==void 0)&&_.push(E);T.inlineData&&typeof T.inlineData.data=="string"&&(h+=atob(T.inlineData.data))}return _.length>0&&console.warn(`there are non-data parts ${_} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,t,i,r,a,u,d,p;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(_=>_.functionCall).map(_=>_.functionCall).filter(_=>_!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,t,i,r,a,u,d,p,h;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const _=(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(T=>T.executableCode).map(T=>T.executableCode).filter(T=>T!==void 0);if((_==null?void 0:_.length)!==0)return(h=_==null?void 0:_[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,t,i,r,a,u,d,p,h;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const _=(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(T=>T.codeExecutionResult).map(T=>T.codeExecutionResult).filter(T=>T!==void 0);if((_==null?void 0:_.length)!==0)return(h=_==null?void 0:_[0])===null||h===void 0?void 0:h.output}}class eA{}class tA{}class nD{}class iD{}class sD{}class rD{}class nA{}class iA{}class sA{}class oD{}class Xf{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Xf;let r;const a=e;return t?r=zM(a):r=HM(a),Object.assign(i,r),i}}class rA{}class oA{}class aA{}class lA{}class aD{}class lD{}class uD{}class Wy{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Wy,a=XM(e);return Object.assign(i,a),i}}class cD{}class dD{}class fD{}class hD{}class uA{}class pD{get text(){var e,t,i;let r="",a=!1;const u=[];for(const d of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[p,h]of Object.entries(d))p!=="text"&&p!=="thought"&&h!==null&&u.push(p);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;a=!0,r+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?r:void 0}get data(){var e,t,i;let r="";const a=[];for(const u of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[d,p]of Object.entries(u))d!=="inlineData"&&p!==null&&a.push(d);u.inlineData&&typeof u.inlineData.data=="string"&&(r+=atob(u.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class mD{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Qy{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Qy,a=LC(e);return Object.assign(i,a),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function it(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function OC(n,e){const t=it(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function FC(n){return Array.isArray(n)?n.map(e=>jf(e)):[jf(n)]}function jf(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function BC(n){const e=jf(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function qC(n){const e=jf(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function cA(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function GC(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>cA(e)):[cA(n)]}function Wg(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function dA(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function fA(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function nn(n){if(n==null)throw new Error("ContentUnion is required");return Wg(n)?n:{role:"user",parts:GC(n)}}function Xy(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=nn(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=nn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>nn(t)):[nn(e)]}function Xn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(dA(n)||fA(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[nn(n)]}const e=[],t=[],i=Wg(n[0]);for(const r of n){const a=Wg(r);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(r);else{if(dA(r)||fA(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return i||e.push({role:"user",parts:GC(t)}),e}function gD(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(Et).includes(t[0].toUpperCase())?t[0].toUpperCase():Et.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(Et).includes(i.toUpperCase())?i.toUpperCase():Et.TYPE_UNSPECIFIED})}}function Xa(n){const e={},t=["items"],i=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=n.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,n=a[1]):a[1].type==="null"&&(e.nullable=!0,n=a[0])),n.type instanceof Array&&gD(n.type,e);for(const[u,d]of Object.entries(n))if(d!=null)if(u=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(Et).includes(d.toUpperCase())?d.toUpperCase():Et.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=Xa(d);else if(i.includes(u)){const p=[];for(const h of d){if(h.type=="null"){e.nullable=!0;continue}p.push(Xa(h))}e[u]=p}else if(r.includes(u)){const p={};for(const[h,_]of Object.entries(d))p[h]=Xa(_);e[u]=p}else{if(u==="additionalProperties")continue;e[u]=d}return e}function jy(n){return Xa(n)}function Zy(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function e_(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function hl(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Xa(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Xa(e.response));return n}function pl(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function yD(n,e,t,i=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function Qs(n,e){if(typeof e!="string")throw new Error("name must be a string");return yD(n,e,"cachedContents")}function HC(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Qr(n){return Yy(n)}function _D(n){return n!=null&&typeof n=="object"&&"name"in n}function vD(n){return n!=null&&typeof n=="object"&&"video"in n}function TD(n){return n!=null&&typeof n=="object"&&"uri"in n}function zC(n){var e;let t;if(_D(n)&&(t=n.name),!(TD(n)&&(t=n.uri,t===void 0))&&!(vD(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const r=t.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${t}`);t=r[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function $C(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function JC(n){for(const e of["models","tunedModels","publisherModels"])if(ED(n,e))return n[e];return[]}function ED(n,e){return n!==null&&typeof n=="object"&&e in n}function SD(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function AD(n,e={}){const t=[],i=new Set;for(const r of n){const a=r.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const u=SD(r,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function KC(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,r=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function wD(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function YC(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const r=t.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let a=!1;for(const u of r){if(typeof u!="object"||u===null)continue;const p=u.response;if(typeof p!="object"||p===null)continue;if(p.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function ml(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function WC(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function CD(n){return n.includes("gemini")&&n!=="gemini-embedding-001"||n.includes("maas")}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ID(n){const e={},t=f(n,["responsesFile"]);t!=null&&m(e,["fileName"],t);const i=f(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>oP(u))),m(e,["inlinedResponses"],a)}const r=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["inlinedEmbedContentResponses"],a)}return e}function bD(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&m(e,["format"],t);const i=f(n,["gcsDestination","outputUriPrefix"]);i!=null&&m(e,["gcsUri"],i);const r=f(n,["bigqueryDestination","outputUri"]);return r!=null&&m(e,["bigqueryUri"],r),e}function RD(n){const e={},t=f(n,["format"]);t!=null&&m(e,["predictionsFormat"],t);const i=f(n,["gcsUri"]);i!=null&&m(e,["gcsDestination","outputUriPrefix"],i);const r=f(n,["bigqueryUri"]);if(r!=null&&m(e,["bigqueryDestination","outputUri"],r),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Rf(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const i=f(n,["metadata","displayName"]);i!=null&&m(e,["displayName"],i);const r=f(n,["metadata","state"]);r!=null&&m(e,["state"],WC(r));const a=f(n,["metadata","createTime"]);a!=null&&m(e,["createTime"],a);const u=f(n,["metadata","endTime"]);u!=null&&m(e,["endTime"],u);const d=f(n,["metadata","updateTime"]);d!=null&&m(e,["updateTime"],d);const p=f(n,["metadata","model"]);p!=null&&m(e,["model"],p);const h=f(n,["metadata","output"]);return h!=null&&m(e,["dest"],ID(YC(h))),e}function Qg(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const i=f(n,["displayName"]);i!=null&&m(e,["displayName"],i);const r=f(n,["state"]);r!=null&&m(e,["state"],WC(r));const a=f(n,["error"]);a!=null&&m(e,["error"],a);const u=f(n,["createTime"]);u!=null&&m(e,["createTime"],u);const d=f(n,["startTime"]);d!=null&&m(e,["startTime"],d);const p=f(n,["endTime"]);p!=null&&m(e,["endTime"],p);const h=f(n,["updateTime"]);h!=null&&m(e,["updateTime"],h);const _=f(n,["model"]);_!=null&&m(e,["model"],_);const T=f(n,["inputConfig"]);T!=null&&m(e,["src"],xD(T));const E=f(n,["outputConfig"]);E!=null&&m(e,["dest"],bD(YC(E)));const C=f(n,["completionStats"]);return C!=null&&m(e,["completionStats"],C),e}function xD(n){const e={},t=f(n,["instancesFormat"]);t!=null&&m(e,["format"],t);const i=f(n,["gcsSource","uris"]);i!=null&&m(e,["gcsUri"],i);const r=f(n,["bigquerySource","inputUri"]);return r!=null&&m(e,["bigqueryUri"],r),e}function ND(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=f(e,["fileName"]);i!=null&&m(t,["fileName"],i);const r=f(e,["inlinedRequests"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>rP(n,u))),m(t,["requests","requests"],a)}return t}function MD(n){const e={},t=f(n,["format"]);t!=null&&m(e,["instancesFormat"],t);const i=f(n,["gcsUri"]);i!=null&&m(e,["gcsSource","uris"],i);const r=f(n,["bigqueryUri"]);if(r!=null&&m(e,["bigquerySource","inputUri"],r),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function DD(n){const e={},t=f(n,["data"]);if(t!=null&&m(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function PD(n,e){const t={},i=f(e,["name"]);return i!=null&&m(t,["_url","name"],ml(n,i)),t}function kD(n,e){const t={},i=f(e,["name"]);return i!=null&&m(t,["_url","name"],ml(n,i)),t}function VD(n){const e={},t=f(n,["content"]);t!=null&&m(e,["content"],t);const i=f(n,["citationMetadata"]);i!=null&&m(e,["citationMetadata"],UD(i));const r=f(n,["tokenCount"]);r!=null&&m(e,["tokenCount"],r);const a=f(n,["finishReason"]);a!=null&&m(e,["finishReason"],a);const u=f(n,["avgLogprobs"]);u!=null&&m(e,["avgLogprobs"],u);const d=f(n,["groundingMetadata"]);d!=null&&m(e,["groundingMetadata"],d);const p=f(n,["index"]);p!=null&&m(e,["index"],p);const h=f(n,["logprobsResult"]);h!=null&&m(e,["logprobsResult"],h);const _=f(n,["safetyRatings"]);if(_!=null){let E=_;Array.isArray(E)&&(E=E.map(C=>C)),m(e,["safetyRatings"],E)}const T=f(n,["urlContextMetadata"]);return T!=null&&m(e,["urlContextMetadata"],T),e}function UD(n){const e={},t=f(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>r)),m(e,["citations"],i)}return e}function QC(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>hP(a))),m(e,["parts"],r)}const i=f(n,["role"]);return i!=null&&m(e,["role"],i),e}function LD(n,e){const t={},i=f(n,["displayName"]);if(e!==void 0&&i!=null&&m(e,["batch","displayName"],i),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function OD(n,e){const t={},i=f(n,["displayName"]);e!==void 0&&i!=null&&m(e,["displayName"],i);const r=f(n,["dest"]);return e!==void 0&&r!=null&&m(e,["outputConfig"],RD(wD(r))),t}function hA(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],it(n,i));const r=f(e,["src"]);r!=null&&m(t,["batch","inputConfig"],ND(n,KC(n,r)));const a=f(e,["config"]);return a!=null&&LD(a,t),t}function FD(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["model"],it(n,i));const r=f(e,["src"]);r!=null&&m(t,["inputConfig"],MD(KC(n,r)));const a=f(e,["config"]);return a!=null&&OD(a,t),t}function BD(n,e){const t={},i=f(n,["displayName"]);return e!==void 0&&i!=null&&m(e,["batch","displayName"],i),t}function qD(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],it(n,i));const r=f(e,["src"]);r!=null&&m(t,["batch","inputConfig"],YD(n,r));const a=f(e,["config"]);return a!=null&&BD(a,t),t}function GD(n,e){const t={},i=f(e,["name"]);return i!=null&&m(t,["_url","name"],ml(n,i)),t}function HD(n,e){const t={},i=f(e,["name"]);return i!=null&&m(t,["_url","name"],ml(n,i)),t}function zD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["name"]);i!=null&&m(e,["name"],i);const r=f(n,["done"]);r!=null&&m(e,["done"],r);const a=f(n,["error"]);return a!=null&&m(e,["error"],a),e}function $D(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["name"]);i!=null&&m(e,["name"],i);const r=f(n,["done"]);r!=null&&m(e,["done"],r);const a=f(n,["error"]);return a!=null&&m(e,["error"],a),e}function JD(n,e){const t={},i=f(e,["contents"]);if(i!=null){let a=Xy(n,i);Array.isArray(a)&&(a=a.map(u=>u)),m(t,["requests[]","request","content"],a)}const r=f(e,["config"]);return r!=null&&(m(t,["_self"],KD(r,t)),qM(t,{"requests[].*":"requests[].request.*"})),t}function KD(n,e){const t={},i=f(n,["taskType"]);e!==void 0&&i!=null&&m(e,["requests[]","taskType"],i);const r=f(n,["title"]);e!==void 0&&r!=null&&m(e,["requests[]","title"],r);const a=f(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&m(e,["requests[]","outputDimensionality"],a),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function YD(n,e){const t={},i=f(e,["fileName"]);i!=null&&m(t,["file_name"],i);const r=f(e,["inlinedRequests"]);return r!=null&&m(t,["requests"],JD(n,r)),t}function WD(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function QD(n){const e={},t=f(n,["id"]);t!=null&&m(e,["id"],t);const i=f(n,["args"]);i!=null&&m(e,["args"],i);const r=f(n,["name"]);if(r!=null&&m(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function XD(n){const e={},t=f(n,["allowedFunctionNames"]);t!=null&&m(e,["allowedFunctionNames"],t);const i=f(n,["mode"]);if(i!=null&&m(e,["mode"],i),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function jD(n,e,t){const i={},r=f(e,["systemInstruction"]);t!==void 0&&r!=null&&m(t,["systemInstruction"],QC(nn(r)));const a=f(e,["temperature"]);a!=null&&m(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&m(i,["topP"],u);const d=f(e,["topK"]);d!=null&&m(i,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&m(i,["candidateCount"],p);const h=f(e,["maxOutputTokens"]);h!=null&&m(i,["maxOutputTokens"],h);const _=f(e,["stopSequences"]);_!=null&&m(i,["stopSequences"],_);const T=f(e,["responseLogprobs"]);T!=null&&m(i,["responseLogprobs"],T);const E=f(e,["logprobs"]);E!=null&&m(i,["logprobs"],E);const C=f(e,["presencePenalty"]);C!=null&&m(i,["presencePenalty"],C);const M=f(e,["frequencyPenalty"]);M!=null&&m(i,["frequencyPenalty"],M);const U=f(e,["seed"]);U!=null&&m(i,["seed"],U);const P=f(e,["responseMimeType"]);P!=null&&m(i,["responseMimeType"],P);const $=f(e,["responseSchema"]);$!=null&&m(i,["responseSchema"],jy($));const H=f(e,["responseJsonSchema"]);if(H!=null&&m(i,["responseJsonSchema"],H),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const z=f(e,["safetySettings"]);if(t!==void 0&&z!=null){let V=z;Array.isArray(V)&&(V=V.map(ke=>pP(ke))),m(t,["safetySettings"],V)}const X=f(e,["tools"]);if(t!==void 0&&X!=null){let V=pl(X);Array.isArray(V)&&(V=V.map(ke=>gP(hl(ke)))),m(t,["tools"],V)}const ue=f(e,["toolConfig"]);if(t!==void 0&&ue!=null&&m(t,["toolConfig"],mP(ue)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const W=f(e,["cachedContent"]);t!==void 0&&W!=null&&m(t,["cachedContent"],Qs(n,W));const N=f(e,["responseModalities"]);N!=null&&m(i,["responseModalities"],N);const D=f(e,["mediaResolution"]);D!=null&&m(i,["mediaResolution"],D);const x=f(e,["speechConfig"]);if(x!=null&&m(i,["speechConfig"],Zy(x)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=f(e,["thinkingConfig"]);L!=null&&m(i,["thinkingConfig"],L);const k=f(e,["imageConfig"]);k!=null&&m(i,["imageConfig"],sP(k));const q=f(e,["enableEnhancedCivicAnswers"]);if(q!=null&&m(i,["enableEnhancedCivicAnswers"],q),f(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function ZD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["candidates"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(h=>VD(h))),m(e,["candidates"],p)}const r=f(n,["modelVersion"]);r!=null&&m(e,["modelVersion"],r);const a=f(n,["promptFeedback"]);a!=null&&m(e,["promptFeedback"],a);const u=f(n,["responseId"]);u!=null&&m(e,["responseId"],u);const d=f(n,["usageMetadata"]);return d!=null&&m(e,["usageMetadata"],d),e}function eP(n,e){const t={},i=f(e,["name"]);return i!=null&&m(t,["_url","name"],ml(n,i)),t}function tP(n,e){const t={},i=f(e,["name"]);return i!=null&&m(t,["_url","name"],ml(n,i)),t}function nP(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function iP(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function sP(n){const e={},t=f(n,["aspectRatio"]);t!=null&&m(e,["aspectRatio"],t);const i=f(n,["imageSize"]);if(i!=null&&m(e,["imageSize"],i),f(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function rP(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["request","model"],it(n,i));const r=f(e,["contents"]);if(r!=null){let d=Xn(r);Array.isArray(d)&&(d=d.map(p=>QC(p))),m(t,["request","contents"],d)}const a=f(e,["metadata"]);a!=null&&m(t,["metadata"],a);const u=f(e,["config"]);return u!=null&&m(t,["request","generationConfig"],jD(n,u,f(t,["request"],{}))),t}function oP(n){const e={},t=f(n,["response"]);t!=null&&m(e,["response"],ZD(t));const i=f(n,["metadata"]);i!=null&&m(e,["metadata"],i);const r=f(n,["error"]);return r!=null&&m(e,["error"],r),e}function aP(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const r=f(n,["pageToken"]);if(e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function lP(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const r=f(n,["pageToken"]);e!==void 0&&r!=null&&m(e,["_query","pageToken"],r);const a=f(n,["filter"]);return e!==void 0&&a!=null&&m(e,["_query","filter"],a),t}function uP(n){const e={},t=f(n,["config"]);return t!=null&&aP(t,e),e}function cP(n){const e={},t=f(n,["config"]);return t!=null&&lP(t,e),e}function dP(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const r=f(n,["operations"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>Rf(u))),m(e,["batchJobs"],a)}return e}function fP(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const r=f(n,["batchPredictionJobs"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>Qg(u))),m(e,["batchJobs"],a)}return e}function hP(n){const e={},t=f(n,["mediaResolution"]);t!=null&&m(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const r=f(n,["executableCode"]);r!=null&&m(e,["executableCode"],r);const a=f(n,["fileData"]);a!=null&&m(e,["fileData"],WD(a));const u=f(n,["functionCall"]);u!=null&&m(e,["functionCall"],QD(u));const d=f(n,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const p=f(n,["inlineData"]);p!=null&&m(e,["inlineData"],DD(p));const h=f(n,["text"]);h!=null&&m(e,["text"],h);const _=f(n,["thought"]);_!=null&&m(e,["thought"],_);const T=f(n,["thoughtSignature"]);T!=null&&m(e,["thoughtSignature"],T);const E=f(n,["videoMetadata"]);return E!=null&&m(e,["videoMetadata"],E),e}function pP(n){const e={},t=f(n,["category"]);if(t!=null&&m(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=f(n,["threshold"]);return i!=null&&m(e,["threshold"],i),e}function mP(n){const e={},t=f(n,["retrievalConfig"]);t!=null&&m(e,["retrievalConfig"],t);const i=f(n,["functionCallingConfig"]);return i!=null&&m(e,["functionCallingConfig"],XD(i)),e}function gP(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&m(e,["computerUse"],t);const i=f(n,["fileSearch"]);i!=null&&m(e,["fileSearch"],i);const r=f(n,["codeExecution"]);if(r!=null&&m(e,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(n,["functionDeclarations"]);if(a!=null){let _=a;Array.isArray(_)&&(_=_.map(T=>T)),m(e,["functionDeclarations"],_)}const u=f(n,["googleMaps"]);u!=null&&m(e,["googleMaps"],nP(u));const d=f(n,["googleSearch"]);d!=null&&m(e,["googleSearch"],iP(d));const p=f(n,["googleSearchRetrieval"]);p!=null&&m(e,["googleSearchRetrieval"],p);const h=f(n,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var zs;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(zs||(zs={}));class zo{constructor(e,t,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,r)}init(e,t,i){var r,a;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!i||Object.keys(i).length===0?u={config:{}}:typeof i=="object"?u=Object.assign({},i):u=i,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(a=(r=u.config)===null||r===void 0?void 0:r.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let yP=class extends Ws{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new zo(zs.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=hA(this.apiClient,e),i=t._url,r=pe("{model}:batchGenerateContent",i),d=t.batch.inputConfig.requests,p=d.requests,h=[];for(const _ of p){const T=Object.assign({},_);if(T.systemInstruction){const E=T.systemInstruction;delete T.systemInstruction;const C=T.request;C.systemInstruction=E,T.request=C}h.push(T)}return d.requests=h,delete t.config,delete t._url,delete t._query,{path:r,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const i=t?Object.assign({},t):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){const a=this.getGcsUri(e),u=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${r}`;else if(u)i.dest=`${u}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var t,i,r,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=FD(this.apiClient,e);return d=pe("batchPredictionJobs",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>Qg(_))}else{const h=hA(this.apiClient,e);return d=pe("{model}:batchGenerateContent",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>Rf(_))}}async createEmbeddingsInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=qD(this.apiClient,e);return a=pe("{model}:asyncBatchEmbedContent",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>Rf(p))}}async get(e){var t,i,r,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=tP(this.apiClient,e);return d=pe("batchPredictionJobs/{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>Qg(_))}else{const h=eP(this.apiClient,e);return d=pe("batches/{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>Rf(_))}}async cancel(e){var t,i,r,a;let u="",d={};if(this.apiClient.isVertexAI()){const p=kD(this.apiClient,e);u=pe("batchPredictionJobs/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const p=PD(this.apiClient,e);u=pe("batches/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var t,i,r,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=cP(e);return d=pe("batchPredictionJobs",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=fP(_),E=new uA;return Object.assign(E,T),E})}else{const h=uP(e);return d=pe("batches",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=dP(_),E=new uA;return Object.assign(E,T),E})}}async delete(e){var t,i,r,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=HD(this.apiClient,e);return d=pe("batchPredictionJobs/{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>$D(_))}else{const h=GD(this.apiClient,e);return d=pe("batches/{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>zD(_))}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _P(n){const e={},t=f(n,["data"]);if(t!=null&&m(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function pA(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>qP(a))),m(e,["parts"],r)}const i=f(n,["role"]);return i!=null&&m(e,["role"],i),e}function vP(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const r=f(n,["expireTime"]);e!==void 0&&r!=null&&m(e,["expireTime"],r);const a=f(n,["displayName"]);e!==void 0&&a!=null&&m(e,["displayName"],a);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let _=Xn(u);Array.isArray(_)&&(_=_.map(T=>pA(T))),m(e,["contents"],_)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&m(e,["systemInstruction"],pA(nn(d)));const p=f(n,["tools"]);if(e!==void 0&&p!=null){let _=p;Array.isArray(_)&&(_=_.map(T=>HP(T))),m(e,["tools"],_)}const h=f(n,["toolConfig"]);if(e!==void 0&&h!=null&&m(e,["toolConfig"],GP(h)),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function TP(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const r=f(n,["expireTime"]);e!==void 0&&r!=null&&m(e,["expireTime"],r);const a=f(n,["displayName"]);e!==void 0&&a!=null&&m(e,["displayName"],a);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let T=Xn(u);Array.isArray(T)&&(T=T.map(E=>E)),m(e,["contents"],T)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&m(e,["systemInstruction"],nn(d));const p=f(n,["tools"]);if(e!==void 0&&p!=null){let T=p;Array.isArray(T)&&(T=T.map(E=>zP(E))),m(e,["tools"],T)}const h=f(n,["toolConfig"]);e!==void 0&&h!=null&&m(e,["toolConfig"],h);const _=f(n,["kmsKeyName"]);return e!==void 0&&_!=null&&m(e,["encryption_spec","kmsKeyName"],_),t}function EP(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["model"],OC(n,i));const r=f(e,["config"]);return r!=null&&vP(r,t),t}function SP(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["model"],OC(n,i));const r=f(e,["config"]);return r!=null&&TP(r,t),t}function AP(n,e){const t={},i=f(e,["name"]);return i!=null&&m(t,["_url","name"],Qs(n,i)),t}function wP(n,e){const t={},i=f(e,["name"]);return i!=null&&m(t,["_url","name"],Qs(n,i)),t}function CP(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function IP(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function bP(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function RP(n){const e={},t=f(n,["id"]);t!=null&&m(e,["id"],t);const i=f(n,["args"]);i!=null&&m(e,["args"],i);const r=f(n,["name"]);if(r!=null&&m(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function xP(n){const e={},t=f(n,["allowedFunctionNames"]);t!=null&&m(e,["allowedFunctionNames"],t);const i=f(n,["mode"]);if(i!=null&&m(e,["mode"],i),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function NP(n){const e={},t=f(n,["description"]);t!=null&&m(e,["description"],t);const i=f(n,["name"]);i!=null&&m(e,["name"],i);const r=f(n,["parameters"]);r!=null&&m(e,["parameters"],r);const a=f(n,["parametersJsonSchema"]);a!=null&&m(e,["parametersJsonSchema"],a);const u=f(n,["response"]);u!=null&&m(e,["response"],u);const d=f(n,["responseJsonSchema"]);if(d!=null&&m(e,["responseJsonSchema"],d),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function MP(n,e){const t={},i=f(e,["name"]);return i!=null&&m(t,["_url","name"],Qs(n,i)),t}function DP(n,e){const t={},i=f(e,["name"]);return i!=null&&m(t,["_url","name"],Qs(n,i)),t}function PP(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function kP(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function VP(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),t}function UP(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),t}function LP(n){const e={},t=f(n,["config"]);return t!=null&&VP(t,e),e}function OP(n){const e={},t=f(n,["config"]);return t!=null&&UP(t,e),e}function FP(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const r=f(n,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["cachedContents"],a)}return e}function BP(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const r=f(n,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["cachedContents"],a)}return e}function qP(n){const e={},t=f(n,["mediaResolution"]);t!=null&&m(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const r=f(n,["executableCode"]);r!=null&&m(e,["executableCode"],r);const a=f(n,["fileData"]);a!=null&&m(e,["fileData"],bP(a));const u=f(n,["functionCall"]);u!=null&&m(e,["functionCall"],RP(u));const d=f(n,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const p=f(n,["inlineData"]);p!=null&&m(e,["inlineData"],_P(p));const h=f(n,["text"]);h!=null&&m(e,["text"],h);const _=f(n,["thought"]);_!=null&&m(e,["thought"],_);const T=f(n,["thoughtSignature"]);T!=null&&m(e,["thoughtSignature"],T);const E=f(n,["videoMetadata"]);return E!=null&&m(e,["videoMetadata"],E),e}function GP(n){const e={},t=f(n,["retrievalConfig"]);t!=null&&m(e,["retrievalConfig"],t);const i=f(n,["functionCallingConfig"]);return i!=null&&m(e,["functionCallingConfig"],xP(i)),e}function HP(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&m(e,["computerUse"],t);const i=f(n,["fileSearch"]);i!=null&&m(e,["fileSearch"],i);const r=f(n,["codeExecution"]);if(r!=null&&m(e,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(n,["functionDeclarations"]);if(a!=null){let _=a;Array.isArray(_)&&(_=_.map(T=>T)),m(e,["functionDeclarations"],_)}const u=f(n,["googleMaps"]);u!=null&&m(e,["googleMaps"],PP(u));const d=f(n,["googleSearch"]);d!=null&&m(e,["googleSearch"],kP(d));const p=f(n,["googleSearchRetrieval"]);p!=null&&m(e,["googleSearchRetrieval"],p);const h=f(n,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function zP(n){const e={},t=f(n,["retrieval"]);t!=null&&m(e,["retrieval"],t);const i=f(n,["computerUse"]);if(i!=null&&m(e,["computerUse"],i),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=f(n,["codeExecution"]);r!=null&&m(e,["codeExecution"],r);const a=f(n,["enterpriseWebSearch"]);a!=null&&m(e,["enterpriseWebSearch"],a);const u=f(n,["functionDeclarations"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(E=>NP(E))),m(e,["functionDeclarations"],T)}const d=f(n,["googleMaps"]);d!=null&&m(e,["googleMaps"],d);const p=f(n,["googleSearch"]);p!=null&&m(e,["googleSearch"],p);const h=f(n,["googleSearchRetrieval"]);h!=null&&m(e,["googleSearchRetrieval"],h);const _=f(n,["urlContext"]);return _!=null&&m(e,["urlContext"],_),e}function $P(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const r=f(n,["expireTime"]);return e!==void 0&&r!=null&&m(e,["expireTime"],r),t}function JP(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const r=f(n,["expireTime"]);return e!==void 0&&r!=null&&m(e,["expireTime"],r),t}function KP(n,e){const t={},i=f(e,["name"]);i!=null&&m(t,["_url","name"],Qs(n,i));const r=f(e,["config"]);return r!=null&&$P(r,t),t}function YP(n,e){const t={},i=f(e,["name"]);i!=null&&m(t,["_url","name"],Qs(n,i));const r=f(e,["config"]);return r!=null&&JP(r,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class WP extends Ws{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new zo(zs.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,r,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=SP(this.apiClient,e);return d=pe("cachedContents",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=EP(this.apiClient,e);return d=pe("cachedContents",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async get(e){var t,i,r,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=DP(this.apiClient,e);return d=pe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=MP(this.apiClient,e);return d=pe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async delete(e){var t,i,r,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=wP(this.apiClient,e);return d=pe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=IP(_),E=new aA;return Object.assign(E,T),E})}else{const h=AP(this.apiClient,e);return d=pe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=CP(_),E=new aA;return Object.assign(E,T),E})}}async update(e){var t,i,r,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=YP(this.apiClient,e);return d=pe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=KP(this.apiClient,e);return d=pe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async listInternal(e){var t,i,r,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=OP(e);return d=pe("cachedContents",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=BP(_),E=new lA;return Object.assign(E,T),E})}else{const h=LP(e);return d=pe("cachedContents",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=FP(_),E=new lA;return Object.assign(E,T),E})}}}function Zf(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}function mA(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ve(n){return this instanceof Ve?(this.v=n,this):new Ve(n)}function Di(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,a=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),r[Symbol.asyncIterator]=function(){return this},r;function u(C){return function(M){return Promise.resolve(M).then(C,T)}}function d(C,M){i[C]&&(r[C]=function(U){return new Promise(function(P,$){a.push([C,U,P,$])>1||p(C,U)})},M&&(r[C]=M(r[C])))}function p(C,M){try{h(i[C](M))}catch(U){E(a[0][3],U)}}function h(C){C.value instanceof Ve?Promise.resolve(C.value.v).then(_,T):E(a[0][2],C)}function _(C){p("next",C)}function T(C){p("throw",C)}function E(C,M){C(M),a.shift(),a.length&&p(a[0][0],a[0][1])}}function Pi(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof mA=="function"?mA(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=n[a]&&function(u){return new Promise(function(d,p){u=n[a](u),r(d,p,u.done,u.value)})}}function r(a,u,d,p){Promise.resolve(p).then(function(h){a({value:h,done:d})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function QP(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:XC(t)}function XC(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function XP(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function gA(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const r=[];let a=!0;for(;i<t&&n[i].role==="model";)r.push(n[i]),a&&!XC(n[i])&&(a=!1),i++;a?e.push(...r):e.pop()}return e}class jP{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new ZP(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}let ZP=class{constructor(e,t,i,r={},a=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=r,this.history=a,this.sendPromise=Promise.resolve(),XP(a)}async sendMessage(e){var t;await this.sendPromise;const i=nn(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var a,u,d;const p=await r,h=(u=(a=p.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content,_=p.automaticFunctionCallingHistory,T=this.getHistory(!0).length;let E=[];_!=null&&(E=(d=_.slice(T))!==null&&d!==void 0?d:[]);const C=h?[h]:[];this.recordHistory(i,C,E)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const i=nn(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const a=await r;return this.processStreamResponse(a,i)}getHistory(e=!1){const t=e?gA(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return Di(this,arguments,function*(){var r,a,u,d,p,h;const _=[];try{for(var T=!0,E=Pi(e),C;C=yield Ve(E.next()),r=C.done,!r;T=!0){d=C.value,T=!1;const M=d;if(QP(M)){const U=(h=(p=M.candidates)===null||p===void 0?void 0:p[0])===null||h===void 0?void 0:h.content;U!==void 0&&_.push(U)}yield yield Ve(M)}}catch(M){a={error:M}}finally{try{!T&&!r&&(u=E.return)&&(yield Ve(u.call(E)))}finally{if(a)throw a.error}}this.recordHistory(t,_)})}recordHistory(e,t,i){let r=[];t.length>0&&t.every(a=>a.role!==void 0)?r=t:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...gA(i)):this.history.push(e),this.history.push(...r)}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ac extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,ac.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ek(n){const e={},t=f(n,["file"]);return t!=null&&m(e,["file"],t),e}function tk(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function nk(n){const e={},t=f(n,["name"]);return t!=null&&m(e,["_url","file"],zC(t)),e}function ik(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function sk(n){const e={},t=f(n,["name"]);return t!=null&&m(e,["_url","file"],zC(t)),e}function rk(n){const e={},t=f(n,["uris"]);return t!=null&&m(e,["uris"],t),e}function ok(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),t}function ak(n){const e={},t=f(n,["config"]);return t!=null&&ok(t,e),e}function lk(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const r=f(n,["files"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["files"],a)}return e}function uk(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["files"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),m(e,["files"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let ck=class extends Ws{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new zo(zs.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=ak(e);return a=pe("files",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),r.then(p=>{const h=lk(p),_=new cD;return Object.assign(_,h),_})}}async createInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=ek(e);return a=pe("upload/v1beta/files",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>{const h=tk(p),_=new dD;return Object.assign(_,h),_})}}async get(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=sk(e);return a=pe("files/{file}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>p)}}async delete(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=nk(e);return a=pe("files/{file}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),r.then(p=>{const h=ik(p),_=new fD;return Object.assign(_,h),_})}}async registerFilesInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=rk(e);return a=pe("files:register",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>{const h=uk(p),_=new hD;return Object.assign(_,h),_})}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xf(n){const e={},t=f(n,["data"]);if(t!=null&&m(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function dk(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>bk(a))),m(e,["parts"],r)}const i=f(n,["role"]);return i!=null&&m(e,["role"],i),e}function fk(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function hk(n){const e={},t=f(n,["id"]);t!=null&&m(e,["id"],t);const i=f(n,["args"]);i!=null&&m(e,["args"],i);const r=f(n,["name"]);if(r!=null&&m(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function pk(n){const e={},t=f(n,["description"]);t!=null&&m(e,["description"],t);const i=f(n,["name"]);i!=null&&m(e,["name"],i);const r=f(n,["parameters"]);r!=null&&m(e,["parameters"],r);const a=f(n,["parametersJsonSchema"]);a!=null&&m(e,["parametersJsonSchema"],a);const u=f(n,["response"]);u!=null&&m(e,["response"],u);const d=f(n,["responseJsonSchema"]);if(d!=null&&m(e,["responseJsonSchema"],d),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function mk(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&m(e,["modelConfig"],t);const i=f(n,["responseJsonSchema"]);i!=null&&m(e,["responseJsonSchema"],i);const r=f(n,["audioTimestamp"]);r!=null&&m(e,["audioTimestamp"],r);const a=f(n,["candidateCount"]);a!=null&&m(e,["candidateCount"],a);const u=f(n,["enableAffectiveDialog"]);u!=null&&m(e,["enableAffectiveDialog"],u);const d=f(n,["frequencyPenalty"]);d!=null&&m(e,["frequencyPenalty"],d);const p=f(n,["logprobs"]);p!=null&&m(e,["logprobs"],p);const h=f(n,["maxOutputTokens"]);h!=null&&m(e,["maxOutputTokens"],h);const _=f(n,["mediaResolution"]);_!=null&&m(e,["mediaResolution"],_);const T=f(n,["presencePenalty"]);T!=null&&m(e,["presencePenalty"],T);const E=f(n,["responseLogprobs"]);E!=null&&m(e,["responseLogprobs"],E);const C=f(n,["responseMimeType"]);C!=null&&m(e,["responseMimeType"],C);const M=f(n,["responseModalities"]);M!=null&&m(e,["responseModalities"],M);const U=f(n,["responseSchema"]);U!=null&&m(e,["responseSchema"],U);const P=f(n,["routingConfig"]);P!=null&&m(e,["routingConfig"],P);const $=f(n,["seed"]);$!=null&&m(e,["seed"],$);const H=f(n,["speechConfig"]);H!=null&&m(e,["speechConfig"],H);const z=f(n,["stopSequences"]);z!=null&&m(e,["stopSequences"],z);const X=f(n,["temperature"]);X!=null&&m(e,["temperature"],X);const ue=f(n,["thinkingConfig"]);ue!=null&&m(e,["thinkingConfig"],ue);const W=f(n,["topK"]);W!=null&&m(e,["topK"],W);const N=f(n,["topP"]);if(N!=null&&m(e,["topP"],N),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function gk(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function yk(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function _k(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig"],i);const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig","responseModalities"],r);const a=f(n,["temperature"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const h=f(n,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const _=f(n,["seed"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","seed"],_);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","speechConfig"],e_(T));const E=f(n,["thinkingConfig"]);e!==void 0&&E!=null&&m(e,["setup","generationConfig","thinkingConfig"],E);const C=f(n,["enableAffectiveDialog"]);e!==void 0&&C!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],C);const M=f(n,["systemInstruction"]);e!==void 0&&M!=null&&m(e,["setup","systemInstruction"],dk(nn(M)));const U=f(n,["tools"]);if(e!==void 0&&U!=null){let W=pl(U);Array.isArray(W)&&(W=W.map(N=>xk(hl(N)))),m(e,["setup","tools"],W)}const P=f(n,["sessionResumption"]);e!==void 0&&P!=null&&m(e,["setup","sessionResumption"],Rk(P));const $=f(n,["inputAudioTranscription"]);e!==void 0&&$!=null&&m(e,["setup","inputAudioTranscription"],$);const H=f(n,["outputAudioTranscription"]);e!==void 0&&H!=null&&m(e,["setup","outputAudioTranscription"],H);const z=f(n,["realtimeInputConfig"]);e!==void 0&&z!=null&&m(e,["setup","realtimeInputConfig"],z);const X=f(n,["contextWindowCompression"]);e!==void 0&&X!=null&&m(e,["setup","contextWindowCompression"],X);const ue=f(n,["proactivity"]);if(e!==void 0&&ue!=null&&m(e,["setup","proactivity"],ue),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function vk(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig"],mk(i));const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig","responseModalities"],r);const a=f(n,["temperature"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const h=f(n,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const _=f(n,["seed"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","seed"],_);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","speechConfig"],e_(T));const E=f(n,["thinkingConfig"]);e!==void 0&&E!=null&&m(e,["setup","generationConfig","thinkingConfig"],E);const C=f(n,["enableAffectiveDialog"]);e!==void 0&&C!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],C);const M=f(n,["systemInstruction"]);e!==void 0&&M!=null&&m(e,["setup","systemInstruction"],nn(M));const U=f(n,["tools"]);if(e!==void 0&&U!=null){let N=pl(U);Array.isArray(N)&&(N=N.map(D=>Nk(hl(D)))),m(e,["setup","tools"],N)}const P=f(n,["sessionResumption"]);e!==void 0&&P!=null&&m(e,["setup","sessionResumption"],P);const $=f(n,["inputAudioTranscription"]);e!==void 0&&$!=null&&m(e,["setup","inputAudioTranscription"],$);const H=f(n,["outputAudioTranscription"]);e!==void 0&&H!=null&&m(e,["setup","outputAudioTranscription"],H);const z=f(n,["realtimeInputConfig"]);e!==void 0&&z!=null&&m(e,["setup","realtimeInputConfig"],z);const X=f(n,["contextWindowCompression"]);e!==void 0&&X!=null&&m(e,["setup","contextWindowCompression"],X);const ue=f(n,["proactivity"]);e!==void 0&&ue!=null&&m(e,["setup","proactivity"],ue);const W=f(n,["explicitVadSignal"]);return e!==void 0&&W!=null&&m(e,["setup","explicitVadSignal"],W),t}function Tk(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["setup","model"],it(n,i));const r=f(e,["config"]);return r!=null&&m(t,["config"],_k(r,t)),t}function Ek(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["setup","model"],it(n,i));const r=f(e,["config"]);return r!=null&&m(t,["config"],vk(r,t)),t}function Sk(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&m(e,["musicGenerationConfig"],t),e}function Ak(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>r)),m(e,["weightedPrompts"],i)}return e}function wk(n){const e={},t=f(n,["media"]);if(t!=null){let h=FC(t);Array.isArray(h)&&(h=h.map(_=>xf(_))),m(e,["mediaChunks"],h)}const i=f(n,["audio"]);i!=null&&m(e,["audio"],xf(qC(i)));const r=f(n,["audioStreamEnd"]);r!=null&&m(e,["audioStreamEnd"],r);const a=f(n,["video"]);a!=null&&m(e,["video"],xf(BC(a)));const u=f(n,["text"]);u!=null&&m(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&m(e,["activityStart"],d);const p=f(n,["activityEnd"]);return p!=null&&m(e,["activityEnd"],p),e}function Ck(n){const e={},t=f(n,["media"]);if(t!=null){let h=FC(t);Array.isArray(h)&&(h=h.map(_=>_)),m(e,["mediaChunks"],h)}const i=f(n,["audio"]);i!=null&&m(e,["audio"],qC(i));const r=f(n,["audioStreamEnd"]);r!=null&&m(e,["audioStreamEnd"],r);const a=f(n,["video"]);a!=null&&m(e,["video"],BC(a));const u=f(n,["text"]);u!=null&&m(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&m(e,["activityStart"],d);const p=f(n,["activityEnd"]);return p!=null&&m(e,["activityEnd"],p),e}function Ik(n){const e={},t=f(n,["setupComplete"]);t!=null&&m(e,["setupComplete"],t);const i=f(n,["serverContent"]);i!=null&&m(e,["serverContent"],i);const r=f(n,["toolCall"]);r!=null&&m(e,["toolCall"],r);const a=f(n,["toolCallCancellation"]);a!=null&&m(e,["toolCallCancellation"],a);const u=f(n,["usageMetadata"]);u!=null&&m(e,["usageMetadata"],Mk(u));const d=f(n,["goAway"]);d!=null&&m(e,["goAway"],d);const p=f(n,["sessionResumptionUpdate"]);p!=null&&m(e,["sessionResumptionUpdate"],p);const h=f(n,["voiceActivityDetectionSignal"]);h!=null&&m(e,["voiceActivityDetectionSignal"],h);const _=f(n,["voiceActivity"]);return _!=null&&m(e,["voiceActivity"],Dk(_)),e}function bk(n){const e={},t=f(n,["mediaResolution"]);t!=null&&m(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const r=f(n,["executableCode"]);r!=null&&m(e,["executableCode"],r);const a=f(n,["fileData"]);a!=null&&m(e,["fileData"],fk(a));const u=f(n,["functionCall"]);u!=null&&m(e,["functionCall"],hk(u));const d=f(n,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const p=f(n,["inlineData"]);p!=null&&m(e,["inlineData"],xf(p));const h=f(n,["text"]);h!=null&&m(e,["text"],h);const _=f(n,["thought"]);_!=null&&m(e,["thought"],_);const T=f(n,["thoughtSignature"]);T!=null&&m(e,["thoughtSignature"],T);const E=f(n,["videoMetadata"]);return E!=null&&m(e,["videoMetadata"],E),e}function Rk(n){const e={},t=f(n,["handle"]);if(t!=null&&m(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function xk(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&m(e,["computerUse"],t);const i=f(n,["fileSearch"]);i!=null&&m(e,["fileSearch"],i);const r=f(n,["codeExecution"]);if(r!=null&&m(e,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(n,["functionDeclarations"]);if(a!=null){let _=a;Array.isArray(_)&&(_=_.map(T=>T)),m(e,["functionDeclarations"],_)}const u=f(n,["googleMaps"]);u!=null&&m(e,["googleMaps"],gk(u));const d=f(n,["googleSearch"]);d!=null&&m(e,["googleSearch"],yk(d));const p=f(n,["googleSearchRetrieval"]);p!=null&&m(e,["googleSearchRetrieval"],p);const h=f(n,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function Nk(n){const e={},t=f(n,["retrieval"]);t!=null&&m(e,["retrieval"],t);const i=f(n,["computerUse"]);if(i!=null&&m(e,["computerUse"],i),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=f(n,["codeExecution"]);r!=null&&m(e,["codeExecution"],r);const a=f(n,["enterpriseWebSearch"]);a!=null&&m(e,["enterpriseWebSearch"],a);const u=f(n,["functionDeclarations"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(E=>pk(E))),m(e,["functionDeclarations"],T)}const d=f(n,["googleMaps"]);d!=null&&m(e,["googleMaps"],d);const p=f(n,["googleSearch"]);p!=null&&m(e,["googleSearch"],p);const h=f(n,["googleSearchRetrieval"]);h!=null&&m(e,["googleSearchRetrieval"],h);const _=f(n,["urlContext"]);return _!=null&&m(e,["urlContext"],_),e}function Mk(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&m(e,["promptTokenCount"],t);const i=f(n,["cachedContentTokenCount"]);i!=null&&m(e,["cachedContentTokenCount"],i);const r=f(n,["candidatesTokenCount"]);r!=null&&m(e,["responseTokenCount"],r);const a=f(n,["toolUsePromptTokenCount"]);a!=null&&m(e,["toolUsePromptTokenCount"],a);const u=f(n,["thoughtsTokenCount"]);u!=null&&m(e,["thoughtsTokenCount"],u);const d=f(n,["totalTokenCount"]);d!=null&&m(e,["totalTokenCount"],d);const p=f(n,["promptTokensDetails"]);if(p!=null){let C=p;Array.isArray(C)&&(C=C.map(M=>M)),m(e,["promptTokensDetails"],C)}const h=f(n,["cacheTokensDetails"]);if(h!=null){let C=h;Array.isArray(C)&&(C=C.map(M=>M)),m(e,["cacheTokensDetails"],C)}const _=f(n,["candidatesTokensDetails"]);if(_!=null){let C=_;Array.isArray(C)&&(C=C.map(M=>M)),m(e,["responseTokensDetails"],C)}const T=f(n,["toolUsePromptTokensDetails"]);if(T!=null){let C=T;Array.isArray(C)&&(C=C.map(M=>M)),m(e,["toolUsePromptTokensDetails"],C)}const E=f(n,["trafficType"]);return E!=null&&m(e,["trafficType"],E),e}function Dk(n){const e={},t=f(n,["type"]);return t!=null&&m(e,["voiceActivityType"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Pk(n,e){const t={},i=f(n,["data"]);if(i!=null&&m(t,["data"],i),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=f(n,["mimeType"]);return r!=null&&m(t,["mimeType"],r),t}function kk(n,e){const t={},i=f(n,["content"]);i!=null&&m(t,["content"],i);const r=f(n,["citationMetadata"]);r!=null&&m(t,["citationMetadata"],Vk(r));const a=f(n,["tokenCount"]);a!=null&&m(t,["tokenCount"],a);const u=f(n,["finishReason"]);u!=null&&m(t,["finishReason"],u);const d=f(n,["avgLogprobs"]);d!=null&&m(t,["avgLogprobs"],d);const p=f(n,["groundingMetadata"]);p!=null&&m(t,["groundingMetadata"],p);const h=f(n,["index"]);h!=null&&m(t,["index"],h);const _=f(n,["logprobsResult"]);_!=null&&m(t,["logprobsResult"],_);const T=f(n,["safetyRatings"]);if(T!=null){let C=T;Array.isArray(C)&&(C=C.map(M=>M)),m(t,["safetyRatings"],C)}const E=f(n,["urlContextMetadata"]);return E!=null&&m(t,["urlContextMetadata"],E),t}function Vk(n,e){const t={},i=f(n,["citationSources"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),m(t,["citations"],r)}return t}function Uk(n,e,t){const i={},r=f(e,["model"]);r!=null&&m(i,["_url","model"],it(n,r));const a=f(e,["contents"]);if(a!=null){let u=Xn(a);Array.isArray(u)&&(u=u.map(d=>d)),m(i,["contents"],u)}return i}function Lk(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=f(n,["tokensInfo"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),m(t,["tokensInfo"],a)}return t}function Ok(n,e){const t={},i=f(n,["values"]);i!=null&&m(t,["values"],i);const r=f(n,["statistics"]);return r!=null&&m(t,["statistics"],Fk(r)),t}function Fk(n,e){const t={},i=f(n,["truncated"]);i!=null&&m(t,["truncated"],i);const r=f(n,["token_count"]);return r!=null&&m(t,["tokenCount"],r),t}function _c(n,e){const t={},i=f(n,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>Y2(u))),m(t,["parts"],a)}const r=f(n,["role"]);return r!=null&&m(t,["role"],r),t}function Bk(n,e){const t={},i=f(n,["controlType"]);i!=null&&m(t,["controlType"],i);const r=f(n,["enableControlImageComputation"]);return r!=null&&m(t,["computeControl"],r),t}function qk(n,e){const t={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function Gk(n,e,t){const i={},r=f(n,["systemInstruction"]);e!==void 0&&r!=null&&m(e,["systemInstruction"],nn(r));const a=f(n,["tools"]);if(e!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(p=>tI(p))),m(e,["tools"],d)}const u=f(n,["generationConfig"]);return e!==void 0&&u!=null&&m(e,["generationConfig"],P2(u)),i}function Hk(n,e,t){const i={},r=f(e,["model"]);r!=null&&m(i,["_url","model"],it(n,r));const a=f(e,["contents"]);if(a!=null){let d=Xn(a);Array.isArray(d)&&(d=d.map(p=>_c(p))),m(i,["contents"],d)}const u=f(e,["config"]);return u!=null&&qk(u),i}function zk(n,e,t){const i={},r=f(e,["model"]);r!=null&&m(i,["_url","model"],it(n,r));const a=f(e,["contents"]);if(a!=null){let d=Xn(a);Array.isArray(d)&&(d=d.map(p=>p)),m(i,["contents"],d)}const u=f(e,["config"]);return u!=null&&Gk(u,i),i}function $k(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=f(n,["totalTokens"]);r!=null&&m(t,["totalTokens"],r);const a=f(n,["cachedContentTokenCount"]);return a!=null&&m(t,["cachedContentTokenCount"],a),t}function Jk(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=f(n,["totalTokens"]);return r!=null&&m(t,["totalTokens"],r),t}function Kk(n,e,t){const i={},r=f(e,["model"]);return r!=null&&m(i,["_url","name"],it(n,r)),i}function Yk(n,e,t){const i={},r=f(e,["model"]);return r!=null&&m(i,["_url","name"],it(n,r)),i}function Wk(n,e){const t={},i=f(n,["sdkHttpResponse"]);return i!=null&&m(t,["sdkHttpResponse"],i),t}function Qk(n,e){const t={},i=f(n,["sdkHttpResponse"]);return i!=null&&m(t,["sdkHttpResponse"],i),t}function Xk(n,e,t){const i={},r=f(n,["outputGcsUri"]);e!==void 0&&r!=null&&m(e,["parameters","storageUri"],r);const a=f(n,["negativePrompt"]);e!==void 0&&a!=null&&m(e,["parameters","negativePrompt"],a);const u=f(n,["numberOfImages"]);e!==void 0&&u!=null&&m(e,["parameters","sampleCount"],u);const d=f(n,["aspectRatio"]);e!==void 0&&d!=null&&m(e,["parameters","aspectRatio"],d);const p=f(n,["guidanceScale"]);e!==void 0&&p!=null&&m(e,["parameters","guidanceScale"],p);const h=f(n,["seed"]);e!==void 0&&h!=null&&m(e,["parameters","seed"],h);const _=f(n,["safetyFilterLevel"]);e!==void 0&&_!=null&&m(e,["parameters","safetySetting"],_);const T=f(n,["personGeneration"]);e!==void 0&&T!=null&&m(e,["parameters","personGeneration"],T);const E=f(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&m(e,["parameters","includeSafetyAttributes"],E);const C=f(n,["includeRaiReason"]);e!==void 0&&C!=null&&m(e,["parameters","includeRaiReason"],C);const M=f(n,["language"]);e!==void 0&&M!=null&&m(e,["parameters","language"],M);const U=f(n,["outputMimeType"]);e!==void 0&&U!=null&&m(e,["parameters","outputOptions","mimeType"],U);const P=f(n,["outputCompressionQuality"]);e!==void 0&&P!=null&&m(e,["parameters","outputOptions","compressionQuality"],P);const $=f(n,["addWatermark"]);e!==void 0&&$!=null&&m(e,["parameters","addWatermark"],$);const H=f(n,["labels"]);e!==void 0&&H!=null&&m(e,["labels"],H);const z=f(n,["editMode"]);e!==void 0&&z!=null&&m(e,["parameters","editMode"],z);const X=f(n,["baseSteps"]);return e!==void 0&&X!=null&&m(e,["parameters","editConfig","baseSteps"],X),i}function jk(n,e,t){const i={},r=f(e,["model"]);r!=null&&m(i,["_url","model"],it(n,r));const a=f(e,["prompt"]);a!=null&&m(i,["instances[0]","prompt"],a);const u=f(e,["referenceImages"]);if(u!=null){let p=u;Array.isArray(p)&&(p=p.map(h=>eV(h))),m(i,["instances[0]","referenceImages"],p)}const d=f(e,["config"]);return d!=null&&Xk(d,i),i}function Zk(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=f(n,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>Mh(u))),m(t,["generatedImages"],a)}return t}function e2(n,e,t){const i={},r=f(n,["taskType"]);e!==void 0&&r!=null&&m(e,["requests[]","taskType"],r);const a=f(n,["title"]);e!==void 0&&a!=null&&m(e,["requests[]","title"],a);const u=f(n,["outputDimensionality"]);if(e!==void 0&&u!=null&&m(e,["requests[]","outputDimensionality"],u),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function t2(n,e,t){const i={};let r=f(t,["embeddingApiType"]);if(r===void 0&&(r="PREDICT"),r==="PREDICT"){const h=f(n,["taskType"]);e!==void 0&&h!=null&&m(e,["instances[]","task_type"],h)}else if(r==="EMBED_CONTENT"){const h=f(n,["taskType"]);e!==void 0&&h!=null&&m(e,["taskType"],h)}let a=f(t,["embeddingApiType"]);if(a===void 0&&(a="PREDICT"),a==="PREDICT"){const h=f(n,["title"]);e!==void 0&&h!=null&&m(e,["instances[]","title"],h)}else if(a==="EMBED_CONTENT"){const h=f(n,["title"]);e!==void 0&&h!=null&&m(e,["title"],h)}let u=f(t,["embeddingApiType"]);if(u===void 0&&(u="PREDICT"),u==="PREDICT"){const h=f(n,["outputDimensionality"]);e!==void 0&&h!=null&&m(e,["parameters","outputDimensionality"],h)}else if(u==="EMBED_CONTENT"){const h=f(n,["outputDimensionality"]);e!==void 0&&h!=null&&m(e,["outputDimensionality"],h)}let d=f(t,["embeddingApiType"]);if(d===void 0&&(d="PREDICT"),d==="PREDICT"){const h=f(n,["mimeType"]);e!==void 0&&h!=null&&m(e,["instances[]","mimeType"],h)}let p=f(t,["embeddingApiType"]);if(p===void 0&&(p="PREDICT"),p==="PREDICT"){const h=f(n,["autoTruncate"]);e!==void 0&&h!=null&&m(e,["parameters","autoTruncate"],h)}else if(p==="EMBED_CONTENT"){const h=f(n,["autoTruncate"]);e!==void 0&&h!=null&&m(e,["autoTruncate"],h)}return i}function n2(n,e,t){const i={},r=f(e,["model"]);r!=null&&m(i,["_url","model"],it(n,r));const a=f(e,["contents"]);if(a!=null){let h=Xy(n,a);Array.isArray(h)&&(h=h.map(_=>_)),m(i,["requests[]","content"],h)}const u=f(e,["content"]);u!=null&&_c(nn(u));const d=f(e,["config"]);d!=null&&e2(d,i);const p=f(e,["model"]);return p!==void 0&&m(i,["requests[]","model"],it(n,p)),i}function i2(n,e,t){const i={},r=f(e,["model"]);r!=null&&m(i,["_url","model"],it(n,r));let a=f(t,["embeddingApiType"]);if(a===void 0&&(a="PREDICT"),a==="PREDICT"){const p=f(e,["contents"]);if(p!=null){let h=Xy(n,p);Array.isArray(h)&&(h=h.map(_=>_)),m(i,["instances[]","content"],h)}}let u=f(t,["embeddingApiType"]);if(u===void 0&&(u="PREDICT"),u==="EMBED_CONTENT"){const p=f(e,["content"]);p!=null&&m(i,["content"],nn(p))}const d=f(e,["config"]);return d!=null&&t2(d,i,t),i}function s2(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=f(n,["embeddings"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>d)),m(t,["embeddings"],u)}const a=f(n,["metadata"]);return a!=null&&m(t,["metadata"],a),t}function r2(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=f(n,["predictions[]","embeddings"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>Ok(d))),m(t,["embeddings"],u)}const a=f(n,["metadata"]);if(a!=null&&m(t,["metadata"],a),e&&f(e,["embeddingApiType"])==="EMBED_CONTENT"){const u=f(n,["embedding"]),d=f(n,["usageMetadata"]),p=f(n,["truncated"]);if(u){const h={};d&&d.promptTokenCount&&(h.tokenCount=d.promptTokenCount),p&&(h.truncated=p),u.statistics=h,m(t,["embeddings"],[u])}}return t}function o2(n,e){const t={},i=f(n,["endpoint"]);i!=null&&m(t,["name"],i);const r=f(n,["deployedModelId"]);return r!=null&&m(t,["deployedModelId"],r),t}function a2(n,e){const t={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["fileUri"]);i!=null&&m(t,["fileUri"],i);const r=f(n,["mimeType"]);return r!=null&&m(t,["mimeType"],r),t}function l2(n,e){const t={},i=f(n,["id"]);i!=null&&m(t,["id"],i);const r=f(n,["args"]);r!=null&&m(t,["args"],r);const a=f(n,["name"]);if(a!=null&&m(t,["name"],a),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function u2(n,e){const t={},i=f(n,["allowedFunctionNames"]);i!=null&&m(t,["allowedFunctionNames"],i);const r=f(n,["mode"]);if(r!=null&&m(t,["mode"],r),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function c2(n,e){const t={},i=f(n,["description"]);i!=null&&m(t,["description"],i);const r=f(n,["name"]);r!=null&&m(t,["name"],r);const a=f(n,["parameters"]);a!=null&&m(t,["parameters"],a);const u=f(n,["parametersJsonSchema"]);u!=null&&m(t,["parametersJsonSchema"],u);const d=f(n,["response"]);d!=null&&m(t,["response"],d);const p=f(n,["responseJsonSchema"]);if(p!=null&&m(t,["responseJsonSchema"],p),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function d2(n,e,t,i){const r={},a=f(e,["systemInstruction"]);t!==void 0&&a!=null&&m(t,["systemInstruction"],_c(nn(a)));const u=f(e,["temperature"]);u!=null&&m(r,["temperature"],u);const d=f(e,["topP"]);d!=null&&m(r,["topP"],d);const p=f(e,["topK"]);p!=null&&m(r,["topK"],p);const h=f(e,["candidateCount"]);h!=null&&m(r,["candidateCount"],h);const _=f(e,["maxOutputTokens"]);_!=null&&m(r,["maxOutputTokens"],_);const T=f(e,["stopSequences"]);T!=null&&m(r,["stopSequences"],T);const E=f(e,["responseLogprobs"]);E!=null&&m(r,["responseLogprobs"],E);const C=f(e,["logprobs"]);C!=null&&m(r,["logprobs"],C);const M=f(e,["presencePenalty"]);M!=null&&m(r,["presencePenalty"],M);const U=f(e,["frequencyPenalty"]);U!=null&&m(r,["frequencyPenalty"],U);const P=f(e,["seed"]);P!=null&&m(r,["seed"],P);const $=f(e,["responseMimeType"]);$!=null&&m(r,["responseMimeType"],$);const H=f(e,["responseSchema"]);H!=null&&m(r,["responseSchema"],jy(H));const z=f(e,["responseJsonSchema"]);if(z!=null&&m(r,["responseJsonSchema"],z),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const X=f(e,["safetySettings"]);if(t!==void 0&&X!=null){let ke=X;Array.isArray(ke)&&(ke=ke.map(xe=>tV(xe))),m(t,["safetySettings"],ke)}const ue=f(e,["tools"]);if(t!==void 0&&ue!=null){let ke=pl(ue);Array.isArray(ke)&&(ke=ke.map(xe=>lV(hl(xe)))),m(t,["tools"],ke)}const W=f(e,["toolConfig"]);if(t!==void 0&&W!=null&&m(t,["toolConfig"],aV(W)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const N=f(e,["cachedContent"]);t!==void 0&&N!=null&&m(t,["cachedContent"],Qs(n,N));const D=f(e,["responseModalities"]);D!=null&&m(r,["responseModalities"],D);const x=f(e,["mediaResolution"]);x!=null&&m(r,["mediaResolution"],x);const L=f(e,["speechConfig"]);if(L!=null&&m(r,["speechConfig"],Zy(L)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const k=f(e,["thinkingConfig"]);k!=null&&m(r,["thinkingConfig"],k);const q=f(e,["imageConfig"]);q!=null&&m(r,["imageConfig"],O2(q));const V=f(e,["enableEnhancedCivicAnswers"]);if(V!=null&&m(r,["enableEnhancedCivicAnswers"],V),f(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}function f2(n,e,t,i){const r={},a=f(e,["systemInstruction"]);t!==void 0&&a!=null&&m(t,["systemInstruction"],nn(a));const u=f(e,["temperature"]);u!=null&&m(r,["temperature"],u);const d=f(e,["topP"]);d!=null&&m(r,["topP"],d);const p=f(e,["topK"]);p!=null&&m(r,["topK"],p);const h=f(e,["candidateCount"]);h!=null&&m(r,["candidateCount"],h);const _=f(e,["maxOutputTokens"]);_!=null&&m(r,["maxOutputTokens"],_);const T=f(e,["stopSequences"]);T!=null&&m(r,["stopSequences"],T);const E=f(e,["responseLogprobs"]);E!=null&&m(r,["responseLogprobs"],E);const C=f(e,["logprobs"]);C!=null&&m(r,["logprobs"],C);const M=f(e,["presencePenalty"]);M!=null&&m(r,["presencePenalty"],M);const U=f(e,["frequencyPenalty"]);U!=null&&m(r,["frequencyPenalty"],U);const P=f(e,["seed"]);P!=null&&m(r,["seed"],P);const $=f(e,["responseMimeType"]);$!=null&&m(r,["responseMimeType"],$);const H=f(e,["responseSchema"]);H!=null&&m(r,["responseSchema"],jy(H));const z=f(e,["responseJsonSchema"]);z!=null&&m(r,["responseJsonSchema"],z);const X=f(e,["routingConfig"]);X!=null&&m(r,["routingConfig"],X);const ue=f(e,["modelSelectionConfig"]);ue!=null&&m(r,["modelConfig"],ue);const W=f(e,["safetySettings"]);if(t!==void 0&&W!=null){let fe=W;Array.isArray(fe)&&(fe=fe.map(be=>be)),m(t,["safetySettings"],fe)}const N=f(e,["tools"]);if(t!==void 0&&N!=null){let fe=pl(N);Array.isArray(fe)&&(fe=fe.map(be=>tI(hl(be)))),m(t,["tools"],fe)}const D=f(e,["toolConfig"]);t!==void 0&&D!=null&&m(t,["toolConfig"],D);const x=f(e,["labels"]);t!==void 0&&x!=null&&m(t,["labels"],x);const L=f(e,["cachedContent"]);t!==void 0&&L!=null&&m(t,["cachedContent"],Qs(n,L));const k=f(e,["responseModalities"]);k!=null&&m(r,["responseModalities"],k);const q=f(e,["mediaResolution"]);q!=null&&m(r,["mediaResolution"],q);const V=f(e,["speechConfig"]);V!=null&&m(r,["speechConfig"],Zy(V));const ke=f(e,["audioTimestamp"]);ke!=null&&m(r,["audioTimestamp"],ke);const xe=f(e,["thinkingConfig"]);xe!=null&&m(r,["thinkingConfig"],xe);const Z=f(e,["imageConfig"]);if(Z!=null&&m(r,["imageConfig"],F2(Z)),f(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const ce=f(e,["modelArmorConfig"]);return t!==void 0&&ce!=null&&m(t,["modelArmorConfig"],ce),r}function yA(n,e,t){const i={},r=f(e,["model"]);r!=null&&m(i,["_url","model"],it(n,r));const a=f(e,["contents"]);if(a!=null){let d=Xn(a);Array.isArray(d)&&(d=d.map(p=>_c(p))),m(i,["contents"],d)}const u=f(e,["config"]);return u!=null&&m(i,["generationConfig"],d2(n,u,i)),i}function _A(n,e,t){const i={},r=f(e,["model"]);r!=null&&m(i,["_url","model"],it(n,r));const a=f(e,["contents"]);if(a!=null){let d=Xn(a);Array.isArray(d)&&(d=d.map(p=>p)),m(i,["contents"],d)}const u=f(e,["config"]);return u!=null&&m(i,["generationConfig"],f2(n,u,i)),i}function vA(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=f(n,["candidates"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(_=>kk(_))),m(t,["candidates"],h)}const a=f(n,["modelVersion"]);a!=null&&m(t,["modelVersion"],a);const u=f(n,["promptFeedback"]);u!=null&&m(t,["promptFeedback"],u);const d=f(n,["responseId"]);d!=null&&m(t,["responseId"],d);const p=f(n,["usageMetadata"]);return p!=null&&m(t,["usageMetadata"],p),t}function TA(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=f(n,["candidates"]);if(r!=null){let _=r;Array.isArray(_)&&(_=_.map(T=>T)),m(t,["candidates"],_)}const a=f(n,["createTime"]);a!=null&&m(t,["createTime"],a);const u=f(n,["modelVersion"]);u!=null&&m(t,["modelVersion"],u);const d=f(n,["promptFeedback"]);d!=null&&m(t,["promptFeedback"],d);const p=f(n,["responseId"]);p!=null&&m(t,["responseId"],p);const h=f(n,["usageMetadata"]);return h!=null&&m(t,["usageMetadata"],h),t}function h2(n,e,t){const i={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=f(n,["numberOfImages"]);e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r);const a=f(n,["aspectRatio"]);e!==void 0&&a!=null&&m(e,["parameters","aspectRatio"],a);const u=f(n,["guidanceScale"]);if(e!==void 0&&u!=null&&m(e,["parameters","guidanceScale"],u),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=f(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&m(e,["parameters","safetySetting"],d);const p=f(n,["personGeneration"]);e!==void 0&&p!=null&&m(e,["parameters","personGeneration"],p);const h=f(n,["includeSafetyAttributes"]);e!==void 0&&h!=null&&m(e,["parameters","includeSafetyAttributes"],h);const _=f(n,["includeRaiReason"]);e!==void 0&&_!=null&&m(e,["parameters","includeRaiReason"],_);const T=f(n,["language"]);e!==void 0&&T!=null&&m(e,["parameters","language"],T);const E=f(n,["outputMimeType"]);e!==void 0&&E!=null&&m(e,["parameters","outputOptions","mimeType"],E);const C=f(n,["outputCompressionQuality"]);if(e!==void 0&&C!=null&&m(e,["parameters","outputOptions","compressionQuality"],C),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const M=f(n,["imageSize"]);if(e!==void 0&&M!=null&&m(e,["parameters","sampleImageSize"],M),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function p2(n,e,t){const i={},r=f(n,["outputGcsUri"]);e!==void 0&&r!=null&&m(e,["parameters","storageUri"],r);const a=f(n,["negativePrompt"]);e!==void 0&&a!=null&&m(e,["parameters","negativePrompt"],a);const u=f(n,["numberOfImages"]);e!==void 0&&u!=null&&m(e,["parameters","sampleCount"],u);const d=f(n,["aspectRatio"]);e!==void 0&&d!=null&&m(e,["parameters","aspectRatio"],d);const p=f(n,["guidanceScale"]);e!==void 0&&p!=null&&m(e,["parameters","guidanceScale"],p);const h=f(n,["seed"]);e!==void 0&&h!=null&&m(e,["parameters","seed"],h);const _=f(n,["safetyFilterLevel"]);e!==void 0&&_!=null&&m(e,["parameters","safetySetting"],_);const T=f(n,["personGeneration"]);e!==void 0&&T!=null&&m(e,["parameters","personGeneration"],T);const E=f(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&m(e,["parameters","includeSafetyAttributes"],E);const C=f(n,["includeRaiReason"]);e!==void 0&&C!=null&&m(e,["parameters","includeRaiReason"],C);const M=f(n,["language"]);e!==void 0&&M!=null&&m(e,["parameters","language"],M);const U=f(n,["outputMimeType"]);e!==void 0&&U!=null&&m(e,["parameters","outputOptions","mimeType"],U);const P=f(n,["outputCompressionQuality"]);e!==void 0&&P!=null&&m(e,["parameters","outputOptions","compressionQuality"],P);const $=f(n,["addWatermark"]);e!==void 0&&$!=null&&m(e,["parameters","addWatermark"],$);const H=f(n,["labels"]);e!==void 0&&H!=null&&m(e,["labels"],H);const z=f(n,["imageSize"]);e!==void 0&&z!=null&&m(e,["parameters","sampleImageSize"],z);const X=f(n,["enhancePrompt"]);return e!==void 0&&X!=null&&m(e,["parameters","enhancePrompt"],X),i}function m2(n,e,t){const i={},r=f(e,["model"]);r!=null&&m(i,["_url","model"],it(n,r));const a=f(e,["prompt"]);a!=null&&m(i,["instances[0]","prompt"],a);const u=f(e,["config"]);return u!=null&&h2(u,i),i}function g2(n,e,t){const i={},r=f(e,["model"]);r!=null&&m(i,["_url","model"],it(n,r));const a=f(e,["prompt"]);a!=null&&m(i,["instances[0]","prompt"],a);const u=f(e,["config"]);return u!=null&&p2(u,i),i}function y2(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=f(n,["predictions"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>x2(d))),m(t,["generatedImages"],u)}const a=f(n,["positivePromptSafetyAttributes"]);return a!=null&&m(t,["positivePromptSafetyAttributes"],ZC(a)),t}function _2(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=f(n,["predictions"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>Mh(d))),m(t,["generatedImages"],u)}const a=f(n,["positivePromptSafetyAttributes"]);return a!=null&&m(t,["positivePromptSafetyAttributes"],eI(a)),t}function v2(n,e,t){const i={},r=f(n,["numberOfVideos"]);if(e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=f(n,["durationSeconds"]);if(e!==void 0&&a!=null&&m(e,["parameters","durationSeconds"],a),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&m(e,["parameters","aspectRatio"],u);const d=f(n,["resolution"]);e!==void 0&&d!=null&&m(e,["parameters","resolution"],d);const p=f(n,["personGeneration"]);if(e!==void 0&&p!=null&&m(e,["parameters","personGeneration"],p),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const h=f(n,["negativePrompt"]);e!==void 0&&h!=null&&m(e,["parameters","negativePrompt"],h);const _=f(n,["enhancePrompt"]);if(e!==void 0&&_!=null&&m(e,["parameters","enhancePrompt"],_),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const T=f(n,["lastFrame"]);e!==void 0&&T!=null&&m(e,["instances[0]","lastFrame"],Dh(T));const E=f(n,["referenceImages"]);if(e!==void 0&&E!=null){let C=E;Array.isArray(C)&&(C=C.map(M=>EV(M))),m(e,["instances[0]","referenceImages"],C)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return i}function T2(n,e,t){const i={},r=f(n,["numberOfVideos"]);e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r);const a=f(n,["outputGcsUri"]);e!==void 0&&a!=null&&m(e,["parameters","storageUri"],a);const u=f(n,["fps"]);e!==void 0&&u!=null&&m(e,["parameters","fps"],u);const d=f(n,["durationSeconds"]);e!==void 0&&d!=null&&m(e,["parameters","durationSeconds"],d);const p=f(n,["seed"]);e!==void 0&&p!=null&&m(e,["parameters","seed"],p);const h=f(n,["aspectRatio"]);e!==void 0&&h!=null&&m(e,["parameters","aspectRatio"],h);const _=f(n,["resolution"]);e!==void 0&&_!=null&&m(e,["parameters","resolution"],_);const T=f(n,["personGeneration"]);e!==void 0&&T!=null&&m(e,["parameters","personGeneration"],T);const E=f(n,["pubsubTopic"]);e!==void 0&&E!=null&&m(e,["parameters","pubsubTopic"],E);const C=f(n,["negativePrompt"]);e!==void 0&&C!=null&&m(e,["parameters","negativePrompt"],C);const M=f(n,["enhancePrompt"]);e!==void 0&&M!=null&&m(e,["parameters","enhancePrompt"],M);const U=f(n,["generateAudio"]);e!==void 0&&U!=null&&m(e,["parameters","generateAudio"],U);const P=f(n,["lastFrame"]);e!==void 0&&P!=null&&m(e,["instances[0]","lastFrame"],Li(P));const $=f(n,["referenceImages"]);if(e!==void 0&&$!=null){let X=$;Array.isArray(X)&&(X=X.map(ue=>SV(ue))),m(e,["instances[0]","referenceImages"],X)}const H=f(n,["mask"]);e!==void 0&&H!=null&&m(e,["instances[0]","mask"],TV(H));const z=f(n,["compressionQuality"]);return e!==void 0&&z!=null&&m(e,["parameters","compressionQuality"],z),i}function E2(n,e){const t={},i=f(n,["name"]);i!=null&&m(t,["name"],i);const r=f(n,["metadata"]);r!=null&&m(t,["metadata"],r);const a=f(n,["done"]);a!=null&&m(t,["done"],a);const u=f(n,["error"]);u!=null&&m(t,["error"],u);const d=f(n,["response","generateVideoResponse"]);return d!=null&&m(t,["response"],C2(d)),t}function S2(n,e){const t={},i=f(n,["name"]);i!=null&&m(t,["name"],i);const r=f(n,["metadata"]);r!=null&&m(t,["metadata"],r);const a=f(n,["done"]);a!=null&&m(t,["done"],a);const u=f(n,["error"]);u!=null&&m(t,["error"],u);const d=f(n,["response"]);return d!=null&&m(t,["response"],I2(d)),t}function A2(n,e,t){const i={},r=f(e,["model"]);r!=null&&m(i,["_url","model"],it(n,r));const a=f(e,["prompt"]);a!=null&&m(i,["instances[0]","prompt"],a);const u=f(e,["image"]);u!=null&&m(i,["instances[0]","image"],Dh(u));const d=f(e,["video"]);d!=null&&m(i,["instances[0]","video"],nI(d));const p=f(e,["source"]);p!=null&&b2(p,i);const h=f(e,["config"]);return h!=null&&v2(h,i),i}function w2(n,e,t){const i={},r=f(e,["model"]);r!=null&&m(i,["_url","model"],it(n,r));const a=f(e,["prompt"]);a!=null&&m(i,["instances[0]","prompt"],a);const u=f(e,["image"]);u!=null&&m(i,["instances[0]","image"],Li(u));const d=f(e,["video"]);d!=null&&m(i,["instances[0]","video"],iI(d));const p=f(e,["source"]);p!=null&&R2(p,i);const h=f(e,["config"]);return h!=null&&T2(h,i),i}function C2(n,e){const t={},i=f(n,["generatedSamples"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(d=>M2(d))),m(t,["generatedVideos"],u)}const r=f(n,["raiMediaFilteredCount"]);r!=null&&m(t,["raiMediaFilteredCount"],r);const a=f(n,["raiMediaFilteredReasons"]);return a!=null&&m(t,["raiMediaFilteredReasons"],a),t}function I2(n,e){const t={},i=f(n,["videos"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(d=>D2(d))),m(t,["generatedVideos"],u)}const r=f(n,["raiMediaFilteredCount"]);r!=null&&m(t,["raiMediaFilteredCount"],r);const a=f(n,["raiMediaFilteredReasons"]);return a!=null&&m(t,["raiMediaFilteredReasons"],a),t}function b2(n,e,t){const i={},r=f(n,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const a=f(n,["image"]);e!==void 0&&a!=null&&m(e,["instances[0]","image"],Dh(a));const u=f(n,["video"]);return e!==void 0&&u!=null&&m(e,["instances[0]","video"],nI(u)),i}function R2(n,e,t){const i={},r=f(n,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const a=f(n,["image"]);e!==void 0&&a!=null&&m(e,["instances[0]","image"],Li(a));const u=f(n,["video"]);return e!==void 0&&u!=null&&m(e,["instances[0]","video"],iI(u)),i}function x2(n,e){const t={},i=f(n,["_self"]);i!=null&&m(t,["image"],B2(i));const r=f(n,["raiFilteredReason"]);r!=null&&m(t,["raiFilteredReason"],r);const a=f(n,["_self"]);return a!=null&&m(t,["safetyAttributes"],ZC(a)),t}function Mh(n,e){const t={},i=f(n,["_self"]);i!=null&&m(t,["image"],jC(i));const r=f(n,["raiFilteredReason"]);r!=null&&m(t,["raiFilteredReason"],r);const a=f(n,["_self"]);a!=null&&m(t,["safetyAttributes"],eI(a));const u=f(n,["prompt"]);return u!=null&&m(t,["enhancedPrompt"],u),t}function N2(n,e){const t={},i=f(n,["_self"]);i!=null&&m(t,["mask"],jC(i));const r=f(n,["labels"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),m(t,["labels"],a)}return t}function M2(n,e){const t={},i=f(n,["video"]);return i!=null&&m(t,["video"],_V(i)),t}function D2(n,e){const t={},i=f(n,["_self"]);return i!=null&&m(t,["video"],vV(i)),t}function P2(n,e){const t={},i=f(n,["modelSelectionConfig"]);i!=null&&m(t,["modelConfig"],i);const r=f(n,["responseJsonSchema"]);r!=null&&m(t,["responseJsonSchema"],r);const a=f(n,["audioTimestamp"]);a!=null&&m(t,["audioTimestamp"],a);const u=f(n,["candidateCount"]);u!=null&&m(t,["candidateCount"],u);const d=f(n,["enableAffectiveDialog"]);d!=null&&m(t,["enableAffectiveDialog"],d);const p=f(n,["frequencyPenalty"]);p!=null&&m(t,["frequencyPenalty"],p);const h=f(n,["logprobs"]);h!=null&&m(t,["logprobs"],h);const _=f(n,["maxOutputTokens"]);_!=null&&m(t,["maxOutputTokens"],_);const T=f(n,["mediaResolution"]);T!=null&&m(t,["mediaResolution"],T);const E=f(n,["presencePenalty"]);E!=null&&m(t,["presencePenalty"],E);const C=f(n,["responseLogprobs"]);C!=null&&m(t,["responseLogprobs"],C);const M=f(n,["responseMimeType"]);M!=null&&m(t,["responseMimeType"],M);const U=f(n,["responseModalities"]);U!=null&&m(t,["responseModalities"],U);const P=f(n,["responseSchema"]);P!=null&&m(t,["responseSchema"],P);const $=f(n,["routingConfig"]);$!=null&&m(t,["routingConfig"],$);const H=f(n,["seed"]);H!=null&&m(t,["seed"],H);const z=f(n,["speechConfig"]);z!=null&&m(t,["speechConfig"],z);const X=f(n,["stopSequences"]);X!=null&&m(t,["stopSequences"],X);const ue=f(n,["temperature"]);ue!=null&&m(t,["temperature"],ue);const W=f(n,["thinkingConfig"]);W!=null&&m(t,["thinkingConfig"],W);const N=f(n,["topK"]);N!=null&&m(t,["topK"],N);const D=f(n,["topP"]);if(D!=null&&m(t,["topP"],D),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function k2(n,e,t){const i={},r=f(e,["model"]);return r!=null&&m(i,["_url","name"],it(n,r)),i}function V2(n,e,t){const i={},r=f(e,["model"]);return r!=null&&m(i,["_url","name"],it(n,r)),i}function U2(n,e){const t={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=f(n,["enableWidget"]);return i!=null&&m(t,["enableWidget"],i),t}function L2(n,e){const t={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=f(n,["timeRangeFilter"]);return i!=null&&m(t,["timeRangeFilter"],i),t}function O2(n,e){const t={},i=f(n,["aspectRatio"]);i!=null&&m(t,["aspectRatio"],i);const r=f(n,["imageSize"]);if(r!=null&&m(t,["imageSize"],r),f(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function F2(n,e){const t={},i=f(n,["aspectRatio"]);i!=null&&m(t,["aspectRatio"],i);const r=f(n,["imageSize"]);r!=null&&m(t,["imageSize"],r);const a=f(n,["personGeneration"]);a!=null&&m(t,["personGeneration"],a);const u=f(n,["outputMimeType"]);u!=null&&m(t,["imageOutputOptions","mimeType"],u);const d=f(n,["outputCompressionQuality"]);return d!=null&&m(t,["imageOutputOptions","compressionQuality"],d),t}function B2(n,e){const t={},i=f(n,["bytesBase64Encoded"]);i!=null&&m(t,["imageBytes"],Qr(i));const r=f(n,["mimeType"]);return r!=null&&m(t,["mimeType"],r),t}function jC(n,e){const t={},i=f(n,["gcsUri"]);i!=null&&m(t,["gcsUri"],i);const r=f(n,["bytesBase64Encoded"]);r!=null&&m(t,["imageBytes"],Qr(r));const a=f(n,["mimeType"]);return a!=null&&m(t,["mimeType"],a),t}function Dh(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=f(n,["imageBytes"]);i!=null&&m(t,["bytesBase64Encoded"],Qr(i));const r=f(n,["mimeType"]);return r!=null&&m(t,["mimeType"],r),t}function Li(n,e){const t={},i=f(n,["gcsUri"]);i!=null&&m(t,["gcsUri"],i);const r=f(n,["imageBytes"]);r!=null&&m(t,["bytesBase64Encoded"],Qr(r));const a=f(n,["mimeType"]);return a!=null&&m(t,["mimeType"],a),t}function q2(n,e,t,i){const r={},a=f(e,["pageSize"]);t!==void 0&&a!=null&&m(t,["_query","pageSize"],a);const u=f(e,["pageToken"]);t!==void 0&&u!=null&&m(t,["_query","pageToken"],u);const d=f(e,["filter"]);t!==void 0&&d!=null&&m(t,["_query","filter"],d);const p=f(e,["queryBase"]);return t!==void 0&&p!=null&&m(t,["_url","models_url"],$C(n,p)),r}function G2(n,e,t,i){const r={},a=f(e,["pageSize"]);t!==void 0&&a!=null&&m(t,["_query","pageSize"],a);const u=f(e,["pageToken"]);t!==void 0&&u!=null&&m(t,["_query","pageToken"],u);const d=f(e,["filter"]);t!==void 0&&d!=null&&m(t,["_query","filter"],d);const p=f(e,["queryBase"]);return t!==void 0&&p!=null&&m(t,["_url","models_url"],$C(n,p)),r}function H2(n,e,t){const i={},r=f(e,["config"]);return r!=null&&q2(n,r,i),i}function z2(n,e,t){const i={},r=f(e,["config"]);return r!=null&&G2(n,r,i),i}function $2(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=f(n,["nextPageToken"]);r!=null&&m(t,["nextPageToken"],r);const a=f(n,["_self"]);if(a!=null){let u=JC(a);Array.isArray(u)&&(u=u.map(d=>Xg(d))),m(t,["models"],u)}return t}function J2(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=f(n,["nextPageToken"]);r!=null&&m(t,["nextPageToken"],r);const a=f(n,["_self"]);if(a!=null){let u=JC(a);Array.isArray(u)&&(u=u.map(d=>jg(d))),m(t,["models"],u)}return t}function K2(n,e){const t={},i=f(n,["maskMode"]);i!=null&&m(t,["maskMode"],i);const r=f(n,["segmentationClasses"]);r!=null&&m(t,["maskClasses"],r);const a=f(n,["maskDilation"]);return a!=null&&m(t,["dilation"],a),t}function Xg(n,e){const t={},i=f(n,["name"]);i!=null&&m(t,["name"],i);const r=f(n,["displayName"]);r!=null&&m(t,["displayName"],r);const a=f(n,["description"]);a!=null&&m(t,["description"],a);const u=f(n,["version"]);u!=null&&m(t,["version"],u);const d=f(n,["_self"]);d!=null&&m(t,["tunedModelInfo"],uV(d));const p=f(n,["inputTokenLimit"]);p!=null&&m(t,["inputTokenLimit"],p);const h=f(n,["outputTokenLimit"]);h!=null&&m(t,["outputTokenLimit"],h);const _=f(n,["supportedGenerationMethods"]);_!=null&&m(t,["supportedActions"],_);const T=f(n,["temperature"]);T!=null&&m(t,["temperature"],T);const E=f(n,["maxTemperature"]);E!=null&&m(t,["maxTemperature"],E);const C=f(n,["topP"]);C!=null&&m(t,["topP"],C);const M=f(n,["topK"]);M!=null&&m(t,["topK"],M);const U=f(n,["thinking"]);return U!=null&&m(t,["thinking"],U),t}function jg(n,e){const t={},i=f(n,["name"]);i!=null&&m(t,["name"],i);const r=f(n,["displayName"]);r!=null&&m(t,["displayName"],r);const a=f(n,["description"]);a!=null&&m(t,["description"],a);const u=f(n,["versionId"]);u!=null&&m(t,["version"],u);const d=f(n,["deployedModels"]);if(d!=null){let E=d;Array.isArray(E)&&(E=E.map(C=>o2(C))),m(t,["endpoints"],E)}const p=f(n,["labels"]);p!=null&&m(t,["labels"],p);const h=f(n,["_self"]);h!=null&&m(t,["tunedModelInfo"],cV(h));const _=f(n,["defaultCheckpointId"]);_!=null&&m(t,["defaultCheckpointId"],_);const T=f(n,["checkpoints"]);if(T!=null){let E=T;Array.isArray(E)&&(E=E.map(C=>C)),m(t,["checkpoints"],E)}return t}function Y2(n,e){const t={},i=f(n,["mediaResolution"]);i!=null&&m(t,["mediaResolution"],i);const r=f(n,["codeExecutionResult"]);r!=null&&m(t,["codeExecutionResult"],r);const a=f(n,["executableCode"]);a!=null&&m(t,["executableCode"],a);const u=f(n,["fileData"]);u!=null&&m(t,["fileData"],a2(u));const d=f(n,["functionCall"]);d!=null&&m(t,["functionCall"],l2(d));const p=f(n,["functionResponse"]);p!=null&&m(t,["functionResponse"],p);const h=f(n,["inlineData"]);h!=null&&m(t,["inlineData"],Pk(h));const _=f(n,["text"]);_!=null&&m(t,["text"],_);const T=f(n,["thought"]);T!=null&&m(t,["thought"],T);const E=f(n,["thoughtSignature"]);E!=null&&m(t,["thoughtSignature"],E);const C=f(n,["videoMetadata"]);return C!=null&&m(t,["videoMetadata"],C),t}function W2(n,e){const t={},i=f(n,["productImage"]);return i!=null&&m(t,["image"],Li(i)),t}function Q2(n,e,t){const i={},r=f(n,["numberOfImages"]);e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r);const a=f(n,["baseSteps"]);e!==void 0&&a!=null&&m(e,["parameters","baseSteps"],a);const u=f(n,["outputGcsUri"]);e!==void 0&&u!=null&&m(e,["parameters","storageUri"],u);const d=f(n,["seed"]);e!==void 0&&d!=null&&m(e,["parameters","seed"],d);const p=f(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&m(e,["parameters","safetySetting"],p);const h=f(n,["personGeneration"]);e!==void 0&&h!=null&&m(e,["parameters","personGeneration"],h);const _=f(n,["addWatermark"]);e!==void 0&&_!=null&&m(e,["parameters","addWatermark"],_);const T=f(n,["outputMimeType"]);e!==void 0&&T!=null&&m(e,["parameters","outputOptions","mimeType"],T);const E=f(n,["outputCompressionQuality"]);e!==void 0&&E!=null&&m(e,["parameters","outputOptions","compressionQuality"],E);const C=f(n,["enhancePrompt"]);e!==void 0&&C!=null&&m(e,["parameters","enhancePrompt"],C);const M=f(n,["labels"]);return e!==void 0&&M!=null&&m(e,["labels"],M),i}function X2(n,e,t){const i={},r=f(e,["model"]);r!=null&&m(i,["_url","model"],it(n,r));const a=f(e,["source"]);a!=null&&Z2(a,i);const u=f(e,["config"]);return u!=null&&Q2(u,i),i}function j2(n,e){const t={},i=f(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>Mh(a))),m(t,["generatedImages"],r)}return t}function Z2(n,e,t){const i={},r=f(n,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const a=f(n,["personImage"]);e!==void 0&&a!=null&&m(e,["instances[0]","personImage","image"],Li(a));const u=f(n,["productImages"]);if(e!==void 0&&u!=null){let d=u;Array.isArray(d)&&(d=d.map(p=>W2(p))),m(e,["instances[0]","productImages"],d)}return i}function eV(n,e){const t={},i=f(n,["referenceImage"]);i!=null&&m(t,["referenceImage"],Li(i));const r=f(n,["referenceId"]);r!=null&&m(t,["referenceId"],r);const a=f(n,["referenceType"]);a!=null&&m(t,["referenceType"],a);const u=f(n,["maskImageConfig"]);u!=null&&m(t,["maskImageConfig"],K2(u));const d=f(n,["controlImageConfig"]);d!=null&&m(t,["controlImageConfig"],Bk(d));const p=f(n,["styleImageConfig"]);p!=null&&m(t,["styleImageConfig"],p);const h=f(n,["subjectImageConfig"]);return h!=null&&m(t,["subjectImageConfig"],h),t}function ZC(n,e){const t={},i=f(n,["safetyAttributes","categories"]);i!=null&&m(t,["categories"],i);const r=f(n,["safetyAttributes","scores"]);r!=null&&m(t,["scores"],r);const a=f(n,["contentType"]);return a!=null&&m(t,["contentType"],a),t}function eI(n,e){const t={},i=f(n,["safetyAttributes","categories"]);i!=null&&m(t,["categories"],i);const r=f(n,["safetyAttributes","scores"]);r!=null&&m(t,["scores"],r);const a=f(n,["contentType"]);return a!=null&&m(t,["contentType"],a),t}function tV(n,e){const t={},i=f(n,["category"]);if(i!=null&&m(t,["category"],i),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=f(n,["threshold"]);return r!=null&&m(t,["threshold"],r),t}function nV(n,e){const t={},i=f(n,["image"]);return i!=null&&m(t,["image"],Li(i)),t}function iV(n,e,t){const i={},r=f(n,["mode"]);e!==void 0&&r!=null&&m(e,["parameters","mode"],r);const a=f(n,["maxPredictions"]);e!==void 0&&a!=null&&m(e,["parameters","maxPredictions"],a);const u=f(n,["confidenceThreshold"]);e!==void 0&&u!=null&&m(e,["parameters","confidenceThreshold"],u);const d=f(n,["maskDilation"]);e!==void 0&&d!=null&&m(e,["parameters","maskDilation"],d);const p=f(n,["binaryColorThreshold"]);e!==void 0&&p!=null&&m(e,["parameters","binaryColorThreshold"],p);const h=f(n,["labels"]);return e!==void 0&&h!=null&&m(e,["labels"],h),i}function sV(n,e,t){const i={},r=f(e,["model"]);r!=null&&m(i,["_url","model"],it(n,r));const a=f(e,["source"]);a!=null&&oV(a,i);const u=f(e,["config"]);return u!=null&&iV(u,i),i}function rV(n,e){const t={},i=f(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>N2(a))),m(t,["generatedMasks"],r)}return t}function oV(n,e,t){const i={},r=f(n,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const a=f(n,["image"]);e!==void 0&&a!=null&&m(e,["instances[0]","image"],Li(a));const u=f(n,["scribbleImage"]);return e!==void 0&&u!=null&&m(e,["instances[0]","scribble"],nV(u)),i}function aV(n,e){const t={},i=f(n,["retrievalConfig"]);i!=null&&m(t,["retrievalConfig"],i);const r=f(n,["functionCallingConfig"]);return r!=null&&m(t,["functionCallingConfig"],u2(r)),t}function lV(n,e){const t={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["computerUse"]);i!=null&&m(t,["computerUse"],i);const r=f(n,["fileSearch"]);r!=null&&m(t,["fileSearch"],r);const a=f(n,["codeExecution"]);if(a!=null&&m(t,["codeExecution"],a),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=f(n,["functionDeclarations"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(E=>E)),m(t,["functionDeclarations"],T)}const d=f(n,["googleMaps"]);d!=null&&m(t,["googleMaps"],U2(d));const p=f(n,["googleSearch"]);p!=null&&m(t,["googleSearch"],L2(p));const h=f(n,["googleSearchRetrieval"]);h!=null&&m(t,["googleSearchRetrieval"],h);const _=f(n,["urlContext"]);return _!=null&&m(t,["urlContext"],_),t}function tI(n,e){const t={},i=f(n,["retrieval"]);i!=null&&m(t,["retrieval"],i);const r=f(n,["computerUse"]);if(r!=null&&m(t,["computerUse"],r),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=f(n,["codeExecution"]);a!=null&&m(t,["codeExecution"],a);const u=f(n,["enterpriseWebSearch"]);u!=null&&m(t,["enterpriseWebSearch"],u);const d=f(n,["functionDeclarations"]);if(d!=null){let E=d;Array.isArray(E)&&(E=E.map(C=>c2(C))),m(t,["functionDeclarations"],E)}const p=f(n,["googleMaps"]);p!=null&&m(t,["googleMaps"],p);const h=f(n,["googleSearch"]);h!=null&&m(t,["googleSearch"],h);const _=f(n,["googleSearchRetrieval"]);_!=null&&m(t,["googleSearchRetrieval"],_);const T=f(n,["urlContext"]);return T!=null&&m(t,["urlContext"],T),t}function uV(n,e){const t={},i=f(n,["baseModel"]);i!=null&&m(t,["baseModel"],i);const r=f(n,["createTime"]);r!=null&&m(t,["createTime"],r);const a=f(n,["updateTime"]);return a!=null&&m(t,["updateTime"],a),t}function cV(n,e){const t={},i=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&m(t,["baseModel"],i);const r=f(n,["createTime"]);r!=null&&m(t,["createTime"],r);const a=f(n,["updateTime"]);return a!=null&&m(t,["updateTime"],a),t}function dV(n,e,t){const i={},r=f(n,["displayName"]);e!==void 0&&r!=null&&m(e,["displayName"],r);const a=f(n,["description"]);e!==void 0&&a!=null&&m(e,["description"],a);const u=f(n,["defaultCheckpointId"]);return e!==void 0&&u!=null&&m(e,["defaultCheckpointId"],u),i}function fV(n,e,t){const i={},r=f(n,["displayName"]);e!==void 0&&r!=null&&m(e,["displayName"],r);const a=f(n,["description"]);e!==void 0&&a!=null&&m(e,["description"],a);const u=f(n,["defaultCheckpointId"]);return e!==void 0&&u!=null&&m(e,["defaultCheckpointId"],u),i}function hV(n,e,t){const i={},r=f(e,["model"]);r!=null&&m(i,["_url","name"],it(n,r));const a=f(e,["config"]);return a!=null&&dV(a,i),i}function pV(n,e,t){const i={},r=f(e,["model"]);r!=null&&m(i,["_url","model"],it(n,r));const a=f(e,["config"]);return a!=null&&fV(a,i),i}function mV(n,e,t){const i={},r=f(n,["outputGcsUri"]);e!==void 0&&r!=null&&m(e,["parameters","storageUri"],r);const a=f(n,["safetyFilterLevel"]);e!==void 0&&a!=null&&m(e,["parameters","safetySetting"],a);const u=f(n,["personGeneration"]);e!==void 0&&u!=null&&m(e,["parameters","personGeneration"],u);const d=f(n,["includeRaiReason"]);e!==void 0&&d!=null&&m(e,["parameters","includeRaiReason"],d);const p=f(n,["outputMimeType"]);e!==void 0&&p!=null&&m(e,["parameters","outputOptions","mimeType"],p);const h=f(n,["outputCompressionQuality"]);e!==void 0&&h!=null&&m(e,["parameters","outputOptions","compressionQuality"],h);const _=f(n,["enhanceInputImage"]);e!==void 0&&_!=null&&m(e,["parameters","upscaleConfig","enhanceInputImage"],_);const T=f(n,["imagePreservationFactor"]);e!==void 0&&T!=null&&m(e,["parameters","upscaleConfig","imagePreservationFactor"],T);const E=f(n,["labels"]);e!==void 0&&E!=null&&m(e,["labels"],E);const C=f(n,["numberOfImages"]);e!==void 0&&C!=null&&m(e,["parameters","sampleCount"],C);const M=f(n,["mode"]);return e!==void 0&&M!=null&&m(e,["parameters","mode"],M),i}function gV(n,e,t){const i={},r=f(e,["model"]);r!=null&&m(i,["_url","model"],it(n,r));const a=f(e,["image"]);a!=null&&m(i,["instances[0]","image"],Li(a));const u=f(e,["upscaleFactor"]);u!=null&&m(i,["parameters","upscaleConfig","upscaleFactor"],u);const d=f(e,["config"]);return d!=null&&mV(d,i),i}function yV(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=f(n,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>Mh(u))),m(t,["generatedImages"],a)}return t}function _V(n,e){const t={},i=f(n,["uri"]);i!=null&&m(t,["uri"],i);const r=f(n,["encodedVideo"]);r!=null&&m(t,["videoBytes"],Qr(r));const a=f(n,["encoding"]);return a!=null&&m(t,["mimeType"],a),t}function vV(n,e){const t={},i=f(n,["gcsUri"]);i!=null&&m(t,["uri"],i);const r=f(n,["bytesBase64Encoded"]);r!=null&&m(t,["videoBytes"],Qr(r));const a=f(n,["mimeType"]);return a!=null&&m(t,["mimeType"],a),t}function TV(n,e){const t={},i=f(n,["image"]);i!=null&&m(t,["_self"],Li(i));const r=f(n,["maskMode"]);return r!=null&&m(t,["maskMode"],r),t}function EV(n,e){const t={},i=f(n,["image"]);i!=null&&m(t,["image"],Dh(i));const r=f(n,["referenceType"]);return r!=null&&m(t,["referenceType"],r),t}function SV(n,e){const t={},i=f(n,["image"]);i!=null&&m(t,["image"],Li(i));const r=f(n,["referenceType"]);return r!=null&&m(t,["referenceType"],r),t}function nI(n,e){const t={},i=f(n,["uri"]);i!=null&&m(t,["uri"],i);const r=f(n,["videoBytes"]);r!=null&&m(t,["encodedVideo"],Qr(r));const a=f(n,["mimeType"]);return a!=null&&m(t,["encoding"],a),t}function iI(n,e){const t={},i=f(n,["uri"]);i!=null&&m(t,["gcsUri"],i);const r=f(n,["videoBytes"]);r!=null&&m(t,["bytesBase64Encoded"],Qr(r));const a=f(n,["mimeType"]);return a!=null&&m(t,["mimeType"],a),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function AV(n,e){const t={},i=f(n,["displayName"]);return e!==void 0&&i!=null&&m(e,["displayName"],i),t}function wV(n){const e={},t=f(n,["config"]);return t!=null&&AV(t,e),e}function CV(n,e){const t={},i=f(n,["force"]);return e!==void 0&&i!=null&&m(e,["_query","force"],i),t}function IV(n){const e={},t=f(n,["name"]);t!=null&&m(e,["_url","name"],t);const i=f(n,["config"]);return i!=null&&CV(i,e),e}function bV(n){const e={},t=f(n,["name"]);return t!=null&&m(e,["_url","name"],t),e}function RV(n,e){const t={},i=f(n,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["customMetadata"],a)}const r=f(n,["chunkingConfig"]);return e!==void 0&&r!=null&&m(e,["chunkingConfig"],r),t}function xV(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const i=f(n,["metadata"]);i!=null&&m(e,["metadata"],i);const r=f(n,["done"]);r!=null&&m(e,["done"],r);const a=f(n,["error"]);a!=null&&m(e,["error"],a);const u=f(n,["response"]);return u!=null&&m(e,["response"],MV(u)),e}function NV(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&m(e,["_url","file_search_store_name"],t);const i=f(n,["fileName"]);i!=null&&m(e,["fileName"],i);const r=f(n,["config"]);return r!=null&&RV(r,e),e}function MV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&m(e,["parent"],i);const r=f(n,["documentName"]);return r!=null&&m(e,["documentName"],r),e}function DV(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),t}function PV(n){const e={},t=f(n,["config"]);return t!=null&&DV(t,e),e}function kV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const r=f(n,["fileSearchStores"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["fileSearchStores"],a)}return e}function sI(n,e){const t={},i=f(n,["mimeType"]);e!==void 0&&i!=null&&m(e,["mimeType"],i);const r=f(n,["displayName"]);e!==void 0&&r!=null&&m(e,["displayName"],r);const a=f(n,["customMetadata"]);if(e!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(p=>p)),m(e,["customMetadata"],d)}const u=f(n,["chunkingConfig"]);return e!==void 0&&u!=null&&m(e,["chunkingConfig"],u),t}function VV(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&m(e,["_url","file_search_store_name"],t);const i=f(n,["config"]);return i!=null&&sI(i,e),e}function UV(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LV="Content-Type",OV="X-Server-Timeout",FV="User-Agent",Zg="x-goog-api-client",BV="1.42.0",qV=`google-genai-sdk/${BV}`,GV="v1beta1",HV="v1beta",zV=5,$V=[408,429,500,502,503,504];class JV{constructor(e){var t,i,r;this.clientOptions=Object.assign({},e),this.customBaseUrl=(t=e.httpOptions)===null||t===void 0?void 0:t.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const a={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const d=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!d?(a.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?a.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(a.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),a.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:GV}else{if(!this.clientOptions.apiKey)throw new ac({message:"API key must be set when using the Gemini API.",status:403});a.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:HV,a.baseUrl="https://generativelanguage.googleapis.com/"}a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const r=[this.getRequestUrlInternal(t)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e,t){return!(t.baseUrl&&t.baseUrlResourceScope===Kg.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,t),r=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[u,d]of Object.entries(e.queryParams))r.searchParams.append(u,String(d));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,t,r.toString(),e.abortSignal),this.unaryApiCall(r,a,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[r,a]of Object.entries(t))typeof a=="object"?i[r]=Object.assign(Object.assign({},i[r]),a):a!==void 0&&(i[r]=a);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,t),r=this.constructUrl(e.path,t,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,t,r.toString(),e.abortSignal),this.streamApiCall(r,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i,r){if(t&&t.timeout||r){const a=new AbortController,u=a.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const d=setTimeout(()=>a.abort(),t.timeout);d&&typeof d.unref=="function"&&d.unref()}r&&r.addEventListener("abort",()=>{a.abort()}),e.signal=u}return t&&t.extraBody!==null&&KV(e,t.extraBody),e.headers=await this.getHeadersInternal(t,i),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async r=>(await EA(r),new Yg(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async r=>(await EA(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return Di(this,arguments,function*(){var i;const r=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),a=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let u="";const d="data:",p=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:h,value:_}=yield Ve(r.read());if(h){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const T=a.decode(_,{stream:!0});try{const M=JSON.parse(T);if("error"in M){const U=JSON.parse(JSON.stringify(M.error)),P=U.status,$=U.code,H=`got status: ${P}. ${JSON.stringify(M)}`;if($>=400&&$<600)throw new ac({message:H,status:$})}}catch(M){if(M.name==="ApiError")throw M}u+=T;let E=-1,C=0;for(;;){E=-1,C=0;for(const P of p){const $=u.indexOf(P);$!==-1&&(E===-1||$<E)&&(E=$,C=P.length)}if(E===-1)break;const M=u.substring(0,E);u=u.substring(E+C);const U=M.trim();if(U.startsWith(d)){const P=U.substring(d.length).trim();try{const $=new Response(P,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ve(new Yg($))}catch($){throw new Error(`exception parsing stream chunk ${P}. ${$}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,t){var i;if(!this.clientOptions.httpOptions||!this.clientOptions.httpOptions.retryOptions)return fetch(e,t);const r=this.clientOptions.httpOptions.retryOptions;return VM(async()=>{const u=await fetch(e,t);if(u.ok)return u;throw $V.includes(u.status)?new Error(`Retryable HTTP Error: ${u.statusText}`):new UC.AbortError(`Non-retryable exception ${u.statusText} sending request`)},{retries:((i=r.attempts)!==null&&i!==void 0?i:zV)-1})}getDefaultHeaders(){const e={},t=qV+" "+this.clientOptions.userAgentExtra;return e[FV]=t,e[Zg]=t,e[LV]="application/json",e}async getHeadersInternal(e,t){const i=new Headers;if(e&&e.headers){for(const[r,a]of Object.entries(e.headers))i.append(r,a);e.timeout&&e.timeout>0&&i.append(OV,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,t),i}getFileName(e){var t;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(t=i.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),i}async uploadFile(e,t){var i;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const a=this.clientOptions.uploader,u=await a.stat(e);r.sizeBytes=String(u.size);const d=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:u.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=d;const p={file:r},h=this.getFileName(e),_=pe("upload/v1beta/files",p._url),T=await this.fetchUploadUrl(_,r.sizeBytes,r.mimeType,h,p,t==null?void 0:t.httpOptions);return a.upload(e,T,this)}async uploadFileToFileSearchStore(e,t,i){var r;const a=this.clientOptions.uploader,u=await a.stat(t),d=String(u.size),p=(r=i==null?void 0:i.mimeType)!==null&&r!==void 0?r:u.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,_=this.getFileName(t),T={};i!=null&&sI(i,T);const E=await this.fetchUploadUrl(h,d,p,_,T,i==null?void 0:i.httpOptions);return a.uploadToFileSearchStore(t,E,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,i,r,a,u){var d;let p={};u?p=u:p={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${i}`},r?{"X-Goog-Upload-File-Name":r}:{})};const h=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:p});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const _=(d=h==null?void 0:h.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(_===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return _}}async function EA(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(i);throw t>=400&&t<600?new ac({message:r,status:t}):new Error(r)}}function KV(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const a=JSON.parse(n.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))t=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,u){const d=Object.assign({},a);for(const p in u)if(Object.prototype.hasOwnProperty.call(u,p)){const h=u[p],_=d[p];h&&typeof h=="object"&&!Array.isArray(h)&&_&&typeof _=="object"&&!Array.isArray(_)?d[p]=i(_,h):(_&&h&&typeof _!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof _}, New type: ${typeof h}. Overwriting.`),d[p]=h)}return d}const r=i(t,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const YV="mcp_used/unknown";let WV=!1;function rI(n){for(const e of n)if(QV(e)||typeof e=="object"&&"inputSchema"in e)return!0;return WV}function oI(n){var e;const t=(e=n[Zg])!==null&&e!==void 0?e:"";n[Zg]=(t+` ${YV}`).trimStart()}function QV(n){return n!==null&&typeof n=="object"&&n instanceof t_}function XV(n){return Di(this,arguments,function*(t,i=100){let r,a=0;for(;a<i;){const u=yield Ve(t.listTools({cursor:r}));for(const d of u.tools)yield yield Ve(d),a++;if(!u.nextCursor)break;r=u.nextCursor}})}class t_{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new t_(e,t)}async initialize(){var e,t,i,r;if(this.mcpTools.length>0)return;const a={},u=[];for(const _ of this.mcpClients)try{for(var d=!0,p=(t=void 0,Pi(XV(_))),h;h=await p.next(),e=h.done,!e;d=!0){r=h.value,d=!1;const T=r;u.push(T);const E=T.name;if(a[E])throw new Error(`Duplicate function name ${E} found in MCP tools. Please ensure function names are unique.`);a[E]=_}}catch(T){t={error:T}}finally{try{!d&&!e&&(i=p.return)&&await i.call(p)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),AD(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const u=await r.callTool({name:i.name,arguments:i.args},void 0,a);t.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function jV(n,e,t){const i=new mD;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data),Object.assign(i,r),e(i)}class ZV{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),u=nU(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),p=`${r}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${d}`;let h=()=>{};const _=new Promise(z=>{h=z}),T=e.callbacks,E=function(){h({})},C=this.apiClient,M={onopen:E,onmessage:z=>{jV(C,T.onmessage,z)},onerror:(t=T==null?void 0:T.onerror)!==null&&t!==void 0?t:function(z){},onclose:(i=T==null?void 0:T.onclose)!==null&&i!==void 0?i:function(z){}},U=this.webSocketFactory.create(p,tU(u),M);U.connect(),await _;const H={setup:{model:it(this.apiClient,e.model)}};return U.send(JSON.stringify(H)),new eU(U,this.apiClient)}}class eU{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=Ak(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=Sk(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Wa.PLAY)}pause(){this.sendPlaybackControl(Wa.PAUSE)}stop(){this.sendPlaybackControl(Wa.STOP)}resetContext(){this.sendPlaybackControl(Wa.RESET_CONTEXT)}close(){this.conn.close()}}function tU(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function nU(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const iU="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function sU(n,e,t){const i=new pD;let r;t.data instanceof Blob?r=await t.data.text():t.data instanceof ArrayBuffer?r=new TextDecoder().decode(t.data):r=t.data;const a=JSON.parse(r);if(n.isVertexAI()){const u=Ik(a);Object.assign(i,u)}else Object.assign(i,a);e(i)}class rU{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new ZV(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,r,a,u,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let _;const T=this.apiClient.getHeaders();e.config&&e.config.tools&&rI(e.config.tools)&&oI(T);const E=uU(T);if(this.apiClient.isVertexAI()){const x=this.apiClient.getProject(),L=this.apiClient.getLocation(),k=this.apiClient.getApiKey(),q=!!x&&!!L||!!k;this.apiClient.getCustomBaseUrl()&&!q?_=p:(_=`${p}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(E,_))}else{const x=this.apiClient.getApiKey();let L="BidiGenerateContent",k="key";x!=null&&x.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),L="BidiGenerateContentConstrained",k="access_token"),_=`${p}/ws/google.ai.generativelanguage.${h}.GenerativeService.${L}?${k}=${x}`}let C=()=>{};const M=new Promise(x=>{C=x}),U=e.callbacks,P=function(){var x;(x=U==null?void 0:U.onopen)===null||x===void 0||x.call(U),C({})},$=this.apiClient,H={onopen:P,onmessage:x=>{sU($,U.onmessage,x)},onerror:(t=U==null?void 0:U.onerror)!==null&&t!==void 0?t:function(x){},onclose:(i=U==null?void 0:U.onclose)!==null&&i!==void 0?i:function(x){}},z=this.webSocketFactory.create(_,lU(E),H);z.connect(),await M;let X=it(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&X.startsWith("publishers/")){const x=this.apiClient.getProject(),L=this.apiClient.getLocation();x&&L&&(X=`projects/${x}/locations/${L}/`+X)}let ue={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Wf.AUDIO]}:e.config.responseModalities=[Wf.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const W=(d=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[],N=[];for(const x of W)if(this.isCallableTool(x)){const L=x;N.push(await L.tool())}else N.push(x);N.length>0&&(e.config.tools=N);const D={model:X,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?ue=Ek(this.apiClient,D):ue=Tk(this.apiClient,D),delete ue.config,z.send(JSON.stringify(ue)),new aU(z,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const oU={turnComplete:!0};class aU{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=Xn(t.turns),e.isVertexAI()||(i=i.map(r=>_c(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(iU)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},oU),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:Ck(e)}:t={realtimeInput:wk(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function lU(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function uU(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const SA=10;function AA(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(ja(u)){r=!0;break}if(!r)return!0;const a=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function ja(n){return"callTool"in n&&typeof n.callTool=="function"}function cU(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>ja(r)))!==null&&i!==void 0?i:!1}function wA(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((i,r)=>{if(ja(i))return;const a=i;a.functionDeclarations&&a.functionDeclarations.length>0&&t.push(r)}),t}function CA(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let dU=class extends Ws{constructor(e){super(),this.apiClient=e,this.embedContent=async t=>{if(!this.apiClient.isVertexAI())return await this.embedContentInternal(t);if(t.model.includes("gemini")&&t.model!=="gemini-embedding-001"||t.model.includes("maas")){const r=Xn(t.contents);if(r.length>1)throw new Error("The embedContent API for this model only supports one content at a time.");const a=Object.assign(Object.assign({},t),{content:r[0],embeddingApiType:Qf.EMBED_CONTENT});return await this.embedContentInternal(a)}else{const r=Object.assign(Object.assign({},t),{embeddingApiType:Qf.PREDICT});return await this.embedContentInternal(r)}},this.generateContent=async t=>{var i,r,a,u,d;const p=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!cU(t)||AA(t.config))return await this.generateContentInternal(p);const h=wA(t);if(h.length>0){const U=h.map(P=>`tools[${P}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${U}.`)}let _,T;const E=Xn(p.contents),C=(a=(r=(i=p.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&a!==void 0?a:SA;let M=0;for(;M<C&&(_=await this.generateContentInternal(p),!(!_.functionCalls||_.functionCalls.length===0));){const U=_.candidates[0].content,P=[];for(const $ of(d=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[])if(ja($)){const z=await $.callTool(_.functionCalls);P.push(...z)}M++,T={role:"user",parts:P},p.contents=Xn(p.contents),p.contents.push(U),p.contents.push(T),CA(p.config)&&(E.push(U),E.push(T))}return CA(p.config)&&(_.automaticFunctionCallingHistory=E),_},this.generateContentStream=async t=>{var i,r,a,u,d;if(this.maybeMoveToResponseJsonSchem(t),AA(t.config)){const T=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(T)}const p=wA(t);if(p.length>0){const T=p.map(E=>`tools[${E}]`).join(", ");throw new Error(`Incompatible tools found at ${T}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(a=(r=(i=t==null?void 0:t.config)===null||i===void 0?void 0:i.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,_=(d=(u=t==null?void 0:t.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(h&&!_)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var r;let a;const u=[];if(i!=null&&i.generatedImages)for(const p of i.generatedImages)p&&(p!=null&&p.safetyAttributes)&&((r=p==null?void 0:p.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?a=p==null?void 0:p.safetyAttributes:u.push(p);let d;return a?d={generatedImages:u,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:d={generatedImages:u,sdkHttpResponse:i.sdkHttpResponse},d}),this.list=async t=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new zo(zs.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(u),u)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async t=>{var i,r,a,u,d,p;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=t.video)===null||i===void 0)&&i.uri&&(!((r=t.video)===null||r===void 0)&&r.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(a=t.source)===null||a===void 0?void 0:a.video)===null||u===void 0)&&u.uri&&(!((p=(d=t.source)===null||d===void 0?void 0:d.video)===null||p===void 0)&&p.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,r;const a=(t=e.config)===null||t===void 0?void 0:t.tools;if(!a)return e;const u=await Promise.all(a.map(async p=>ja(p)?await p.tool():p)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(d.config.tools=u,e.config&&e.config.tools&&rI(e.config.tools)){const p=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let h=Object.assign({},p);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),oI(h),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return d}async initAfcToolsMap(e){var t,i,r;const a=new Map;for(const u of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(ja(u)){const d=u,p=await d.tool();for(const h of(r=p.functionDeclarations)!==null&&r!==void 0?r:[]){if(!h.name)throw new Error("Function declaration name is required.");if(a.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);a.set(h.name,d)}}return a}async processAfcStream(e){var t,i,r;const a=(r=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:SA;let u=!1,d=0;const p=await this.initAfcToolsMap(e);return(function(h,_,T){return Di(this,arguments,function*(){for(var E,C,M,U,P,$;d<a;){u&&(d++,u=!1);const ue=yield Ve(h.processParamsMaybeAddMcpUsage(T)),W=yield Ve(h.generateContentStreamInternal(ue)),N=[],D=[];try{for(var H=!0,z=(C=void 0,Pi(W)),X;X=yield Ve(z.next()),E=X.done,!E;H=!0){U=X.value,H=!1;const x=U;if(yield yield Ve(x),x.candidates&&(!((P=x.candidates[0])===null||P===void 0)&&P.content)){D.push(x.candidates[0].content);for(const L of($=x.candidates[0].content.parts)!==null&&$!==void 0?$:[])if(d<a&&L.functionCall){if(!L.functionCall.name)throw new Error("Function call name was not returned by the model.");if(_.has(L.functionCall.name)){const k=yield Ve(_.get(L.functionCall.name).callTool([L.functionCall]));N.push(...k)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${_.keys()}, mising tool: ${L.functionCall.name}`)}}}}catch(x){C={error:x}}finally{try{!H&&!E&&(M=z.return)&&(yield Ve(M.call(z)))}finally{if(C)throw C.error}}if(N.length>0){u=!0;const x=new Pu;x.candidates=[{content:{role:"user",parts:N}}],yield yield Ve(x);const L=[];L.push(...D),L.push({role:"user",parts:N});const k=Xn(T.contents).concat(L);T.contents=k}else break}})})(this,p,e)}async generateContentInternal(e){var t,i,r,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=_A(this.apiClient,e);return d=pe("{model}:generateContent",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=TA(_),E=new Pu;return Object.assign(E,T),E})}else{const h=yA(this.apiClient,e);return d=pe("{model}:generateContent",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=vA(_),E=new Pu;return Object.assign(E,T),E})}}async generateContentStreamInternal(e){var t,i,r,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=_A(this.apiClient,e);return d=pe("{model}:streamGenerateContent?alt=sse",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(T){return Di(this,arguments,function*(){var E,C,M,U;try{for(var P=!0,$=Pi(T),H;H=yield Ve($.next()),E=H.done,!E;P=!0){U=H.value,P=!1;const z=U,X=TA(yield Ve(z.json()),e);X.sdkHttpResponse={headers:z.headers};const ue=new Pu;Object.assign(ue,X),yield yield Ve(ue)}}catch(z){C={error:z}}finally{try{!P&&!E&&(M=$.return)&&(yield Ve(M.call($)))}finally{if(C)throw C.error}}})})}else{const h=yA(this.apiClient,e);return d=pe("{model}:streamGenerateContent?alt=sse",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),u.then(function(T){return Di(this,arguments,function*(){var E,C,M,U;try{for(var P=!0,$=Pi(T),H;H=yield Ve($.next()),E=H.done,!E;P=!0){U=H.value,P=!1;const z=U,X=vA(yield Ve(z.json()),e);X.sdkHttpResponse={headers:z.headers};const ue=new Pu;Object.assign(ue,X),yield yield Ve(ue)}}catch(z){C={error:z}}finally{try{!P&&!E&&(M=$.return)&&(yield Ve(M.call($)))}finally{if(C)throw C.error}}})})}}async embedContentInternal(e){var t,i,r,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=i2(this.apiClient,e,e),_=CD(e.model)?"{model}:embedContent":"{model}:predict";return d=pe(_,h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(T=>T.json().then(E=>{const C=E;return C.sdkHttpResponse={headers:T.headers},C})),u.then(T=>{const E=r2(T,e),C=new eA;return Object.assign(C,E),C})}else{const h=n2(this.apiClient,e);return d=pe("{model}:batchEmbedContents",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=s2(_),E=new eA;return Object.assign(E,T),E})}}async generateImagesInternal(e){var t,i,r,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=g2(this.apiClient,e);return d=pe("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=_2(_),E=new tA;return Object.assign(E,T),E})}else{const h=m2(this.apiClient,e);return d=pe("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=y2(_),E=new tA;return Object.assign(E,T),E})}}async editImageInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const d=jk(this.apiClient,e);return a=pe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),r.then(p=>{const h=Zk(p),_=new nD;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const d=gV(this.apiClient,e);return a=pe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),r.then(p=>{const h=yV(p),_=new iD;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const d=X2(this.apiClient,e);return a=pe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>{const h=j2(p),_=new sD;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const d=sV(this.apiClient,e);return a=pe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>{const h=rV(p),_=new rD;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,r,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=V2(this.apiClient,e);return d=pe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>jg(_))}else{const h=k2(this.apiClient,e);return d=pe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>Xg(_))}}async listInternal(e){var t,i,r,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=z2(this.apiClient,e);return d=pe("{models_url}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=J2(_),E=new nA;return Object.assign(E,T),E})}else{const h=H2(this.apiClient,e);return d=pe("{models_url}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=$2(_),E=new nA;return Object.assign(E,T),E})}}async update(e){var t,i,r,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=pV(this.apiClient,e);return d=pe("{model}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>jg(_))}else{const h=hV(this.apiClient,e);return d=pe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>Xg(_))}}async delete(e){var t,i,r,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=Yk(this.apiClient,e);return d=pe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=Qk(_),E=new iA;return Object.assign(E,T),E})}else{const h=Kk(this.apiClient,e);return d=pe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=Wk(_),E=new iA;return Object.assign(E,T),E})}}async countTokens(e){var t,i,r,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=zk(this.apiClient,e);return d=pe("{model}:countTokens",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=Jk(_),E=new sA;return Object.assign(E,T),E})}else{const h=Hk(this.apiClient,e);return d=pe("{model}:countTokens",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=$k(_),E=new sA;return Object.assign(E,T),E})}}async computeTokens(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const d=Uk(this.apiClient,e);return a=pe("{model}:computeTokens",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),r.then(p=>{const h=Lk(p),_=new oD;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,r,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=w2(this.apiClient,e);return d=pe("{model}:predictLongRunning",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>{const T=S2(_),E=new Xf;return Object.assign(E,T),E})}else{const h=A2(this.apiClient,e);return d=pe("{model}:predictLongRunning",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>{const T=E2(_),E=new Xf;return Object.assign(E,T),E})}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fU extends Ws{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,r,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=QM(e);return d=pe("{operationName}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u}else{const h=WM(e);return d=pe("{operationName}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u}}async fetchPredictVideosOperationInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const d=GM(e);return a=pe("{resourceName}:fetchPredictOperation",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hU(n){const e={},t=f(n,["data"]);if(t!=null&&m(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function pU(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>AU(a))),m(e,["parts"],r)}const i=f(n,["role"]);return i!=null&&m(e,["role"],i),e}function mU(n,e,t){const i={},r=f(e,["expireTime"]);t!==void 0&&r!=null&&m(t,["expireTime"],r);const a=f(e,["newSessionExpireTime"]);t!==void 0&&a!=null&&m(t,["newSessionExpireTime"],a);const u=f(e,["uses"]);t!==void 0&&u!=null&&m(t,["uses"],u);const d=f(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&m(t,["bidiGenerateContentSetup"],SU(n,d));const p=f(e,["lockAdditionalFields"]);return t!==void 0&&p!=null&&m(t,["fieldMask"],p),i}function gU(n,e){const t={},i=f(e,["config"]);return i!=null&&m(t,["config"],mU(n,i,t)),t}function yU(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function _U(n){const e={},t=f(n,["id"]);t!=null&&m(e,["id"],t);const i=f(n,["args"]);i!=null&&m(e,["args"],i);const r=f(n,["name"]);if(r!=null&&m(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function vU(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function TU(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function EU(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig"],i);const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig","responseModalities"],r);const a=f(n,["temperature"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const h=f(n,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const _=f(n,["seed"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","seed"],_);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","speechConfig"],e_(T));const E=f(n,["thinkingConfig"]);e!==void 0&&E!=null&&m(e,["setup","generationConfig","thinkingConfig"],E);const C=f(n,["enableAffectiveDialog"]);e!==void 0&&C!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],C);const M=f(n,["systemInstruction"]);e!==void 0&&M!=null&&m(e,["setup","systemInstruction"],pU(nn(M)));const U=f(n,["tools"]);if(e!==void 0&&U!=null){let W=pl(U);Array.isArray(W)&&(W=W.map(N=>CU(hl(N)))),m(e,["setup","tools"],W)}const P=f(n,["sessionResumption"]);e!==void 0&&P!=null&&m(e,["setup","sessionResumption"],wU(P));const $=f(n,["inputAudioTranscription"]);e!==void 0&&$!=null&&m(e,["setup","inputAudioTranscription"],$);const H=f(n,["outputAudioTranscription"]);e!==void 0&&H!=null&&m(e,["setup","outputAudioTranscription"],H);const z=f(n,["realtimeInputConfig"]);e!==void 0&&z!=null&&m(e,["setup","realtimeInputConfig"],z);const X=f(n,["contextWindowCompression"]);e!==void 0&&X!=null&&m(e,["setup","contextWindowCompression"],X);const ue=f(n,["proactivity"]);if(e!==void 0&&ue!=null&&m(e,["setup","proactivity"],ue),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function SU(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["setup","model"],it(n,i));const r=f(e,["config"]);return r!=null&&m(t,["config"],EU(r,t)),t}function AU(n){const e={},t=f(n,["mediaResolution"]);t!=null&&m(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const r=f(n,["executableCode"]);r!=null&&m(e,["executableCode"],r);const a=f(n,["fileData"]);a!=null&&m(e,["fileData"],yU(a));const u=f(n,["functionCall"]);u!=null&&m(e,["functionCall"],_U(u));const d=f(n,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const p=f(n,["inlineData"]);p!=null&&m(e,["inlineData"],hU(p));const h=f(n,["text"]);h!=null&&m(e,["text"],h);const _=f(n,["thought"]);_!=null&&m(e,["thought"],_);const T=f(n,["thoughtSignature"]);T!=null&&m(e,["thoughtSignature"],T);const E=f(n,["videoMetadata"]);return E!=null&&m(e,["videoMetadata"],E),e}function wU(n){const e={},t=f(n,["handle"]);if(t!=null&&m(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function CU(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&m(e,["computerUse"],t);const i=f(n,["fileSearch"]);i!=null&&m(e,["fileSearch"],i);const r=f(n,["codeExecution"]);if(r!=null&&m(e,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(n,["functionDeclarations"]);if(a!=null){let _=a;Array.isArray(_)&&(_=_.map(T=>T)),m(e,["functionDeclarations"],_)}const u=f(n,["googleMaps"]);u!=null&&m(e,["googleMaps"],vU(u));const d=f(n,["googleSearch"]);d!=null&&m(e,["googleSearch"],TU(d));const p=f(n,["googleSearchRetrieval"]);p!=null&&m(e,["googleSearchRetrieval"],p);const h=f(n,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IU(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(a=>`${t}.${a}`);e.push(...r)}else e.push(t)}return e.join(",")}function bU(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(n.bidiGenerateContentSetup=a,t=a):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(t){const a=IU(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?n.fieldMask=a:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];r.length>0&&(d=r.map(h=>u.includes(h)?`generationConfig.${h}`:h));const p=[];a&&p.push(a),d.length>0&&p.push(...d),p.length>0?n.fieldMask=p.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class RU extends Ws{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=gU(this.apiClient,e);a=pe("auth_tokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const p=bU(d,e.config);return r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xU(n,e){const t={},i=f(n,["force"]);return e!==void 0&&i!=null&&m(e,["_query","force"],i),t}function NU(n){const e={},t=f(n,["name"]);t!=null&&m(e,["_url","name"],t);const i=f(n,["config"]);return i!=null&&xU(i,e),e}function MU(n){const e={},t=f(n,["name"]);return t!=null&&m(e,["_url","name"],t),e}function DU(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),t}function PU(n){const e={},t=f(n,["parent"]);t!=null&&m(e,["_url","parent"],t);const i=f(n,["config"]);return i!=null&&DU(i,e),e}function kU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const r=f(n,["documents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class VU extends Ws{constructor(e){super(),this.apiClient=e,this.list=async t=>new zo(zs.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:t.parent,config:i.config}),await this.listInternal(t),t)}async get(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=MU(e);return a=pe("{name}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>p)}}async delete(e){var t,i;let r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=NU(e);r=pe("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=PU(e);return a=pe("{parent}/documents",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>{const h=kU(p),_=new aD;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class UU extends Ws{constructor(e,t=new VU(e)){super(),this.apiClient=e,this.documents=t,this.list=async(i={})=>new zo(zs.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=wV(e);return a=pe("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>p)}}async get(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=bV(e);return a=pe("{name}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>p)}}async delete(e){var t,i;let r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=IV(e);r=pe("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=PV(e);return a=pe("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>{const h=kV(p),_=new lD;return Object.assign(_,h),_})}}async uploadToFileSearchStoreInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=VV(e);return a=pe("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>{const h=UV(p),_=new uD;return Object.assign(_,h),_})}}async importFile(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=NV(e);return a=pe("{file_search_store_name}:importFile",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>{const h=xV(p),_=new Wy;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let aI=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return aI=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^t()&15>>+i/4).toString(16))};const LU=()=>aI();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ey(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const ty=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pi extends Error{}let mi=class ny extends pi{constructor(e,t,i,r){super(`${ny.makeMessage(e,t,i)}`),this.status=e,this.headers=r,this.error=t}static makeMessage(e,t,i){const r=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):i;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,i,r){if(!e||!r)return new Ph({message:i,cause:ty(t)});const a=t;return e===400?new uI(e,a,i,r):e===401?new cI(e,a,i,r):e===403?new dI(e,a,i,r):e===404?new fI(e,a,i,r):e===409?new hI(e,a,i,r):e===422?new pI(e,a,i,r):e===429?new mI(e,a,i,r):e>=500?new gI(e,a,i,r):new ny(e,a,i,r)}},iy=class extends mi{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}},Ph=class extends mi{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}},lI=class extends Ph{constructor({message:e}={}){super({message:e??"Request timed out."})}},uI=class extends mi{},cI=class extends mi{},dI=class extends mi{},fI=class extends mi{},hI=class extends mi{},pI=class extends mi{},mI=class extends mi{},gI=class extends mi{};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const OU=/^[a-z][a-z0-9+.-]*:/i,FU=n=>OU.test(n);let sy=n=>(sy=Array.isArray,sy(n));const BU=sy;let qU=BU;const IA=qU;function GU(n){if(!n)return!0;for(const e in n)return!1;return!0}function HU(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const zU=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new pi(`${n} must be an integer`);if(e<0)throw new pi(`${n} must be a positive integer`);return e},$U=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const JU=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qa="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KU(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const YU=()=>{var n,e,t,i,r;const a=KU();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":qa,"X-Stainless-OS":RA(Deno.build.os),"X-Stainless-Arch":bA(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":qa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":qa,"X-Stainless-OS":RA((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":bA((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const u=WU();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":qa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":qa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function WU(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const i=t.exec(navigator.userAgent);if(i){const r=i[1]||0,a=i[2]||0,u=i[3]||0;return{browser:e,version:`${r}.${a}.${u}`}}}return null}const bA=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",RA=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let cf;const QU=()=>cf??(cf=YU());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function XU(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function yI(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function jU(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return yI({start(){},async pull(t){const{done:i,value:r}=await e.next();i?t.close():t.enqueue(r)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function _I(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function ZU(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const i=n.getReader(),r=i.cancel();i.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const eL=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vI=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function vg(n,e,t){return vI(),new File(n,e??"unknown_file",t)}function tL(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const nL=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const TI=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",iL=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&TI(n),sL=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function rL(n,e,t){if(vI(),n=await n,iL(n))return n instanceof File?n:vg([await n.arrayBuffer()],n.name);if(sL(n)){const r=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),vg(await ry(r),e,t)}const i=await ry(n);if(e||(e=tL(n)),!(t!=null&&t.type)){const r=i.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof r=="string"&&(t=Object.assign(Object.assign({},t),{type:r}))}return vg(i,e,t)}async function ry(n){var e,t,i,r,a;let u=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)u.push(n);else if(TI(n))u.push(n instanceof Blob?n:await n.arrayBuffer());else if(nL(n))try{for(var d=!0,p=Pi(n),h;h=await p.next(),e=h.done,!e;d=!0){r=h.value,d=!1;const _=r;u.push(...await ry(_))}}catch(_){t={error:_}}finally{try{!d&&!e&&(i=p.return)&&await i.call(p)}finally{if(t)throw t.error}}else{const _=(a=n==null?void 0:n.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof n}${_?`; constructor: ${_}`:""}${oL(n)}`)}return u}function oL(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let EI=class{constructor(e){this._client=e}};EI._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function SI(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const xA=Object.freeze(Object.create(null)),aL=(n=SI)=>(function(t,...i){if(t.length===1)return t[0];let r=!1;const a=[],u=t.reduce((_,T,E)=>{var C,M,U;/[?#]/.test(T)&&(r=!0);const P=i[E];let $=(r?encodeURIComponent:n)(""+P);return E!==i.length&&(P==null||typeof P=="object"&&P.toString===((U=Object.getPrototypeOf((M=Object.getPrototypeOf((C=P.hasOwnProperty)!==null&&C!==void 0?C:xA))!==null&&M!==void 0?M:xA))===null||U===void 0?void 0:U.toString))&&($=P+"",a.push({start:_.length+T.length,length:$.length,error:`Value of type ${Object.prototype.toString.call(P).slice(8,-1)} is not a valid path parameter`})),_+T+(E===i.length?"":$)},""),d=u.split(/[?#]/,1)[0],p=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=p.exec(d))!==null;)a.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(a.sort((_,T)=>_.start-T.start),a.length>0){let _=0;const T=a.reduce((E,C)=>{const M=" ".repeat(C.start-_),U="^".repeat(C.length);return _=C.start+C.length,E+M+U},"");throw new pi(`Path parameters result in path with invalid segments:
${a.map(E=>E.error).join(`
`)}
${u}
${T}`)}return u}),df=aL(SI);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class AI extends EI{create(e,t){var i;const{api_version:r=this._client.apiVersion}=e,a=Zf(e,["api_version"]);if("model"in a&&"agent_config"in a)throw new pi("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new pi("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(df`/${r}/interactions`,Object.assign(Object.assign({body:a},t),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,t={},i){const{api_version:r=this._client.apiVersion}=t??{};return this._client.delete(df`/${r}/interactions/${e}`,i)}cancel(e,t={},i){const{api_version:r=this._client.apiVersion}=t??{};return this._client.post(df`/${r}/interactions/${e}/cancel`,i)}get(e,t={},i){var r;const a=t??{},{api_version:u=this._client.apiVersion}=a,d=Zf(a,["api_version"]);return this._client.get(df`/${u}/interactions/${e}`,Object.assign(Object.assign({query:d},i),{stream:(r=t==null?void 0:t.stream)!==null&&r!==void 0?r:!1}))}}AI._key=Object.freeze(["interactions"]);class wI extends AI{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lL(n){let e=0;for(const r of n)e+=r.length;const t=new Uint8Array(e);let i=0;for(const r of n)t.set(r,i),i+=r.length;return t}let ff;function n_(n){let e;return(ff??(e=new globalThis.TextEncoder,ff=e.encode.bind(e)))(n)}let hf;function NA(n){let e;return(hf??(e=new globalThis.TextDecoder,hf=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let kh=class{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?n_(e):e;this.buffer=lL([this.buffer,t]);const i=[];let r;for(;(r=uL(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){i.push(NA(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,u=NA(this.buffer.subarray(0,a));i.push(u),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}};kh.NEWLINE_CHARS=new Set([`
`,"\r"]);kh.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function uL(n,e){for(let r=e??0;r<n.length;r++){if(n[r]===10)return{preceding:r,index:r+1,carriage:!1};if(n[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function cL(n){for(let i=0;i<n.length-1;i++){if(n[i]===10&&n[i+1]===10||n[i]===13&&n[i+1]===13)return i+2;if(n[i]===13&&n[i+1]===10&&i+3<n.length&&n[i+2]===13&&n[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const eh={off:0,error:200,warn:300,info:400,debug:500},MA=(n,e,t)=>{if(n){if(HU(eh,n))return n;In(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(eh))}`)}};function Lu(){}function pf(n,e,t){return!e||eh[n]>eh[t]?Lu:e[n].bind(e)}const dL={error:Lu,warn:Lu,info:Lu,debug:Lu};let DA=new WeakMap;function In(n){var e;const t=n.logger,i=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return dL;const r=DA.get(t);if(r&&r[0]===i)return r[1];const a={error:pf("error",t,i),warn:pf("warn",t,i),info:pf("info",t,i),debug:pf("debug",t,i)};return DA.set(t,[i,a]),a}const Ro=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let fL=class Ou{constructor(e,t,i){this.iterator=e,this.controller=t,this.client=i}static fromSSEResponse(e,t,i){let r=!1;const a=i?In(i):console;function u(){return Di(this,arguments,function*(){var p,h,_,T;if(r)throw new pi("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let E=!1;try{try{for(var C=!0,M=Pi(hL(e,t)),U;U=yield Ve(M.next()),p=U.done,!p;C=!0){T=U.value,C=!1;const P=T;if(!E)if(P.data.startsWith("[DONE]")){E=!0;continue}else try{yield yield Ve(JSON.parse(P.data))}catch($){throw a.error("Could not parse message into JSON:",P.data),a.error("From chunk:",P.raw),$}}}catch(P){h={error:P}}finally{try{!C&&!p&&(_=M.return)&&(yield Ve(_.call(M)))}finally{if(h)throw h.error}}E=!0}catch(P){if(ey(P))return yield Ve(void 0);throw P}finally{E||t.abort()}})}return new Ou(u,t,i)}static fromReadableStream(e,t,i){let r=!1;function a(){return Di(this,arguments,function*(){var p,h,_,T;const E=new kh,C=_I(e);try{for(var M=!0,U=Pi(C),P;P=yield Ve(U.next()),p=P.done,!p;M=!0){T=P.value,M=!1;const $=T;for(const H of E.decode($))yield yield Ve(H)}}catch($){h={error:$}}finally{try{!M&&!p&&(_=U.return)&&(yield Ve(_.call(U)))}finally{if(h)throw h.error}}for(const $ of E.flush())yield yield Ve($)})}function u(){return Di(this,arguments,function*(){var p,h,_,T;if(r)throw new pi("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let E=!1;try{try{for(var C=!0,M=Pi(a()),U;U=yield Ve(M.next()),p=U.done,!p;C=!0){T=U.value,C=!1;const P=T;E||P&&(yield yield Ve(JSON.parse(P)))}}catch(P){h={error:P}}finally{try{!C&&!p&&(_=M.return)&&(yield Ve(_.call(M)))}finally{if(h)throw h.error}}E=!0}catch(P){if(ey(P))return yield Ve(void 0);throw P}finally{E||t.abort()}})}return new Ou(u,t,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],i=this.iterator(),r=a=>({next:()=>{if(a.length===0){const u=i.next();e.push(u),t.push(u)}return a.shift()}});return[new Ou(()=>r(e),this.controller,this.client),new Ou(()=>r(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return yI({async start(){t=e[Symbol.asyncIterator]()},async pull(i){try{const{value:r,done:a}=await t.next();if(a)return i.close();const u=n_(JSON.stringify(r)+`
`);i.enqueue(u)}catch(r){i.error(r)}},async cancel(){var i;await((i=t.return)===null||i===void 0?void 0:i.call(t))}})}};function hL(n,e){return Di(this,arguments,function*(){var i,r,a,u;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new pi("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new pi("Attempted to iterate over a response with no body");const d=new mL,p=new kh,h=_I(n.body);try{for(var _=!0,T=Pi(pL(h)),E;E=yield Ve(T.next()),i=E.done,!i;_=!0){u=E.value,_=!1;const C=u;for(const M of p.decode(C)){const U=d.decode(M);U&&(yield yield Ve(U))}}}catch(C){r={error:C}}finally{try{!_&&!i&&(a=T.return)&&(yield Ve(a.call(T)))}finally{if(r)throw r.error}}for(const C of p.flush()){const M=d.decode(C);M&&(yield yield Ve(M))}})}function pL(n){return Di(this,arguments,function*(){var t,i,r,a;let u=new Uint8Array;try{for(var d=!0,p=Pi(n),h;h=yield Ve(p.next()),t=h.done,!t;d=!0){a=h.value,d=!1;const _=a;if(_==null)continue;const T=_ instanceof ArrayBuffer?new Uint8Array(_):typeof _=="string"?n_(_):_;let E=new Uint8Array(u.length+T.length);E.set(u),E.set(T,u.length),u=E;let C;for(;(C=cL(u))!==-1;)yield yield Ve(u.slice(0,C)),u=u.slice(C)}}catch(_){i={error:_}}finally{try{!d&&!t&&(r=p.return)&&(yield Ve(r.call(p)))}finally{if(i)throw i.error}}u.length>0&&(yield yield Ve(u))})}let mL=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,i,r]=gL(e,":");return r.startsWith(" ")&&(r=r.substring(1)),t==="event"?this.event=r:t==="data"&&this.data.push(r),null}};function gL(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function yL(n,e){const{response:t,requestLogID:i,retryOfRequestLogID:r,startTime:a}=e,u=await(async()=>{var d;if(e.options.stream)return In(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):fL.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const p=t.headers.get("content-type"),h=(d=p==null?void 0:p.split(";")[0])===null||d===void 0?void 0:d.trim();return(h==null?void 0:h.includes("application/json"))||(h==null?void 0:h.endsWith("+json"))?t.headers.get("content-length")==="0"?void 0:await t.json():await t.text()})();return In(n).debug(`[${i}] response parsed`,Ro({retryOfRequestLogID:r,url:t.url,status:t.status,body:u,durationMs:Date.now()-a})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let _L=class CI extends Promise{constructor(e,t,i=yL){super(r=>{r(null)}),this.responsePromise=t,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new CI(this.client,this.responsePromise,async(t,i)=>e(await this.parseResponse(t,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const II=Symbol("brand.privateNullableHeaders");function*vL(n){if(!n)return;if(II in n){const{values:i,nulls:r}=n;yield*i.entries();for(const a of r)yield[a,null];return}let e=!1,t;n instanceof Headers?t=n.entries():IA(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let i of t){const r=i[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const a=IA(i[1])?i[1]:[i[1]];let u=!1;for(const d of a)d!==void 0&&(e&&!u&&(u=!0,yield[r,null]),yield[r,d])}}const ku=n=>{const e=new Headers,t=new Set;for(const i of n){const r=new Set;for(const[a,u]of vL(i)){const d=a.toLowerCase();r.has(d)||(e.delete(a),r.add(d)),u===null?(e.delete(a),t.add(d)):(e.append(a,u),t.delete(d))}}return{[II]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Tg=n=>{var e,t,i,r,a,u;if(typeof globalThis.process<"u")return(i=(t=(e=UM)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(u=(a=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||a===void 0?void 0:a.call(r,n))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var bI;class Vh{constructor(e){var t,i,r,a,u,d,p,{baseURL:h=Tg("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:_=(t=Tg("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:T="v1beta"}=e,E=Zf(e,["baseURL","apiKey","apiVersion"]);const C=Object.assign(Object.assign({apiKey:_,apiVersion:T},E),{baseURL:h||"https://generativelanguage.googleapis.com"});this.baseURL=C.baseURL,this.timeout=(i=C.timeout)!==null&&i!==void 0?i:Vh.DEFAULT_TIMEOUT,this.logger=(r=C.logger)!==null&&r!==void 0?r:console;const M="warn";this.logLevel=M,this.logLevel=(u=(a=MA(C.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:MA(Tg("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:M,this.fetchOptions=C.fetchOptions,this.maxRetries=(d=C.maxRetries)!==null&&d!==void 0?d:2,this.fetch=(p=C.fetch)!==null&&p!==void 0?p:XU(),this.encoder=eL,this._options=C,this.apiKey=_,this.apiVersion=T,this.clientAdapter=C.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=ku([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return ku([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return ku([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,i])=>typeof i<"u").map(([t,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(t)}=`;throw new pi(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${qa}`}defaultIdempotencyKey(){return`stainless-node-retry-${LU()}`}makeStatusError(e,t,i,r){return mi.generate(e,t,i,r)}buildURL(e,t,i){const r=!this.baseURLOverridden()&&i||this.baseURL,a=FU(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return GU(u)||(t=Object.assign(Object.assign({},u),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(a.search=this.stringifyQuery(t)),a.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:i}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,i){return this.request(Promise.resolve(i).then(r=>Object.assign({method:e,path:t},r)))}request(e,t=null){return new _L(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,i){var r,a,u;const d=await e,p=(r=d.maxRetries)!==null&&r!==void 0?r:this.maxRetries;t==null&&(t=p),await this.prepareOptions(d);const{req:h,url:_,timeout:T}=await this.buildRequest(d,{retryCount:p-t});await this.prepareRequest(h,{url:_,options:d});const E="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),C=i===void 0?"":`, retryOf: ${i}`,M=Date.now();if(In(this).debug(`[${E}] sending request`,Ro({retryOfRequestLogID:i,method:d.method,url:_,options:d,headers:h.headers})),!((a=d.signal)===null||a===void 0)&&a.aborted)throw new iy;const U=new AbortController,P=await this.fetchWithTimeout(_,h,T,U).catch(ty),$=Date.now();if(P instanceof globalThis.Error){const z=`retrying, ${t} attempts remaining`;if(!((u=d.signal)===null||u===void 0)&&u.aborted)throw new iy;const X=ey(P)||/timed? ?out/i.test(String(P)+("cause"in P?String(P.cause):""));if(t)return In(this).info(`[${E}] connection ${X?"timed out":"failed"} - ${z}`),In(this).debug(`[${E}] connection ${X?"timed out":"failed"} (${z})`,Ro({retryOfRequestLogID:i,url:_,durationMs:$-M,message:P.message})),this.retryRequest(d,t,i??E);throw In(this).info(`[${E}] connection ${X?"timed out":"failed"} - error; no more retries left`),In(this).debug(`[${E}] connection ${X?"timed out":"failed"} (error; no more retries left)`,Ro({retryOfRequestLogID:i,url:_,durationMs:$-M,message:P.message})),X?new lI:new Ph({cause:P})}const H=`[${E}${C}] ${h.method} ${_} ${P.ok?"succeeded":"failed"} with status ${P.status} in ${$-M}ms`;if(!P.ok){const z=await this.shouldRetry(P);if(t&&z){const x=`retrying, ${t} attempts remaining`;return await ZU(P.body),In(this).info(`${H} - ${x}`),In(this).debug(`[${E}] response error (${x})`,Ro({retryOfRequestLogID:i,url:P.url,status:P.status,headers:P.headers,durationMs:$-M})),this.retryRequest(d,t,i??E,P.headers)}const X=z?"error; no more retries left":"error; not retryable";In(this).info(`${H} - ${X}`);const ue=await P.text().catch(x=>ty(x).message),W=$U(ue),N=W?void 0:ue;throw In(this).debug(`[${E}] response error (${X})`,Ro({retryOfRequestLogID:i,url:P.url,status:P.status,headers:P.headers,message:N,durationMs:Date.now()-M})),this.makeStatusError(P.status,W,N,P.headers)}return In(this).info(H),In(this).debug(`[${E}] response start`,Ro({retryOfRequestLogID:i,url:P.url,status:P.status,headers:P.headers,durationMs:$-M})),{response:P,options:d,controller:U,requestLogID:E,retryOfRequestLogID:i,startTime:M}}async fetchWithTimeout(e,t,i,r){const a=t||{},{signal:u,method:d}=a,p=Zf(a,["signal","method"]),h=this._makeAbort(r);u&&u.addEventListener("abort",h,{once:!0});const _=setTimeout(h,i),T=globalThis.ReadableStream&&p.body instanceof globalThis.ReadableStream||typeof p.body=="object"&&p.body!==null&&Symbol.asyncIterator in p.body,E=Object.assign(Object.assign(Object.assign({signal:r.signal},T?{duplex:"half"}:{}),{method:"GET"}),p);d&&(E.method=d.toUpperCase());try{return await this.fetch.call(void 0,e,E)}finally{clearTimeout(_)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,i,r){var a;let u;const d=r==null?void 0:r.get("retry-after-ms");if(d){const h=parseFloat(d);Number.isNaN(h)||(u=h)}const p=r==null?void 0:r.get("retry-after");if(p&&!u){const h=parseFloat(p);Number.isNaN(h)?u=Date.parse(p)-Date.now():u=h*1e3}if(!(u&&0<=u&&u<60*1e3)){const h=(a=e.maxRetries)!==null&&a!==void 0?a:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(t,h)}return await JU(u),this.makeRequest(e,t-1,i)}calculateDefaultRetryTimeoutMillis(e,t){const a=t-e,u=Math.min(.5*Math.pow(2,a),8),d=1-Math.random()*.25;return u*d*1e3}async buildRequest(e,{retryCount:t=0}={}){var i,r,a;const u=Object.assign({},e),{method:d,path:p,query:h,defaultBaseURL:_}=u,T=this.buildURL(p,h,_);"timeout"in u&&zU("timeout",u.timeout),u.timeout=(i=u.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:E,body:C}=this.buildBody({options:u}),M=await this.buildHeaders({options:e,method:d,bodyHeaders:E,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:d,headers:M},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&C instanceof globalThis.ReadableStream&&{duplex:"half"}),C&&{body:C}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(a=u.fetchOptions)!==null&&a!==void 0?a:{}),url:T,timeout:u.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:i,retryCount:r}){let a={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let d=ku([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),QU()),this._options.defaultHeaders,i,e.headers,u]);return this.validateHeaders(d),d.values}_makeAbort(e){return()=>e.abort()}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=ku([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:jU(e)}:typeof e=="object"&&i.values.get("content-type")==="application/x-www-form-urlencoded"?{bodyHeaders:{"content-type":"application/x-www-form-urlencoded"},body:this.stringifyQuery(e)}:this.encoder({body:e,headers:i})}}Vh.DEFAULT_TIMEOUT=6e4;class sn extends Vh{constructor(){super(...arguments),this.interactions=new wI(this)}}bI=sn;sn.GeminiNextGenAPIClient=bI;sn.GeminiNextGenAPIClientError=pi;sn.APIError=mi;sn.APIConnectionError=Ph;sn.APIConnectionTimeoutError=lI;sn.APIUserAbortError=iy;sn.NotFoundError=fI;sn.ConflictError=hI;sn.RateLimitError=mI;sn.BadRequestError=uI;sn.AuthenticationError=cI;sn.InternalServerError=gI;sn.PermissionDeniedError=dI;sn.UnprocessableEntityError=pI;sn.toFile=rL;sn.Interactions=wI;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TL(n,e){const t={},i=f(n,["name"]);return i!=null&&m(t,["_url","name"],i),t}function EL(n,e){const t={},i=f(n,["name"]);return i!=null&&m(t,["_url","name"],i),t}function SL(n,e){const t={},i=f(n,["sdkHttpResponse"]);return i!=null&&m(t,["sdkHttpResponse"],i),t}function AL(n,e){const t={},i=f(n,["sdkHttpResponse"]);return i!=null&&m(t,["sdkHttpResponse"],i),t}function wL(n,e,t){const i={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=f(n,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&m(e,["displayName"],r),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=f(n,["epochCount"]);e!==void 0&&a!=null&&m(e,["tuningTask","hyperparameters","epochCount"],a);const u=f(n,["learningRateMultiplier"]);if(u!=null&&m(i,["tuningTask","hyperparameters","learningRateMultiplier"],u),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(f(n,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(f(n,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const d=f(n,["batchSize"]);e!==void 0&&d!=null&&m(e,["tuningTask","hyperparameters","batchSize"],d);const p=f(n,["learningRate"]);if(e!==void 0&&p!=null&&m(e,["tuningTask","hyperparameters","learningRate"],p),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(f(n,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(f(n,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(f(n,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(f(n,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");if(f(n,["encryptionSpec"])!==void 0)throw new Error("encryptionSpec parameter is not supported in Gemini API.");return i}function CL(n,e,t){const i={};let r=f(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const W=f(n,["validationDataset"]);e!==void 0&&W!=null&&m(e,["supervisedTuningSpec"],Eg(W))}else if(r==="PREFERENCE_TUNING"){const W=f(n,["validationDataset"]);e!==void 0&&W!=null&&m(e,["preferenceOptimizationSpec"],Eg(W))}else if(r==="DISTILLATION"){const W=f(n,["validationDataset"]);e!==void 0&&W!=null&&m(e,["distillationSpec"],Eg(W))}const a=f(n,["tunedModelDisplayName"]);e!==void 0&&a!=null&&m(e,["tunedModelDisplayName"],a);const u=f(n,["description"]);e!==void 0&&u!=null&&m(e,["description"],u);let d=f(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const W=f(n,["epochCount"]);e!==void 0&&W!=null&&m(e,["supervisedTuningSpec","hyperParameters","epochCount"],W)}else if(d==="PREFERENCE_TUNING"){const W=f(n,["epochCount"]);e!==void 0&&W!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],W)}else if(d==="DISTILLATION"){const W=f(n,["epochCount"]);e!==void 0&&W!=null&&m(e,["distillationSpec","hyperParameters","epochCount"],W)}let p=f(t,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const W=f(n,["learningRateMultiplier"]);e!==void 0&&W!=null&&m(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],W)}else if(p==="PREFERENCE_TUNING"){const W=f(n,["learningRateMultiplier"]);e!==void 0&&W!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],W)}else if(p==="DISTILLATION"){const W=f(n,["learningRateMultiplier"]);e!==void 0&&W!=null&&m(e,["distillationSpec","hyperParameters","learningRateMultiplier"],W)}let h=f(t,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const W=f(n,["exportLastCheckpointOnly"]);e!==void 0&&W!=null&&m(e,["supervisedTuningSpec","exportLastCheckpointOnly"],W)}else if(h==="PREFERENCE_TUNING"){const W=f(n,["exportLastCheckpointOnly"]);e!==void 0&&W!=null&&m(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],W)}else if(h==="DISTILLATION"){const W=f(n,["exportLastCheckpointOnly"]);e!==void 0&&W!=null&&m(e,["distillationSpec","exportLastCheckpointOnly"],W)}let _=f(t,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const W=f(n,["adapterSize"]);e!==void 0&&W!=null&&m(e,["supervisedTuningSpec","hyperParameters","adapterSize"],W)}else if(_==="PREFERENCE_TUNING"){const W=f(n,["adapterSize"]);e!==void 0&&W!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],W)}else if(_==="DISTILLATION"){const W=f(n,["adapterSize"]);e!==void 0&&W!=null&&m(e,["distillationSpec","hyperParameters","adapterSize"],W)}let T=f(t,["config","method"]);if(T===void 0&&(T="SUPERVISED_FINE_TUNING"),T==="SUPERVISED_FINE_TUNING"){const W=f(n,["tuningMode"]);e!==void 0&&W!=null&&m(e,["supervisedTuningSpec","tuningMode"],W)}const E=f(n,["customBaseModel"]);e!==void 0&&E!=null&&m(e,["customBaseModel"],E);let C=f(t,["config","method"]);if(C===void 0&&(C="SUPERVISED_FINE_TUNING"),C==="SUPERVISED_FINE_TUNING"){const W=f(n,["batchSize"]);e!==void 0&&W!=null&&m(e,["supervisedTuningSpec","hyperParameters","batchSize"],W)}let M=f(t,["config","method"]);if(M===void 0&&(M="SUPERVISED_FINE_TUNING"),M==="SUPERVISED_FINE_TUNING"){const W=f(n,["learningRate"]);e!==void 0&&W!=null&&m(e,["supervisedTuningSpec","hyperParameters","learningRate"],W)}const U=f(n,["labels"]);e!==void 0&&U!=null&&m(e,["labels"],U);const P=f(n,["beta"]);e!==void 0&&P!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","beta"],P);const $=f(n,["baseTeacherModel"]);e!==void 0&&$!=null&&m(e,["distillationSpec","baseTeacherModel"],$);const H=f(n,["tunedTeacherModelSource"]);e!==void 0&&H!=null&&m(e,["distillationSpec","tunedTeacherModelSource"],H);const z=f(n,["sftLossWeightMultiplier"]);e!==void 0&&z!=null&&m(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],z);const X=f(n,["outputUri"]);e!==void 0&&X!=null&&m(e,["outputUri"],X);const ue=f(n,["encryptionSpec"]);return e!==void 0&&ue!=null&&m(e,["encryptionSpec"],ue),i}function IL(n,e){const t={},i=f(n,["baseModel"]);i!=null&&m(t,["baseModel"],i);const r=f(n,["preTunedModel"]);r!=null&&m(t,["preTunedModel"],r);const a=f(n,["trainingDataset"]);a!=null&&LL(a);const u=f(n,["config"]);return u!=null&&wL(u,t),t}function bL(n,e){const t={},i=f(n,["baseModel"]);i!=null&&m(t,["baseModel"],i);const r=f(n,["preTunedModel"]);r!=null&&m(t,["preTunedModel"],r);const a=f(n,["trainingDataset"]);a!=null&&OL(a,t,e);const u=f(n,["config"]);return u!=null&&CL(u,t,e),t}function RL(n,e){const t={},i=f(n,["name"]);return i!=null&&m(t,["_url","name"],i),t}function xL(n,e){const t={},i=f(n,["name"]);return i!=null&&m(t,["_url","name"],i),t}function NL(n,e,t){const i={},r=f(n,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const a=f(n,["pageToken"]);e!==void 0&&a!=null&&m(e,["_query","pageToken"],a);const u=f(n,["filter"]);return e!==void 0&&u!=null&&m(e,["_query","filter"],u),i}function ML(n,e,t){const i={},r=f(n,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const a=f(n,["pageToken"]);e!==void 0&&a!=null&&m(e,["_query","pageToken"],a);const u=f(n,["filter"]);return e!==void 0&&u!=null&&m(e,["_query","filter"],u),i}function DL(n,e){const t={},i=f(n,["config"]);return i!=null&&NL(i,t),t}function PL(n,e){const t={},i=f(n,["config"]);return i!=null&&ML(i,t),t}function kL(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=f(n,["nextPageToken"]);r!=null&&m(t,["nextPageToken"],r);const a=f(n,["tunedModels"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>RI(d))),m(t,["tuningJobs"],u)}return t}function VL(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=f(n,["nextPageToken"]);r!=null&&m(t,["nextPageToken"],r);const a=f(n,["tuningJobs"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>oy(d))),m(t,["tuningJobs"],u)}return t}function UL(n,e){const t={},i=f(n,["name"]);i!=null&&m(t,["model"],i);const r=f(n,["name"]);return r!=null&&m(t,["endpoint"],r),t}function LL(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=f(n,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),m(t,["examples","examples"],r)}return t}function OL(n,e,t){const i={};let r=f(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(r==="PREFERENCE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}else if(r==="DISTILLATION"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&m(e,["distillationSpec","promptDatasetUri"],u)}let a=f(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(a==="PREFERENCE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}else if(a==="DISTILLATION"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&m(e,["distillationSpec","promptDatasetUri"],u)}if(f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function RI(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=f(n,["name"]);r!=null&&m(t,["name"],r);const a=f(n,["state"]);a!=null&&m(t,["state"],HC(a));const u=f(n,["createTime"]);u!=null&&m(t,["createTime"],u);const d=f(n,["tuningTask","startTime"]);d!=null&&m(t,["startTime"],d);const p=f(n,["tuningTask","completeTime"]);p!=null&&m(t,["endTime"],p);const h=f(n,["updateTime"]);h!=null&&m(t,["updateTime"],h);const _=f(n,["description"]);_!=null&&m(t,["description"],_);const T=f(n,["baseModel"]);T!=null&&m(t,["baseModel"],T);const E=f(n,["_self"]);return E!=null&&m(t,["tunedModel"],UL(E)),t}function oy(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=f(n,["name"]);r!=null&&m(t,["name"],r);const a=f(n,["state"]);a!=null&&m(t,["state"],HC(a));const u=f(n,["createTime"]);u!=null&&m(t,["createTime"],u);const d=f(n,["startTime"]);d!=null&&m(t,["startTime"],d);const p=f(n,["endTime"]);p!=null&&m(t,["endTime"],p);const h=f(n,["updateTime"]);h!=null&&m(t,["updateTime"],h);const _=f(n,["error"]);_!=null&&m(t,["error"],_);const T=f(n,["description"]);T!=null&&m(t,["description"],T);const E=f(n,["baseModel"]);E!=null&&m(t,["baseModel"],E);const C=f(n,["tunedModel"]);C!=null&&m(t,["tunedModel"],C);const M=f(n,["preTunedModel"]);M!=null&&m(t,["preTunedModel"],M);const U=f(n,["supervisedTuningSpec"]);U!=null&&m(t,["supervisedTuningSpec"],U);const P=f(n,["preferenceOptimizationSpec"]);P!=null&&m(t,["preferenceOptimizationSpec"],P);const $=f(n,["distillationSpec"]);$!=null&&m(t,["distillationSpec"],$);const H=f(n,["tuningDataStats"]);H!=null&&m(t,["tuningDataStats"],H);const z=f(n,["encryptionSpec"]);z!=null&&m(t,["encryptionSpec"],z);const X=f(n,["partnerModelTuningSpec"]);X!=null&&m(t,["partnerModelTuningSpec"],X);const ue=f(n,["customBaseModel"]);ue!=null&&m(t,["customBaseModel"],ue);const W=f(n,["experiment"]);W!=null&&m(t,["experiment"],W);const N=f(n,["labels"]);N!=null&&m(t,["labels"],N);const D=f(n,["outputUri"]);D!=null&&m(t,["outputUri"],D);const x=f(n,["pipelineJob"]);x!=null&&m(t,["pipelineJob"],x);const L=f(n,["serviceAccount"]);L!=null&&m(t,["serviceAccount"],L);const k=f(n,["tunedModelDisplayName"]);k!=null&&m(t,["tunedModelDisplayName"],k);const q=f(n,["veoTuningSpec"]);return q!=null&&m(t,["veoTuningSpec"],q),t}function FL(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=f(n,["name"]);r!=null&&m(t,["name"],r);const a=f(n,["metadata"]);a!=null&&m(t,["metadata"],a);const u=f(n,["done"]);u!=null&&m(t,["done"],u);const d=f(n,["error"]);return d!=null&&m(t,["error"],d),t}function Eg(n,e){const t={},i=f(n,["gcsUri"]);i!=null&&m(t,["validationDatasetUri"],i);const r=f(n,["vertexDatasetResource"]);return r!=null&&m(t,["validationDatasetUri"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BL extends Ws{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new zo(zs.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var i;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const r={tunedModelName:t.baseModel};!((i=t.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(r.checkpointId=t.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},t),{preTunedModel:r});return a.baseModel=void 0,await this.tuneInternal(a)}else{const r=Object.assign({},t);return await this.tuneInternal(r)}else{const r=Object.assign({},t),a=await this.tuneMldevInternal(r);let u="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?u=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(u=a.name.split("/operations/")[0]),{name:u,state:Jg.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,r,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=xL(e);return d=pe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>oy(_))}else{const h=RL(e);return d=pe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>RI(_))}}async listInternal(e){var t,i,r,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=PL(e);return d=pe("tuningJobs",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=VL(_),E=new rA;return Object.assign(E,T),E})}else{const h=DL(e);return d=pe("tunedModels",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=kL(_),E=new rA;return Object.assign(E,T),E})}}async cancel(e){var t,i,r,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=EL(e);return d=pe("{name}:cancel",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=AL(_),E=new oA;return Object.assign(E,T),E})}else{const h=TL(e);return d=pe("{name}:cancel",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:_.headers},E})),u.then(_=>{const T=SL(_),E=new oA;return Object.assign(E,T),E})}}async tuneInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const d=bL(e,e);return a=pe("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),r.then(p=>oy(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=IL(e);return a=pe("tunedModels",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),r.then(p=>FL(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qL{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const GL=1024*1024*8,HL=3,zL=1e3,$L=2,th="x-goog-upload-status";async function JL(n,e,t){var i;const r=await xI(n,e,t),a=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[th])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function KL(n,e,t){var i;const r=await xI(n,e,t),a=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[th])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=LC(a),d=new Qy;return Object.assign(d,u),d}async function xI(n,e,t){var i,r;let a=0,u=0,d=new Yg(new Response),p="upload";for(a=n.size;u<a;){const h=Math.min(GL,a-u),_=n.slice(u,u+h);u+h>=a&&(p+=", finalize");let T=0,E=zL;for(;T<HL&&(d=await t.request({path:"",body:_,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(u),"Content-Length":String(h)}}}),!(!((i=d==null?void 0:d.headers)===null||i===void 0)&&i[th]));)T++,await WL(E),E=E*$L;if(u+=h,((r=d==null?void 0:d.headers)===null||r===void 0?void 0:r[th])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function YL(n){return{size:n.size,type:n.type}}function WL(n){return new Promise(e=>setTimeout(e,n))}class QL{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await JL(e,t,i)}async uploadToFileSearchStore(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await KL(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await YL(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class XL{create(e,t,i){return new jL(e,t,i)}}class jL{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const PA="x-goog-api-key";class ZL{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(PA)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(PA,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const eO="gl-node/";class tO{get interactions(){var e;if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const t=this.httpOptions;t!=null&&t.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const i=new sn({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:t==null?void 0:t.timeout,maxRetries:(e=t==null?void 0:t.retryOptions)===null||e===void 0?void 0:e.attempts});return this._interactions=i.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=BM(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new ZL(this.apiKey);this.apiClient=new JV({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:eO+"web",uploader:new QL,downloader:new qL}),this.models=new dU(this.apiClient),this.live=new rU(this.apiClient,r,new XL),this.batches=new yP(this.apiClient),this.chats=new jP(this.models,this.apiClient),this.caches=new WP(this.apiClient),this.files=new ck(this.apiClient),this.operations=new fU(this.apiClient),this.authTokens=new RU(this.apiClient),this.tunings=new BL(this.apiClient),this.fileSearchStores=new UU(this.apiClient)}}var kA={};let Sg=null;const Uh=()=>{if(!Sg){const n=kA.API_KEY||kA.GEMINI_API_KEY;if(!n)throw new Error("Gemini API key is not set. Please set GEMINI_API_KEY in your environment.");Sg=new tO({apiKey:n})}return Sg},NI={type:Et.OBJECT,properties:{disease:{type:Et.STRING},confidence:{type:Et.NUMBER},description:{type:Et.STRING},solutions:{type:Et.OBJECT,properties:{issue:{type:Et.STRING},chemicalSolution:{type:Et.OBJECT,properties:{product:{type:Et.STRING},dosage:{type:Et.STRING},precautions:{type:Et.STRING}},required:["product","dosage","precautions"]},naturalSolution:{type:Et.OBJECT,properties:{name:{type:Et.STRING},preparation:{type:Et.STRING},benefits:{type:Et.STRING},philosophy:{type:Et.STRING}},required:["name","preparation","benefits","philosophy"]}},required:["issue","chemicalSolution","naturalSolution"]}},required:["disease","confidence","description","solutions"]},nO=async(n,e="en")=>{const r=await Uh().models.generateContent({model:"gemini-3-flash-preview",contents:{parts:[{inlineData:{mimeType:"image/jpeg",data:n}},{text:`Diagnose the crop disease. Provide chemical and Rajiv Dixit natural solutions in JSON. Output all text in ${gs[e]}.`}]},config:{responseMimeType:"application/json",responseSchema:NI}});return JSON.parse(r.text||"{}")},iO=async(n,e,t="en")=>{var h,_,T;const a=await Uh().models.generateContent({model:"gemini-3-flash-preview",contents:`Farmer Question: "${n}" in "${e||"India"}". Provide chemical and natural solutions with Google Search. Output all text in ${gs[t]}.`,config:{tools:[{googleSearch:{}}],responseMimeType:"application/json",responseSchema:NI.properties.solutions}}),d=(((T=(_=(h=a.candidates)==null?void 0:h[0])==null?void 0:_.groundingMetadata)==null?void 0:T.groundingChunks)||[]).map(E=>{var C,M;return{title:(C=E.web)==null?void 0:C.title,uri:(M=E.web)==null?void 0:M.uri}}).filter(E=>E.uri);return{...JSON.parse(a.text||"{}"),groundingSources:d}},sO=async(n="en")=>(await Uh().models.generateContent({model:"gemini-2.5-flash-lite-latest",contents:`Give a 1-sentence quick professional tip for soil moisture conservation today in ${gs[n]}.`})).text||"Keep your soil mulched!",rO=(n,e="en")=>Uh().live.connect({model:"gemini-2.5-flash-native-audio-preview-12-2025",callbacks:n,config:{responseModalities:["audio"],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Puck"}}},inputAudioTranscription:{},outputAudioTranscription:{},systemInstruction:`You are 'Kisan Mitra', a wise and warm agricultural advisor. 
      Respond ONLY in ${gs[e]} using simple, conversational language.
      
      RULES:
      1. Always address the farmer with respect.
      2. First, offer a natural, zero-budget solution based on Rajiv Dixit's principles.
      3. Then, provide a scientific chemical alternative as a backup.
      4. Use regional farming terms in ${gs[e]}.
      5. Agriculture is hard work; be empathetic.`}});function Ne(n,e,t,i,r){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t}function Q(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)}let MI=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return MI=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^t()&15>>+i/4).toString(16))};function ay(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const ly=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};class Ae extends Error{}class mn extends Ae{constructor(e,t,i,r){super(`${mn.makeMessage(e,t,i)}`),this.status=e,this.headers=r,this.requestID=r==null?void 0:r.get("x-request-id"),this.error=t;const a=t;this.code=a==null?void 0:a.code,this.param=a==null?void 0:a.param,this.type=a==null?void 0:a.type}static makeMessage(e,t,i){const r=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):i;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,i,r){if(!e||!r)return new Lh({message:i,cause:ly(t)});const a=t==null?void 0:t.error;return e===400?new DI(e,a,i,r):e===401?new PI(e,a,i,r):e===403?new kI(e,a,i,r):e===404?new VI(e,a,i,r):e===409?new UI(e,a,i,r):e===422?new LI(e,a,i,r):e===429?new OI(e,a,i,r):e>=500?new FI(e,a,i,r):new mn(e,a,i,r)}}class hi extends mn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Lh extends mn{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class i_ extends Lh{constructor({message:e}={}){super({message:e??"Request timed out."})}}class DI extends mn{}class PI extends mn{}class kI extends mn{}class VI extends mn{}class UI extends mn{}class LI extends mn{}class OI extends mn{}class FI extends mn{}class BI extends Ae{constructor(){super("Could not parse response content as the length limit was reached")}}class qI extends Ae{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class Fu extends Error{constructor(e){super(e)}}const oO=/^[a-z][a-z0-9+.-]*:/i,aO=n=>oO.test(n);let Vn=n=>(Vn=Array.isArray,Vn(n)),VA=Vn;function GI(n){return typeof n!="object"?{}:n??{}}function lO(n){if(!n)return!0;for(const e in n)return!1;return!0}function uO(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Ag(n){return n!=null&&typeof n=="object"&&!Array.isArray(n)}const cO=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Ae(`${n} must be an integer`);if(e<0)throw new Ae(`${n} must be a positive integer`);return e},dO=n=>{try{return JSON.parse(n)}catch{return}},vc=n=>new Promise(e=>setTimeout(e,n)),Ga="6.22.0",fO=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function hO(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const pO=()=>{var t;const n=hO();if(n==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ga,"X-Stainless-OS":LA(Deno.build.os),"X-Stainless-Arch":UA(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((t=Deno.version)==null?void 0:t.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ga,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(n==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ga,"X-Stainless-OS":LA(globalThis.process.platform??"unknown"),"X-Stainless-Arch":UA(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=mO();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ga,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ga,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function mO(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const i=t.exec(navigator.userAgent);if(i){const r=i[1]||0,a=i[2]||0,u=i[3]||0;return{browser:e,version:`${r}.${a}.${u}`}}}return null}const UA=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",LA=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let OA;const gO=()=>OA??(OA=pO());function yO(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function HI(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function zI(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return HI({start(){},async pull(t){const{done:i,value:r}=await e.next();i?t.close():t.enqueue(r)},async cancel(){var t;await((t=e.return)==null?void 0:t.call(e))}})}function $I(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function _O(n){var i,r;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((r=(i=n[Symbol.asyncIterator]()).return)==null?void 0:r.call(i));return}const e=n.getReader(),t=e.cancel();e.releaseLock(),await t}const vO=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),JI="RFC3986",KI=n=>String(n),FA={RFC1738:n=>String(n).replace(/%20/g,"+"),RFC3986:KI},TO="RFC1738";let uy=(n,e)=>(uy=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),uy(n,e));const as=(()=>{const n=[];for(let e=0;e<256;++e)n.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return n})(),wg=1024,EO=(n,e,t,i,r)=>{if(n.length===0)return n;let a=n;if(typeof n=="symbol"?a=Symbol.prototype.toString.call(n):typeof n!="string"&&(a=String(n)),t==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(d){return"%26%23"+parseInt(d.slice(2),16)+"%3B"});let u="";for(let d=0;d<a.length;d+=wg){const p=a.length>=wg?a.slice(d,d+wg):a,h=[];for(let _=0;_<p.length;++_){let T=p.charCodeAt(_);if(T===45||T===46||T===95||T===126||T>=48&&T<=57||T>=65&&T<=90||T>=97&&T<=122||r===TO&&(T===40||T===41)){h[h.length]=p.charAt(_);continue}if(T<128){h[h.length]=as[T];continue}if(T<2048){h[h.length]=as[192|T>>6]+as[128|T&63];continue}if(T<55296||T>=57344){h[h.length]=as[224|T>>12]+as[128|T>>6&63]+as[128|T&63];continue}_+=1,T=65536+((T&1023)<<10|p.charCodeAt(_)&1023),h[h.length]=as[240|T>>18]+as[128|T>>12&63]+as[128|T>>6&63]+as[128|T&63]}u+=h.join("")}return u};function SO(n){return!n||typeof n!="object"?!1:!!(n.constructor&&n.constructor.isBuffer&&n.constructor.isBuffer(n))}function BA(n,e){if(Vn(n)){const t=[];for(let i=0;i<n.length;i+=1)t.push(e(n[i]));return t}return e(n)}const YI={brackets(n){return String(n)+"[]"},comma:"comma",indices(n,e){return String(n)+"["+e+"]"},repeat(n){return String(n)}},WI=function(n,e){Array.prototype.push.apply(n,Vn(e)?e:[e])};let qA;const Wt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:EO,encodeValuesOnly:!1,format:JI,formatter:KI,indices:!1,serializeDate(n){return(qA??(qA=Function.prototype.call.bind(Date.prototype.toISOString)))(n)},skipNulls:!1,strictNullHandling:!1};function AO(n){return typeof n=="string"||typeof n=="number"||typeof n=="boolean"||typeof n=="symbol"||typeof n=="bigint"}const Cg={};function QI(n,e,t,i,r,a,u,d,p,h,_,T,E,C,M,U,P,$){let H=n,z=$,X=0,ue=!1;for(;(z=z.get(Cg))!==void 0&&!ue;){const L=z.get(n);if(X+=1,typeof L<"u"){if(L===X)throw new RangeError("Cyclic object value");ue=!0}typeof z.get(Cg)>"u"&&(X=0)}if(typeof h=="function"?H=h(e,H):H instanceof Date?H=E==null?void 0:E(H):t==="comma"&&Vn(H)&&(H=BA(H,function(L){return L instanceof Date?E==null?void 0:E(L):L})),H===null){if(a)return p&&!U?p(e,Wt.encoder,P,"key",C):e;H=""}if(AO(H)||SO(H)){if(p){const L=U?e:p(e,Wt.encoder,P,"key",C);return[(M==null?void 0:M(L))+"="+(M==null?void 0:M(p(H,Wt.encoder,P,"value",C)))]}return[(M==null?void 0:M(e))+"="+(M==null?void 0:M(String(H)))]}const W=[];if(typeof H>"u")return W;let N;if(t==="comma"&&Vn(H))U&&p&&(H=BA(H,p)),N=[{value:H.length>0?H.join(",")||null:void 0}];else if(Vn(h))N=h;else{const L=Object.keys(H);N=_?L.sort(_):L}const D=d?String(e).replace(/\./g,"%2E"):String(e),x=i&&Vn(H)&&H.length===1?D+"[]":D;if(r&&Vn(H)&&H.length===0)return x+"[]";for(let L=0;L<N.length;++L){const k=N[L],q=typeof k=="object"&&typeof k.value<"u"?k.value:H[k];if(u&&q===null)continue;const V=T&&d?k.replace(/\./g,"%2E"):k,ke=Vn(H)?typeof t=="function"?t(x,V):x:x+(T?"."+V:"["+V+"]");$.set(n,X);const xe=new WeakMap;xe.set(Cg,$),WI(W,QI(q,ke,t,i,r,a,u,d,t==="comma"&&U&&Vn(H)?null:p,h,_,T,E,C,M,U,P,xe))}return W}function wO(n=Wt){if(typeof n.allowEmptyArrays<"u"&&typeof n.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof n.encodeDotInKeys<"u"&&typeof n.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(n.encoder!==null&&typeof n.encoder<"u"&&typeof n.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=n.charset||Wt.charset;if(typeof n.charset<"u"&&n.charset!=="utf-8"&&n.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let t=JI;if(typeof n.format<"u"){if(!uy(FA,n.format))throw new TypeError("Unknown format option provided.");t=n.format}const i=FA[t];let r=Wt.filter;(typeof n.filter=="function"||Vn(n.filter))&&(r=n.filter);let a;if(n.arrayFormat&&n.arrayFormat in YI?a=n.arrayFormat:"indices"in n?a=n.indices?"indices":"repeat":a=Wt.arrayFormat,"commaRoundTrip"in n&&typeof n.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const u=typeof n.allowDots>"u"?n.encodeDotInKeys?!0:Wt.allowDots:!!n.allowDots;return{addQueryPrefix:typeof n.addQueryPrefix=="boolean"?n.addQueryPrefix:Wt.addQueryPrefix,allowDots:u,allowEmptyArrays:typeof n.allowEmptyArrays=="boolean"?!!n.allowEmptyArrays:Wt.allowEmptyArrays,arrayFormat:a,charset:e,charsetSentinel:typeof n.charsetSentinel=="boolean"?n.charsetSentinel:Wt.charsetSentinel,commaRoundTrip:!!n.commaRoundTrip,delimiter:typeof n.delimiter>"u"?Wt.delimiter:n.delimiter,encode:typeof n.encode=="boolean"?n.encode:Wt.encode,encodeDotInKeys:typeof n.encodeDotInKeys=="boolean"?n.encodeDotInKeys:Wt.encodeDotInKeys,encoder:typeof n.encoder=="function"?n.encoder:Wt.encoder,encodeValuesOnly:typeof n.encodeValuesOnly=="boolean"?n.encodeValuesOnly:Wt.encodeValuesOnly,filter:r,format:t,formatter:i,serializeDate:typeof n.serializeDate=="function"?n.serializeDate:Wt.serializeDate,skipNulls:typeof n.skipNulls=="boolean"?n.skipNulls:Wt.skipNulls,sort:typeof n.sort=="function"?n.sort:null,strictNullHandling:typeof n.strictNullHandling=="boolean"?n.strictNullHandling:Wt.strictNullHandling}}function CO(n,e={}){let t=n;const i=wO(e);let r,a;typeof i.filter=="function"?(a=i.filter,t=a("",t)):Vn(i.filter)&&(a=i.filter,r=a);const u=[];if(typeof t!="object"||t===null)return"";const d=YI[i.arrayFormat],p=d==="comma"&&i.commaRoundTrip;r||(r=Object.keys(t)),i.sort&&r.sort(i.sort);const h=new WeakMap;for(let E=0;E<r.length;++E){const C=r[E];i.skipNulls&&t[C]===null||WI(u,QI(t[C],C,d,p,i.allowEmptyArrays,i.strictNullHandling,i.skipNulls,i.encodeDotInKeys,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,h))}const _=u.join(i.delimiter);let T=i.addQueryPrefix===!0?"?":"";return i.charsetSentinel&&(i.charset==="iso-8859-1"?T+="utf8=%26%2310003%3B&":T+="utf8=%E2%9C%93&"),_.length>0?T+_:""}function IO(n){let e=0;for(const r of n)e+=r.length;const t=new Uint8Array(e);let i=0;for(const r of n)t.set(r,i),i+=r.length;return t}let GA;function s_(n){let e;return(GA??(e=new globalThis.TextEncoder,GA=e.encode.bind(e)))(n)}let HA;function zA(n){let e;return(HA??(e=new globalThis.TextDecoder,HA=e.decode.bind(e)))(n)}var Yn,Wn;class Oh{constructor(){Yn.set(this,void 0),Wn.set(this,void 0),Ne(this,Yn,new Uint8Array),Ne(this,Wn,null)}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?s_(e):e;Ne(this,Yn,IO([Q(this,Yn,"f"),t]));const i=[];let r;for(;(r=bO(Q(this,Yn,"f"),Q(this,Wn,"f")))!=null;){if(r.carriage&&Q(this,Wn,"f")==null){Ne(this,Wn,r.index);continue}if(Q(this,Wn,"f")!=null&&(r.index!==Q(this,Wn,"f")+1||r.carriage)){i.push(zA(Q(this,Yn,"f").subarray(0,Q(this,Wn,"f")-1))),Ne(this,Yn,Q(this,Yn,"f").subarray(Q(this,Wn,"f"))),Ne(this,Wn,null);continue}const a=Q(this,Wn,"f")!==null?r.preceding-1:r.preceding,u=zA(Q(this,Yn,"f").subarray(0,a));i.push(u),Ne(this,Yn,Q(this,Yn,"f").subarray(r.index)),Ne(this,Wn,null)}return i}flush(){return Q(this,Yn,"f").length?this.decode(`
`):[]}}Yn=new WeakMap,Wn=new WeakMap;Oh.NEWLINE_CHARS=new Set([`
`,"\r"]);Oh.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function bO(n,e){for(let r=e??0;r<n.length;r++){if(n[r]===10)return{preceding:r,index:r+1,carriage:!1};if(n[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function RO(n){for(let i=0;i<n.length-1;i++){if(n[i]===10&&n[i+1]===10||n[i]===13&&n[i+1]===13)return i+2;if(n[i]===13&&n[i+1]===10&&i+3<n.length&&n[i+2]===13&&n[i+3]===10)return i+4}return-1}const nh={off:0,error:200,warn:300,info:400,debug:500},$A=(n,e,t)=>{if(n){if(uO(nh,n))return n;dn(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(nh))}`)}};function Bu(){}function mf(n,e,t){return!e||nh[n]>nh[t]?Bu:e[n].bind(e)}const xO={error:Bu,warn:Bu,info:Bu,debug:Bu};let JA=new WeakMap;function dn(n){const e=n.logger,t=n.logLevel??"off";if(!e)return xO;const i=JA.get(e);if(i&&i[0]===t)return i[1];const r={error:mf("error",e,t),warn:mf("warn",e,t),info:mf("info",e,t),debug:mf("debug",e,t)};return JA.set(e,[t,r]),r}const xo=n=>(n.options&&(n.options={...n.options},delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);var Vu;class cs{constructor(e,t,i){this.iterator=e,Vu.set(this,void 0),this.controller=t,Ne(this,Vu,i)}static fromSSEResponse(e,t,i){let r=!1;const a=i?dn(i):console;async function*u(){if(r)throw new Ae("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let d=!1;try{for await(const p of NO(e,t))if(!d){if(p.data.startsWith("[DONE]")){d=!0;continue}if(p.event===null||!p.event.startsWith("thread.")){let h;try{h=JSON.parse(p.data)}catch(_){throw a.error("Could not parse message into JSON:",p.data),a.error("From chunk:",p.raw),_}if(h&&h.error)throw new mn(void 0,h.error,void 0,e.headers);yield h}else{let h;try{h=JSON.parse(p.data)}catch(_){throw console.error("Could not parse message into JSON:",p.data),console.error("From chunk:",p.raw),_}if(p.event=="error")throw new mn(void 0,h.error,h.message,void 0);yield{event:p.event,data:h}}}d=!0}catch(p){if(ay(p))return;throw p}finally{d||t.abort()}}return new cs(u,t,i)}static fromReadableStream(e,t,i){let r=!1;async function*a(){const d=new Oh,p=$I(e);for await(const h of p)for(const _ of d.decode(h))yield _;for(const h of d.flush())yield h}async function*u(){if(r)throw new Ae("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let d=!1;try{for await(const p of a())d||p&&(yield JSON.parse(p));d=!0}catch(p){if(ay(p))return;throw p}finally{d||t.abort()}}return new cs(u,t,i)}[(Vu=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],t=[],i=this.iterator(),r=a=>({next:()=>{if(a.length===0){const u=i.next();e.push(u),t.push(u)}return a.shift()}});return[new cs(()=>r(e),this.controller,Q(this,Vu,"f")),new cs(()=>r(t),this.controller,Q(this,Vu,"f"))]}toReadableStream(){const e=this;let t;return HI({async start(){t=e[Symbol.asyncIterator]()},async pull(i){try{const{value:r,done:a}=await t.next();if(a)return i.close();const u=s_(JSON.stringify(r)+`
`);i.enqueue(u)}catch(r){i.error(r)}},async cancel(){var i;await((i=t.return)==null?void 0:i.call(t))}})}}async function*NO(n,e){if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Ae("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Ae("Attempted to iterate over a response with no body");const t=new DO,i=new Oh,r=$I(n.body);for await(const a of MO(r))for(const u of i.decode(a)){const d=t.decode(u);d&&(yield d)}for(const a of i.flush()){const u=t.decode(a);u&&(yield u)}}async function*MO(n){let e=new Uint8Array;for await(const t of n){if(t==null)continue;const i=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?s_(t):t;let r=new Uint8Array(e.length+i.length);r.set(e),r.set(i,e.length),e=r;let a;for(;(a=RO(e))!==-1;)yield e.slice(0,a),e=e.slice(a)}e.length>0&&(yield e)}class DO{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,i,r]=PO(e,":");return r.startsWith(" ")&&(r=r.substring(1)),t==="event"?this.event=r:t==="data"&&this.data.push(r),null}}function PO(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}async function XI(n,e){const{response:t,requestLogID:i,retryOfRequestLogID:r,startTime:a}=e,u=await(async()=>{var T;if(e.options.stream)return dn(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):cs.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const d=t.headers.get("content-type"),p=(T=d==null?void 0:d.split(";")[0])==null?void 0:T.trim();if((p==null?void 0:p.includes("application/json"))||(p==null?void 0:p.endsWith("+json"))){if(t.headers.get("content-length")==="0")return;const C=await t.json();return jI(C,t)}return await t.text()})();return dn(n).debug(`[${i}] response parsed`,xo({retryOfRequestLogID:r,url:t.url,status:t.status,body:u,durationMs:Date.now()-a})),u}function jI(n,e){return!n||typeof n!="object"||Array.isArray(n)?n:Object.defineProperty(n,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var qu;class Fh extends Promise{constructor(e,t,i=XI){super(r=>{r(null)}),this.responsePromise=t,this.parseResponse=i,qu.set(this,void 0),Ne(this,qu,e)}_thenUnwrap(e){return new Fh(Q(this,qu,"f"),this.responsePromise,async(t,i)=>jI(e(await this.parseResponse(t,i),i),i.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(Q(this,qu,"f"),e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}qu=new WeakMap;var gf;class r_{constructor(e,t,i,r){gf.set(this,void 0),Ne(this,gf,e),this.options=r,this.response=t,this.body=i}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new Ae("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await Q(this,gf,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(gf=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}class kO extends Fh{constructor(e,t,i){super(e,t,async(r,a)=>new i(r,a.response,await XI(r,a),a.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const t of e)yield t}}class Bh extends r_{constructor(e,t,i,r){super(e,t,i,r),this.data=i.data||[],this.object=i.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class bt extends r_{constructor(e,t,i,r){super(e,t,i,r),this.data=i.data||[],this.has_more=i.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){var i;const e=this.getPaginatedItems(),t=(i=e[e.length-1])==null?void 0:i.id;return t?{...this.options,query:{...GI(this.options.query),after:t}}:null}}class ih extends r_{constructor(e,t,i,r){super(e,t,i,r),this.data=i.data||[],this.has_more=i.has_more||!1,this.last_id=i.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...GI(this.options.query),after:e}}:null}}const ZI=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)==null?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function ju(n,e,t){return ZI(),new File(n,e??"unknown_file",t)}function Nf(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const o_=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function",lc=async(n,e)=>cy(n.body)?{...n,body:await eb(n.body,e)}:n,rl=async(n,e)=>({...n,body:await eb(n.body,e)}),KA=new WeakMap;function VO(n){const e=typeof n=="function"?n:n.fetch,t=KA.get(e);if(t)return t;const i=(async()=>{try{const r="Response"in e?e.Response:(await e("data:,")).constructor,a=new FormData;return a.toString()!==await new r(a).text()}catch{return!0}})();return KA.set(e,i),i}const eb=async(n,e)=>{if(!await VO(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const t=new FormData;return await Promise.all(Object.entries(n||{}).map(([i,r])=>dy(t,i,r))),t},tb=n=>n instanceof Blob&&"name"in n,UO=n=>typeof n=="object"&&n!==null&&(n instanceof Response||o_(n)||tb(n)),cy=n=>{if(UO(n))return!0;if(Array.isArray(n))return n.some(cy);if(n&&typeof n=="object"){for(const e in n)if(cy(n[e]))return!0}return!1},dy=async(n,e,t)=>{if(t!==void 0){if(t==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")n.append(e,String(t));else if(t instanceof Response)n.append(e,ju([await t.blob()],Nf(t)));else if(o_(t))n.append(e,ju([await new Response(zI(t)).blob()],Nf(t)));else if(tb(t))n.append(e,t,Nf(t));else if(Array.isArray(t))await Promise.all(t.map(i=>dy(n,e+"[]",i)));else if(typeof t=="object")await Promise.all(Object.entries(t).map(([i,r])=>dy(n,`${e}[${i}]`,r)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${t} instead`)}},nb=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",LO=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&nb(n),OO=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function FO(n,e,t){if(ZI(),n=await n,LO(n))return n instanceof File?n:ju([await n.arrayBuffer()],n.name);if(OO(n)){const r=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),ju(await fy(r),e,t)}const i=await fy(n);if(e||(e=Nf(n)),!(t!=null&&t.type)){const r=i.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof r=="string"&&(t={...t,type:r})}return ju(i,e,t)}async function fy(n){var t;let e=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)e.push(n);else if(nb(n))e.push(n instanceof Blob?n:await n.arrayBuffer());else if(o_(n))for await(const i of n)e.push(...await fy(i));else{const i=(t=n==null?void 0:n.constructor)==null?void 0:t.name;throw new Error(`Unexpected data type: ${typeof n}${i?`; constructor: ${i}`:""}${BO(n)}`)}return e}function BO(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}class Ee{constructor(e){this._client=e}}function ib(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const YA=Object.freeze(Object.create(null)),qO=(n=ib)=>function(t,...i){if(t.length===1)return t[0];let r=!1;const a=[],u=t.reduce((_,T,E)=>{var U;/[?#]/.test(T)&&(r=!0);const C=i[E];let M=(r?encodeURIComponent:n)(""+C);return E!==i.length&&(C==null||typeof C=="object"&&C.toString===((U=Object.getPrototypeOf(Object.getPrototypeOf(C.hasOwnProperty??YA)??YA))==null?void 0:U.toString))&&(M=C+"",a.push({start:_.length+T.length,length:M.length,error:`Value of type ${Object.prototype.toString.call(C).slice(8,-1)} is not a valid path parameter`})),_+T+(E===i.length?"":M)},""),d=u.split(/[?#]/,1)[0],p=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=p.exec(d))!==null;)a.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(a.sort((_,T)=>_.start-T.start),a.length>0){let _=0;const T=a.reduce((E,C)=>{const M=" ".repeat(C.start-_),U="^".repeat(C.length);return _=C.start+C.length,E+M+U},"");throw new Ae(`Path parameters result in path with invalid segments:
${a.map(E=>E.error).join(`
`)}
${u}
${T}`)}return u},le=qO(ib);let sb=class extends Ee{list(e,t={},i){return this._client.getAPIList(le`/chat/completions/${e}/messages`,bt,{query:t,...i})}};function sh(n){return n!==void 0&&"function"in n&&n.function!==void 0}function a_(n){return(n==null?void 0:n.$brand)==="auto-parseable-response-format"}function Tc(n){return(n==null?void 0:n.$brand)==="auto-parseable-tool"}function GO(n,e){return!e||!rb(e)?{...n,choices:n.choices.map(t=>(ob(t.message.tool_calls),{...t,message:{...t.message,parsed:null,...t.message.tool_calls?{tool_calls:t.message.tool_calls}:void 0}}))}:l_(n,e)}function l_(n,e){const t=n.choices.map(i=>{var r;if(i.finish_reason==="length")throw new BI;if(i.finish_reason==="content_filter")throw new qI;return ob(i.message.tool_calls),{...i,message:{...i.message,...i.message.tool_calls?{tool_calls:((r=i.message.tool_calls)==null?void 0:r.map(a=>zO(e,a)))??void 0}:void 0,parsed:i.message.content&&!i.message.refusal?HO(e,i.message.content):null}}});return{...n,choices:t}}function HO(n,e){var t,i;return((t=n.response_format)==null?void 0:t.type)!=="json_schema"?null:((i=n.response_format)==null?void 0:i.type)==="json_schema"?"$parseRaw"in n.response_format?n.response_format.$parseRaw(e):JSON.parse(e):null}function zO(n,e){var i;const t=(i=n.tools)==null?void 0:i.find(r=>{var a;return sh(r)&&((a=r.function)==null?void 0:a.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:Tc(t)?t.$parseRaw(e.function.arguments):t!=null&&t.function.strict?JSON.parse(e.function.arguments):null}}}function $O(n,e){var i;if(!n||!("tools"in n)||!n.tools)return!1;const t=(i=n.tools)==null?void 0:i.find(r=>{var a;return sh(r)&&((a=r.function)==null?void 0:a.name)===e.function.name});return sh(t)&&(Tc(t)||(t==null?void 0:t.function.strict)||!1)}function rb(n){var e;return a_(n.response_format)?!0:((e=n.tools)==null?void 0:e.some(t=>Tc(t)||t.type==="function"&&t.function.strict===!0))??!1}function ob(n){for(const e of n||[])if(e.type!=="function")throw new Ae(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function JO(n){for(const e of n??[]){if(e.type!=="function")throw new Ae(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new Ae(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const rh=n=>(n==null?void 0:n.role)==="assistant",ab=n=>(n==null?void 0:n.role)==="tool";var hy,Mf,Df,Gu,Hu,Pf,zu,Fs,$u,oh,ah,Ha,lb;class u_{constructor(){hy.add(this),this.controller=new AbortController,Mf.set(this,void 0),Df.set(this,()=>{}),Gu.set(this,()=>{}),Hu.set(this,void 0),Pf.set(this,()=>{}),zu.set(this,()=>{}),Fs.set(this,{}),$u.set(this,!1),oh.set(this,!1),ah.set(this,!1),Ha.set(this,!1),Ne(this,Mf,new Promise((e,t)=>{Ne(this,Df,e,"f"),Ne(this,Gu,t,"f")})),Ne(this,Hu,new Promise((e,t)=>{Ne(this,Pf,e,"f"),Ne(this,zu,t,"f")})),Q(this,Mf,"f").catch(()=>{}),Q(this,Hu,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},Q(this,hy,"m",lb).bind(this))},0)}_connected(){this.ended||(Q(this,Df,"f").call(this),this._emit("connect"))}get ended(){return Q(this,$u,"f")}get errored(){return Q(this,oh,"f")}get aborted(){return Q(this,ah,"f")}abort(){this.controller.abort()}on(e,t){return(Q(this,Fs,"f")[e]||(Q(this,Fs,"f")[e]=[])).push({listener:t}),this}off(e,t){const i=Q(this,Fs,"f")[e];if(!i)return this;const r=i.findIndex(a=>a.listener===t);return r>=0&&i.splice(r,1),this}once(e,t){return(Q(this,Fs,"f")[e]||(Q(this,Fs,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,i)=>{Ne(this,Ha,!0),e!=="error"&&this.once("error",i),this.once(e,t)})}async done(){Ne(this,Ha,!0),await Q(this,Hu,"f")}_emit(e,...t){if(Q(this,$u,"f"))return;e==="end"&&(Ne(this,$u,!0),Q(this,Pf,"f").call(this));const i=Q(this,Fs,"f")[e];if(i&&(Q(this,Fs,"f")[e]=i.filter(r=>!r.once),i.forEach(({listener:r})=>r(...t))),e==="abort"){const r=t[0];!Q(this,Ha,"f")&&!(i!=null&&i.length)&&Promise.reject(r),Q(this,Gu,"f").call(this,r),Q(this,zu,"f").call(this,r),this._emit("end");return}if(e==="error"){const r=t[0];!Q(this,Ha,"f")&&!(i!=null&&i.length)&&Promise.reject(r),Q(this,Gu,"f").call(this,r),Q(this,zu,"f").call(this,r),this._emit("end")}}_emitFinal(){}}Mf=new WeakMap,Df=new WeakMap,Gu=new WeakMap,Hu=new WeakMap,Pf=new WeakMap,zu=new WeakMap,Fs=new WeakMap,$u=new WeakMap,oh=new WeakMap,ah=new WeakMap,Ha=new WeakMap,hy=new WeakSet,lb=function(e){if(Ne(this,oh,!0),e instanceof Error&&e.name==="AbortError"&&(e=new hi),e instanceof hi)return Ne(this,ah,!0),this._emit("abort",e);if(e instanceof Ae)return this._emit("error",e);if(e instanceof Error){const t=new Ae(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new Ae(String(e)))};function KO(n){return typeof n.parse=="function"}var Cn,py,lh,my,gy,yy,ub,cb;const YO=10;class db extends u_{constructor(){super(...arguments),Cn.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var i;this._chatCompletions.push(e),this._emit("chatCompletion",e);const t=(i=e.choices[0])==null?void 0:i.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t){if(this._emit("message",e),ab(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(rh(e)&&e.tool_calls)for(const i of e.tool_calls)i.type==="function"&&this._emit("functionToolCall",i.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Ae("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),Q(this,Cn,"m",py).call(this)}async finalMessage(){return await this.done(),Q(this,Cn,"m",lh).call(this)}async finalFunctionToolCall(){return await this.done(),Q(this,Cn,"m",my).call(this)}async finalFunctionToolCallResult(){return await this.done(),Q(this,Cn,"m",gy).call(this)}async totalUsage(){return await this.done(),Q(this,Cn,"m",yy).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const t=Q(this,Cn,"m",lh).call(this);t&&this._emit("finalMessage",t);const i=Q(this,Cn,"m",py).call(this);i&&this._emit("finalContent",i);const r=Q(this,Cn,"m",my).call(this);r&&this._emit("finalFunctionToolCall",r);const a=Q(this,Cn,"m",gy).call(this);a!=null&&this._emit("finalFunctionToolCallResult",a),this._chatCompletions.some(u=>u.usage)&&this._emit("totalUsage",Q(this,Cn,"m",yy).call(this))}async _createChatCompletion(e,t,i){const r=i==null?void 0:i.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),Q(this,Cn,"m",ub).call(this,t);const a=await e.chat.completions.create({...t,stream:!1},{...i,signal:this.controller.signal});return this._connected(),this._addChatCompletion(l_(a,t))}async _runChatCompletion(e,t,i){for(const r of t.messages)this._addMessage(r,!1);return await this._createChatCompletion(e,t,i)}async _runTools(e,t,i){var C,M,U;const r="tool",{tool_choice:a="auto",stream:u,...d}=t,p=typeof a!="string"&&a.type==="function"&&((C=a==null?void 0:a.function)==null?void 0:C.name),{maxChatCompletions:h=YO}=i||{},_=t.tools.map(P=>{if(Tc(P)){if(!P.$callback)throw new Ae("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:P.$callback,name:P.function.name,description:P.function.description||"",parameters:P.function.parameters,parse:P.$parseRaw,strict:!0}}}return P}),T={};for(const P of _)P.type==="function"&&(T[P.function.name||P.function.function.name]=P.function);const E="tools"in t?_.map(P=>P.type==="function"?{type:"function",function:{name:P.function.name||P.function.function.name,parameters:P.function.parameters,description:P.function.description,strict:P.function.strict}}:P):void 0;for(const P of t.messages)this._addMessage(P,!1);for(let P=0;P<h;++P){const H=(M=(await this._createChatCompletion(e,{...d,tool_choice:a,tools:E,messages:[...this.messages]},i)).choices[0])==null?void 0:M.message;if(!H)throw new Ae("missing message in ChatCompletion response");if(!((U=H.tool_calls)!=null&&U.length))return;for(const z of H.tool_calls){if(z.type!=="function")continue;const X=z.id,{name:ue,arguments:W}=z.function,N=T[ue];if(N){if(p&&p!==ue){const k=`Invalid tool_call: ${JSON.stringify(ue)}. ${JSON.stringify(p)} requested. Please try again`;this._addMessage({role:r,tool_call_id:X,content:k});continue}}else{const k=`Invalid tool_call: ${JSON.stringify(ue)}. Available options are: ${Object.keys(T).map(q=>JSON.stringify(q)).join(", ")}. Please try again`;this._addMessage({role:r,tool_call_id:X,content:k});continue}let D;try{D=KO(N)?await N.parse(W):W}catch(k){const q=k instanceof Error?k.message:String(k);this._addMessage({role:r,tool_call_id:X,content:q});continue}const x=await N.function(D,this),L=Q(this,Cn,"m",cb).call(this,x);if(this._addMessage({role:r,tool_call_id:X,content:L}),p)return}}}}Cn=new WeakSet,py=function(){return Q(this,Cn,"m",lh).call(this).content??null},lh=function(){let e=this.messages.length;for(;e-- >0;){const t=this.messages[e];if(rh(t))return{...t,content:t.content??null,refusal:t.refusal??null}}throw new Ae("stream ended without producing a ChatCompletionMessage with role=assistant")},my=function(){var e,t;for(let i=this.messages.length-1;i>=0;i--){const r=this.messages[i];if(rh(r)&&((e=r==null?void 0:r.tool_calls)!=null&&e.length))return(t=r.tool_calls.filter(a=>a.type==="function").at(-1))==null?void 0:t.function}},gy=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(ab(t)&&t.content!=null&&typeof t.content=="string"&&this.messages.some(i=>{var r;return i.role==="assistant"&&((r=i.tool_calls)==null?void 0:r.some(a=>a.type==="function"&&a.id===t.tool_call_id))}))return t.content}},yy=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},ub=function(e){if(e.n!=null&&e.n>1)throw new Ae("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},cb=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class c_ extends db{static runTools(e,t,i){const r=new c_,a={...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,t,a)),r}_addMessage(e,t=!0){super._addMessage(e,t),rh(e)&&e.content&&this._emit("content",e.content)}}const fb=1,hb=2,pb=4,mb=8,gb=16,yb=32,_b=64,vb=128,Tb=256,Eb=vb|Tb,Sb=gb|yb|Eb|_b,Ab=fb|hb|Sb,wb=pb|mb,WO=Ab|wb,en={STR:fb,NUM:hb,ARR:pb,OBJ:mb,NULL:gb,BOOL:yb,NAN:_b,INFINITY:vb,MINUS_INFINITY:Tb,INF:Eb,SPECIAL:Sb,ATOM:Ab,COLLECTION:wb,ALL:WO};class QO extends Error{}class XO extends Error{}function jO(n,e=en.ALL){if(typeof n!="string")throw new TypeError(`expecting str, got ${typeof n}`);if(!n.trim())throw new Error(`${n} is empty`);return ZO(n.trim(),e)}const ZO=(n,e)=>{const t=n.length;let i=0;const r=E=>{throw new QO(`${E} at position ${i}`)},a=E=>{throw new XO(`${E} at position ${i}`)},u=()=>(T(),i>=t&&r("Unexpected end of input"),n[i]==='"'?d():n[i]==="{"?p():n[i]==="["?h():n.substring(i,i+4)==="null"||en.NULL&e&&t-i<4&&"null".startsWith(n.substring(i))?(i+=4,null):n.substring(i,i+4)==="true"||en.BOOL&e&&t-i<4&&"true".startsWith(n.substring(i))?(i+=4,!0):n.substring(i,i+5)==="false"||en.BOOL&e&&t-i<5&&"false".startsWith(n.substring(i))?(i+=5,!1):n.substring(i,i+8)==="Infinity"||en.INFINITY&e&&t-i<8&&"Infinity".startsWith(n.substring(i))?(i+=8,1/0):n.substring(i,i+9)==="-Infinity"||en.MINUS_INFINITY&e&&1<t-i&&t-i<9&&"-Infinity".startsWith(n.substring(i))?(i+=9,-1/0):n.substring(i,i+3)==="NaN"||en.NAN&e&&t-i<3&&"NaN".startsWith(n.substring(i))?(i+=3,NaN):_()),d=()=>{const E=i;let C=!1;for(i++;i<t&&(n[i]!=='"'||C&&n[i-1]==="\\");)C=n[i]==="\\"?!C:!1,i++;if(n.charAt(i)=='"')try{return JSON.parse(n.substring(E,++i-Number(C)))}catch(M){a(String(M))}else if(en.STR&e)try{return JSON.parse(n.substring(E,i-Number(C))+'"')}catch{return JSON.parse(n.substring(E,n.lastIndexOf("\\"))+'"')}r("Unterminated string literal")},p=()=>{i++,T();const E={};try{for(;n[i]!=="}";){if(T(),i>=t&&en.OBJ&e)return E;const C=d();T(),i++;try{const M=u();Object.defineProperty(E,C,{value:M,writable:!0,enumerable:!0,configurable:!0})}catch(M){if(en.OBJ&e)return E;throw M}T(),n[i]===","&&i++}}catch{if(en.OBJ&e)return E;r("Expected '}' at end of object")}return i++,E},h=()=>{i++;const E=[];try{for(;n[i]!=="]";)E.push(u()),T(),n[i]===","&&i++}catch{if(en.ARR&e)return E;r("Expected ']' at end of array")}return i++,E},_=()=>{if(i===0){n==="-"&&en.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(n)}catch(C){if(en.NUM&e)try{return n[n.length-1]==="."?JSON.parse(n.substring(0,n.lastIndexOf("."))):JSON.parse(n.substring(0,n.lastIndexOf("e")))}catch{}a(String(C))}}const E=i;for(n[i]==="-"&&i++;n[i]&&!",]}".includes(n[i]);)i++;i==t&&!(en.NUM&e)&&r("Unterminated number literal");try{return JSON.parse(n.substring(E,i))}catch{n.substring(E,i)==="-"&&en.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(n.substring(E,n.lastIndexOf("e")))}catch(M){a(String(M))}}},T=()=>{for(;i<t&&` 
\r	`.includes(n[i]);)i++};return u()},WA=n=>jO(n,en.ALL^en.NUM);var Yt,Os,Oa,Mr,Ig,yf,bg,Rg,xg,_f,Ng,QA;class uc extends db{constructor(e){super(),Yt.add(this),Os.set(this,void 0),Oa.set(this,void 0),Mr.set(this,void 0),Ne(this,Os,e),Ne(this,Oa,[])}get currentChatCompletionSnapshot(){return Q(this,Mr,"f")}static fromReadableStream(e){const t=new uc(null);return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,i){const r=new uc(t);return r._run(()=>r._runChatCompletion(e,{...t,stream:!0},{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createChatCompletion(e,t,i){var u;super._createChatCompletion;const r=i==null?void 0:i.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),Q(this,Yt,"m",Ig).call(this);const a=await e.chat.completions.create({...t,stream:!0},{...i,signal:this.controller.signal});this._connected();for await(const d of a)Q(this,Yt,"m",bg).call(this,d);if((u=a.controller.signal)!=null&&u.aborted)throw new hi;return this._addChatCompletion(Q(this,Yt,"m",_f).call(this))}async _fromReadableStream(e,t){var u;const i=t==null?void 0:t.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),Q(this,Yt,"m",Ig).call(this),this._connected();const r=cs.fromReadableStream(e,this.controller);let a;for await(const d of r)a&&a!==d.id&&this._addChatCompletion(Q(this,Yt,"m",_f).call(this)),Q(this,Yt,"m",bg).call(this,d),a=d.id;if((u=r.controller.signal)!=null&&u.aborted)throw new hi;return this._addChatCompletion(Q(this,Yt,"m",_f).call(this))}[(Os=new WeakMap,Oa=new WeakMap,Mr=new WeakMap,Yt=new WeakSet,Ig=function(){this.ended||Ne(this,Mr,void 0)},yf=function(t){let i=Q(this,Oa,"f")[t.index];return i||(i={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},Q(this,Oa,"f")[t.index]=i,i)},bg=function(t){var r,a,u,d,p,h,_,T,E,C,M,U,P,$,H;if(this.ended)return;const i=Q(this,Yt,"m",QA).call(this,t);this._emit("chunk",t,i);for(const z of t.choices){const X=i.choices[z.index];z.delta.content!=null&&((r=X.message)==null?void 0:r.role)==="assistant"&&((a=X.message)!=null&&a.content)&&(this._emit("content",z.delta.content,X.message.content),this._emit("content.delta",{delta:z.delta.content,snapshot:X.message.content,parsed:X.message.parsed})),z.delta.refusal!=null&&((u=X.message)==null?void 0:u.role)==="assistant"&&((d=X.message)!=null&&d.refusal)&&this._emit("refusal.delta",{delta:z.delta.refusal,snapshot:X.message.refusal}),((p=z.logprobs)==null?void 0:p.content)!=null&&((h=X.message)==null?void 0:h.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(_=z.logprobs)==null?void 0:_.content,snapshot:((T=X.logprobs)==null?void 0:T.content)??[]}),((E=z.logprobs)==null?void 0:E.refusal)!=null&&((C=X.message)==null?void 0:C.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(M=z.logprobs)==null?void 0:M.refusal,snapshot:((U=X.logprobs)==null?void 0:U.refusal)??[]});const ue=Q(this,Yt,"m",yf).call(this,X);X.finish_reason&&(Q(this,Yt,"m",xg).call(this,X),ue.current_tool_call_index!=null&&Q(this,Yt,"m",Rg).call(this,X,ue.current_tool_call_index));for(const W of z.delta.tool_calls??[])ue.current_tool_call_index!==W.index&&(Q(this,Yt,"m",xg).call(this,X),ue.current_tool_call_index!=null&&Q(this,Yt,"m",Rg).call(this,X,ue.current_tool_call_index)),ue.current_tool_call_index=W.index;for(const W of z.delta.tool_calls??[]){const N=(P=X.message.tool_calls)==null?void 0:P[W.index];N!=null&&N.type&&((N==null?void 0:N.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:($=N.function)==null?void 0:$.name,index:W.index,arguments:N.function.arguments,parsed_arguments:N.function.parsed_arguments,arguments_delta:((H=W.function)==null?void 0:H.arguments)??""}):(N==null||N.type,void 0))}}},Rg=function(t,i){var u,d,p;if(Q(this,Yt,"m",yf).call(this,t).done_tool_calls.has(i))return;const a=(u=t.message.tool_calls)==null?void 0:u[i];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const h=(p=(d=Q(this,Os,"f"))==null?void 0:d.tools)==null?void 0:p.find(_=>sh(_)&&_.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:i,arguments:a.function.arguments,parsed_arguments:Tc(h)?h.$parseRaw(a.function.arguments):h!=null&&h.function.strict?JSON.parse(a.function.arguments):null})}else a.type},xg=function(t){var r,a;const i=Q(this,Yt,"m",yf).call(this,t);if(t.message.content&&!i.content_done){i.content_done=!0;const u=Q(this,Yt,"m",Ng).call(this);this._emit("content.done",{content:t.message.content,parsed:u?u.$parseRaw(t.message.content):null})}t.message.refusal&&!i.refusal_done&&(i.refusal_done=!0,this._emit("refusal.done",{refusal:t.message.refusal})),(r=t.logprobs)!=null&&r.content&&!i.logprobs_content_done&&(i.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:t.logprobs.content})),(a=t.logprobs)!=null&&a.refusal&&!i.logprobs_refusal_done&&(i.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:t.logprobs.refusal}))},_f=function(){if(this.ended)throw new Ae("stream has ended, this shouldn't happen");const t=Q(this,Mr,"f");if(!t)throw new Ae("request ended without sending any chunks");return Ne(this,Mr,void 0),Ne(this,Oa,[]),e4(t,Q(this,Os,"f"))},Ng=function(){var i;const t=(i=Q(this,Os,"f"))==null?void 0:i.response_format;return a_(t)?t:null},QA=function(t){var i,r,a,u;let d=Q(this,Mr,"f");const{choices:p,...h}=t;d?Object.assign(d,h):d=Ne(this,Mr,{...h,choices:[]});for(const{delta:_,finish_reason:T,index:E,logprobs:C=null,...M}of t.choices){let U=d.choices[E];if(U||(U=d.choices[E]={finish_reason:T,index:E,message:{},logprobs:C,...M}),C)if(!U.logprobs)U.logprobs=Object.assign({},C);else{const{content:W,refusal:N,...D}=C;Object.assign(U.logprobs,D),W&&((i=U.logprobs).content??(i.content=[]),U.logprobs.content.push(...W)),N&&((r=U.logprobs).refusal??(r.refusal=[]),U.logprobs.refusal.push(...N))}if(T&&(U.finish_reason=T,Q(this,Os,"f")&&rb(Q(this,Os,"f")))){if(T==="length")throw new BI;if(T==="content_filter")throw new qI}if(Object.assign(U,M),!_)continue;const{content:P,refusal:$,function_call:H,role:z,tool_calls:X,...ue}=_;if(Object.assign(U.message,ue),$&&(U.message.refusal=(U.message.refusal||"")+$),z&&(U.message.role=z),H&&(U.message.function_call?(H.name&&(U.message.function_call.name=H.name),H.arguments&&((a=U.message.function_call).arguments??(a.arguments=""),U.message.function_call.arguments+=H.arguments)):U.message.function_call=H),P&&(U.message.content=(U.message.content||"")+P,!U.message.refusal&&Q(this,Yt,"m",Ng).call(this)&&(U.message.parsed=WA(U.message.content))),X){U.message.tool_calls||(U.message.tool_calls=[]);for(const{index:W,id:N,type:D,function:x,...L}of X){const k=(u=U.message.tool_calls)[W]??(u[W]={});Object.assign(k,L),N&&(k.id=N),D&&(k.type=D),x&&(k.function??(k.function={name:x.name??"",arguments:""})),x!=null&&x.name&&(k.function.name=x.name),x!=null&&x.arguments&&(k.function.arguments+=x.arguments,$O(Q(this,Os,"f"),k)&&(k.function.parsed_arguments=WA(k.function.arguments)))}}}return d},Symbol.asyncIterator)](){const e=[],t=[];let i=!1;return this.on("chunk",r=>{const a=t.shift();a?a.resolve(r):e.push(r)}),this.on("end",()=>{i=!0;for(const r of t)r.resolve(void 0);t.length=0}),this.on("abort",r=>{i=!0;for(const a of t)a.reject(r);t.length=0}),this.on("error",r=>{i=!0;for(const a of t)a.reject(r);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((a,u)=>t.push({resolve:a,reject:u})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new cs(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function e4(n,e){const{id:t,choices:i,created:r,model:a,system_fingerprint:u,...d}=n,p={...d,id:t,choices:i.map(({message:h,finish_reason:_,index:T,logprobs:E,...C})=>{if(!_)throw new Ae(`missing finish_reason for choice ${T}`);const{content:M=null,function_call:U,tool_calls:P,...$}=h,H=h.role;if(!H)throw new Ae(`missing role for choice ${T}`);if(U){const{arguments:z,name:X}=U;if(z==null)throw new Ae(`missing function_call.arguments for choice ${T}`);if(!X)throw new Ae(`missing function_call.name for choice ${T}`);return{...C,message:{content:M,function_call:{arguments:z,name:X},role:H,refusal:h.refusal??null},finish_reason:_,index:T,logprobs:E}}return P?{...C,index:T,finish_reason:_,logprobs:E,message:{...$,role:H,content:M,refusal:h.refusal??null,tool_calls:P.map((z,X)=>{const{function:ue,type:W,id:N,...D}=z,{arguments:x,name:L,...k}=ue||{};if(N==null)throw new Ae(`missing choices[${T}].tool_calls[${X}].id
${vf(n)}`);if(W==null)throw new Ae(`missing choices[${T}].tool_calls[${X}].type
${vf(n)}`);if(L==null)throw new Ae(`missing choices[${T}].tool_calls[${X}].function.name
${vf(n)}`);if(x==null)throw new Ae(`missing choices[${T}].tool_calls[${X}].function.arguments
${vf(n)}`);return{...D,id:N,type:W,function:{...k,name:L,arguments:x}}})}}:{...C,message:{...$,content:M,role:H,refusal:h.refusal??null},finish_reason:_,index:T,logprobs:E}}),created:r,model:a,object:"chat.completion",...u?{system_fingerprint:u}:{}};return GO(p,e)}function vf(n){return JSON.stringify(n)}class uh extends uc{static fromReadableStream(e){const t=new uh(null);return t._run(()=>t._fromReadableStream(e)),t}static runTools(e,t,i){const r=new uh(t),a={...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,t,a)),r}}let d_=class extends Ee{constructor(){super(...arguments),this.messages=new sb(this._client)}create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}retrieve(e,t){return this._client.get(le`/chat/completions/${e}`,t)}update(e,t,i){return this._client.post(le`/chat/completions/${e}`,{body:t,...i})}list(e={},t){return this._client.getAPIList("/chat/completions",bt,{query:e,...t})}delete(e,t){return this._client.delete(le`/chat/completions/${e}`,t)}parse(e,t){return JO(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t==null?void 0:t.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(i=>l_(i,e))}runTools(e,t){return e.stream?uh.runTools(this._client,e,t):c_.runTools(this._client,e,t)}stream(e,t){return uc.createChatCompletion(this._client,e,t)}};d_.Messages=sb;class f_ extends Ee{constructor(){super(...arguments),this.completions=new d_(this._client)}}f_.Completions=d_;const Cb=Symbol("brand.privateNullableHeaders");function*t4(n){if(!n)return;if(Cb in n){const{values:i,nulls:r}=n;yield*i.entries();for(const a of r)yield[a,null];return}let e=!1,t;n instanceof Headers?t=n.entries():VA(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let i of t){const r=i[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const a=VA(i[1])?i[1]:[i[1]];let u=!1;for(const d of a)d!==void 0&&(e&&!u&&(u=!0,yield[r,null]),yield[r,d])}}const _e=n=>{const e=new Headers,t=new Set;for(const i of n){const r=new Set;for(const[a,u]of t4(i)){const d=a.toLowerCase();r.has(d)||(e.delete(a),r.add(d)),u===null?(e.delete(a),t.add(d)):(e.append(a,u),t.delete(d))}}return{[Cb]:!0,values:e,nulls:t}};class Ib extends Ee{create(e,t){return this._client.post("/audio/speech",{body:e,...t,headers:_e([{Accept:"application/octet-stream"},t==null?void 0:t.headers]),__binaryResponse:!0})}}class bb extends Ee{create(e,t){return this._client.post("/audio/transcriptions",rl({body:e,...t,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class Rb extends Ee{create(e,t){return this._client.post("/audio/translations",rl({body:e,...t,__metadata:{model:e.model}},this._client))}}class Ec extends Ee{constructor(){super(...arguments),this.transcriptions=new bb(this._client),this.translations=new Rb(this._client),this.speech=new Ib(this._client)}}Ec.Transcriptions=bb;Ec.Translations=Rb;Ec.Speech=Ib;class xb extends Ee{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(le`/batches/${e}`,t)}list(e={},t){return this._client.getAPIList("/batches",bt,{query:e,...t})}cancel(e,t){return this._client.post(le`/batches/${e}/cancel`,t)}}class Nb extends Ee{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:_e([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}retrieve(e,t){return this._client.get(le`/assistants/${e}`,{...t,headers:_e([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}update(e,t,i){return this._client.post(le`/assistants/${e}`,{body:t,...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}list(e={},t){return this._client.getAPIList("/assistants",bt,{query:e,...t,headers:_e([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}delete(e,t){return this._client.delete(le`/assistants/${e}`,{...t,headers:_e([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}}let Mb=class extends Ee{create(e,t){return this._client.post("/realtime/sessions",{body:e,...t,headers:_e([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}};class Db extends Ee{create(e,t){return this._client.post("/realtime/transcription_sessions",{body:e,...t,headers:_e([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}}let qh=class extends Ee{constructor(){super(...arguments),this.sessions=new Mb(this._client),this.transcriptionSessions=new Db(this._client)}};qh.Sessions=Mb;qh.TranscriptionSessions=Db;class Pb extends Ee{create(e,t){return this._client.post("/chatkit/sessions",{body:e,...t,headers:_e([{"OpenAI-Beta":"chatkit_beta=v1"},t==null?void 0:t.headers])})}cancel(e,t){return this._client.post(le`/chatkit/sessions/${e}/cancel`,{...t,headers:_e([{"OpenAI-Beta":"chatkit_beta=v1"},t==null?void 0:t.headers])})}}let kb=class extends Ee{retrieve(e,t){return this._client.get(le`/chatkit/threads/${e}`,{...t,headers:_e([{"OpenAI-Beta":"chatkit_beta=v1"},t==null?void 0:t.headers])})}list(e={},t){return this._client.getAPIList("/chatkit/threads",ih,{query:e,...t,headers:_e([{"OpenAI-Beta":"chatkit_beta=v1"},t==null?void 0:t.headers])})}delete(e,t){return this._client.delete(le`/chatkit/threads/${e}`,{...t,headers:_e([{"OpenAI-Beta":"chatkit_beta=v1"},t==null?void 0:t.headers])})}listItems(e,t={},i){return this._client.getAPIList(le`/chatkit/threads/${e}/items`,ih,{query:t,...i,headers:_e([{"OpenAI-Beta":"chatkit_beta=v1"},i==null?void 0:i.headers])})}};class Gh extends Ee{constructor(){super(...arguments),this.sessions=new Pb(this._client),this.threads=new kb(this._client)}}Gh.Sessions=Pb;Gh.Threads=kb;class Vb extends Ee{create(e,t,i){return this._client.post(le`/threads/${e}/messages`,{body:t,...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}retrieve(e,t,i){const{thread_id:r}=t;return this._client.get(le`/threads/${r}/messages/${e}`,{...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}update(e,t,i){const{thread_id:r,...a}=t;return this._client.post(le`/threads/${r}/messages/${e}`,{body:a,...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}list(e,t={},i){return this._client.getAPIList(le`/threads/${e}/messages`,bt,{query:t,...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}delete(e,t,i){const{thread_id:r}=t;return this._client.delete(le`/threads/${r}/messages/${e}`,{...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}}class Ub extends Ee{retrieve(e,t,i){const{thread_id:r,run_id:a,...u}=t;return this._client.get(le`/threads/${r}/runs/${a}/steps/${e}`,{query:u,...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}list(e,t,i){const{thread_id:r,...a}=t;return this._client.getAPIList(le`/threads/${r}/runs/${e}/steps`,bt,{query:a,...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}}const n4=n=>{if(typeof Buffer<"u"){const e=Buffer.from(n,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(n),t=e.length,i=new Uint8Array(t);for(let r=0;r<t;r++)i[r]=e.charCodeAt(r);return Array.from(new Float32Array(i.buffer))}};var Mg={};const Fa=n=>{var e,t,i,r;if(typeof globalThis.process<"u")return((e=Mg==null?void 0:Mg[n])==null?void 0:e.trim())??void 0;if(typeof globalThis.Deno<"u")return(r=(i=(t=globalThis.Deno.env)==null?void 0:t.get)==null?void 0:i.call(t,n))==null?void 0:r.trim()};var fn,Do,_y,ls,kf,Ri,Po,Qa,Mo,ch,Qn,Vf,Uf,Zu,Ju,Ku,XA,jA,ZA,ew,tw,nw,iw;class ec extends u_{constructor(){super(...arguments),fn.add(this),_y.set(this,[]),ls.set(this,{}),kf.set(this,{}),Ri.set(this,void 0),Po.set(this,void 0),Qa.set(this,void 0),Mo.set(this,void 0),ch.set(this,void 0),Qn.set(this,void 0),Vf.set(this,void 0),Uf.set(this,void 0),Zu.set(this,void 0)}[(_y=new WeakMap,ls=new WeakMap,kf=new WeakMap,Ri=new WeakMap,Po=new WeakMap,Qa=new WeakMap,Mo=new WeakMap,ch=new WeakMap,Qn=new WeakMap,Vf=new WeakMap,Uf=new WeakMap,Zu=new WeakMap,fn=new WeakSet,Symbol.asyncIterator)](){const e=[],t=[];let i=!1;return this.on("event",r=>{const a=t.shift();a?a.resolve(r):e.push(r)}),this.on("end",()=>{i=!0;for(const r of t)r.resolve(void 0);t.length=0}),this.on("abort",r=>{i=!0;for(const a of t)a.reject(r);t.length=0}),this.on("error",r=>{i=!0;for(const a of t)a.reject(r);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((a,u)=>t.push({resolve:a,reject:u})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const t=new Do;return t._run(()=>t._fromReadableStream(e)),t}async _fromReadableStream(e,t){var a;const i=t==null?void 0:t.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),this._connected();const r=cs.fromReadableStream(e,this.controller);for await(const u of r)Q(this,fn,"m",Ju).call(this,u);if((a=r.controller.signal)!=null&&a.aborted)throw new hi;return this._addRun(Q(this,fn,"m",Ku).call(this))}toReadableStream(){return new cs(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,i,r){const a=new Do;return a._run(()=>a._runToolAssistantStream(e,t,i,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createToolAssistantStream(e,t,i,r){var p;const a=r==null?void 0:r.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const u={...i,stream:!0},d=await e.submitToolOutputs(t,u,{...r,signal:this.controller.signal});this._connected();for await(const h of d)Q(this,fn,"m",Ju).call(this,h);if((p=d.controller.signal)!=null&&p.aborted)throw new hi;return this._addRun(Q(this,fn,"m",Ku).call(this))}static createThreadAssistantStream(e,t,i){const r=new Do;return r._run(()=>r._threadAssistantStream(e,t,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),r}static createAssistantStream(e,t,i,r){const a=new Do;return a._run(()=>a._runAssistantStream(e,t,i,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return Q(this,Vf,"f")}currentRun(){return Q(this,Uf,"f")}currentMessageSnapshot(){return Q(this,Ri,"f")}currentRunStepSnapshot(){return Q(this,Zu,"f")}async finalRunSteps(){return await this.done(),Object.values(Q(this,ls,"f"))}async finalMessages(){return await this.done(),Object.values(Q(this,kf,"f"))}async finalRun(){if(await this.done(),!Q(this,Po,"f"))throw Error("Final run was not received.");return Q(this,Po,"f")}async _createThreadAssistantStream(e,t,i){var d;const r=i==null?void 0:i.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));const a={...t,stream:!0},u=await e.createAndRun(a,{...i,signal:this.controller.signal});this._connected();for await(const p of u)Q(this,fn,"m",Ju).call(this,p);if((d=u.controller.signal)!=null&&d.aborted)throw new hi;return this._addRun(Q(this,fn,"m",Ku).call(this))}async _createAssistantStream(e,t,i,r){var p;const a=r==null?void 0:r.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const u={...i,stream:!0},d=await e.create(t,u,{...r,signal:this.controller.signal});this._connected();for await(const h of d)Q(this,fn,"m",Ju).call(this,h);if((p=d.controller.signal)!=null&&p.aborted)throw new hi;return this._addRun(Q(this,fn,"m",Ku).call(this))}static accumulateDelta(e,t){for(const[i,r]of Object.entries(t)){if(!e.hasOwnProperty(i)){e[i]=r;continue}let a=e[i];if(a==null){e[i]=r;continue}if(i==="index"||i==="type"){e[i]=r;continue}if(typeof a=="string"&&typeof r=="string")a+=r;else if(typeof a=="number"&&typeof r=="number")a+=r;else if(Ag(a)&&Ag(r))a=this.accumulateDelta(a,r);else if(Array.isArray(a)&&Array.isArray(r)){if(a.every(u=>typeof u=="string"||typeof u=="number")){a.push(...r);continue}for(const u of r){if(!Ag(u))throw new Error(`Expected array delta entry to be an object but got: ${u}`);const d=u.index;if(d==null)throw console.error(u),new Error("Expected array delta entry to have an `index` property");if(typeof d!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${d}`);const p=a[d];p==null?a.push(u):a[d]=this.accumulateDelta(p,u)}continue}else throw Error(`Unhandled record type: ${i}, deltaValue: ${r}, accValue: ${a}`);e[i]=a}return e}_addRun(e){return e}async _threadAssistantStream(e,t,i){return await this._createThreadAssistantStream(t,e,i)}async _runAssistantStream(e,t,i,r){return await this._createAssistantStream(t,e,i,r)}async _runToolAssistantStream(e,t,i,r){return await this._createToolAssistantStream(t,e,i,r)}}Do=ec,Ju=function(e){if(!this.ended)switch(Ne(this,Vf,e),Q(this,fn,"m",ZA).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":Q(this,fn,"m",iw).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Q(this,fn,"m",jA).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":Q(this,fn,"m",XA).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Ku=function(){if(this.ended)throw new Ae("stream has ended, this shouldn't happen");if(!Q(this,Po,"f"))throw Error("Final run has not been received");return Q(this,Po,"f")},XA=function(e){const[t,i]=Q(this,fn,"m",tw).call(this,e,Q(this,Ri,"f"));Ne(this,Ri,t),Q(this,kf,"f")[t.id]=t;for(const r of i){const a=t.content[r.index];(a==null?void 0:a.type)=="text"&&this._emit("textCreated",a.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(const r of e.data.delta.content){if(r.type=="text"&&r.text){let a=r.text,u=t.content[r.index];if(u&&u.type=="text")this._emit("textDelta",a,u.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(r.index!=Q(this,Qa,"f")){if(Q(this,Mo,"f"))switch(Q(this,Mo,"f").type){case"text":this._emit("textDone",Q(this,Mo,"f").text,Q(this,Ri,"f"));break;case"image_file":this._emit("imageFileDone",Q(this,Mo,"f").image_file,Q(this,Ri,"f"));break}Ne(this,Qa,r.index)}Ne(this,Mo,t.content[r.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(Q(this,Qa,"f")!==void 0){const r=e.data.content[Q(this,Qa,"f")];if(r)switch(r.type){case"image_file":this._emit("imageFileDone",r.image_file,Q(this,Ri,"f"));break;case"text":this._emit("textDone",r.text,Q(this,Ri,"f"));break}}Q(this,Ri,"f")&&this._emit("messageDone",e.data),Ne(this,Ri,void 0)}},jA=function(e){const t=Q(this,fn,"m",ew).call(this,e);switch(Ne(this,Zu,t),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const i=e.data.delta;if(i.step_details&&i.step_details.type=="tool_calls"&&i.step_details.tool_calls&&t.step_details.type=="tool_calls")for(const a of i.step_details.tool_calls)a.index==Q(this,ch,"f")?this._emit("toolCallDelta",a,t.step_details.tool_calls[a.index]):(Q(this,Qn,"f")&&this._emit("toolCallDone",Q(this,Qn,"f")),Ne(this,ch,a.index),Ne(this,Qn,t.step_details.tool_calls[a.index]),Q(this,Qn,"f")&&this._emit("toolCallCreated",Q(this,Qn,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Ne(this,Zu,void 0),e.data.step_details.type=="tool_calls"&&Q(this,Qn,"f")&&(this._emit("toolCallDone",Q(this,Qn,"f")),Ne(this,Qn,void 0)),this._emit("runStepDone",e.data,t);break}},ZA=function(e){Q(this,_y,"f").push(e),this._emit("event",e)},ew=function(e){switch(e.event){case"thread.run.step.created":return Q(this,ls,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=Q(this,ls,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let i=e.data;if(i.delta){const r=Do.accumulateDelta(t,i.delta);Q(this,ls,"f")[e.data.id]=r}return Q(this,ls,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":Q(this,ls,"f")[e.data.id]=e.data;break}if(Q(this,ls,"f")[e.data.id])return Q(this,ls,"f")[e.data.id];throw new Error("No snapshot available")},tw=function(e,t){let i=[];switch(e.event){case"thread.message.created":return[e.data,i];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let r=e.data;if(r.delta.content)for(const a of r.delta.content)if(a.index in t.content){let u=t.content[a.index];t.content[a.index]=Q(this,fn,"m",nw).call(this,a,u)}else t.content[a.index]=a,i.push(a);return[t,i];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,i];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},nw=function(e,t){return Do.accumulateDelta(t,e)},iw=function(e){switch(Ne(this,Uf,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":Ne(this,Po,e.data),Q(this,Qn,"f")&&(this._emit("toolCallDone",Q(this,Qn,"f")),Ne(this,Qn,void 0));break}};let h_=class extends Ee{constructor(){super(...arguments),this.steps=new Ub(this._client)}create(e,t,i){const{include:r,...a}=t;return this._client.post(le`/threads/${e}/runs`,{query:{include:r},body:a,...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers]),stream:t.stream??!1})}retrieve(e,t,i){const{thread_id:r}=t;return this._client.get(le`/threads/${r}/runs/${e}`,{...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}update(e,t,i){const{thread_id:r,...a}=t;return this._client.post(le`/threads/${r}/runs/${e}`,{body:a,...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}list(e,t={},i){return this._client.getAPIList(le`/threads/${e}/runs`,bt,{query:t,...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}cancel(e,t,i){const{thread_id:r}=t;return this._client.post(le`/threads/${r}/runs/${e}/cancel`,{...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}async createAndPoll(e,t,i){const r=await this.create(e,t,i);return await this.poll(r.id,{thread_id:e},i)}createAndStream(e,t,i){return ec.createAssistantStream(e,this._client.beta.threads.runs,t,i)}async poll(e,t,i){var a;const r=_e([i==null?void 0:i.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((a=i==null?void 0:i.pollIntervalMs)==null?void 0:a.toString())??void 0}]);for(;;){const{data:u,response:d}=await this.retrieve(e,t,{...i,headers:{...i==null?void 0:i.headers,...r}}).withResponse();switch(u.status){case"queued":case"in_progress":case"cancelling":let p=5e3;if(i!=null&&i.pollIntervalMs)p=i.pollIntervalMs;else{const h=d.headers.get("openai-poll-after-ms");if(h){const _=parseInt(h);isNaN(_)||(p=_)}}await vc(p);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return u}}}stream(e,t,i){return ec.createAssistantStream(e,this._client.beta.threads.runs,t,i)}submitToolOutputs(e,t,i){const{thread_id:r,...a}=t;return this._client.post(le`/threads/${r}/runs/${e}/submit_tool_outputs`,{body:a,...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers]),stream:t.stream??!1})}async submitToolOutputsAndPoll(e,t,i){const r=await this.submitToolOutputs(e,t,i);return await this.poll(r.id,t,i)}submitToolOutputsStream(e,t,i){return ec.createToolAssistantStream(e,this._client.beta.threads.runs,t,i)}};h_.Steps=Ub;class Hh extends Ee{constructor(){super(...arguments),this.runs=new h_(this._client),this.messages=new Vb(this._client)}create(e={},t){return this._client.post("/threads",{body:e,...t,headers:_e([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}retrieve(e,t){return this._client.get(le`/threads/${e}`,{...t,headers:_e([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}update(e,t,i){return this._client.post(le`/threads/${e}`,{body:t,...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}delete(e,t){return this._client.delete(le`/threads/${e}`,{...t,headers:_e([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:_e([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers]),stream:e.stream??!1})}async createAndRunPoll(e,t){const i=await this.createAndRun(e,t);return await this.runs.poll(i.id,{thread_id:i.thread_id},t)}createAndRunStream(e,t){return ec.createThreadAssistantStream(e,this._client.beta.threads,t)}}Hh.Runs=h_;Hh.Messages=Vb;class gl extends Ee{constructor(){super(...arguments),this.realtime=new qh(this._client),this.chatkit=new Gh(this._client),this.assistants=new Nb(this._client),this.threads=new Hh(this._client)}}gl.Realtime=qh;gl.ChatKit=Gh;gl.Assistants=Nb;gl.Threads=Hh;class Lb extends Ee{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}}let Ob=class extends Ee{retrieve(e,t,i){const{container_id:r}=t;return this._client.get(le`/containers/${r}/files/${e}/content`,{...i,headers:_e([{Accept:"application/binary"},i==null?void 0:i.headers]),__binaryResponse:!0})}},p_=class extends Ee{constructor(){super(...arguments),this.content=new Ob(this._client)}create(e,t,i){return this._client.post(le`/containers/${e}/files`,lc({body:t,...i},this._client))}retrieve(e,t,i){const{container_id:r}=t;return this._client.get(le`/containers/${r}/files/${e}`,i)}list(e,t={},i){return this._client.getAPIList(le`/containers/${e}/files`,bt,{query:t,...i})}delete(e,t,i){const{container_id:r}=t;return this._client.delete(le`/containers/${r}/files/${e}`,{...i,headers:_e([{Accept:"*/*"},i==null?void 0:i.headers])})}};p_.Content=Ob;class m_ extends Ee{constructor(){super(...arguments),this.files=new p_(this._client)}create(e,t){return this._client.post("/containers",{body:e,...t})}retrieve(e,t){return this._client.get(le`/containers/${e}`,t)}list(e={},t){return this._client.getAPIList("/containers",bt,{query:e,...t})}delete(e,t){return this._client.delete(le`/containers/${e}`,{...t,headers:_e([{Accept:"*/*"},t==null?void 0:t.headers])})}}m_.Files=p_;class Fb extends Ee{create(e,t,i){const{include:r,...a}=t;return this._client.post(le`/conversations/${e}/items`,{query:{include:r},body:a,...i})}retrieve(e,t,i){const{conversation_id:r,...a}=t;return this._client.get(le`/conversations/${r}/items/${e}`,{query:a,...i})}list(e,t={},i){return this._client.getAPIList(le`/conversations/${e}/items`,ih,{query:t,...i})}delete(e,t,i){const{conversation_id:r}=t;return this._client.delete(le`/conversations/${r}/items/${e}`,i)}}class g_ extends Ee{constructor(){super(...arguments),this.items=new Fb(this._client)}create(e={},t){return this._client.post("/conversations",{body:e,...t})}retrieve(e,t){return this._client.get(le`/conversations/${e}`,t)}update(e,t,i){return this._client.post(le`/conversations/${e}`,{body:t,...i})}delete(e,t){return this._client.delete(le`/conversations/${e}`,t)}}g_.Items=Fb;class Bb extends Ee{create(e,t){const i=!!e.encoding_format;let r=i?e.encoding_format:"base64";i&&dn(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const a=this._client.post("/embeddings",{body:{...e,encoding_format:r},...t});return i?a:(dn(this._client).debug("embeddings/decoding base64 embeddings from base64"),a._thenUnwrap(u=>(u&&u.data&&u.data.forEach(d=>{const p=d.embedding;d.embedding=n4(p)}),u)))}}class qb extends Ee{retrieve(e,t,i){const{eval_id:r,run_id:a}=t;return this._client.get(le`/evals/${r}/runs/${a}/output_items/${e}`,i)}list(e,t,i){const{eval_id:r,...a}=t;return this._client.getAPIList(le`/evals/${r}/runs/${e}/output_items`,bt,{query:a,...i})}}class y_ extends Ee{constructor(){super(...arguments),this.outputItems=new qb(this._client)}create(e,t,i){return this._client.post(le`/evals/${e}/runs`,{body:t,...i})}retrieve(e,t,i){const{eval_id:r}=t;return this._client.get(le`/evals/${r}/runs/${e}`,i)}list(e,t={},i){return this._client.getAPIList(le`/evals/${e}/runs`,bt,{query:t,...i})}delete(e,t,i){const{eval_id:r}=t;return this._client.delete(le`/evals/${r}/runs/${e}`,i)}cancel(e,t,i){const{eval_id:r}=t;return this._client.post(le`/evals/${r}/runs/${e}`,i)}}y_.OutputItems=qb;class __ extends Ee{constructor(){super(...arguments),this.runs=new y_(this._client)}create(e,t){return this._client.post("/evals",{body:e,...t})}retrieve(e,t){return this._client.get(le`/evals/${e}`,t)}update(e,t,i){return this._client.post(le`/evals/${e}`,{body:t,...i})}list(e={},t){return this._client.getAPIList("/evals",bt,{query:e,...t})}delete(e,t){return this._client.delete(le`/evals/${e}`,t)}}__.Runs=y_;let Gb=class extends Ee{create(e,t){return this._client.post("/files",rl({body:e,...t},this._client))}retrieve(e,t){return this._client.get(le`/files/${e}`,t)}list(e={},t){return this._client.getAPIList("/files",bt,{query:e,...t})}delete(e,t){return this._client.delete(le`/files/${e}`,t)}content(e,t){return this._client.get(le`/files/${e}/content`,{...t,headers:_e([{Accept:"application/binary"},t==null?void 0:t.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:i=1800*1e3}={}){const r=new Set(["processed","error","deleted"]),a=Date.now();let u=await this.retrieve(e);for(;!u.status||!r.has(u.status);)if(await vc(t),u=await this.retrieve(e),Date.now()-a>i)throw new i_({message:`Giving up on waiting for file ${e} to finish processing after ${i} milliseconds.`});return u}};class Hb extends Ee{}let zb=class extends Ee{run(e,t){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...t})}validate(e,t){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...t})}};class v_ extends Ee{constructor(){super(...arguments),this.graders=new zb(this._client)}}v_.Graders=zb;class $b extends Ee{create(e,t,i){return this._client.getAPIList(le`/fine_tuning/checkpoints/${e}/permissions`,Bh,{body:t,method:"post",...i})}retrieve(e,t={},i){return this._client.get(le`/fine_tuning/checkpoints/${e}/permissions`,{query:t,...i})}delete(e,t,i){const{fine_tuned_model_checkpoint:r}=t;return this._client.delete(le`/fine_tuning/checkpoints/${r}/permissions/${e}`,i)}}let T_=class extends Ee{constructor(){super(...arguments),this.permissions=new $b(this._client)}};T_.Permissions=$b;class Jb extends Ee{list(e,t={},i){return this._client.getAPIList(le`/fine_tuning/jobs/${e}/checkpoints`,bt,{query:t,...i})}}class E_ extends Ee{constructor(){super(...arguments),this.checkpoints=new Jb(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(le`/fine_tuning/jobs/${e}`,t)}list(e={},t){return this._client.getAPIList("/fine_tuning/jobs",bt,{query:e,...t})}cancel(e,t){return this._client.post(le`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},i){return this._client.getAPIList(le`/fine_tuning/jobs/${e}/events`,bt,{query:t,...i})}pause(e,t){return this._client.post(le`/fine_tuning/jobs/${e}/pause`,t)}resume(e,t){return this._client.post(le`/fine_tuning/jobs/${e}/resume`,t)}}E_.Checkpoints=Jb;class yl extends Ee{constructor(){super(...arguments),this.methods=new Hb(this._client),this.jobs=new E_(this._client),this.checkpoints=new T_(this._client),this.alpha=new v_(this._client)}}yl.Methods=Hb;yl.Jobs=E_;yl.Checkpoints=T_;yl.Alpha=v_;class Kb extends Ee{}class S_ extends Ee{constructor(){super(...arguments),this.graderModels=new Kb(this._client)}}S_.GraderModels=Kb;class Yb extends Ee{createVariation(e,t){return this._client.post("/images/variations",rl({body:e,...t},this._client))}edit(e,t){return this._client.post("/images/edits",rl({body:e,...t,stream:e.stream??!1},this._client))}generate(e,t){return this._client.post("/images/generations",{body:e,...t,stream:e.stream??!1})}}class Wb extends Ee{retrieve(e,t){return this._client.get(le`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",Bh,e)}delete(e,t){return this._client.delete(le`/models/${e}`,t)}}class Qb extends Ee{create(e,t){return this._client.post("/moderations",{body:e,...t})}}class Xb extends Ee{accept(e,t,i){return this._client.post(le`/realtime/calls/${e}/accept`,{body:t,...i,headers:_e([{Accept:"*/*"},i==null?void 0:i.headers])})}hangup(e,t){return this._client.post(le`/realtime/calls/${e}/hangup`,{...t,headers:_e([{Accept:"*/*"},t==null?void 0:t.headers])})}refer(e,t,i){return this._client.post(le`/realtime/calls/${e}/refer`,{body:t,...i,headers:_e([{Accept:"*/*"},i==null?void 0:i.headers])})}reject(e,t={},i){return this._client.post(le`/realtime/calls/${e}/reject`,{body:t,...i,headers:_e([{Accept:"*/*"},i==null?void 0:i.headers])})}}class jb extends Ee{create(e,t){return this._client.post("/realtime/client_secrets",{body:e,...t})}}class zh extends Ee{constructor(){super(...arguments),this.clientSecrets=new jb(this._client),this.calls=new Xb(this._client)}}zh.ClientSecrets=jb;zh.Calls=Xb;function i4(n,e){return!e||!r4(e)?{...n,output_parsed:null,output:n.output.map(t=>t.type==="function_call"?{...t,parsed_arguments:null}:t.type==="message"?{...t,content:t.content.map(i=>({...i,parsed:null}))}:t)}:Zb(n,e)}function Zb(n,e){const t=n.output.map(r=>{if(r.type==="function_call")return{...r,parsed_arguments:l4(e,r)};if(r.type==="message"){const a=r.content.map(u=>u.type==="output_text"?{...u,parsed:s4(e,u.text)}:u);return{...r,content:a}}return r}),i=Object.assign({},n,{output:t});return Object.getOwnPropertyDescriptor(n,"output_text")||vy(i),Object.defineProperty(i,"output_parsed",{enumerable:!0,get(){for(const r of i.output)if(r.type==="message"){for(const a of r.content)if(a.type==="output_text"&&a.parsed!==null)return a.parsed}return null}}),i}function s4(n,e){var t,i,r,a;return((i=(t=n.text)==null?void 0:t.format)==null?void 0:i.type)!=="json_schema"?null:"$parseRaw"in((r=n.text)==null?void 0:r.format)?((a=n.text)==null?void 0:a.format).$parseRaw(e):JSON.parse(e)}function r4(n){var e;return!!a_((e=n.text)==null?void 0:e.format)}function o4(n){return(n==null?void 0:n.$brand)==="auto-parseable-tool"}function a4(n,e){return n.find(t=>t.type==="function"&&t.name===e)}function l4(n,e){const t=a4(n.tools??[],e.name);return{...e,...e,parsed_arguments:o4(t)?t.$parseRaw(e.arguments):t!=null&&t.strict?JSON.parse(e.arguments):null}}function vy(n){const e=[];for(const t of n.output)if(t.type==="message")for(const i of t.content)i.type==="output_text"&&e.push(i.text);n.output_text=e.join("")}var Ba,Tf,Dr,Ef,sw,rw,ow,aw;class A_ extends u_{constructor(e){super(),Ba.add(this),Tf.set(this,void 0),Dr.set(this,void 0),Ef.set(this,void 0),Ne(this,Tf,e)}static createResponse(e,t,i){const r=new A_(t);return r._run(()=>r._createOrRetrieveResponse(e,t,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createOrRetrieveResponse(e,t,i){var d;const r=i==null?void 0:i.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),Q(this,Ba,"m",sw).call(this);let a,u=null;"response_id"in t?(a=await e.responses.retrieve(t.response_id,{stream:!0},{...i,signal:this.controller.signal,stream:!0}),u=t.starting_after??null):a=await e.responses.create({...t,stream:!0},{...i,signal:this.controller.signal}),this._connected();for await(const p of a)Q(this,Ba,"m",rw).call(this,p,u);if((d=a.controller.signal)!=null&&d.aborted)throw new hi;return Q(this,Ba,"m",ow).call(this)}[(Tf=new WeakMap,Dr=new WeakMap,Ef=new WeakMap,Ba=new WeakSet,sw=function(){this.ended||Ne(this,Dr,void 0)},rw=function(t,i){if(this.ended)return;const r=(u,d)=>{(i==null||d.sequence_number>i)&&this._emit(u,d)},a=Q(this,Ba,"m",aw).call(this,t);switch(r("event",t),t.type){case"response.output_text.delta":{const u=a.output[t.output_index];if(!u)throw new Ae(`missing output at index ${t.output_index}`);if(u.type==="message"){const d=u.content[t.content_index];if(!d)throw new Ae(`missing content at index ${t.content_index}`);if(d.type!=="output_text")throw new Ae(`expected content to be 'output_text', got ${d.type}`);r("response.output_text.delta",{...t,snapshot:d.text})}break}case"response.function_call_arguments.delta":{const u=a.output[t.output_index];if(!u)throw new Ae(`missing output at index ${t.output_index}`);u.type==="function_call"&&r("response.function_call_arguments.delta",{...t,snapshot:u.arguments});break}default:r(t.type,t);break}},ow=function(){if(this.ended)throw new Ae("stream has ended, this shouldn't happen");const t=Q(this,Dr,"f");if(!t)throw new Ae("request ended without sending any events");Ne(this,Dr,void 0);const i=u4(t,Q(this,Tf,"f"));return Ne(this,Ef,i),i},aw=function(t){var r;let i=Q(this,Dr,"f");if(!i){if(t.type!=="response.created")throw new Ae(`When snapshot hasn't been set yet, expected 'response.created' event, got ${t.type}`);return i=Ne(this,Dr,t.response),i}switch(t.type){case"response.output_item.added":{i.output.push(t.item);break}case"response.content_part.added":{const a=i.output[t.output_index];if(!a)throw new Ae(`missing output at index ${t.output_index}`);const u=a.type,d=t.part;u==="message"&&d.type!=="reasoning_text"?a.content.push(d):u==="reasoning"&&d.type==="reasoning_text"&&(a.content||(a.content=[]),a.content.push(d));break}case"response.output_text.delta":{const a=i.output[t.output_index];if(!a)throw new Ae(`missing output at index ${t.output_index}`);if(a.type==="message"){const u=a.content[t.content_index];if(!u)throw new Ae(`missing content at index ${t.content_index}`);if(u.type!=="output_text")throw new Ae(`expected content to be 'output_text', got ${u.type}`);u.text+=t.delta}break}case"response.function_call_arguments.delta":{const a=i.output[t.output_index];if(!a)throw new Ae(`missing output at index ${t.output_index}`);a.type==="function_call"&&(a.arguments+=t.delta);break}case"response.reasoning_text.delta":{const a=i.output[t.output_index];if(!a)throw new Ae(`missing output at index ${t.output_index}`);if(a.type==="reasoning"){const u=(r=a.content)==null?void 0:r[t.content_index];if(!u)throw new Ae(`missing content at index ${t.content_index}`);if(u.type!=="reasoning_text")throw new Ae(`expected content to be 'reasoning_text', got ${u.type}`);u.text+=t.delta}break}case"response.completed":{Ne(this,Dr,t.response);break}}return i},Symbol.asyncIterator)](){const e=[],t=[];let i=!1;return this.on("event",r=>{const a=t.shift();a?a.resolve(r):e.push(r)}),this.on("end",()=>{i=!0;for(const r of t)r.resolve(void 0);t.length=0}),this.on("abort",r=>{i=!0;for(const a of t)a.reject(r);t.length=0}),this.on("error",r=>{i=!0;for(const a of t)a.reject(r);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((a,u)=>t.push({resolve:a,reject:u})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=Q(this,Ef,"f");if(!e)throw new Ae("stream ended without producing a ChatCompletion");return e}}function u4(n,e){return i4(n,e)}class eR extends Ee{list(e,t={},i){return this._client.getAPIList(le`/responses/${e}/input_items`,bt,{query:t,...i})}}class tR extends Ee{count(e={},t){return this._client.post("/responses/input_tokens",{body:e,...t})}}class $h extends Ee{constructor(){super(...arguments),this.inputItems=new eR(this._client),this.inputTokens=new tR(this._client)}create(e,t){return this._client.post("/responses",{body:e,...t,stream:e.stream??!1})._thenUnwrap(i=>("object"in i&&i.object==="response"&&vy(i),i))}retrieve(e,t={},i){return this._client.get(le`/responses/${e}`,{query:t,...i,stream:(t==null?void 0:t.stream)??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&vy(r),r))}delete(e,t){return this._client.delete(le`/responses/${e}`,{...t,headers:_e([{Accept:"*/*"},t==null?void 0:t.headers])})}parse(e,t){return this._client.responses.create(e,t)._thenUnwrap(i=>Zb(i,e))}stream(e,t){return A_.createResponse(this._client,e,t)}cancel(e,t){return this._client.post(le`/responses/${e}/cancel`,t)}compact(e,t){return this._client.post("/responses/compact",{body:e,...t})}}$h.InputItems=eR;$h.InputTokens=tR;let nR=class extends Ee{retrieve(e,t){return this._client.get(le`/skills/${e}/content`,{...t,headers:_e([{Accept:"application/binary"},t==null?void 0:t.headers]),__binaryResponse:!0})}};class iR extends Ee{retrieve(e,t,i){const{skill_id:r}=t;return this._client.get(le`/skills/${r}/versions/${e}/content`,{...i,headers:_e([{Accept:"application/binary"},i==null?void 0:i.headers]),__binaryResponse:!0})}}class w_ extends Ee{constructor(){super(...arguments),this.content=new iR(this._client)}create(e,t={},i){return this._client.post(le`/skills/${e}/versions`,lc({body:t,...i},this._client))}retrieve(e,t,i){const{skill_id:r}=t;return this._client.get(le`/skills/${r}/versions/${e}`,i)}list(e,t={},i){return this._client.getAPIList(le`/skills/${e}/versions`,bt,{query:t,...i})}delete(e,t,i){const{skill_id:r}=t;return this._client.delete(le`/skills/${r}/versions/${e}`,i)}}w_.Content=iR;class Jh extends Ee{constructor(){super(...arguments),this.content=new nR(this._client),this.versions=new w_(this._client)}create(e={},t){return this._client.post("/skills",lc({body:e,...t},this._client))}retrieve(e,t){return this._client.get(le`/skills/${e}`,t)}update(e,t,i){return this._client.post(le`/skills/${e}`,{body:t,...i})}list(e={},t){return this._client.getAPIList("/skills",bt,{query:e,...t})}delete(e,t){return this._client.delete(le`/skills/${e}`,t)}}Jh.Content=nR;Jh.Versions=w_;class sR extends Ee{create(e,t,i){return this._client.post(le`/uploads/${e}/parts`,rl({body:t,...i},this._client))}}class C_ extends Ee{constructor(){super(...arguments),this.parts=new sR(this._client)}create(e,t){return this._client.post("/uploads",{body:e,...t})}cancel(e,t){return this._client.post(le`/uploads/${e}/cancel`,t)}complete(e,t,i){return this._client.post(le`/uploads/${e}/complete`,{body:t,...i})}}C_.Parts=sR;const c4=async n=>{const e=await Promise.allSettled(n),t=e.filter(r=>r.status==="rejected");if(t.length){for(const r of t)console.error(r.reason);throw new Error(`${t.length} promise(s) failed - see the above errors`)}const i=[];for(const r of e)r.status==="fulfilled"&&i.push(r.value);return i};class rR extends Ee{create(e,t,i){return this._client.post(le`/vector_stores/${e}/file_batches`,{body:t,...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}retrieve(e,t,i){const{vector_store_id:r}=t;return this._client.get(le`/vector_stores/${r}/file_batches/${e}`,{...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}cancel(e,t,i){const{vector_store_id:r}=t;return this._client.post(le`/vector_stores/${r}/file_batches/${e}/cancel`,{...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}async createAndPoll(e,t,i){const r=await this.create(e,t);return await this.poll(e,r.id,i)}listFiles(e,t,i){const{vector_store_id:r,...a}=t;return this._client.getAPIList(le`/vector_stores/${r}/file_batches/${e}/files`,bt,{query:a,...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}async poll(e,t,i){var a;const r=_e([i==null?void 0:i.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((a=i==null?void 0:i.pollIntervalMs)==null?void 0:a.toString())??void 0}]);for(;;){const{data:u,response:d}=await this.retrieve(t,{vector_store_id:e},{...i,headers:r}).withResponse();switch(u.status){case"in_progress":let p=5e3;if(i!=null&&i.pollIntervalMs)p=i.pollIntervalMs;else{const h=d.headers.get("openai-poll-after-ms");if(h){const _=parseInt(h);isNaN(_)||(p=_)}}await vc(p);break;case"failed":case"cancelled":case"completed":return u}}}async uploadAndPoll(e,{files:t,fileIds:i=[]},r){if(t==null||t.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=(r==null?void 0:r.maxConcurrency)??5,u=Math.min(a,t.length),d=this._client,p=t.values(),h=[...i];async function _(E){for(let C of E){const M=await d.files.create({file:C,purpose:"assistants"},r);h.push(M.id)}}const T=Array(u).fill(p).map(_);return await c4(T),await this.createAndPoll(e,{file_ids:h})}}class oR extends Ee{create(e,t,i){return this._client.post(le`/vector_stores/${e}/files`,{body:t,...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}retrieve(e,t,i){const{vector_store_id:r}=t;return this._client.get(le`/vector_stores/${r}/files/${e}`,{...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}update(e,t,i){const{vector_store_id:r,...a}=t;return this._client.post(le`/vector_stores/${r}/files/${e}`,{body:a,...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}list(e,t={},i){return this._client.getAPIList(le`/vector_stores/${e}/files`,bt,{query:t,...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}delete(e,t,i){const{vector_store_id:r}=t;return this._client.delete(le`/vector_stores/${r}/files/${e}`,{...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}async createAndPoll(e,t,i){const r=await this.create(e,t,i);return await this.poll(e,r.id,i)}async poll(e,t,i){var a;const r=_e([i==null?void 0:i.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((a=i==null?void 0:i.pollIntervalMs)==null?void 0:a.toString())??void 0}]);for(;;){const u=await this.retrieve(t,{vector_store_id:e},{...i,headers:r}).withResponse(),d=u.data;switch(d.status){case"in_progress":let p=5e3;if(i!=null&&i.pollIntervalMs)p=i.pollIntervalMs;else{const h=u.response.headers.get("openai-poll-after-ms");if(h){const _=parseInt(h);isNaN(_)||(p=_)}}await vc(p);break;case"failed":case"completed":return d}}}async upload(e,t,i){const r=await this._client.files.create({file:t,purpose:"assistants"},i);return this.create(e,{file_id:r.id},i)}async uploadAndPoll(e,t,i){const r=await this.upload(e,t,i);return await this.poll(e,r.id,i)}content(e,t,i){const{vector_store_id:r}=t;return this._client.getAPIList(le`/vector_stores/${r}/files/${e}/content`,Bh,{...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}}class Kh extends Ee{constructor(){super(...arguments),this.files=new oR(this._client),this.fileBatches=new rR(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:_e([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}retrieve(e,t){return this._client.get(le`/vector_stores/${e}`,{...t,headers:_e([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}update(e,t,i){return this._client.post(le`/vector_stores/${e}`,{body:t,...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}list(e={},t){return this._client.getAPIList("/vector_stores",bt,{query:e,...t,headers:_e([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}delete(e,t){return this._client.delete(le`/vector_stores/${e}`,{...t,headers:_e([{"OpenAI-Beta":"assistants=v2"},t==null?void 0:t.headers])})}search(e,t,i){return this._client.getAPIList(le`/vector_stores/${e}/search`,Bh,{body:t,method:"post",...i,headers:_e([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}}Kh.Files=oR;Kh.FileBatches=rR;class aR extends Ee{create(e,t){return this._client.post("/videos",lc({body:e,...t},this._client))}retrieve(e,t){return this._client.get(le`/videos/${e}`,t)}list(e={},t){return this._client.getAPIList("/videos",ih,{query:e,...t})}delete(e,t){return this._client.delete(le`/videos/${e}`,t)}downloadContent(e,t={},i){return this._client.get(le`/videos/${e}/content`,{query:t,...i,headers:_e([{Accept:"application/binary"},i==null?void 0:i.headers]),__binaryResponse:!0})}remix(e,t,i){return this._client.post(le`/videos/${e}/remix`,lc({body:t,...i},this._client))}}var za,lR,Lf;class uR extends Ee{constructor(){super(...arguments),za.add(this)}async unwrap(e,t,i=this._client.webhookSecret,r=300){return await this.verifySignature(e,t,i,r),JSON.parse(e)}async verifySignature(e,t,i=this._client.webhookSecret,r=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");Q(this,za,"m",lR).call(this,i);const a=_e([t]).values,u=Q(this,za,"m",Lf).call(this,a,"webhook-signature"),d=Q(this,za,"m",Lf).call(this,a,"webhook-timestamp"),p=Q(this,za,"m",Lf).call(this,a,"webhook-id"),h=parseInt(d,10);if(isNaN(h))throw new Fu("Invalid webhook timestamp format");const _=Math.floor(Date.now()/1e3);if(_-h>r)throw new Fu("Webhook timestamp is too old");if(h>_+r)throw new Fu("Webhook timestamp is too new");const T=u.split(" ").map(U=>U.startsWith("v1,")?U.substring(3):U),E=i.startsWith("whsec_")?Buffer.from(i.replace("whsec_",""),"base64"):Buffer.from(i,"utf-8"),C=p?`${p}.${d}.${e}`:`${d}.${e}`,M=await crypto.subtle.importKey("raw",E,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const U of T)try{const P=Buffer.from(U,"base64");if(await crypto.subtle.verify("HMAC",M,P,new TextEncoder().encode(C)))return}catch{continue}throw new Fu("The given webhook signature does not match the expected signature")}}za=new WeakSet,lR=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},Lf=function(e,t){if(!e)throw new Error("Headers are required");const i=e.get(t);if(i==null)throw new Error(`Missing required header: ${t}`);return i};var Ty,I_,Of,cR;class Ge{constructor({baseURL:e=Fa("OPENAI_BASE_URL"),apiKey:t=Fa("OPENAI_API_KEY"),organization:i=Fa("OPENAI_ORG_ID")??null,project:r=Fa("OPENAI_PROJECT_ID")??null,webhookSecret:a=Fa("OPENAI_WEBHOOK_SECRET")??null,...u}={}){if(Ty.add(this),Of.set(this,void 0),this.completions=new Lb(this),this.chat=new f_(this),this.embeddings=new Bb(this),this.files=new Gb(this),this.images=new Yb(this),this.audio=new Ec(this),this.moderations=new Qb(this),this.models=new Wb(this),this.fineTuning=new yl(this),this.graders=new S_(this),this.vectorStores=new Kh(this),this.webhooks=new uR(this),this.beta=new gl(this),this.batches=new xb(this),this.uploads=new C_(this),this.responses=new $h(this),this.realtime=new zh(this),this.conversations=new g_(this),this.evals=new __(this),this.containers=new m_(this),this.skills=new Jh(this),this.videos=new aR(this),t===void 0)throw new Ae("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const d={apiKey:t,organization:i,project:r,webhookSecret:a,...u,baseURL:e||"https://api.openai.com/v1"};if(!d.dangerouslyAllowBrowser&&fO())throw new Ae(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=d.baseURL,this.timeout=d.timeout??I_.DEFAULT_TIMEOUT,this.logger=d.logger??console;const p="warn";this.logLevel=p,this.logLevel=$A(d.logLevel,"ClientOptions.logLevel",this)??$A(Fa("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??p,this.fetchOptions=d.fetchOptions,this.maxRetries=d.maxRetries??2,this.fetch=d.fetch??yO(),Ne(this,Of,vO),this._options=d,this.apiKey=typeof t=="string"?t:"Missing Key",this.organization=i,this.project=r,this.webhookSecret=a}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){}async authHeaders(e){return _e([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return CO(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${Ga}`}defaultIdempotencyKey(){return`stainless-node-retry-${MI()}`}makeStatusError(e,t,i,r){return mn.generate(e,t,i,r)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let t;try{t=await e()}catch(i){throw i instanceof Ae?i:new Ae(`Failed to get token from 'apiKey' function: ${i.message}`,{cause:i})}if(typeof t!="string"||!t)throw new Ae(`Expected 'apiKey' function argument to return a string but it returned ${t}`);return this.apiKey=t,!0}buildURL(e,t,i){const r=!Q(this,Ty,"m",cR).call(this)&&i||this.baseURL,a=aO(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return lO(u)||(t={...u,...t}),typeof t=="object"&&t&&!Array.isArray(t)&&(a.search=this.stringifyQuery(t)),a.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:t,options:i}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,i){return this.request(Promise.resolve(i).then(r=>({method:e,path:t,...r})))}request(e,t=null){return new Fh(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,i){var $,H;const r=await e,a=r.maxRetries??this.maxRetries;t==null&&(t=a),await this.prepareOptions(r);const{req:u,url:d,timeout:p}=await this.buildRequest(r,{retryCount:a-t});await this.prepareRequest(u,{url:d,options:r});const h="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),_=i===void 0?"":`, retryOf: ${i}`,T=Date.now();if(dn(this).debug(`[${h}] sending request`,xo({retryOfRequestLogID:i,method:r.method,url:d,options:r,headers:u.headers})),($=r.signal)!=null&&$.aborted)throw new hi;const E=new AbortController,C=await this.fetchWithTimeout(d,u,p,E).catch(ly),M=Date.now();if(C instanceof globalThis.Error){const z=`retrying, ${t} attempts remaining`;if((H=r.signal)!=null&&H.aborted)throw new hi;const X=ay(C)||/timed? ?out/i.test(String(C)+("cause"in C?String(C.cause):""));if(t)return dn(this).info(`[${h}] connection ${X?"timed out":"failed"} - ${z}`),dn(this).debug(`[${h}] connection ${X?"timed out":"failed"} (${z})`,xo({retryOfRequestLogID:i,url:d,durationMs:M-T,message:C.message})),this.retryRequest(r,t,i??h);throw dn(this).info(`[${h}] connection ${X?"timed out":"failed"} - error; no more retries left`),dn(this).debug(`[${h}] connection ${X?"timed out":"failed"} (error; no more retries left)`,xo({retryOfRequestLogID:i,url:d,durationMs:M-T,message:C.message})),X?new i_:new Lh({cause:C})}const U=[...C.headers.entries()].filter(([z])=>z==="x-request-id").map(([z,X])=>", "+z+": "+JSON.stringify(X)).join(""),P=`[${h}${_}${U}] ${u.method} ${d} ${C.ok?"succeeded":"failed"} with status ${C.status} in ${M-T}ms`;if(!C.ok){const z=await this.shouldRetry(C);if(t&&z){const x=`retrying, ${t} attempts remaining`;return await _O(C.body),dn(this).info(`${P} - ${x}`),dn(this).debug(`[${h}] response error (${x})`,xo({retryOfRequestLogID:i,url:C.url,status:C.status,headers:C.headers,durationMs:M-T})),this.retryRequest(r,t,i??h,C.headers)}const X=z?"error; no more retries left":"error; not retryable";dn(this).info(`${P} - ${X}`);const ue=await C.text().catch(x=>ly(x).message),W=dO(ue),N=W?void 0:ue;throw dn(this).debug(`[${h}] response error (${X})`,xo({retryOfRequestLogID:i,url:C.url,status:C.status,headers:C.headers,message:N,durationMs:Date.now()-T})),this.makeStatusError(C.status,W,N,C.headers)}return dn(this).info(P),dn(this).debug(`[${h}] response start`,xo({retryOfRequestLogID:i,url:C.url,status:C.status,headers:C.headers,durationMs:M-T})),{response:C,options:r,controller:E,requestLogID:h,retryOfRequestLogID:i,startTime:T}}getAPIList(e,t,i){return this.requestAPIList(t,i&&"then"in i?i.then(r=>({method:"get",path:e,...r})):{method:"get",path:e,...i})}requestAPIList(e,t){const i=this.makeRequest(t,null,void 0);return new kO(this,i,e)}async fetchWithTimeout(e,t,i,r){const{signal:a,method:u,...d}=t||{},p=this._makeAbort(r);a&&a.addEventListener("abort",p,{once:!0});const h=setTimeout(p,i),_=globalThis.ReadableStream&&d.body instanceof globalThis.ReadableStream||typeof d.body=="object"&&d.body!==null&&Symbol.asyncIterator in d.body,T={signal:r.signal,..._?{duplex:"half"}:{},method:"GET",...d};u&&(T.method=u.toUpperCase());try{return await this.fetch.call(void 0,e,T)}finally{clearTimeout(h)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,i,r){let a;const u=r==null?void 0:r.get("retry-after-ms");if(u){const p=parseFloat(u);Number.isNaN(p)||(a=p)}const d=r==null?void 0:r.get("retry-after");if(d&&!a){const p=parseFloat(d);Number.isNaN(p)?a=Date.parse(d)-Date.now():a=p*1e3}if(!(a&&0<=a&&a<60*1e3)){const p=e.maxRetries??this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(t,p)}return await vc(a),this.makeRequest(e,t-1,i)}calculateDefaultRetryTimeoutMillis(e,t){const a=t-e,u=Math.min(.5*Math.pow(2,a),8),d=1-Math.random()*.25;return u*d*1e3}async buildRequest(e,{retryCount:t=0}={}){const i={...e},{method:r,path:a,query:u,defaultBaseURL:d}=i,p=this.buildURL(a,u,d);"timeout"in i&&cO("timeout",i.timeout),i.timeout=i.timeout??this.timeout;const{bodyHeaders:h,body:_}=this.buildBody({options:i}),T=await this.buildHeaders({options:e,method:r,bodyHeaders:h,retryCount:t});return{req:{method:r,headers:T,...i.signal&&{signal:i.signal},...globalThis.ReadableStream&&_ instanceof globalThis.ReadableStream&&{duplex:"half"},..._&&{body:_},...this.fetchOptions??{},...i.fetchOptions??{}},url:p,timeout:i.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:i,retryCount:r}){let a={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const u=_e([a,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...gO(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,i,e.headers]);return this.validateHeaders(u),u.values}_makeAbort(e){return()=>e.abort()}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=_e([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:zI(e)}:Q(this,Of,"f").call(this,{body:e,headers:i})}}I_=Ge,Of=new WeakMap,Ty=new WeakSet,cR=function(){return this.baseURL!=="https://api.openai.com/v1"};Ge.OpenAI=I_;Ge.DEFAULT_TIMEOUT=6e5;Ge.OpenAIError=Ae;Ge.APIError=mn;Ge.APIConnectionError=Lh;Ge.APIConnectionTimeoutError=i_;Ge.APIUserAbortError=hi;Ge.NotFoundError=VI;Ge.ConflictError=UI;Ge.RateLimitError=OI;Ge.BadRequestError=DI;Ge.AuthenticationError=PI;Ge.InternalServerError=FI;Ge.PermissionDeniedError=kI;Ge.UnprocessableEntityError=LI;Ge.InvalidWebhookSignatureError=Fu;Ge.toFile=FO;Ge.Completions=Lb;Ge.Chat=f_;Ge.Embeddings=Bb;Ge.Files=Gb;Ge.Images=Yb;Ge.Audio=Ec;Ge.Moderations=Qb;Ge.Models=Wb;Ge.FineTuning=yl;Ge.Graders=S_;Ge.VectorStores=Kh;Ge.Webhooks=uR;Ge.Beta=gl;Ge.Batches=xb;Ge.Uploads=C_;Ge.Responses=$h;Ge.Realtime=zh;Ge.Conversations=g_;Ge.Evals=__;Ge.Containers=m_;Ge.Skills=Jh;Ge.Videos=aR;var d4={};let Dg=null;const b_=()=>{if(!Dg){const n=d4.OPENAI_API_KEY;if(!n)throw new Error("OpenAI API key is not set. Please set OPENAI_API_KEY in your environment.");Dg=new Ge({apiKey:n,dangerouslyAllowBrowser:!0})}return Dg},dR=`You are 'Kisan Mitra', a professional agricultural advisor. 
Provide dual solutions:
1. Modern Scientific (Chemical): Product name, dosage, and precautions.
2. Rajiv Dixit Natural: Preparation method, benefits, and philosophy.

Always respond in the requested language.`,f4=async(n,e="en")=>{const r=(await b_().chat.completions.create({model:"gpt-4o",messages:[{role:"system",content:dR},{role:"user",content:[{type:"text",text:`Diagnose this crop disease. Provide solutions in JSON format. Language: ${gs[e]}.`},{type:"image_url",image_url:{url:`data:image/jpeg;base64,${n}`}}]}],response_format:{type:"json_object"}})).choices[0].message.content;return JSON.parse(r||"{}")},h4=async(n,e,t="en")=>{const a=(await b_().chat.completions.create({model:"gpt-4o-mini",messages:[{role:"system",content:dR},{role:"user",content:`Farmer Question: "${n}" in "${e||"India"}". Provide chemical and natural solutions in JSON. Language: ${gs[t]}.`}],response_format:{type:"json_object"}})).choices[0].message.content,u=JSON.parse(a||"{}");return u.solutions||u},p4=async(n="en")=>(await b_().chat.completions.create({model:"gpt-4o-mini",messages:[{role:"system",content:"You are a professional agronomist. Give a 1-sentence quick tip."},{role:"user",content:`Give a 1-sentence quick professional tip for soil moisture conservation today in ${gs[n]}.`}]})).choices[0].message.content||"Keep your soil mulched!",m4=async(n,e)=>e.aiProvider===Un.OPENAI?f4(n,e.language):nO(n,e.language),g4=async(n,e)=>e.aiProvider===Un.OPENAI?h4(n,e.address,e.language):iO(n,e.address,e.language),y4=async n=>n.aiProvider===Un.OPENAI?p4(n.language):sO(n.language),_4=[{name:"Nitrogen (N)",value:45,unit:"kg/ha",status:"Fair"},{name:"Phosphorus (P)",value:12,unit:"kg/ha",status:"Critical"},{name:"Potassium (K)",value:65,unit:"kg/ha",status:"Good"},{name:"Soil pH",value:6.8,unit:"pH",status:"Good"}],v4=[{id:"1",type:"weather",title:"Heavy Rain Alert",message:"Expect 20mm rainfall in your area tomorrow. Ensure proper drainage.",time:Date.now()},{id:"2",type:"pest",title:"Yellow Rust Warning",message:"Reported in nearby districts for Wheat crops. Inspect your field.",time:Date.now()-36e5}],lw=({userProfile:n,setView:e})=>{const[t,i]=He.useState("Loading your daily smart tip..."),[r,a]=He.useState(v4);return He.useEffect(()=>{n&&y4(n).then(i)},[n]),I.jsxs("div",{className:"space-y-8 animate-fadeIn pb-12",children:[I.jsxs("div",{className:"bg-gradient-to-r from-green-800 to-green-700 p-6 rounded-[2rem] text-white shadow-xl relative overflow-hidden",children:[I.jsx("div",{className:"absolute -right-10 -top-10 w-40 h-40 bg-lime-400/10 rounded-full blur-3xl"}),I.jsxs("div",{className:"flex items-center gap-4",children:[I.jsx("div",{className:"w-12 h-12 bg-lime-400 rounded-2xl flex items-center justify-center text-2xl shadow-inner text-green-950",children:""}),I.jsxs("div",{children:[I.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-lime-400",children:"Smart Advice   "}),I.jsx("p",{className:"text-lg font-bold leading-tight mt-1",children:t})]})]})]}),I.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[I.jsxs("button",{onClick:()=>e(St.LIVE_VOICE),className:"bg-white p-8 rounded-[3rem] border border-stone-100 shadow-xl hover:shadow-2xl transition-all group flex flex-col items-center text-center space-y-4",children:[I.jsx("div",{className:"w-20 h-20 bg-green-100 text-green-700 rounded-full flex items-center justify-center text-4xl group-hover:scale-110 transition-transform",children:""}),I.jsxs("div",{children:[I.jsx("h4",{className:"text-xl font-black text-stone-800",children:"SPEAK"}),I.jsx("p",{className:"text-sm font-bold text-stone-400 uppercase tracking-widest",children:"  "})]})]}),I.jsxs("button",{onClick:()=>e(St.DIAGNOSTIC),className:"bg-white p-8 rounded-[3rem] border border-stone-100 shadow-xl hover:shadow-2xl transition-all group flex flex-col items-center text-center space-y-4",children:[I.jsx("div",{className:"w-20 h-20 bg-lime-100 text-green-800 rounded-full flex items-center justify-center text-4xl group-hover:scale-110 transition-transform",children:""}),I.jsxs("div",{children:[I.jsx("h4",{className:"text-xl font-black text-stone-800",children:"PHOTO"}),I.jsx("p",{className:"text-sm font-bold text-stone-400 uppercase tracking-widest",children:" "})]})]}),I.jsxs("button",{onClick:()=>e(St.RAJIV_WISDOM),className:"bg-white p-8 rounded-[3rem] border border-stone-100 shadow-xl hover:shadow-2xl transition-all group flex flex-col items-center text-center space-y-4",children:[I.jsx("div",{className:"w-20 h-20 bg-amber-100 text-amber-700 rounded-full flex items-center justify-center text-4xl group-hover:scale-110 transition-transform",children:""}),I.jsxs("div",{children:[I.jsx("h4",{className:"text-xl font-black text-stone-800",children:"LIBRARY"}),I.jsx("p",{className:"text-sm font-bold text-stone-400 uppercase tracking-widest",children:" "})]})]})]}),I.jsxs("section",{className:"space-y-4",children:[I.jsx("h3",{className:"text-xs font-black text-stone-400 uppercase tracking-[0.2em] px-2",children:"Recent Alerts   "}),I.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map(u=>I.jsxs("div",{className:`p-5 rounded-[2rem] border shadow-sm flex items-start gap-4 ${u.type==="weather"?"bg-blue-50 border-blue-100":"bg-red-50 border-red-100"}`,children:[I.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center shadow-sm ${u.type==="weather"?"bg-blue-200 text-blue-800":"bg-red-200 text-red-800"}`,children:u.type==="weather"?"":""}),I.jsxs("div",{children:[I.jsx("p",{className:`font-black text-sm ${u.type==="weather"?"text-blue-900":"text-red-900"}`,children:u.title}),I.jsx("p",{className:"text-xs text-stone-600 mt-1 font-medium",children:u.message})]})]},u.id))})]}),I.jsxs("div",{className:"bg-white p-8 rounded-[3rem] shadow-sm border border-stone-100",children:[I.jsxs("h3",{className:"text-xl font-black text-stone-800 mb-6 flex items-center gap-3",children:[I.jsx("span",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center text-sm",children:""})," Soil Health Tracker"]}),I.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-6",children:_4.map(u=>I.jsxs("div",{className:"p-4 rounded-2xl bg-stone-50 border border-stone-100",children:[I.jsx("p",{className:"text-[10px] font-black text-stone-400 uppercase tracking-widest mb-1",children:u.name}),I.jsxs("p",{className:"text-xl font-black text-stone-800",children:[u.value," ",u.unit]}),I.jsx("p",{className:`text-[10px] font-black mt-1 ${u.status==="Good"?"text-green-600":u.status==="Fair"?"text-amber-600":"text-red-600"}`,children:u.status})]},u.name))})]})]})},T4=({userProfile:n,onSaveHistory:e})=>{const[t,i]=He.useState(null),[r,a]=He.useState(!1),[u,d]=He.useState(null),p=He.useRef(null),h=T=>{var C;const E=(C=T.target.files)==null?void 0:C[0];if(E){const M=new FileReader;M.onloadend=()=>{i(M.result),d(null)},M.readAsDataURL(E)}},_=async()=>{if(t){a(!0);try{const T=t.split(",")[1],C={...await m4(T,n),id:crypto.randomUUID(),timestamp:Date.now(),image:t};d(C),e(C)}catch(T){console.error("Diagnosis failed",T),alert("Failed to analyze image. Please try again.")}finally{a(!1)}}};return I.jsxs("div",{className:"space-y-8 max-w-4xl mx-auto pb-12",children:[I.jsxs("header",{className:"text-center",children:[I.jsx("h2",{className:"text-3xl font-black text-stone-800",children:"Crop Health Scanner"}),I.jsx("p",{className:"text-stone-500 mt-2",children:"Instant AI analysis for plant diseases and pests."})]}),I.jsxs("div",{className:"bg-white p-6 md:p-10 rounded-[3rem] shadow-sm border border-stone-100",children:[I.jsxs("div",{className:"flex flex-col items-center",children:[t?I.jsxs("div",{className:"w-full space-y-6",children:[I.jsxs("div",{className:"relative group",children:[I.jsx("img",{src:t,alt:"Crop scan",className:"w-full h-[28rem] object-cover rounded-[2.5rem] shadow-inner"}),I.jsx("button",{onClick:()=>i(null),className:"absolute top-6 right-6 bg-white/90 backdrop-blur w-12 h-12 flex items-center justify-center rounded-full shadow-lg hover:bg-white text-red-500 font-bold",children:""})]}),!u&&I.jsx("button",{onClick:_,disabled:r,className:"w-full py-5 bg-green-700 text-white rounded-[2rem] font-black text-xl hover:bg-green-800 disabled:opacity-50 shadow-2xl flex items-center justify-center gap-4 transition-all active:scale-95",children:r?I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"w-6 h-6 border-4 border-white/30 border-t-white rounded-full animate-spin"}),"Consulting Expert AI..."]}):"Diagnose Problem"})]}):I.jsxs("button",{onClick:()=>{var T;return(T=p.current)==null?void 0:T.click()},className:"w-full h-96 border-4 border-dashed border-stone-100 rounded-[2.5rem] flex flex-col items-center justify-center gap-6 hover:border-lime-400 hover:bg-lime-50 transition-all group overflow-hidden bg-stone-50",children:[I.jsx("div",{className:"w-24 h-24 bg-white rounded-full flex items-center justify-center text-5xl shadow-sm group-hover:scale-110 transition-transform",children:""}),I.jsxs("div",{className:"text-center px-6",children:[I.jsx("p",{className:"font-black text-2xl text-stone-800",children:"Tap to Capture Crop"}),I.jsx("p",{className:"text-stone-400 mt-2",children:"Take a clear photo of the leaf or affected area"})]})]}),I.jsx("input",{type:"file",accept:"image/*",ref:p,onChange:h,className:"hidden"})]}),u&&I.jsxs("div",{className:"mt-12 space-y-10 animate-fadeInUp",children:[I.jsxs("div",{className:"p-8 bg-stone-50 border border-stone-200 rounded-[2.5rem] relative",children:[I.jsx("div",{className:"absolute -top-4 left-8 px-4 py-1 bg-green-700 text-white rounded-full text-xs font-black uppercase tracking-widest",children:"Diagnosis"}),I.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[I.jsx("h3",{className:"text-3xl font-black text-stone-800",children:u.disease}),I.jsxs("div",{className:"flex items-center gap-3",children:[I.jsxs("div",{className:"text-right",children:[I.jsx("p",{className:"text-[10px] font-bold text-stone-400 uppercase",children:"AI Confidence"}),I.jsxs("p",{className:"font-black text-green-600",children:[Math.round(u.confidence*100),"%"]})]}),I.jsx("div",{className:"w-12 h-12 rounded-full border-4 border-green-100 flex items-center justify-center",children:I.jsx("div",{className:"w-8 h-8 rounded-full bg-green-600",style:{clipPath:`inset(${(1-u.confidence)*100}% 0 0 0)`}})})]})]}),I.jsx("p",{className:"mt-6 text-stone-600 leading-relaxed text-lg",children:u.description})]}),I.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[I.jsxs("div",{className:"bg-amber-50/50 border border-amber-100 rounded-[2.5rem] p-8 hover:shadow-md transition-shadow",children:[I.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[I.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-2xl flex items-center justify-center text-2xl",children:""}),I.jsx("h4",{className:"font-black text-xl text-stone-800 uppercase tracking-tight",children:"Chemical Option"})]}),I.jsxs("div",{className:"space-y-4",children:[I.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-stone-100",children:[I.jsx("p",{className:"text-[10px] font-bold text-stone-400 uppercase tracking-widest mb-1",children:"Product"}),I.jsx("p",{className:"font-bold text-stone-800",children:u.solutions.chemicalSolution.product})]}),I.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-stone-100",children:[I.jsx("p",{className:"text-[10px] font-bold text-stone-400 uppercase tracking-widest mb-1",children:"Dosage"}),I.jsx("p",{className:"font-bold text-stone-800",children:u.solutions.chemicalSolution.dosage})]}),I.jsxs("div",{className:"p-5 bg-red-100/50 text-red-900 text-sm rounded-2xl border border-red-200 leading-snug",children:[I.jsx("p",{className:"font-black uppercase text-[10px] mb-2 tracking-widest opacity-60",children:"Critical Precautions"}),u.solutions.chemicalSolution.precautions]})]})]}),I.jsxs("div",{className:"bg-lime-50 border border-lime-200 rounded-[2.5rem] p-8 hover:shadow-md transition-shadow shadow-sm ring-4 ring-lime-500/10",children:[I.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[I.jsx("div",{className:"w-12 h-12 bg-lime-100 rounded-2xl flex items-center justify-center text-2xl",children:""}),I.jsx("h4",{className:"font-black text-xl text-green-900 uppercase tracking-tight",children:"Swadeshi Wisdom"})]}),I.jsxs("div",{className:"space-y-4",children:[I.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-lime-100",children:[I.jsx("p",{className:"text-[10px] font-bold text-green-600 uppercase tracking-widest mb-1",children:"Natural Formula"}),I.jsx("p",{className:"font-black text-green-900 text-lg",children:u.solutions.naturalSolution.name})]}),I.jsxs("div",{className:"p-4 bg-green-900 text-lime-100 rounded-2xl italic font-medium",children:['"',u.solutions.naturalSolution.philosophy,'"']}),I.jsxs("div",{className:"p-5 bg-white border border-lime-100 rounded-2xl text-sm",children:[I.jsx("p",{className:"font-black text-green-800 uppercase text-[10px] mb-2 tracking-widest",children:"Preparation Guide"}),I.jsx("p",{className:"text-green-700 leading-relaxed whitespace-pre-wrap",children:u.solutions.naturalSolution.preparation})]})]})]})]}),I.jsx("div",{className:"text-center py-6",children:I.jsx("button",{onClick:()=>i(null),className:"text-stone-400 font-bold hover:text-stone-800 transition-colors",children:"Start New Scan "})})]})]})]})},E4=({userProfile:n})=>{const[e,t]=He.useState(""),[i,r]=He.useState(!1),[a,u]=He.useState(null),d=async p=>{if(p.preventDefault(),!!e.trim()){r(!0);try{const h=await g4(e,n);u(h)}catch(h){console.error(h),alert("Something went wrong. Please check your query.")}finally{r(!1)}}};return I.jsxs("div",{className:"space-y-8 animate-fadeIn",children:[I.jsxs("header",{children:[I.jsx("h2",{className:"text-3xl font-black text-stone-800 tracking-tight",children:"Smart Farming Advisor"}),I.jsx("p",{className:"text-stone-500 font-medium",children:"Equipped with AI & Real-time Google Search data."})]}),I.jsxs("div",{className:"bg-white p-8 rounded-[3rem] shadow-sm border border-stone-100",children:[I.jsxs("form",{onSubmit:d,className:"relative",children:[I.jsx("textarea",{value:e,onChange:p=>t(p.target.value),placeholder:`Ask about your ${n.crops} or anything else...`,className:"w-full h-40 p-6 bg-stone-50 rounded-[2rem] border border-stone-100 focus:ring-4 focus:ring-lime-100 focus:border-lime-400 transition-all resize-none text-lg font-medium"}),I.jsx("button",{type:"submit",disabled:i||!e.trim(),className:"absolute bottom-4 right-4 py-4 px-10 bg-green-700 text-white rounded-2xl font-black hover:bg-green-800 transition-all disabled:opacity-50 shadow-xl flex items-center gap-2",children:i?I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"})," Grounding Info..."]}):I.jsxs(I.Fragment,{children:[I.jsx("span",{className:"text-xl",children:""})," Get Advice"]})})]}),a&&I.jsxs("div",{className:"mt-12 space-y-10 animate-fadeInUp",children:[I.jsx("div",{className:"border-b border-stone-100 pb-6",children:I.jsxs("h3",{className:"text-2xl font-black text-stone-800",children:['Results for: "',a.issue,'"']})}),I.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-10",children:[I.jsxs("div",{className:"bg-amber-50/50 p-8 rounded-[2.5rem] border border-amber-100 space-y-6",children:[I.jsxs("div",{className:"flex items-center gap-3",children:[I.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-2xl flex items-center justify-center text-2xl shadow-sm",children:""}),I.jsx("h4",{className:"text-xl font-black text-stone-800 uppercase tracking-tighter",children:"Chemical Route"})]}),I.jsxs("div",{className:"space-y-4",children:[I.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-stone-100",children:[I.jsx("p",{className:"text-[10px] font-bold text-stone-400 uppercase tracking-widest mb-1",children:"Recommendation"}),I.jsx("p",{className:"font-bold text-stone-800 text-lg",children:a.chemicalSolution.product}),I.jsx("p",{className:"text-sm text-stone-600 mt-2",children:a.chemicalSolution.dosage})]}),I.jsxs("div",{className:"p-5 bg-red-100/50 text-red-900 text-sm rounded-2xl border border-red-200",children:[I.jsx("p",{className:"font-black uppercase text-[10px] mb-2 tracking-widest opacity-60",children:"Critical Warnings"}),a.chemicalSolution.precautions]})]})]}),I.jsxs("div",{className:"bg-lime-50 p-8 rounded-[2.5rem] border border-lime-200 space-y-6 shadow-sm ring-4 ring-lime-500/5",children:[I.jsxs("div",{className:"flex items-center gap-3",children:[I.jsx("div",{className:"w-12 h-12 bg-lime-100 rounded-2xl flex items-center justify-center text-2xl shadow-sm",children:""}),I.jsx("h4",{className:"text-xl font-black text-green-900 uppercase tracking-tighter",children:"Natural Wisdom"})]}),I.jsxs("div",{className:"space-y-4",children:[I.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-lime-100",children:[I.jsx("p",{className:"text-[10px] font-bold text-green-600 uppercase tracking-widest mb-1",children:a.naturalSolution.name}),I.jsxs("p",{className:"font-bold text-green-900 italic text-lg leading-snug",children:['"',a.naturalSolution.philosophy,'"']})]}),I.jsxs("div",{className:"p-6 bg-white border border-lime-100 rounded-2xl",children:[I.jsx("p",{className:"text-[10px] font-black text-green-800 uppercase tracking-widest mb-2",children:"Preparation Guide"}),I.jsx("p",{className:"text-sm text-green-700 leading-relaxed whitespace-pre-wrap font-medium",children:a.naturalSolution.preparation})]})]})]})]}),a.groundingSources&&a.groundingSources.length>0&&I.jsxs("div",{className:"bg-stone-50 p-6 rounded-[2rem] border border-stone-200",children:[I.jsx("h4",{className:"text-xs font-black text-stone-400 uppercase tracking-widest mb-4",children:"Verified Sources & Research"}),I.jsx("div",{className:"flex flex-wrap gap-3",children:a.groundingSources.map((p,h)=>I.jsxs("a",{href:p.uri,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-white border border-stone-200 rounded-full text-xs font-bold text-blue-600 hover:border-blue-400 transition-all flex items-center gap-2 shadow-sm",children:[I.jsx("span",{children:""})," ",p.title||"View Source"]},h))})]})]})]})]})},S4=[{title:"Jeevamrut (Soil Booster)",ingredients:"Cow dung, Cow urine, Jaggery, Pulse flour, Soil from the same field.",utility:"Enhances microbial activity and improves soil fertility exponentially.",icon:""},{title:"Neem-Astra (Pest Repellent)",ingredients:"Neem leaves, Cow urine, Cow dung.",utility:"Controls sucking pests and mealy bugs naturally without harmful residue.",icon:""},{title:"Brahma-Astra (Deep Pest Control)",ingredients:"Neem, Custard apple, Papaya, Pomegranate, Guava leaves boiled in cow urine.",utility:"Effective against large caterpillars and borers.",icon:""},{title:"Agni-Astra",ingredients:"Cow urine, Tobacco, Green chili, Garlic, Neem.",utility:"Powerful repellent for extreme pest infestations.",icon:""}],A4=()=>I.jsxs("div",{className:"space-y-12 pb-20 animate-fadeIn",children:[I.jsxs("header",{className:"text-center max-w-2xl mx-auto",children:[I.jsx("h2",{className:"text-4xl font-extrabold text-stone-800 mb-4 tracking-tight",children:"Vedic Krishi Wisdom"}),I.jsx("div",{className:"h-1 w-20 bg-lime-500 mx-auto mb-6"}),I.jsxs("p",{className:"text-stone-600 text-lg",children:["Explore the profound agricultural principles championed by ",I.jsx("span",{className:"font-bold text-stone-800",children:"Shri Rajiv Dixit"}),". Focusing on Swadeshi, sustainable, and Zero-Budget Natural Farming."]})]}),I.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[I.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] shadow-sm border border-stone-200",children:[I.jsx("h3",{className:"text-2xl font-bold text-stone-800 mb-6",children:"Fundamental Pillars"}),I.jsxs("ul",{className:"space-y-6",children:[I.jsxs("li",{className:"flex gap-4",children:[I.jsx("span",{className:"flex-shrink-0 w-10 h-10 bg-lime-100 rounded-2xl flex items-center justify-center font-bold text-green-700",children:"1"}),I.jsxs("div",{children:[I.jsx("h4",{className:"font-bold text-stone-800",children:"Beejamrut (Seed Treatment)"}),I.jsx("p",{className:"text-sm text-stone-500 mt-1",children:"Treating seeds with local microbial cultures to prevent soil-borne diseases."})]})]}),I.jsxs("li",{className:"flex gap-4",children:[I.jsx("span",{className:"flex-shrink-0 w-10 h-10 bg-lime-100 rounded-2xl flex items-center justify-center font-bold text-green-700",children:"2"}),I.jsxs("div",{children:[I.jsx("h4",{className:"font-bold text-stone-800",children:"Jeevamrut (Microbial Enrichment)"}),I.jsx("p",{className:"text-sm text-stone-500 mt-1",children:"Applying fermented cultures of local bacteria to multiply soil life."})]})]}),I.jsxs("li",{className:"flex gap-4",children:[I.jsx("span",{className:"flex-shrink-0 w-10 h-10 bg-lime-100 rounded-2xl flex items-center justify-center font-bold text-green-700",children:"3"}),I.jsxs("div",{children:[I.jsx("h4",{className:"font-bold text-stone-800",children:"Mulching (Acchaadana)"}),I.jsx("p",{className:"text-sm text-stone-500 mt-1",children:"Covering soil with biomass to preserve moisture and prevent erosion."})]})]}),I.jsxs("li",{className:"flex gap-4",children:[I.jsx("span",{className:"flex-shrink-0 w-10 h-10 bg-lime-100 rounded-2xl flex items-center justify-center font-bold text-green-700",children:"4"}),I.jsxs("div",{children:[I.jsx("h4",{className:"font-bold text-stone-800",children:"Moisture (Whapasa)"}),I.jsx("p",{className:"text-sm text-stone-500 mt-1",children:"Understanding that roots need air as much as water."})]})]})]})]}),I.jsxs("div",{className:"bg-green-900 text-white p-8 rounded-[2.5rem] shadow-xl relative overflow-hidden",children:[I.jsx("div",{className:"absolute -right-10 -bottom-10 w-40 h-40 bg-lime-500/10 rounded-full blur-3xl"}),I.jsx("h3",{className:"text-2xl font-bold mb-6",children:"Rajiv Dixit's Philosophy"}),I.jsxs("blockquote",{className:"text-lg italic text-lime-100 border-l-4 border-lime-400 pl-6 space-y-4",children:[I.jsx("p",{children:'"Chemical fertilizers are not food for the soil; they are like poison for the earth."'}),I.jsx("p",{children:`"A farmer's true wealth is the health of his soil and the purity of his seeds."`}),I.jsx("p",{children:'"Swadeshi farming means using what you have in your cowshed, not what is sold in expensive markets."'})]}),I.jsx("div",{className:"mt-8 pt-8 border-t border-green-800",children:I.jsxs("p",{className:"text-sm text-green-300",children:["By following these natural methods, farmers can eliminate input costs entirely, leading to",I.jsx("span",{className:"font-bold text-white",children:" Zero Budget Natural Farming (ZBNF)"}),"."]})})]})]}),I.jsxs("section",{children:[I.jsx("h3",{className:"text-2xl font-bold text-stone-800 mb-8 px-4",children:"Essential Natural Formulas"}),I.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:S4.map(n=>I.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-stone-100 shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all",children:[I.jsx("div",{className:"text-4xl mb-4",children:n.icon}),I.jsx("h4",{className:"font-bold text-stone-800 mb-2",children:n.title}),I.jsx("p",{className:"text-xs text-stone-400 font-bold uppercase mb-3",children:"Ingredients"}),I.jsx("p",{className:"text-xs text-stone-600 mb-4",children:n.ingredients}),I.jsx("div",{className:"pt-4 border-t border-stone-50",children:I.jsx("p",{className:"text-xs text-green-600 font-medium",children:n.utility})})]},n.title))})]}),I.jsxs("footer",{className:"bg-stone-200/50 p-8 rounded-[2.5rem] text-center",children:[I.jsx("p",{className:"text-stone-500 font-medium",children:"Protect the Earth, Feed the Nation, Save the Future."}),I.jsx("button",{className:"mt-4 px-8 py-3 bg-stone-800 text-white rounded-full font-bold text-sm hover:bg-stone-900 transition-colors shadow-lg",children:"Download PDF Guide"})]})]}),w4=({onComplete:n})=>{const[e,t]=He.useState(0),[i,r]=He.useState({name:"",address:"",phone:"",farmSize:0,crops:[],language:"hi",aiProvider:Un.GEMINI}),a=p=>{r({...i,language:p}),t(1)},u=()=>{t(2)},d=p=>{p.preventDefault(),n({...i,onboarded:!0})};return I.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-green-950 p-4 overflow-y-auto",children:[I.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[I.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-lime-500/20 blur-[120px] rounded-full"}),I.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-green-500/20 blur-[120px] rounded-full"})]}),I.jsxs("div",{className:"glass-card w-full max-w-xl p-8 md:p-12 rounded-[3rem] shadow-2xl relative z-10 animate-fadeInScale my-8",children:[e===0&&I.jsxs("div",{className:"text-center space-y-8",children:[I.jsx("h2",{className:"text-3xl font-black text-stone-800 tracking-tight",children:"Select Language"}),I.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.keys(gs).map(p=>I.jsx("button",{onClick:()=>a(p),className:"p-4 bg-white border border-stone-200 rounded-2xl font-bold hover:bg-lime-50 hover:border-lime-400 transition-all text-sm",children:gs[p]},p))})]}),e===1&&I.jsxs("div",{className:"text-center space-y-8",children:[I.jsx("div",{className:"w-24 h-24 bg-lime-400 mx-auto rounded-3xl flex items-center justify-center text-5xl shadow-lg rotate-3",children:""}),I.jsxs("div",{children:[I.jsx("h1",{className:"text-4xl font-black text-stone-800 tracking-tight",children:"Kisan Mitra AI"}),I.jsx("p",{className:"text-stone-500 mt-4 text-lg font-medium",children:"Empowering Farmers with Advanced Intelligence & Rajiv Dixit's Natural Wisdom."})]}),I.jsxs("div",{className:"space-y-4 pt-6",children:[I.jsxs("button",{onClick:u,className:"w-full py-4 bg-white border border-stone-200 rounded-2xl font-bold flex items-center justify-center gap-4 hover:bg-stone-50 transition-all shadow-sm",children:[I.jsx("img",{src:"https://www.gstatic.com/images/branding/product/1x/gsa_512dp.png",className:"w-6 h-6",alt:"Google"}),"Continue with Google"]}),I.jsx("button",{onClick:()=>t(2),className:"w-full py-4 bg-green-700 text-white rounded-2xl font-bold text-lg hover:bg-green-800 transition-all shadow-xl",children:"Enter Details Manually"})]})]}),e===2&&I.jsxs("form",{onSubmit:d,className:"space-y-6",children:[I.jsxs("header",{className:"text-center mb-4",children:[I.jsx("h2",{className:"text-2xl font-black text-stone-800 tracking-tight",children:"Tell us about your Farm"}),I.jsx("p",{className:"text-stone-500 text-sm",children:"We'll personalize our AI advice for your specific land."})]}),I.jsxs("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto pr-2",children:[I.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[I.jsxs("div",{children:[I.jsx("label",{className:"block text-[10px] font-black text-stone-400 uppercase tracking-widest mb-1 px-1",children:"Full Name"}),I.jsx("input",{required:!0,type:"text",value:i.name,onChange:p=>r({...i,name:p.target.value}),className:"w-full p-3 bg-stone-100 rounded-xl focus:ring-4 focus:ring-lime-100 text-sm",placeholder:"e.g. Rajesh Kumar"})]}),I.jsxs("div",{children:[I.jsx("label",{className:"block text-[10px] font-black text-stone-400 uppercase tracking-widest mb-1 px-1",children:"Mobile No."}),I.jsx("input",{required:!0,type:"tel",value:i.phone,onChange:p=>r({...i,phone:p.target.value}),className:"w-full p-3 bg-stone-100 rounded-xl focus:ring-4 focus:ring-lime-100 text-sm",placeholder:"+91 98XXX XXXX"})]})]}),I.jsxs("div",{children:[I.jsx("label",{className:"block text-[10px] font-black text-stone-400 uppercase tracking-widest mb-1 px-1",children:"Farm Location / Village"}),I.jsx("input",{required:!0,type:"text",value:i.address,onChange:p=>r({...i,address:p.target.value}),className:"w-full p-3 bg-stone-100 rounded-xl focus:ring-4 focus:ring-lime-100 text-sm",placeholder:"Address, Village, District"})]}),I.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[I.jsxs("div",{children:[I.jsx("label",{className:"block text-[10px] font-black text-stone-400 uppercase tracking-widest mb-1 px-1",children:"Farm Size (in Acres)"}),I.jsx("input",{required:!0,type:"number",step:"0.1",value:i.farmSize,onChange:p=>r({...i,farmSize:parseFloat(p.target.value)||0}),className:"w-full p-3 bg-stone-100 rounded-xl focus:ring-4 focus:ring-lime-100 text-sm",placeholder:"e.g. 5.5"})]}),I.jsxs("div",{children:[I.jsx("label",{className:"block text-[10px] font-black text-stone-400 uppercase tracking-widest mb-1 px-1",children:"Crops you plant"}),I.jsx("input",{required:!0,type:"text",value:i.crops.join(", "),onChange:p=>r({...i,crops:p.target.value.split(",").map(h=>h.trim()).filter(h=>h)}),className:"w-full p-3 bg-stone-100 rounded-xl focus:ring-4 focus:ring-lime-100 text-sm",placeholder:"e.g. Wheat, Rice, Cotton"})]})]}),I.jsxs("div",{children:[I.jsx("label",{className:"block text-[10px] font-black text-stone-400 uppercase tracking-widest mb-1 px-1",children:"AI Advisor Engine"}),I.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[I.jsx("button",{type:"button",onClick:()=>r({...i,aiProvider:Un.GEMINI}),className:`p-3 rounded-xl border-2 transition-all text-sm font-bold ${i.aiProvider===Un.GEMINI?"border-green-600 bg-green-50 text-green-700":"border-stone-200 bg-white text-stone-500"}`,children:"Gemini AI"}),I.jsx("button",{type:"button",onClick:()=>r({...i,aiProvider:Un.OPENAI}),className:`p-3 rounded-xl border-2 transition-all text-sm font-bold ${i.aiProvider===Un.OPENAI?"border-green-600 bg-green-50 text-green-700":"border-stone-200 bg-white text-stone-500"}`,children:"ChatGPT AI"})]})]})]}),I.jsx("button",{type:"submit",className:"w-full py-4 bg-green-700 text-white rounded-[1.5rem] font-black text-lg hover:bg-green-800 transition-all shadow-xl mt-4",children:"Start Smart Farming"})]})]})]})},C4=({history:n})=>n.length===0?I.jsxs("div",{className:"text-center py-20 space-y-4",children:[I.jsx("div",{className:"text-6xl",children:""}),I.jsx("h3",{className:"text-2xl font-bold text-stone-800",children:"No History Found"}),I.jsx("p",{className:"text-stone-500",children:"Your previous crop scans will appear here."})]}):I.jsxs("div",{className:"space-y-8 animate-fadeIn",children:[I.jsxs("header",{children:[I.jsx("h2",{className:"text-3xl font-bold text-stone-800",children:"Diagnosis History"}),I.jsx("p",{className:"text-stone-500",children:"Review your past scans and follow-up advice."})]}),I.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(e=>I.jsxs("div",{className:"bg-white rounded-3xl overflow-hidden shadow-sm border border-stone-200 hover:shadow-lg transition-all flex flex-col",children:[e.image&&I.jsx("img",{src:e.image,alt:e.disease,className:"w-full h-48 object-cover"}),I.jsxs("div",{className:"p-6 space-y-4 flex-1",children:[I.jsxs("div",{className:"flex justify-between items-start",children:[I.jsx("h4",{className:"font-bold text-xl text-stone-800 leading-tight",children:e.disease}),I.jsx("span",{className:"text-[10px] font-bold bg-lime-100 text-green-700 px-2 py-1 rounded-full uppercase tracking-tighter",children:new Date(e.timestamp).toLocaleDateString()})]}),I.jsx("p",{className:"text-sm text-stone-500 line-clamp-2",children:e.description}),I.jsxs("div",{className:"pt-4 mt-auto border-t border-stone-100 flex gap-2",children:[I.jsxs("span",{className:"px-3 py-1 bg-stone-100 text-stone-600 rounded-lg text-xs font-semibold",children:[" ",e.solutions.chemicalSolution.product.split(" ")[0]]}),I.jsxs("span",{className:"px-3 py-1 bg-lime-50 text-green-700 rounded-lg text-xs font-semibold",children:[" ",e.solutions.naturalSolution.name.split(" ")[0]]})]})]})]},e.id))})]}),I4=({userProfile:n,onUpdate:e,onLogout:t})=>{const i=()=>{const r=n.aiProvider===Un.GEMINI?Un.OPENAI:Un.GEMINI;e({...n,aiProvider:r})};return I.jsxs("div",{className:"max-w-2xl mx-auto space-y-8 animate-fadeIn",children:[I.jsxs("header",{className:"text-center",children:[I.jsx("div",{className:"w-24 h-24 bg-green-800 text-white rounded-full mx-auto flex items-center justify-center text-4xl font-black mb-4 shadow-xl ring-8 ring-stone-100",children:n.name.charAt(0)}),I.jsx("h2",{className:"text-3xl font-black text-stone-800",children:n.name}),I.jsx("p",{className:"text-stone-500",children:"Farm Member since 2025"})]}),I.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] shadow-sm border border-stone-200 space-y-6",children:[I.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[I.jsxs("div",{className:"p-4 bg-stone-50 rounded-2xl border border-stone-100",children:[I.jsx("p",{className:"text-[10px] font-bold text-stone-400 uppercase tracking-widest mb-1",children:"Mobile Number"}),I.jsx("p",{className:"font-bold text-stone-800",children:n.phone||"N/A"})]}),I.jsxs("div",{className:"p-4 bg-stone-50 rounded-2xl border border-stone-100",children:[I.jsx("p",{className:"text-[10px] font-bold text-stone-400 uppercase tracking-widest mb-1",children:"Farm Location"}),I.jsx("p",{className:"font-bold text-stone-800",children:n.address})]})]}),I.jsxs("div",{className:"p-4 bg-stone-50 rounded-2xl border border-stone-100",children:[I.jsx("p",{className:"text-[10px] font-bold text-stone-400 uppercase tracking-widest mb-1",children:"AI Advisor Engine"}),I.jsxs("div",{className:"flex items-center justify-between mt-2",children:[I.jsx("p",{className:"font-bold text-stone-800",children:n.aiProvider===Un.GEMINI?"Google Gemini":"OpenAI ChatGPT"}),I.jsx("button",{onClick:i,className:"text-xs font-black text-green-700 uppercase tracking-widest hover:underline",children:"Switch Engine"})]})]}),I.jsxs("div",{className:"flex items-center justify-between p-4 bg-lime-50 rounded-2xl border border-lime-100",children:[I.jsxs("div",{className:"flex items-center gap-3",children:[I.jsx("span",{className:"text-2xl",children:""}),I.jsxs("div",{children:[I.jsx("p",{className:"font-bold text-green-900",children:"Cloud Sync Active"}),I.jsx("p",{className:"text-xs text-green-600",children:"Your data is being saved to private storage."})]})]}),I.jsx("div",{className:"w-12 h-6 bg-green-700 rounded-full relative p-1 flex items-center justify-end",children:I.jsx("div",{className:"w-4 h-4 bg-white rounded-full"})})]}),I.jsxs("div",{className:"pt-6 border-t border-stone-100 flex flex-col gap-4",children:[I.jsx("button",{className:"w-full py-4 bg-stone-100 text-stone-600 font-bold rounded-2xl hover:bg-stone-200 transition-colors",children:"Edit Details"}),I.jsx("button",{onClick:t,className:"w-full py-4 bg-red-50 text-red-600 font-bold rounded-2xl hover:bg-red-100 transition-colors",children:"Sign Out"})]})]})]})},b4=({userProfile:n})=>{const[e,t]=He.useState(!1),[i,r]=He.useState(!1),[a,u]=He.useState(!1),[d,p]=He.useState(!1),[h,_]=He.useState(0),[T,E]=He.useState([]),[C,M]=He.useState(""),[U,P]=He.useState(""),$=He.useRef(null),H=He.useRef(null),z=He.useRef(0),X=He.useRef(new Set),ue=He.useRef(null),W=He.useRef(null),N=He.useRef(null),D=n.aiProvider===Un.GEMINI;He.useEffect(()=>{var xe;(xe=ue.current)==null||xe.scrollIntoView({behavior:"smooth"})},[T,C,U]),He.useEffect(()=>(e?N.current=window.setInterval(()=>{_(xe=>xe+1)},1e3):(N.current&&clearInterval(N.current),_(0)),()=>{N.current&&clearInterval(N.current)}),[e]);const x=xe=>{const Z=Math.floor(xe/60),ce=xe%60;return`${Z}:${ce.toString().padStart(2,"0")}`},L=async(xe,Z)=>{const ce=new Int16Array(xe.buffer),fe=ce.length,be=Z.createBuffer(1,fe,24e3),ze=be.getChannelData(0);for(let F=0;F<fe;F++)ze[F]=ce[F]/32768;return be},k=xe=>{const Z=atob(xe),ce=Z.length,fe=new Uint8Array(ce);for(let be=0;be<ce;be++)fe[be]=Z.charCodeAt(be);return fe},q=async()=>{r(!0),E([]);try{const xe=await navigator.mediaDevices.getUserMedia({audio:!0});H.current=new(window.AudioContext||window.webkitAudioContext)({sampleRate:24e3});const Z=new(window.AudioContext||window.webkitAudioContext)({sampleRate:16e3});rO({onopen:()=>{r(!1),t(!0)},onmessage:async fe=>{var ze,F,ie,he,me,Ce,De,Pe,wt;const be=(me=(he=(ie=(F=(ze=fe.serverContent)==null?void 0:ze.modelTurn)==null?void 0:F.parts)==null?void 0:ie[0])==null?void 0:he.inlineData)==null?void 0:me.data;if(be&&H.current){u(!0);const $e=H.current;z.current=Math.max(z.current,$e.currentTime);const Oi=await L(k(be),$e),On=$e.createBufferSource();On.buffer=Oi,On.connect($e.destination),On.start(z.current),z.current+=Oi.duration,X.current.add(On),On.onended=()=>{X.current.delete(On),X.current.size===0&&u(!1)}}(Ce=fe.serverContent)!=null&&Ce.inputTranscription&&(M($e=>$e+fe.serverContent.inputTranscription.text),p(!0),W.current&&clearTimeout(W.current),W.current=window.setTimeout(()=>p(!1),1500)),(De=fe.serverContent)!=null&&De.outputTranscription&&P($e=>$e+fe.serverContent.outputTranscription.text),(Pe=fe.serverContent)!=null&&Pe.turnComplete&&(E($e=>[...$e,...C?[{role:"user",text:C}]:[],...U?[{role:"ai",text:U}]:[]]),M(""),P(""),p(!1)),(wt=fe.serverContent)!=null&&wt.interrupted&&(X.current.forEach($e=>$e.stop()),X.current.clear(),z.current=0,u(!1),P(""))},onerror:fe=>{console.error("Live Error",fe),V()},onclose:()=>{t(!1),u(!1),p(!1)}},n.language).then(fe=>{$.current=fe;const be=Z.createMediaStreamSource(xe),ze=Z.createScriptProcessor(4096,1,1);ze.onaudioprocess=F=>{const ie=F.inputBuffer.getChannelData(0),he=new Int16Array(ie.length);for(let Pe=0;Pe<ie.length;Pe++)he[Pe]=ie[Pe]*32768;let me="";const Ce=new Uint8Array(he.buffer);for(let Pe=0;Pe<Ce.byteLength;Pe++)me+=String.fromCharCode(Ce[Pe]);const De=btoa(me);fe.sendRealtimeInput({media:{data:De,mimeType:"audio/pcm;rate=16000"}})},be.connect(ze),ze.connect(Z.destination)})}catch(xe){console.error(xe),r(!1),alert("Microphone access is required.")}},V=()=>{$.current&&$.current.close(),t(!1)},ke=["How to make Jeevamrut?","Pests on my wheat crop","Rajiv Dixit's soil tips","Current market rates"];return I.jsxs("div",{className:"flex flex-col h-[calc(100vh-8rem)] max-w-2xl mx-auto space-y-6 animate-fadeIn",children:[!D&&I.jsxs("div",{className:"bg-amber-50 border border-amber-200 p-4 rounded-2xl flex items-center gap-3 text-amber-800 text-sm font-medium",children:[I.jsx("span",{children:""}),I.jsxs("p",{children:["Voice Assistant currently requires ",I.jsx("b",{children:"Google Gemini"}),". Please switch your AI Engine in the Profile tab to use this feature."]})]}),I.jsxs("div",{className:`flex-1 flex flex-col rounded-[3.5rem] overflow-hidden shadow-2xl transition-all duration-1000 relative border-4 ${e?a?"bg-green-950 border-lime-500/30":d?"bg-blue-950 border-blue-500/30":"bg-stone-950 border-white/10":"bg-white border-stone-100"} ${D?"":"opacity-50 pointer-events-none grayscale"}`,children:[I.jsx("div",{className:`absolute inset-0 transition-opacity duration-1000 blur-[120px] pointer-events-none opacity-40 ${a?"bg-lime-500":d?"bg-blue-500":"bg-transparent"}`}),I.jsxs("div",{className:"pt-10 px-10 flex justify-between items-center relative z-20",children:[I.jsxs("div",{className:"flex flex-col",children:[I.jsx("h4",{className:`text-[10px] font-black uppercase tracking-[0.4em] transition-colors ${e?"text-lime-400":"text-stone-400"}`,children:e?"Active Consultation":"Expert Offline"}),e&&I.jsx("span",{className:"text-white/40 font-mono text-sm mt-1",children:x(h)})]}),I.jsx("div",{className:"flex items-center gap-4",children:I.jsx("div",{className:`w-3 h-3 rounded-full transition-all duration-500 ${e?"bg-lime-400 shadow-[0_0_15px_rgba(163,230,53,0.8)]":"bg-stone-200"}`})})]}),I.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center relative z-10 px-6",children:[I.jsxs("div",{className:"relative",children:[e&&I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"absolute -inset-24 rounded-full border border-white/5 animate-[ping_3s_linear_infinite] opacity-20"}),I.jsx("div",{className:"absolute -inset-16 rounded-full border border-white/10 animate-[pulse_2s_ease-in-out_infinite] opacity-30"})]}),I.jsx("div",{className:`w-44 h-44 rounded-full flex items-center justify-center text-7xl shadow-2xl transition-all duration-700 relative z-20 ${e?"bg-white ring-[12px] ring-white/10":"bg-stone-50"}`,children:I.jsx("div",{className:`transition-transform duration-500 ${e?"scale-110":"scale-100"}`,children:e?a?"":d?"":"":""})})]}),I.jsx("div",{className:"mt-20 w-full max-w-xs h-16 flex items-center justify-center",children:I.jsx("svg",{viewBox:"0 0 200 60",className:"w-full h-full",children:[...Array(e?3:0)].map((xe,Z)=>I.jsx("path",{d:"M0 30 Q 25 10, 50 30 T 100 30 T 150 30 T 200 30",fill:"none",stroke:a?"#a3e635":d?"#60a5fa":"#ffffff44",strokeWidth:"2",className:`transition-all duration-500 ${e?"animate-wave":""}`,style:{opacity:1-Z*.3,animationDelay:`${Z*-.5}s`,transform:`scaleY(${e?a||d?1.5:.2:0})`}},Z))})})]}),I.jsx("div",{className:`min-h-[140px] px-12 py-10 transition-all duration-500 relative z-20 ${e?"bg-black/40 text-white":"bg-stone-50/80 text-stone-400"}`,children:I.jsxs("div",{className:"flex flex-col gap-3",children:[I.jsx("p",{className:"text-xl font-bold leading-snug italic line-clamp-2 transition-all",children:e?U||C||"Go ahead, ask Kisan Mitra anything...":"Connect to speak with our AI expert."}),e&&!a&&!d&&!C&&I.jsx("div",{className:"flex gap-2 mt-4 overflow-x-auto pb-2 no-scrollbar animate-fadeInUp",children:ke.map((xe,Z)=>I.jsx("button",{className:"px-3 py-1.5 bg-white/10 border border-white/10 rounded-full text-[10px] font-bold whitespace-nowrap hover:bg-white/20 transition-all",children:xe},Z))})]})}),I.jsx("div",{className:`p-10 flex justify-center items-center gap-10 relative z-20 transition-all ${e?"bg-black/60":"bg-white"}`,children:e?I.jsx("div",{className:"flex items-center gap-10",children:I.jsx("button",{onClick:V,className:"w-24 h-24 bg-red-600 text-white rounded-full flex items-center justify-center text-4xl shadow-2xl hover:bg-red-700 transition-all",children:""})}):I.jsxs("button",{onClick:q,disabled:i,className:"group relative w-28 h-28 bg-green-700 text-white rounded-full transition-all shadow-2xl hover:bg-green-800 hover:scale-105 active:scale-90 disabled:opacity-50",children:[I.jsx("div",{className:"absolute inset-0 rounded-full bg-green-500 animate-[ping_2s_linear_infinite] opacity-20"}),I.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[I.jsx("span",{className:"text-4xl",children:i?"":""}),I.jsx("p",{className:"text-[8px] font-black uppercase tracking-widest mt-1 opacity-60",children:"Consult"})]})]})})]}),I.jsx("style",{children:`
        @keyframes wave {
          0% { transform: scaleY(1.5) translateX(-20px); }
          50% { transform: scaleY(0.8) translateX(20px); }
          100% { transform: scaleY(1.5) translateX(-20px); }
        }
        .animate-wave { animation: wave 3s ease-in-out infinite; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
      `})]})},R4=()=>{};var uw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},x4=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const a=n[t++];e[i++]=String.fromCharCode((r&31)<<6|a&63)}else if(r>239&&r<365){const a=n[t++],u=n[t++],d=n[t++],p=((r&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const a=n[t++],u=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(a&63)<<6|u&63)}}return e.join("")},hR={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const a=n[r],u=r+1<n.length,d=u?n[r+1]:0,p=r+2<n.length,h=p?n[r+2]:0,_=a>>2,T=(a&3)<<4|d>>4;let E=(d&15)<<2|h>>6,C=h&63;p||(C=64,u||(E=64)),i.push(t[_],t[T],t[E],t[C])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(fR(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):x4(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const a=t[n.charAt(r++)],d=r<n.length?t[n.charAt(r)]:0;++r;const h=r<n.length?t[n.charAt(r)]:64;++r;const T=r<n.length?t[n.charAt(r)]:64;if(++r,a==null||d==null||h==null||T==null)throw new N4;const E=a<<2|d>>4;if(i.push(E),h!==64){const C=d<<4&240|h>>2;if(i.push(C),T!==64){const M=h<<6&192|T;i.push(M)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class N4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const M4=function(n){const e=fR(n);return hR.encodeByteArray(e,!0)},dh=function(n){return M4(n).replace(/\./g,"")},pR=function(n){try{return hR.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P4=()=>D4().__FIREBASE_DEFAULTS__,k4=()=>{if(typeof process>"u"||typeof uw>"u")return;const n=uw.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},V4=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&pR(n[1]);return e&&JSON.parse(e)},Yh=()=>{try{return R4()||P4()||k4()||V4()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},mR=n=>{var e,t;return(t=(e=Yh())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},U4=n=>{const e=mR(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},gR=()=>{var n;return(n=Yh())==null?void 0:n.config},yR=n=>{var e;return(e=Yh())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _l(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function _R(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O4(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[dh(JSON.stringify(t)),dh(JSON.stringify(u)),""].join(".")}const tc={};function F4(){const n={prod:[],emulator:[]};for(const e of Object.keys(tc))tc[e]?n.emulator.push(e):n.prod.push(e);return n}function B4(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let cw=!1;function vR(n,e){if(typeof window>"u"||typeof document>"u"||!_l(window.location.host)||tc[n]===e||tc[n]||cw)return;tc[n]=e;function t(E){return`__firebase__banner__${E}`}const i="__firebase__banner",a=F4().prod.length>0;function u(){const E=document.getElementById(i);E&&E.remove()}function d(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function p(E,C){E.setAttribute("width","24"),E.setAttribute("id",C),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function h(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{cw=!0,u()},E}function _(E,C){E.setAttribute("id",C),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function T(){const E=B4(i),C=t("text"),M=document.getElementById(C)||document.createElement("span"),U=t("learnmore"),P=document.getElementById(U)||document.createElement("a"),$=t("preprendIcon"),H=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const z=E.element;d(z),_(P,U);const X=h();p(H,$),z.append(H,M,P,X),document.body.appendChild(z)}a?(M.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function q4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(En())}function G4(){var e;const n=(e=Yh())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function H4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function z4(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function $4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function J4(){const n=En();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function K4(){return!G4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Y4(){try{return typeof indexedDB=="object"}catch{return!1}}function W4(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var a;e(((a=r.error)==null?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q4="FirebaseError";class Xs extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=Q4,Object.setPrototypeOf(this,Xs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Sc.prototype.create)}}class Sc{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},r=`${this.service}/${e}`,a=this.errors[e],u=a?X4(a,i):"Error",d=`${this.serviceName}: ${u} (${r}).`;return new Xs(r,d,i)}}function X4(n,e){return n.replace(j4,(t,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const j4=/\{\$([^}]+)}/g;function Z4(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Oo(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const r of t){if(!i.includes(r))return!1;const a=n[r],u=e[r];if(dw(a)&&dw(u)){if(!Oo(a,u))return!1}else if(a!==u)return!1}for(const r of i)if(!t.includes(r))return!1;return!0}function dw(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ac(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function e3(n,e){const t=new t3(n,e);return t.subscribe.bind(t)}class t3{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");n3(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=Pg),r.error===void 0&&(r.error=Pg),r.complete===void 0&&(r.complete=Pg);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function n3(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Pg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(n){return n&&n._delegate?n._delegate:n}class Fo{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i3{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new L4;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(r3(e))try{this.getOrInitializeService({instanceIdentifier:No})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:r});i.resolve(a)}catch{}}}}clearInstance(e=No){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=No){return this.instances.has(e)}getOptions(e=No){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);i===d&&u.resolve(r)}return r}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const a=this.instances.get(i);return a&&e(a,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:s3(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=No){return this.component?this.component.multipleInstances?e:No:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function s3(n){return n===No?void 0:n}function r3(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new i3(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Qe||(Qe={}));const a3={debug:Qe.DEBUG,verbose:Qe.VERBOSE,info:Qe.INFO,warn:Qe.WARN,error:Qe.ERROR,silent:Qe.SILENT},l3=Qe.INFO,u3={[Qe.DEBUG]:"log",[Qe.VERBOSE]:"log",[Qe.INFO]:"info",[Qe.WARN]:"warn",[Qe.ERROR]:"error"},c3=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),r=u3[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class R_{constructor(e){this.name=e,this._logLevel=l3,this._logHandler=c3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?a3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Qe.DEBUG,...e),this._logHandler(this,Qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Qe.VERBOSE,...e),this._logHandler(this,Qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Qe.INFO,...e),this._logHandler(this,Qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Qe.WARN,...e),this._logHandler(this,Qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Qe.ERROR,...e),this._logHandler(this,Qe.ERROR,...e)}}const d3=(n,e)=>e.some(t=>n instanceof t);let fw,hw;function f3(){return fw||(fw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function h3(){return hw||(hw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const TR=new WeakMap,Ey=new WeakMap,ER=new WeakMap,kg=new WeakMap,x_=new WeakMap;function p3(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(Or(n.result)),r()},u=()=>{i(n.error),r()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&TR.set(t,n)}).catch(()=>{}),x_.set(e,n),e}function m3(n){if(Ey.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),r()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});Ey.set(n,e)}let Sy={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ey.get(n);if(e==="objectStoreNames")return n.objectStoreNames||ER.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Or(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function g3(n){Sy=n(Sy)}function y3(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Vg(this),e,...t);return ER.set(i,e.sort?e.sort():[e]),Or(i)}:h3().includes(n)?function(...e){return n.apply(Vg(this),e),Or(TR.get(this))}:function(...e){return Or(n.apply(Vg(this),e))}}function _3(n){return typeof n=="function"?y3(n):(n instanceof IDBTransaction&&m3(n),d3(n,f3())?new Proxy(n,Sy):n)}function Or(n){if(n instanceof IDBRequest)return p3(n);if(kg.has(n))return kg.get(n);const e=_3(n);return e!==n&&(kg.set(n,e),x_.set(e,n)),e}const Vg=n=>x_.get(n);function v3(n,e,{blocked:t,upgrade:i,blocking:r,terminated:a}={}){const u=indexedDB.open(n,e),d=Or(u);return i&&u.addEventListener("upgradeneeded",p=>{i(Or(u.result),p.oldVersion,p.newVersion,Or(u.transaction),p)}),t&&u.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{a&&p.addEventListener("close",()=>a()),r&&p.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),d}const T3=["get","getKey","getAll","getAllKeys","count"],E3=["put","add","delete","clear"],Ug=new Map;function pw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Ug.get(e))return Ug.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=E3.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||T3.includes(t)))return;const a=async function(u,...d){const p=this.transaction(u,r?"readwrite":"readonly");let h=p.store;return i&&(h=h.index(d.shift())),(await Promise.all([h[t](...d),r&&p.done]))[0]};return Ug.set(e,a),a}g3(n=>({...n,get:(e,t,i)=>pw(e,t)||n.get(e,t,i),has:(e,t)=>!!pw(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(A3(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function A3(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ay="@firebase/app",mw="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s=new R_("@firebase/app"),w3="@firebase/app-compat",C3="@firebase/analytics-compat",I3="@firebase/analytics",b3="@firebase/app-check-compat",R3="@firebase/app-check",x3="@firebase/auth",N3="@firebase/auth-compat",M3="@firebase/database",D3="@firebase/data-connect",P3="@firebase/database-compat",k3="@firebase/functions",V3="@firebase/functions-compat",U3="@firebase/installations",L3="@firebase/installations-compat",O3="@firebase/messaging",F3="@firebase/messaging-compat",B3="@firebase/performance",q3="@firebase/performance-compat",G3="@firebase/remote-config",H3="@firebase/remote-config-compat",z3="@firebase/storage",$3="@firebase/storage-compat",J3="@firebase/firestore",K3="@firebase/ai",Y3="@firebase/firestore-compat",W3="firebase",Q3="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wy="[DEFAULT]",X3={[Ay]:"fire-core",[w3]:"fire-core-compat",[I3]:"fire-analytics",[C3]:"fire-analytics-compat",[R3]:"fire-app-check",[b3]:"fire-app-check-compat",[x3]:"fire-auth",[N3]:"fire-auth-compat",[M3]:"fire-rtdb",[D3]:"fire-data-connect",[P3]:"fire-rtdb-compat",[k3]:"fire-fn",[V3]:"fire-fn-compat",[U3]:"fire-iid",[L3]:"fire-iid-compat",[O3]:"fire-fcm",[F3]:"fire-fcm-compat",[B3]:"fire-perf",[q3]:"fire-perf-compat",[G3]:"fire-rc",[H3]:"fire-rc-compat",[z3]:"fire-gcs",[$3]:"fire-gcs-compat",[J3]:"fire-fst",[Y3]:"fire-fst-compat",[K3]:"fire-vertex","fire-js":"fire-js",[W3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fh=new Map,j3=new Map,Cy=new Map;function gw(n,e){try{n.container.addComponent(e)}catch(t){$s.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ol(n){const e=n.name;if(Cy.has(e))return $s.debug(`There were multiple attempts to register component ${e}.`),!1;Cy.set(e,n);for(const t of fh.values())gw(t,n);for(const t of j3.values())gw(t,n);return!0}function N_(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function xi(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fr=new Sc("app","Firebase",Z3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Fo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vl=Q3;function SR(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:wy,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw Fr.create("bad-app-name",{appName:String(r)});if(t||(t=gR()),!t)throw Fr.create("no-options");const a=fh.get(r);if(a){if(Oo(t,a.options)&&Oo(i,a.config))return a;throw Fr.create("duplicate-app",{appName:r})}const u=new o3(r);for(const p of Cy.values())u.addComponent(p);const d=new e6(t,i,u);return fh.set(r,d),d}function AR(n=wy){const e=fh.get(n);if(!e&&n===wy&&gR())return SR();if(!e)throw Fr.create("no-app",{appName:n});return e}function Br(n,e,t){let i=X3[n]??n;t&&(i+=`-${t}`);const r=i.match(/\s|\//),a=e.match(/\s|\//);if(r||a){const u=[`Unable to register library "${i}" with version "${e}":`];r&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$s.warn(u.join(" "));return}ol(new Fo(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t6="firebase-heartbeat-database",n6=1,cc="firebase-heartbeat-store";let Lg=null;function wR(){return Lg||(Lg=v3(t6,n6,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(cc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Fr.create("idb-open",{originalErrorMessage:n.message})})),Lg}async function i6(n){try{const t=(await wR()).transaction(cc),i=await t.objectStore(cc).get(CR(n));return await t.done,i}catch(e){if(e instanceof Xs)$s.warn(e.message);else{const t=Fr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});$s.warn(t.message)}}}async function yw(n,e){try{const i=(await wR()).transaction(cc,"readwrite");await i.objectStore(cc).put(e,CR(n)),await i.done}catch(t){if(t instanceof Xs)$s.warn(t.message);else{const i=Fr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});$s.warn(i.message)}}}function CR(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s6=1024,r6=30;class o6{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new l6(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=_w();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:r}),this._heartbeatsCache.heartbeats.length>r6){const u=u6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){$s.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=_w(),{heartbeatsToSend:i,unsentEntries:r}=a6(this._heartbeatsCache.heartbeats),a=dh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return $s.warn(t),""}}}function _w(){return new Date().toISOString().substring(0,10)}function a6(n,e=s6){const t=[];let i=n.slice();for(const r of n){const a=t.find(u=>u.agent===r.agent);if(a){if(a.dates.push(r.date),vw(t)>e){a.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),vw(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class l6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Y4()?W4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await i6(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return yw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return yw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function vw(n){return dh(JSON.stringify({version:2,heartbeats:n})).length}function u6(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c6(n){ol(new Fo("platform-logger",e=>new S3(e),"PRIVATE")),ol(new Fo("heartbeat",e=>new o6(e),"PRIVATE")),Br(Ay,mw,n),Br(Ay,mw,"esm2020"),Br("fire-js","")}c6("");var d6="firebase",f6="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Br(d6,f6,"app");function IR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const h6=IR,bR=new Sc("auth","Firebase",IR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh=new R_("@firebase/auth");function p6(n,...e){hh.logLevel<=Qe.WARN&&hh.warn(`Auth (${vl}): ${n}`,...e)}function Ff(n,...e){hh.logLevel<=Qe.ERROR&&hh.error(`Auth (${vl}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ys(n,...e){throw D_(n,...e)}function ki(n,...e){return D_(n,...e)}function M_(n,e,t){const i={...h6(),[e]:t};return new Sc("auth","Firebase",i).create(e,{appName:n.name})}function Uo(n){return M_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function m6(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&ys(n,"argument-error"),M_(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function D_(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return bR.create(n,...e)}function Me(n,e,...t){if(!n)throw D_(e,...t)}function qs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Ff(e),new Error(e)}function Js(n,e){n||qs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iy(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function g6(){return Tw()==="http:"||Tw()==="https:"}function Tw(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(g6()||z4()||"connection"in navigator)?navigator.onLine:!0}function _6(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Js(t>e,"Short delay should be less than long delay!"),this.isMobile=q4()||$4()}get(){return y6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P_(n,e){Js(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T6=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],E6=new wc(3e4,6e4);function k_(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Tl(n,e,t,i,r={}){return xR(n,r,async()=>{let a={},u={};i&&(e==="GET"?u=i:a={body:JSON.stringify(i)});const d=Ac({key:n.config.apiKey,...u}).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const h={method:e,headers:p,...a};return H4()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&_l(n.emulatorConfig.host)&&(h.credentials="include"),RR.fetch()(await NR(n,n.config.apiHost,t,d),h)})}async function xR(n,e,t){n._canInitEmulator=!1;const i={...v6,...e};try{const r=new A6(n),a=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw Sf(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const d=a.ok?u.errorMessage:u.error.message,[p,h]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Sf(n,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw Sf(n,"email-already-in-use",u);if(p==="USER_DISABLED")throw Sf(n,"user-disabled",u);const _=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw M_(n,_,h);ys(n,_)}}catch(r){if(r instanceof Xs)throw r;ys(n,"network-request-failed",{message:String(r)})}}async function S6(n,e,t,i,r={}){const a=await Tl(n,e,t,i,r);return"mfaPendingCredential"in a&&ys(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function NR(n,e,t,i){const r=`${e}${t}?${i}`,a=n,u=a.config.emulator?P_(n.config,r):`${n.config.apiScheme}://${r}`;return T6.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}class A6{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(ki(this.auth,"network-request-failed")),E6.get())})}}function Sf(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const r=ki(n,e,i);return r.customData._tokenResponse=t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w6(n,e){return Tl(n,"POST","/v1/accounts:delete",e)}async function ph(n,e){return Tl(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function C6(n,e=!1){const t=Ln(n),i=await t.getIdToken(e),r=V_(i);Me(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const a=typeof r.firebase=="object"?r.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:r,token:i,authTime:nc(Og(r.auth_time)),issuedAtTime:nc(Og(r.iat)),expirationTime:nc(Og(r.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Og(n){return Number(n)*1e3}function V_(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Ff("JWT malformed, contained fewer than 3 sections"),null;try{const r=pR(t);return r?JSON.parse(r):(Ff("Failed to decode base64 JWT payload"),null)}catch(r){return Ff("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function Ew(n){const e=V_(n);return Me(e,"internal-error"),Me(typeof e.exp<"u","internal-error"),Me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dc(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Xs&&I6(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function I6({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=nc(this.lastLoginAt),this.creationTime=nc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mh(n){var T;const e=n.auth,t=await n.getIdToken(),i=await dc(n,ph(e,{idToken:t}));Me(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];n._notifyReloadListener(r);const a=(T=r.providerUserInfo)!=null&&T.length?MR(r.providerUserInfo):[],u=x6(n.providerData,a),d=n.isAnonymous,p=!(n.email&&r.passwordHash)&&!(u!=null&&u.length),h=d?p:!1,_={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:u,metadata:new by(r.createdAt,r.lastLoginAt),isAnonymous:h};Object.assign(n,_)}async function R6(n){const e=Ln(n);await mh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function x6(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function MR(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N6(n,e){const t=await xR(n,{},async()=>{const i=Ac({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:a}=n.config,u=await NR(n,r,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:i};return n.emulatorConfig&&_l(n.emulatorConfig.host)&&(p.credentials="include"),RR.fetch()(u,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function M6(n,e){return Tl(n,"POST","/v2/accounts:revokeToken",k_(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Me(e.idToken,"internal-error"),Me(typeof e.idToken<"u","internal-error"),Me(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ew(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Me(e.length!==0,"internal-error");const t=Ew(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:r,expiresIn:a}=await N6(e,t);this.updateTokensAndExpiration(i,r,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:r,expirationTime:a}=t,u=new Za;return i&&(Me(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),r&&(Me(typeof r=="string","internal-error",{appName:e}),u.accessToken=r),a&&(Me(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Za,this.toJSON())}_performRefresh(){return qs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pr(n,e){Me(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ni{constructor({uid:e,auth:t,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new b6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new by(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await dc(this,this.stsTokenManager.getToken(this.auth,e));return Me(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return C6(this,e)}reload(){return R6(this)}_assign(e){this!==e&&(Me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ni({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await mh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xi(this.auth.app))return Promise.reject(Uo(this.auth));const e=await this.getIdToken();return await dc(this,w6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,r=t.email??void 0,a=t.phoneNumber??void 0,u=t.photoURL??void 0,d=t.tenantId??void 0,p=t._redirectEventId??void 0,h=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:T,emailVerified:E,isAnonymous:C,providerData:M,stsTokenManager:U}=t;Me(T&&U,e,"internal-error");const P=Za.fromJSON(this.name,U);Me(typeof T=="string",e,"internal-error"),Pr(i,e.name),Pr(r,e.name),Me(typeof E=="boolean",e,"internal-error"),Me(typeof C=="boolean",e,"internal-error"),Pr(a,e.name),Pr(u,e.name),Pr(d,e.name),Pr(p,e.name),Pr(h,e.name),Pr(_,e.name);const $=new Ni({uid:T,auth:e,email:r,emailVerified:E,displayName:i,isAnonymous:C,photoURL:u,phoneNumber:a,tenantId:d,stsTokenManager:P,createdAt:h,lastLoginAt:_});return M&&Array.isArray(M)&&($.providerData=M.map(H=>({...H}))),p&&($._redirectEventId=p),$}static async _fromIdTokenResponse(e,t,i=!1){const r=new Za;r.updateFromServerResponse(t);const a=new Ni({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await mh(a),a}static async _fromGetAccountInfoResponse(e,t,i){const r=t.users[0];Me(r.localId!==void 0,"internal-error");const a=r.providerUserInfo!==void 0?MR(r.providerUserInfo):[],u=!(r.email&&r.passwordHash)&&!(a!=null&&a.length),d=new Za;d.updateFromIdToken(i);const p=new Ni({uid:r.localId,auth:e,stsTokenManager:d,isAnonymous:u}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new by(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(a!=null&&a.length)};return Object.assign(p,h),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw=new Map;function Gs(n){Js(n instanceof Function,"Expected a class definition");let e=Sw.get(n);return e?(Js(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Sw.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}DR.type="NONE";const Aw=DR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bf(n,e,t){return`firebase:${n}:${e}:${t}`}class el{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:r,name:a}=this.auth;this.fullUserKey=Bf(this.userKey,r.apiKey,a),this.fullPersistenceKey=Bf("persistence",r.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await ph(this.auth,{idToken:e}).catch(()=>{});return t?Ni._fromGetAccountInfoResponse(this.auth,t,e):null}return Ni._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new el(Gs(Aw),e,i);const r=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=r[0]||Gs(Aw);const u=Bf(i,e.config.apiKey,e.name);let d=null;for(const h of t)try{const _=await h._get(u);if(_){let T;if(typeof _=="string"){const E=await ph(e,{idToken:_}).catch(()=>{});if(!E)break;T=await Ni._fromGetAccountInfoResponse(e,E,_)}else T=Ni._fromJSON(e,_);h!==a&&(d=T),a=h;break}}catch{}const p=r.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!p.length?new el(a,e,i):(a=p[0],d&&await a._set(u,d.toJSON()),await Promise.all(t.map(async h=>{if(h!==a)try{await h._remove(u)}catch{}})),new el(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ww(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(UR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(PR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(OR(e))return"Blackberry";if(FR(e))return"Webos";if(kR(e))return"Safari";if((e.includes("chrome/")||VR(e))&&!e.includes("edge/"))return"Chrome";if(LR(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function PR(n=En()){return/firefox\//i.test(n)}function kR(n=En()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function VR(n=En()){return/crios\//i.test(n)}function UR(n=En()){return/iemobile/i.test(n)}function LR(n=En()){return/android/i.test(n)}function OR(n=En()){return/blackberry/i.test(n)}function FR(n=En()){return/webos/i.test(n)}function U_(n=En()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function D6(n=En()){var e;return U_(n)&&!!((e=window.navigator)!=null&&e.standalone)}function P6(){return J4()&&document.documentMode===10}function BR(n=En()){return U_(n)||LR(n)||FR(n)||OR(n)||/windows phone/i.test(n)||UR(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(n,e=[]){let t;switch(n){case"Browser":t=ww(En());break;case"Worker":t=`${ww(En())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${vl}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((u,d)=>{try{const p=e(a);u(p)}catch(p){d(p)}});i.onAbort=t,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V6(n,e={}){return Tl(n,"GET","/v2/passwordPolicy",k_(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U6=6;class L6{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??U6,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Cw(this),this.idTokenSubscription=new Cw(this),this.beforeStateQueue=new k6(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Gs(t)),this._initializationPromise=this.queue(async()=>{var i,r,a;if(!this._deleted&&(this.persistenceManager=await el.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ph(this,{idToken:e}),i=await Ni._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(xi(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(a=this.redirectUser)==null?void 0:a._redirectEventId,d=i==null?void 0:i._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===d)&&(p!=null&&p.user)&&(i=p.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await mh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_6()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xi(this.app))return Promise.reject(Uo(this));const t=e?Ln(e):null;return t&&Me(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xi(this.app)?Promise.reject(Uo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xi(this.app)?Promise.reject(Uo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Gs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await V6(this),t=new L6(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Sc("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await M6(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Gs(e)||this._popupRedirectResolver;Me(t,this,"argument-error"),this.redirectPersistenceManager=await el.create(this,[Gs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Me(d,this,"internal-error"),d.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,r);return()=>{u=!0,p()}}else{const p=e.addObserver(t);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(xi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&p6(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Wh(n){return Ln(n)}class Cw{constructor(e){this.auth=e,this.observer=null,this.addObserver=e3(t=>this.observer=t)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let L_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function F6(n){L_=n}function B6(n){return L_.loadJS(n)}function q6(){return L_.gapiScript}function G6(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H6(n,e){const t=N_(n,"auth");if(t.isInitialized()){const r=t.getImmediate(),a=t.getOptions();if(Oo(a,e??{}))return r;ys(r,"already-initialized")}return t.initialize({options:e})}function z6(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Gs);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function $6(n,e,t){const i=Wh(n);Me(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,a=GR(e),{host:u,port:d}=J6(e),p=d===null?"":`:${d}`,h={url:`${a}//${u}${p}/`},_=Object.freeze({host:u,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){Me(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Me(Oo(h,i.config.emulator)&&Oo(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,_l(u)?(_R(`${a}//${u}${p}`),vR("Auth",!0)):K6()}function GR(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function J6(n){const e=GR(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const a=r[1];return{host:a,port:Iw(i.substr(a.length+1))}}else{const[a,u]=i.split(":");return{host:a,port:Iw(u)}}}function Iw(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function K6(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return qs("not implemented")}_getIdTokenResponse(e){return qs("not implemented")}_linkToIdToken(e,t){return qs("not implemented")}_getReauthenticationResolver(e){return qs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tl(n,e){return S6(n,"POST","/v1/accounts:signInWithIdp",k_(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y6="http://localhost";class Bo extends HR{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Bo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ys("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...a}=t;if(!i||!r)return null;const u=new Bo(i,r);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return tl(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,tl(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,tl(e,t)}buildRequest(){const e={requestUri:Y6,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ac(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc extends O_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr extends Cc{constructor(){super("facebook.com")}static credential(e){return Bo._fromParams({providerId:kr.PROVIDER_ID,signInMethod:kr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return kr.credentialFromTaggedObject(e)}static credentialFromError(e){return kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return kr.credential(e.oauthAccessToken)}catch{return null}}}kr.FACEBOOK_SIGN_IN_METHOD="facebook.com";kr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs extends Cc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Bo._fromParams({providerId:Bs.PROVIDER_ID,signInMethod:Bs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Bs.credentialFromTaggedObject(e)}static credentialFromError(e){return Bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Bs.credential(t,i)}catch{return null}}}Bs.GOOGLE_SIGN_IN_METHOD="google.com";Bs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr extends Cc{constructor(){super("github.com")}static credential(e){return Bo._fromParams({providerId:Vr.PROVIDER_ID,signInMethod:Vr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vr.credentialFromTaggedObject(e)}static credentialFromError(e){return Vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vr.credential(e.oauthAccessToken)}catch{return null}}}Vr.GITHUB_SIGN_IN_METHOD="github.com";Vr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur extends Cc{constructor(){super("twitter.com")}static credential(e,t){return Bo._fromParams({providerId:Ur.PROVIDER_ID,signInMethod:Ur.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ur.credentialFromTaggedObject(e)}static credentialFromError(e){return Ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Ur.credential(t,i)}catch{return null}}}Ur.TWITTER_SIGN_IN_METHOD="twitter.com";Ur.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,r=!1){const a=await Ni._fromIdTokenResponse(e,i,r),u=bw(i);return new al({user:a,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const r=bw(i);return new al({user:e,providerId:r,_tokenResponse:i,operationType:t})}}function bw(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh extends Xs{constructor(e,t,i,r){super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,gh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new gh(e,t,i,r)}}function zR(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?gh._fromErrorAndOperation(n,a,e,i):a})}async function W6(n,e,t=!1){const i=await dc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return al._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q6(n,e,t=!1){const{auth:i}=n;if(xi(i.app))return Promise.reject(Uo(i));const r="reauthenticate";try{const a=await dc(n,zR(i,r,e,n),t);Me(a.idToken,i,"internal-error");const u=V_(a.idToken);Me(u,i,"internal-error");const{sub:d}=u;return Me(n.uid===d,i,"user-mismatch"),al._forOperation(n,r,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&ys(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X6(n,e,t=!1){if(xi(n.app))return Promise.reject(Uo(n));const i="signIn",r=await zR(n,i,e),a=await al._fromIdTokenResponse(n,i,r);return t||await n._updateCurrentUser(a.user),a}function j6(n,e,t,i){return Ln(n).onIdTokenChanged(e,t,i)}function Z6(n,e,t){return Ln(n).beforeAuthStateChanged(e,t)}function eF(n,e,t,i){return Ln(n).onAuthStateChanged(e,t,i)}function tF(n){return Ln(n).signOut()}const yh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(yh,"1"),this.storage.removeItem(yh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nF=1e3,iF=10;class JR extends $R{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=BR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),r=this.localCache[t];i!==r&&e(t,r,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,p)=>{this.notifyListeners(u,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);P6()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,iF):r()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},nF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}JR.type="LOCAL";const sF=JR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR extends $R{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}KR.type="SESSION";const YR=KR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rF(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const i=new Qh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:r,data:a}=t.data,u=this.handlersMap[r];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const d=Array.from(u).map(async h=>h(t.origin,a)),p=await rF(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Qh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F_(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oF{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let a,u;return new Promise((d,p)=>{const h=F_("",20);r.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},i);u={messageChannel:r,onMessage(T){const E=T;if(E.data.eventId===h)switch(E.data.status){case"ack":clearTimeout(_),a=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(E.data.response);break;default:clearTimeout(_),clearTimeout(a),p(new Error("invalid_response"));break}}},this.handlers.add(u),r.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[r.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ds(){return window}function aF(n){ds().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WR(){return typeof ds().WorkerGlobalScope<"u"&&typeof ds().importScripts=="function"}async function lF(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function uF(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function cF(){return WR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR="firebaseLocalStorageDb",dF=1,_h="firebaseLocalStorage",XR="fbase_key";class Ic{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Xh(n,e){return n.transaction([_h],e?"readwrite":"readonly").objectStore(_h)}function fF(){const n=indexedDB.deleteDatabase(QR);return new Ic(n).toPromise()}function Ry(){const n=indexedDB.open(QR,dF);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(_h,{keyPath:XR})}catch(r){t(r)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(_h)?e(i):(i.close(),await fF(),e(await Ry()))})})}async function Rw(n,e,t){const i=Xh(n,!0).put({[XR]:e,value:t});return new Ic(i).toPromise()}async function hF(n,e){const t=Xh(n,!1).get(e),i=await new Ic(t).toPromise();return i===void 0?null:i.value}function xw(n,e){const t=Xh(n,!0).delete(e);return new Ic(t).toPromise()}const pF=800,mF=3;class jR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ry(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>mF)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return WR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qh._getInstance(cF()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await lF(),!this.activeServiceWorker)return;this.sender=new oF(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||uF()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ry();return await Rw(e,yh,"1"),await xw(e,yh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Rw(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>hF(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>xw(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const a=Xh(r,!1).getAll();return new Ic(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:a}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(a)&&(this.notifyListeners(r,a),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),pF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}jR.type="LOCAL";const gF=jR;new wc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZR(n,e){return e?Gs(e):(Me(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_ extends HR{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return tl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return tl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return tl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function yF(n){return X6(n.auth,new B_(n),n.bypassAuthState)}function _F(n){const{auth:e,user:t}=n;return Me(t,e,"internal-error"),Q6(t,new B_(n),n.bypassAuthState)}async function vF(n){const{auth:e,user:t}=n;return Me(t,e,"internal-error"),W6(t,new B_(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e,t,i,r,a=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:r,tenantId:a,error:u,type:d}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yF;case"linkViaPopup":case"linkViaRedirect":return vF;case"reauthViaPopup":case"reauthViaRedirect":return _F;default:ys(this.auth,"internal-error")}}resolve(e){Js(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Js(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TF=new wc(2e3,1e4);async function EF(n,e,t){if(xi(n.app))return Promise.reject(ki(n,"operation-not-supported-in-this-environment"));const i=Wh(n);m6(n,e,O_);const r=ZR(i,t);return new ko(i,"signInViaPopup",e,r).executeNotNull()}class ko extends ex{constructor(e,t,i,r,a){super(e,t,r,a),this.provider=i,this.authWindow=null,this.pollId=null,ko.currentPopupAction&&ko.currentPopupAction.cancel(),ko.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Me(e,this.auth,"internal-error"),e}async onExecution(){Js(this.filter.length===1,"Popup operations only handle one event");const e=F_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ki(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ki(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ko.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ki(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,TF.get())};e()}}ko.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SF="pendingRedirect",qf=new Map;class AF extends ex{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=qf.get(this.auth._key());if(!e){try{const i=await wF(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}qf.set(this.auth._key(),e)}return this.bypassAuthState||qf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function wF(n,e){const t=bF(e),i=IF(n);if(!await i._isAvailable())return!1;const r=await i._get(t)==="true";return await i._remove(t),r}function CF(n,e){qf.set(n._key(),e)}function IF(n){return Gs(n._redirectPersistence)}function bF(n){return Bf(SF,n.config.apiKey,n.name)}async function RF(n,e,t=!1){if(xi(n.app))return Promise.reject(Uo(n));const i=Wh(n),r=ZR(i,e),u=await new AF(i,r,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xF=600*1e3;class NF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!MF(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!tx(e)){const r=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(ki(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=xF&&this.cachedEventUids.clear(),this.cachedEventUids.has(Nw(e))}saveEventToCache(e){this.cachedEventUids.add(Nw(e)),this.lastProcessedEventTime=Date.now()}}function Nw(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function tx({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function MF(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tx(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DF(n,e={}){return Tl(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kF=/^https?/;async function VF(n){if(n.config.emulator)return;const{authorizedDomains:e}=await DF(n);for(const t of e)try{if(UF(t))return}catch{}ys(n,"unauthorized-domain")}function UF(n){const e=Iy(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!kF.test(t))return!1;if(PF.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LF=new wc(3e4,6e4);function Mw(){const n=ds().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function OF(n){return new Promise((e,t)=>{var r,a,u;function i(){Mw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Mw(),t(ki(n,"network-request-failed"))},timeout:LF.get()})}if((a=(r=ds().gapi)==null?void 0:r.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((u=ds().gapi)!=null&&u.load)i();else{const d=G6("iframefcb");return ds()[d]=()=>{gapi.load?i():t(ki(n,"network-request-failed"))},B6(`${q6()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw Gf=null,e})}let Gf=null;function FF(n){return Gf=Gf||OF(n),Gf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BF=new wc(5e3,15e3),qF="__/auth/iframe",GF="emulator/auth/iframe",HF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $F(n){const e=n.config;Me(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?P_(e,GF):`https://${n.config.authDomain}/${qF}`,i={apiKey:e.apiKey,appName:n.name,v:vl},r=zF.get(n.config.apiHost);r&&(i.eid=r);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${Ac(i).slice(1)}`}async function JF(n){const e=await FF(n),t=ds().gapi;return Me(t,n,"internal-error"),e.open({where:document.body,url:$F(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:HF,dontclear:!0},i=>new Promise(async(r,a)=>{await i.restyle({setHideOnLeave:!1});const u=ki(n,"network-request-failed"),d=ds().setTimeout(()=>{a(u)},BF.get());function p(){ds().clearTimeout(d),r(i)}i.ping(p).then(p,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},YF=500,WF=600,QF="_blank",XF="http://localhost";class Dw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function jF(n,e,t,i=YF,r=WF){const a=Math.max((window.screen.availHeight-r)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const p={...KF,width:i.toString(),height:r.toString(),top:a,left:u},h=En().toLowerCase();t&&(d=VR(h)?QF:t),PR(h)&&(e=e||XF,p.scrollbars="yes");const _=Object.entries(p).reduce((E,[C,M])=>`${E}${C}=${M},`,"");if(D6(h)&&d!=="_self")return ZF(e||"",d),new Dw(null);const T=window.open(e||"",d,_);Me(T,n,"popup-blocked");try{T.focus()}catch{}return new Dw(T)}function ZF(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eB="__/auth/handler",tB="emulator/auth/handler",nB=encodeURIComponent("fac");async function Pw(n,e,t,i,r,a){Me(n.config.authDomain,n,"auth-domain-config-required"),Me(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:vl,eventId:r};if(e instanceof O_){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",Z4(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,T]of Object.entries({}))u[_]=T}if(e instanceof Cc){const _=e.getScopes().filter(T=>T!=="");_.length>0&&(u.scopes=_.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const p=await n._getAppCheckToken(),h=p?`#${nB}=${encodeURIComponent(p)}`:"";return`${iB(n)}?${Ac(d).slice(1)}${h}`}function iB({config:n}){return n.emulator?P_(n,tB):`https://${n.authDomain}/${eB}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fg="webStorageSupport";class sB{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=YR,this._completeRedirectFn=RF,this._overrideRedirectResult=CF}async _openPopup(e,t,i,r){var u;Js((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const a=await Pw(e,t,i,Iy(),r);return jF(e,a,F_())}async _openRedirect(e,t,i,r){await this._originValidation(e);const a=await Pw(e,t,i,Iy(),r);return aF(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:a}=this.eventManagers[t];return r?Promise.resolve(r):(Js(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await JF(e),i=new NF(e);return t.register("authEvent",r=>(Me(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Fg,{type:Fg},r=>{var u;const a=(u=r==null?void 0:r[0])==null?void 0:u[Fg];a!==void 0&&t(!!a),ys(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=VF(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return BR()||kR()||U_()}}const rB=sB;var kw="@firebase/auth",Vw="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oB{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aB(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function lB(n){ol(new Fo("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=i.options;Me(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qR(n)},h=new O6(i,r,a,p);return z6(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),ol(new Fo("auth-internal",e=>{const t=Wh(e.getProvider("auth").getImmediate());return(i=>new oB(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Br(kw,Vw,aB(n)),Br(kw,Vw,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uB=300,cB=yR("authIdTokenMaxAge")||uB;let Uw=null;const dB=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>cB)return;const r=t==null?void 0:t.token;Uw!==r&&(Uw=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function fB(n=AR()){const e=N_(n,"auth");if(e.isInitialized())return e.getImmediate();const t=H6(n,{popupRedirectResolver:rB,persistence:[gF,sF,YR]}),i=yR("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const u=dB(a.toString());Z6(t,u,()=>u(t.currentUser)),j6(t,d=>u(d))}}const r=mR("auth");return r&&$6(t,`http://${r}`),t}function hB(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}F6({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{const a=ki("internal-error");a.customData=r,t(a)},i.type="text/javascript",i.charset="UTF-8",hB().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});lB("Browser");var Lw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qr,nx;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,D){function x(){}x.prototype=D.prototype,N.F=D.prototype,N.prototype=new x,N.prototype.constructor=N,N.D=function(L,k,q){for(var V=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)V[ke-2]=arguments[ke];return D.prototype[k].apply(L,V)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(N,D,x){x||(x=0);const L=Array(16);if(typeof D=="string")for(var k=0;k<16;++k)L[k]=D.charCodeAt(x++)|D.charCodeAt(x++)<<8|D.charCodeAt(x++)<<16|D.charCodeAt(x++)<<24;else for(k=0;k<16;++k)L[k]=D[x++]|D[x++]<<8|D[x++]<<16|D[x++]<<24;D=N.g[0],x=N.g[1],k=N.g[2];let q=N.g[3],V;V=D+(q^x&(k^q))+L[0]+3614090360&4294967295,D=x+(V<<7&4294967295|V>>>25),V=q+(k^D&(x^k))+L[1]+3905402710&4294967295,q=D+(V<<12&4294967295|V>>>20),V=k+(x^q&(D^x))+L[2]+606105819&4294967295,k=q+(V<<17&4294967295|V>>>15),V=x+(D^k&(q^D))+L[3]+3250441966&4294967295,x=k+(V<<22&4294967295|V>>>10),V=D+(q^x&(k^q))+L[4]+4118548399&4294967295,D=x+(V<<7&4294967295|V>>>25),V=q+(k^D&(x^k))+L[5]+1200080426&4294967295,q=D+(V<<12&4294967295|V>>>20),V=k+(x^q&(D^x))+L[6]+2821735955&4294967295,k=q+(V<<17&4294967295|V>>>15),V=x+(D^k&(q^D))+L[7]+4249261313&4294967295,x=k+(V<<22&4294967295|V>>>10),V=D+(q^x&(k^q))+L[8]+1770035416&4294967295,D=x+(V<<7&4294967295|V>>>25),V=q+(k^D&(x^k))+L[9]+2336552879&4294967295,q=D+(V<<12&4294967295|V>>>20),V=k+(x^q&(D^x))+L[10]+4294925233&4294967295,k=q+(V<<17&4294967295|V>>>15),V=x+(D^k&(q^D))+L[11]+2304563134&4294967295,x=k+(V<<22&4294967295|V>>>10),V=D+(q^x&(k^q))+L[12]+1804603682&4294967295,D=x+(V<<7&4294967295|V>>>25),V=q+(k^D&(x^k))+L[13]+4254626195&4294967295,q=D+(V<<12&4294967295|V>>>20),V=k+(x^q&(D^x))+L[14]+2792965006&4294967295,k=q+(V<<17&4294967295|V>>>15),V=x+(D^k&(q^D))+L[15]+1236535329&4294967295,x=k+(V<<22&4294967295|V>>>10),V=D+(k^q&(x^k))+L[1]+4129170786&4294967295,D=x+(V<<5&4294967295|V>>>27),V=q+(x^k&(D^x))+L[6]+3225465664&4294967295,q=D+(V<<9&4294967295|V>>>23),V=k+(D^x&(q^D))+L[11]+643717713&4294967295,k=q+(V<<14&4294967295|V>>>18),V=x+(q^D&(k^q))+L[0]+3921069994&4294967295,x=k+(V<<20&4294967295|V>>>12),V=D+(k^q&(x^k))+L[5]+3593408605&4294967295,D=x+(V<<5&4294967295|V>>>27),V=q+(x^k&(D^x))+L[10]+38016083&4294967295,q=D+(V<<9&4294967295|V>>>23),V=k+(D^x&(q^D))+L[15]+3634488961&4294967295,k=q+(V<<14&4294967295|V>>>18),V=x+(q^D&(k^q))+L[4]+3889429448&4294967295,x=k+(V<<20&4294967295|V>>>12),V=D+(k^q&(x^k))+L[9]+568446438&4294967295,D=x+(V<<5&4294967295|V>>>27),V=q+(x^k&(D^x))+L[14]+3275163606&4294967295,q=D+(V<<9&4294967295|V>>>23),V=k+(D^x&(q^D))+L[3]+4107603335&4294967295,k=q+(V<<14&4294967295|V>>>18),V=x+(q^D&(k^q))+L[8]+1163531501&4294967295,x=k+(V<<20&4294967295|V>>>12),V=D+(k^q&(x^k))+L[13]+2850285829&4294967295,D=x+(V<<5&4294967295|V>>>27),V=q+(x^k&(D^x))+L[2]+4243563512&4294967295,q=D+(V<<9&4294967295|V>>>23),V=k+(D^x&(q^D))+L[7]+1735328473&4294967295,k=q+(V<<14&4294967295|V>>>18),V=x+(q^D&(k^q))+L[12]+2368359562&4294967295,x=k+(V<<20&4294967295|V>>>12),V=D+(x^k^q)+L[5]+4294588738&4294967295,D=x+(V<<4&4294967295|V>>>28),V=q+(D^x^k)+L[8]+2272392833&4294967295,q=D+(V<<11&4294967295|V>>>21),V=k+(q^D^x)+L[11]+1839030562&4294967295,k=q+(V<<16&4294967295|V>>>16),V=x+(k^q^D)+L[14]+4259657740&4294967295,x=k+(V<<23&4294967295|V>>>9),V=D+(x^k^q)+L[1]+2763975236&4294967295,D=x+(V<<4&4294967295|V>>>28),V=q+(D^x^k)+L[4]+1272893353&4294967295,q=D+(V<<11&4294967295|V>>>21),V=k+(q^D^x)+L[7]+4139469664&4294967295,k=q+(V<<16&4294967295|V>>>16),V=x+(k^q^D)+L[10]+3200236656&4294967295,x=k+(V<<23&4294967295|V>>>9),V=D+(x^k^q)+L[13]+681279174&4294967295,D=x+(V<<4&4294967295|V>>>28),V=q+(D^x^k)+L[0]+3936430074&4294967295,q=D+(V<<11&4294967295|V>>>21),V=k+(q^D^x)+L[3]+3572445317&4294967295,k=q+(V<<16&4294967295|V>>>16),V=x+(k^q^D)+L[6]+76029189&4294967295,x=k+(V<<23&4294967295|V>>>9),V=D+(x^k^q)+L[9]+3654602809&4294967295,D=x+(V<<4&4294967295|V>>>28),V=q+(D^x^k)+L[12]+3873151461&4294967295,q=D+(V<<11&4294967295|V>>>21),V=k+(q^D^x)+L[15]+530742520&4294967295,k=q+(V<<16&4294967295|V>>>16),V=x+(k^q^D)+L[2]+3299628645&4294967295,x=k+(V<<23&4294967295|V>>>9),V=D+(k^(x|~q))+L[0]+4096336452&4294967295,D=x+(V<<6&4294967295|V>>>26),V=q+(x^(D|~k))+L[7]+1126891415&4294967295,q=D+(V<<10&4294967295|V>>>22),V=k+(D^(q|~x))+L[14]+2878612391&4294967295,k=q+(V<<15&4294967295|V>>>17),V=x+(q^(k|~D))+L[5]+4237533241&4294967295,x=k+(V<<21&4294967295|V>>>11),V=D+(k^(x|~q))+L[12]+1700485571&4294967295,D=x+(V<<6&4294967295|V>>>26),V=q+(x^(D|~k))+L[3]+2399980690&4294967295,q=D+(V<<10&4294967295|V>>>22),V=k+(D^(q|~x))+L[10]+4293915773&4294967295,k=q+(V<<15&4294967295|V>>>17),V=x+(q^(k|~D))+L[1]+2240044497&4294967295,x=k+(V<<21&4294967295|V>>>11),V=D+(k^(x|~q))+L[8]+1873313359&4294967295,D=x+(V<<6&4294967295|V>>>26),V=q+(x^(D|~k))+L[15]+4264355552&4294967295,q=D+(V<<10&4294967295|V>>>22),V=k+(D^(q|~x))+L[6]+2734768916&4294967295,k=q+(V<<15&4294967295|V>>>17),V=x+(q^(k|~D))+L[13]+1309151649&4294967295,x=k+(V<<21&4294967295|V>>>11),V=D+(k^(x|~q))+L[4]+4149444226&4294967295,D=x+(V<<6&4294967295|V>>>26),V=q+(x^(D|~k))+L[11]+3174756917&4294967295,q=D+(V<<10&4294967295|V>>>22),V=k+(D^(q|~x))+L[2]+718787259&4294967295,k=q+(V<<15&4294967295|V>>>17),V=x+(q^(k|~D))+L[9]+3951481745&4294967295,N.g[0]=N.g[0]+D&4294967295,N.g[1]=N.g[1]+(k+(V<<21&4294967295|V>>>11))&4294967295,N.g[2]=N.g[2]+k&4294967295,N.g[3]=N.g[3]+q&4294967295}i.prototype.v=function(N,D){D===void 0&&(D=N.length);const x=D-this.blockSize,L=this.C;let k=this.h,q=0;for(;q<D;){if(k==0)for(;q<=x;)r(this,N,q),q+=this.blockSize;if(typeof N=="string"){for(;q<D;)if(L[k++]=N.charCodeAt(q++),k==this.blockSize){r(this,L),k=0;break}}else for(;q<D;)if(L[k++]=N[q++],k==this.blockSize){r(this,L),k=0;break}}this.h=k,this.o+=D},i.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var D=1;D<N.length-8;++D)N[D]=0;D=this.o*8;for(var x=N.length-8;x<N.length;++x)N[x]=D&255,D/=256;for(this.v(N),N=Array(16),D=0,x=0;x<4;++x)for(let L=0;L<32;L+=8)N[D++]=this.g[x]>>>L&255;return N};function a(N,D){var x=d;return Object.prototype.hasOwnProperty.call(x,N)?x[N]:x[N]=D(N)}function u(N,D){this.h=D;const x=[];let L=!0;for(let k=N.length-1;k>=0;k--){const q=N[k]|0;L&&q==D||(x[k]=q,L=!1)}this.g=x}var d={};function p(N){return-128<=N&&N<128?a(N,function(D){return new u([D|0],D<0?-1:0)}):new u([N|0],N<0?-1:0)}function h(N){if(isNaN(N)||!isFinite(N))return T;if(N<0)return P(h(-N));const D=[];let x=1;for(let L=0;N>=x;L++)D[L]=N/x|0,x*=4294967296;return new u(D,0)}function _(N,D){if(N.length==0)throw Error("number format error: empty string");if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(N.charAt(0)=="-")return P(_(N.substring(1),D));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const x=h(Math.pow(D,8));let L=T;for(let q=0;q<N.length;q+=8){var k=Math.min(8,N.length-q);const V=parseInt(N.substring(q,q+k),D);k<8?(k=h(Math.pow(D,k)),L=L.j(k).add(h(V))):(L=L.j(x),L=L.add(h(V)))}return L}var T=p(0),E=p(1),C=p(16777216);n=u.prototype,n.m=function(){if(U(this))return-P(this).m();let N=0,D=1;for(let x=0;x<this.g.length;x++){const L=this.i(x);N+=(L>=0?L:4294967296+L)*D,D*=4294967296}return N},n.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(M(this))return"0";if(U(this))return"-"+P(this).toString(N);const D=h(Math.pow(N,6));var x=this;let L="";for(;;){const k=X(x,D).g;x=$(x,k.j(D));let q=((x.g.length>0?x.g[0]:x.h)>>>0).toString(N);if(x=k,M(x))return q+L;for(;q.length<6;)q="0"+q;L=q+L}},n.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function M(N){if(N.h!=0)return!1;for(let D=0;D<N.g.length;D++)if(N.g[D]!=0)return!1;return!0}function U(N){return N.h==-1}n.l=function(N){return N=$(this,N),U(N)?-1:M(N)?0:1};function P(N){const D=N.g.length,x=[];for(let L=0;L<D;L++)x[L]=~N.g[L];return new u(x,~N.h).add(E)}n.abs=function(){return U(this)?P(this):this},n.add=function(N){const D=Math.max(this.g.length,N.g.length),x=[];let L=0;for(let k=0;k<=D;k++){let q=L+(this.i(k)&65535)+(N.i(k)&65535),V=(q>>>16)+(this.i(k)>>>16)+(N.i(k)>>>16);L=V>>>16,q&=65535,V&=65535,x[k]=V<<16|q}return new u(x,x[x.length-1]&-2147483648?-1:0)};function $(N,D){return N.add(P(D))}n.j=function(N){if(M(this)||M(N))return T;if(U(this))return U(N)?P(this).j(P(N)):P(P(this).j(N));if(U(N))return P(this.j(P(N)));if(this.l(C)<0&&N.l(C)<0)return h(this.m()*N.m());const D=this.g.length+N.g.length,x=[];for(var L=0;L<2*D;L++)x[L]=0;for(L=0;L<this.g.length;L++)for(let k=0;k<N.g.length;k++){const q=this.i(L)>>>16,V=this.i(L)&65535,ke=N.i(k)>>>16,xe=N.i(k)&65535;x[2*L+2*k]+=V*xe,H(x,2*L+2*k),x[2*L+2*k+1]+=q*xe,H(x,2*L+2*k+1),x[2*L+2*k+1]+=V*ke,H(x,2*L+2*k+1),x[2*L+2*k+2]+=q*ke,H(x,2*L+2*k+2)}for(N=0;N<D;N++)x[N]=x[2*N+1]<<16|x[2*N];for(N=D;N<2*D;N++)x[N]=0;return new u(x,0)};function H(N,D){for(;(N[D]&65535)!=N[D];)N[D+1]+=N[D]>>>16,N[D]&=65535,D++}function z(N,D){this.g=N,this.h=D}function X(N,D){if(M(D))throw Error("division by zero");if(M(N))return new z(T,T);if(U(N))return D=X(P(N),D),new z(P(D.g),P(D.h));if(U(D))return D=X(N,P(D)),new z(P(D.g),D.h);if(N.g.length>30){if(U(N)||U(D))throw Error("slowDivide_ only works with positive integers.");for(var x=E,L=D;L.l(N)<=0;)x=ue(x),L=ue(L);var k=W(x,1),q=W(L,1);for(L=W(L,2),x=W(x,2);!M(L);){var V=q.add(L);V.l(N)<=0&&(k=k.add(x),q=V),L=W(L,1),x=W(x,1)}return D=$(N,k.j(D)),new z(k,D)}for(k=T;N.l(D)>=0;){for(x=Math.max(1,Math.floor(N.m()/D.m())),L=Math.ceil(Math.log(x)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),q=h(x),V=q.j(D);U(V)||V.l(N)>0;)x-=L,q=h(x),V=q.j(D);M(q)&&(q=E),k=k.add(q),N=$(N,V)}return new z(k,N)}n.B=function(N){return X(this,N).h},n.and=function(N){const D=Math.max(this.g.length,N.g.length),x=[];for(let L=0;L<D;L++)x[L]=this.i(L)&N.i(L);return new u(x,this.h&N.h)},n.or=function(N){const D=Math.max(this.g.length,N.g.length),x=[];for(let L=0;L<D;L++)x[L]=this.i(L)|N.i(L);return new u(x,this.h|N.h)},n.xor=function(N){const D=Math.max(this.g.length,N.g.length),x=[];for(let L=0;L<D;L++)x[L]=this.i(L)^N.i(L);return new u(x,this.h^N.h)};function ue(N){const D=N.g.length+1,x=[];for(let L=0;L<D;L++)x[L]=N.i(L)<<1|N.i(L-1)>>>31;return new u(x,N.h)}function W(N,D){const x=D>>5;D%=32;const L=N.g.length-x,k=[];for(let q=0;q<L;q++)k[q]=D>0?N.i(q+x)>>>D|N.i(q+x+1)<<32-D:N.i(q+x);return new u(k,N.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,nx=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=h,u.fromString=_,qr=u}).apply(typeof Lw<"u"?Lw:typeof self<"u"?self:typeof window<"u"?window:{});var Af=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ix,Yu,sx,Hf,xy,rx,ox,ax;(function(){var n,e=Object.defineProperty;function t(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof Af=="object"&&Af];for(var S=0;S<g.length;++S){var w=g[S];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var i=t(this);function r(g,S){if(S)e:{var w=i;g=g.split(".");for(var R=0;R<g.length-1;R++){var J=g[R];if(!(J in w))break e;w=w[J]}g=g[g.length-1],R=w[g],S=S(R),S!=R&&S!=null&&e(w,g,{configurable:!0,writable:!0,value:S})}}r("Symbol.dispose",function(g){return g||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(g){return g||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(g){return g||function(S){var w=[],R;for(R in S)Object.prototype.hasOwnProperty.call(S,R)&&w.push([R,S[R]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},u=this||self;function d(g){var S=typeof g;return S=="object"&&g!=null||S=="function"}function p(g,S,w){return g.call.apply(g.bind,arguments)}function h(g,S,w){return h=p,h.apply(null,arguments)}function _(g,S){var w=Array.prototype.slice.call(arguments,1);return function(){var R=w.slice();return R.push.apply(R,arguments),g.apply(this,R)}}function T(g,S){function w(){}w.prototype=S.prototype,g.Z=S.prototype,g.prototype=new w,g.prototype.constructor=g,g.Ob=function(R,J,ee){for(var de=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)de[Fe-2]=arguments[Fe];return S.prototype[J].apply(R,de)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?g=>g&&AsyncContext.Snapshot.wrap(g):g=>g;function C(g){const S=g.length;if(S>0){const w=Array(S);for(let R=0;R<S;R++)w[R]=g[R];return w}return[]}function M(g,S){for(let R=1;R<arguments.length;R++){const J=arguments[R];var w=typeof J;if(w=w!="object"?w:J?Array.isArray(J)?"array":w:"null",w=="array"||w=="object"&&typeof J.length=="number"){w=g.length||0;const ee=J.length||0;g.length=w+ee;for(let de=0;de<ee;de++)g[w+de]=J[de]}else g.push(J)}}class U{constructor(S,w){this.i=S,this.j=w,this.h=0,this.g=null}get(){let S;return this.h>0?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function P(g){u.setTimeout(()=>{throw g},0)}function $(){var g=N;let S=null;return g.g&&(S=g.g,g.g=g.g.next,g.g||(g.h=null),S.next=null),S}class H{constructor(){this.h=this.g=null}add(S,w){const R=z.get();R.set(S,w),this.h?this.h.next=R:this.g=R,this.h=R}}var z=new U(()=>new X,g=>g.reset());class X{constructor(){this.next=this.g=this.h=null}set(S,w){this.h=S,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,W=!1,N=new H,D=()=>{const g=Promise.resolve(void 0);ue=()=>{g.then(x)}};function x(){for(var g;g=$();){try{g.h.call(g.g)}catch(w){P(w)}var S=z;S.j(g),S.h<100&&(S.h++,g.next=S.g,S.g=g)}W=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(g,S){this.type=g,this.g=this.target=S,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var g=!1,S=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const w=()=>{};u.addEventListener("test",w,S),u.removeEventListener("test",w,S)}catch{}return g})();function V(g){return/^[\s\xa0]*$/.test(g)}function ke(g,S){k.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g&&this.init(g,S)}T(ke,k),ke.prototype.init=function(g,S){const w=this.type=g.type,R=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;this.target=g.target||g.srcElement,this.g=S,S=g.relatedTarget,S||(w=="mouseover"?S=g.fromElement:w=="mouseout"&&(S=g.toElement)),this.relatedTarget=S,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=g.pointerType,this.state=g.state,this.i=g,g.defaultPrevented&&ke.Z.h.call(this)},ke.prototype.h=function(){ke.Z.h.call(this);const g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var xe="closure_listenable_"+(Math.random()*1e6|0),Z=0;function ce(g,S,w,R,J){this.listener=g,this.proxy=null,this.src=S,this.type=w,this.capture=!!R,this.ha=J,this.key=++Z,this.da=this.fa=!1}function fe(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function be(g,S,w){for(const R in g)S.call(w,g[R],R,g)}function ze(g,S){for(const w in g)S.call(void 0,g[w],w,g)}function F(g){const S={};for(const w in g)S[w]=g[w];return S}const ie="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function he(g,S){let w,R;for(let J=1;J<arguments.length;J++){R=arguments[J];for(w in R)g[w]=R[w];for(let ee=0;ee<ie.length;ee++)w=ie[ee],Object.prototype.hasOwnProperty.call(R,w)&&(g[w]=R[w])}}function me(g){this.src=g,this.g={},this.h=0}me.prototype.add=function(g,S,w,R,J){const ee=g.toString();g=this.g[ee],g||(g=this.g[ee]=[],this.h++);const de=De(g,S,R,J);return de>-1?(S=g[de],w||(S.fa=!1)):(S=new ce(S,this.src,ee,!!R,J),S.fa=w,g.push(S)),S};function Ce(g,S){const w=S.type;if(w in g.g){var R=g.g[w],J=Array.prototype.indexOf.call(R,S,void 0),ee;(ee=J>=0)&&Array.prototype.splice.call(R,J,1),ee&&(fe(S),g.g[w].length==0&&(delete g.g[w],g.h--))}}function De(g,S,w,R){for(let J=0;J<g.length;++J){const ee=g[J];if(!ee.da&&ee.listener==S&&ee.capture==!!w&&ee.ha==R)return J}return-1}var Pe="closure_lm_"+(Math.random()*1e6|0),wt={};function $e(g,S,w,R,J){if(Array.isArray(S)){for(let ee=0;ee<S.length;ee++)$e(g,S[ee],w,R,J);return null}return w=Rl(w),g&&g[xe]?g.J(S,w,d(R)?!!R.capture:!1,J):Oi(g,S,w,!1,R,J)}function Oi(g,S,w,R,J,ee){if(!S)throw Error("Invalid event type");const de=d(J)?!!J.capture:!!J;let Fe=Xr(g);if(Fe||(g[Pe]=Fe=new me(g)),w=Fe.add(S,w,R,de,ee),w.proxy)return w;if(R=On(),w.proxy=R,R.src=g,R.listener=w,g.addEventListener)q||(J=de),J===void 0&&(J=!1),g.addEventListener(S.toString(),R,J);else if(g.attachEvent)g.attachEvent(Fi(S.toString()),R);else if(g.addListener&&g.removeListener)g.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return w}function On(){function g(w){return S.call(g.src,g.listener,w)}const S=Il;return g}function Wo(g,S,w,R,J){if(Array.isArray(S))for(var ee=0;ee<S.length;ee++)Wo(g,S[ee],w,R,J);else R=d(R)?!!R.capture:!!R,w=Rl(w),g&&g[xe]?(g=g.i,ee=String(S).toString(),ee in g.g&&(S=g.g[ee],w=De(S,w,R,J),w>-1&&(fe(S[w]),Array.prototype.splice.call(S,w,1),S.length==0&&(delete g.g[ee],g.h--)))):g&&(g=Xr(g))&&(S=g.g[S.toString()],g=-1,S&&(g=De(S,w,R,J)),(w=g>-1?S[g]:null)&&Qo(w))}function Qo(g){if(typeof g!="number"&&g&&!g.da){var S=g.src;if(S&&S[xe])Ce(S.i,g);else{var w=g.type,R=g.proxy;S.removeEventListener?S.removeEventListener(w,R,g.capture):S.detachEvent?S.detachEvent(Fi(w),R):S.addListener&&S.removeListener&&S.removeListener(R),(w=Xr(S))?(Ce(w,g),w.h==0&&(w.src=null,S[Pe]=null)):fe(g)}}}function Fi(g){return g in wt?wt[g]:wt[g]="on"+g}function Il(g,S){if(g.da)g=!0;else{S=new ke(S,this);const w=g.listener,R=g.ha||g.src;g.fa&&Qo(g),g=w.call(R,S)}return g}function Xr(g){return g=g[Pe],g instanceof me?g:null}var bl="__closure_events_fn_"+(Math.random()*1e9>>>0);function Rl(g){return typeof g=="function"?g:(g[bl]||(g[bl]=function(S){return g.handleEvent(S)}),g[bl])}function Pt(){L.call(this),this.i=new me(this),this.M=this,this.G=null}T(Pt,L),Pt.prototype[xe]=!0,Pt.prototype.removeEventListener=function(g,S,w,R){Wo(this,g,S,w,R)};function Jt(g,S){var w,R=g.G;if(R)for(w=[];R;R=R.G)w.push(R);if(g=g.M,R=S.type||S,typeof S=="string")S=new k(S,g);else if(S instanceof k)S.target=S.target||g;else{var J=S;S=new k(R,g),he(S,J)}J=!0;let ee,de;if(w)for(de=w.length-1;de>=0;de--)ee=S.g=w[de],J=js(ee,R,!0,S)&&J;if(ee=S.g=g,J=js(ee,R,!0,S)&&J,J=js(ee,R,!1,S)&&J,w)for(de=0;de<w.length;de++)ee=S.g=w[de],J=js(ee,R,!1,S)&&J}Pt.prototype.N=function(){if(Pt.Z.N.call(this),this.i){var g=this.i;for(const S in g.g){const w=g.g[S];for(let R=0;R<w.length;R++)fe(w[R]);delete g.g[S],g.h--}}this.G=null},Pt.prototype.J=function(g,S,w,R){return this.i.add(String(g),S,!1,w,R)},Pt.prototype.K=function(g,S,w,R){return this.i.add(String(g),S,!0,w,R)};function js(g,S,w,R){if(S=g.i.g[String(S)],!S)return!0;S=S.concat();let J=!0;for(let ee=0;ee<S.length;++ee){const de=S[ee];if(de&&!de.da&&de.capture==w){const Fe=de.listener,xt=de.ha||de.src;de.fa&&Ce(g.i,de),J=Fe.call(xt,R)!==!1&&J}}return J&&!R.defaultPrevented}function fp(g,S){if(typeof g!="function")if(g&&typeof g.handleEvent=="function")g=h(g.handleEvent,g);else throw Error("Invalid listener argument");return Number(S)>2147483647?-1:u.setTimeout(g,S||0)}function kc(g){g.g=fp(()=>{g.g=null,g.i&&(g.i=!1,kc(g))},g.l);const S=g.h;g.h=null,g.m.apply(null,S)}class Sn extends L{constructor(S,w){super(),this.m=S,this.l=w,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:kc(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function jr(g){L.call(this),this.h=g,this.g={}}T(jr,L);var xl=[];function Nl(g){be(g.g,function(S,w){this.g.hasOwnProperty(w)&&Qo(S)},g),g.g={}}jr.prototype.N=function(){jr.Z.N.call(this),Nl(this)},jr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zs=u.JSON.stringify,hp=u.JSON.parse,Vc=class{stringify(g){return u.JSON.stringify(g,void 0)}parse(g){return u.JSON.parse(g,void 0)}};function Uc(){}function Lc(){}var gi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function rn(){k.call(this,"d")}T(rn,k);function jn(){k.call(this,"c")}T(jn,k);var Rt={},Oc=null;function Xo(){return Oc=Oc||new Pt}Rt.Ia="serverreachability";function Fc(g){k.call(this,Rt.Ia,g)}T(Fc,k);function Bi(g){const S=Xo();Jt(S,new Fc(S))}Rt.STAT_EVENT="statevent";function Zr(g,S){k.call(this,Rt.STAT_EVENT,g),this.stat=S}T(Zr,k);function kt(g){const S=Xo();Jt(S,new Zr(S,g))}Rt.Ja="timingevent";function qi(g,S){k.call(this,Rt.Ja,g),this.size=S}T(qi,k);function Gi(g,S){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){g()},S)}function yi(){this.g=!0}yi.prototype.ua=function(){this.g=!1};function pp(g,S,w,R,J,ee){g.info(function(){if(g.g)if(ee){var de="",Fe=ee.split("&");for(let st=0;st<Fe.length;st++){var xt=Fe[st].split("=");if(xt.length>1){const vt=xt[0];xt=xt[1];const ni=vt.split("_");de=ni.length>=2&&ni[1]=="type"?de+(vt+"="+xt+"&"):de+(vt+"=redacted&")}}}else de=null;else de=ee;return"XMLHTTP REQ ("+R+") [attempt "+J+"]: "+S+`
`+w+`
`+de})}function Bc(g,S,w,R,J,ee,de){g.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+J+"]: "+S+`
`+w+`
`+ee+" "+de})}function Hi(g,S,w,R){g.info(function(){return"XMLHTTP TEXT ("+S+"): "+mp(g,w)+(R?" "+R:"")})}function eo(g,S){g.info(function(){return"TIMEOUT: "+S})}yi.prototype.info=function(){};function mp(g,S){if(!g.g)return S;if(!S)return null;try{const ee=JSON.parse(S);if(ee){for(g=0;g<ee.length;g++)if(Array.isArray(ee[g])){var w=ee[g];if(!(w.length<2)){var R=w[1];if(Array.isArray(R)&&!(R.length<1)){var J=R[0];if(J!="noop"&&J!="stop"&&J!="close")for(let de=1;de<R.length;de++)R[de]=""}}}}return Zs(ee)}catch{return S}}var to={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ml={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Dl;function no(){}T(no,Uc),no.prototype.g=function(){return new XMLHttpRequest},Dl=new no;function vs(g){return encodeURIComponent(String(g))}function qc(g){var S=1;g=g.split(":");const w=[];for(;S>0&&g.length;)w.push(g.shift()),S--;return g.length&&w.push(g.join(":")),w}function _i(g,S,w,R){this.j=g,this.i=S,this.l=w,this.S=R||1,this.V=new jr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new vi}function vi(){this.i=null,this.g="",this.h=!1}var Vt={},Xt={};function zi(g,S,w){g.M=1,g.A=io(Lt(S)),g.u=w,g.R=!0,jo(g,null)}function jo(g,S){g.F=Date.now(),$i(g),g.B=Lt(g.A);var w=g.B,R=g.S;Array.isArray(R)||(R=[String(R)]),na(w.i,"t",R),g.C=0,w=g.j.L,g.h=new vi,g.g=nd(g.j,w?S:null,!g.u),g.P>0&&(g.O=new Sn(h(g.Y,g,g.g),g.P)),S=g.V,w=g.g,R=g.ba;var J="readystatechange";Array.isArray(J)||(J&&(xl[0]=J.toString()),J=xl);for(let ee=0;ee<J.length;ee++){const de=$e(w,J[ee],R||S.handleEvent,!1,S.h||S);if(!de)break;S.g[de.key]=de}S=g.J?F(g.J):{},g.u?(g.v||(g.v="POST"),S["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.B,g.v,g.u,S)):(g.v="GET",g.g.ea(g.B,g.v,null,S)),Bi(),pp(g.i,g.v,g.B,g.l,g.S,g.u)}_i.prototype.ba=function(g){g=g.target;const S=this.O;S&&Si(g)==3?S.j():this.Y(g)},_i.prototype.Y=function(g){try{if(g==this.g)e:{const Fe=Si(this.g),xt=this.g.ya(),st=this.g.ca();if(!(Fe<3)&&(Fe!=3||this.g&&(this.h.h||this.g.la()||on(this.g)))){this.K||Fe!=4||xt==7||(xt==8||st<=0?Bi(3):Bi(2)),Ji(this);var S=this.g.ca();this.X=S;var w=gp(this);if(this.o=S==200,Bc(this.i,this.v,this.B,this.l,this.S,Fe,S),this.o){if(this.U&&!this.L){t:{if(this.g){var R,J=this.g;if((R=J.g?J.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(R)){var ee=R;break t}}ee=null}if(g=ee)Hi(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ki(this,g);else{this.o=!1,this.m=3,kt(12),Fn(this),Zn(this);break e}}if(this.R){g=!0;let vt;for(;!this.K&&this.C<w.length;)if(vt=Hc(this,w),vt==Xt){Fe==4&&(this.m=4,kt(14),g=!1),Hi(this.i,this.l,null,"[Incomplete Response]");break}else if(vt==Vt){this.m=4,kt(15),Hi(this.i,this.l,w,"[Invalid Chunk]"),g=!1;break}else Hi(this.i,this.l,vt,null),Ki(this,vt);if(Gc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Fe!=4||w.length!=0||this.h.h||(this.m=1,kt(16),g=!1),this.o=this.o&&g,!g)Hi(this.i,this.l,w,"[Invalid Chunked Response]"),Fn(this),Zn(this);else if(w.length>0&&!this.W){this.W=!0;var de=this.j;de.g==this&&de.aa&&!de.P&&(de.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),Kl(de),de.P=!0,kt(11))}}else Hi(this.i,this.l,w,null),Ki(this,w);Fe==4&&Fn(this),this.o&&!this.K&&(Fe==4?jc(this.j,this):(this.o=!1,$i(this)))}else Es(this.g),S==400&&w.indexOf("Unknown SID")>0?(this.m=3,kt(12)):(this.m=0,kt(13)),Fn(this),Zn(this)}}}catch{}finally{}};function gp(g){if(!Gc(g))return g.g.la();const S=on(g.g);if(S==="")return"";let w="";const R=S.length,J=Si(g.g)==4;if(!g.h.i){if(typeof TextDecoder>"u")return Fn(g),Zn(g),"";g.h.i=new u.TextDecoder}for(let ee=0;ee<R;ee++)g.h.h=!0,w+=g.h.i.decode(S[ee],{stream:!(J&&ee==R-1)});return S.length=0,g.h.g+=w,g.C=0,g.h.g}function Gc(g){return g.g?g.v=="GET"&&g.M!=2&&g.j.Aa:!1}function Hc(g,S){var w=g.C,R=S.indexOf(`
`,w);return R==-1?Xt:(w=Number(S.substring(w,R)),isNaN(w)?Vt:(R+=1,R+w>S.length?Xt:(S=S.slice(R,R+w),g.C=R+w,S)))}_i.prototype.cancel=function(){this.K=!0,Fn(this)};function $i(g){g.T=Date.now()+g.H,Zo(g,g.H)}function Zo(g,S){if(g.D!=null)throw Error("WatchDog timer not null");g.D=Gi(h(g.aa,g),S)}function Ji(g){g.D&&(u.clearTimeout(g.D),g.D=null)}_i.prototype.aa=function(){this.D=null;const g=Date.now();g-this.T>=0?(eo(this.i,this.B),this.M!=2&&(Bi(),kt(17)),Fn(this),this.m=2,Zn(this)):Zo(this,this.T-g)};function Zn(g){g.j.I==0||g.K||jc(g.j,g)}function Fn(g){Ji(g);var S=g.O;S&&typeof S.dispose=="function"&&S.dispose(),g.O=null,Nl(g.V),g.g&&(S=g.g,g.g=null,S.abort(),S.dispose())}function Ki(g,S){try{var w=g.j;if(w.I!=0&&(w.g==g||Wi(w.h,g))){if(!g.L&&Wi(w.h,g)&&w.I==3){try{var R=w.Ba.g.parse(S)}catch{R=null}if(Array.isArray(R)&&R.length==3){var J=R;if(J[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<g.F)aa(w),ar(w);else break e;co(w),kt(18)}}else w.xa=J[1],0<w.xa-w.K&&J[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=Gi(h(w.Va,w),6e3));Yi(w.h)<=1&&w.ta&&(w.ta=void 0)}else ts(w,11)}else if((g.L||w.g==g)&&aa(w),!V(S))for(J=w.Ba.g.parse(S),S=0;S<J.length;S++){let st=J[S];const vt=st[0];if(!(vt<=w.K))if(w.K=vt,st=st[1],w.I==2)if(st[0]=="c"){w.M=st[1],w.ba=st[2];const ni=st[3];ni!=null&&(w.ka=ni,w.j.info("VER="+w.ka));const ns=st[4];ns!=null&&(w.za=ns,w.j.info("SVER="+w.za));const Ai=st[5];Ai!=null&&typeof Ai=="number"&&Ai>0&&(R=1.5*Ai,w.O=R,w.j.info("backChannelRequestTimeoutMs_="+R)),R=w;const wi=g.g;if(wi){const fo=wi.g?wi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fo){var ee=R.h;ee.g||fo.indexOf("spdy")==-1&&fo.indexOf("quic")==-1&&fo.indexOf("h2")==-1||(ee.j=ee.l,ee.g=new Set,ee.h&&(Vl(ee,ee.h),ee.h=null))}if(R.G){const la=wi.g?wi.g.getResponseHeader("X-HTTP-Session-Id"):null;la&&(R.wa=la,at(R.J,R.G,la))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-g.F,w.j.info("Handshake RTT: "+w.T+"ms")),R=w;var de=g;if(R.na=td(R,R.L?R.ba:null,R.W),de.L){Ul(R.h,de);var Fe=de,xt=R.O;xt&&(Fe.H=xt),Fe.D&&(Ji(Fe),$i(Fe)),R.g=de}else Qc(R);w.i.length>0&&es(w)}else st[0]!="stop"&&st[0]!="close"||ts(w,7);else w.I==3&&(st[0]=="stop"||st[0]=="close"?st[0]=="stop"?ts(w,7):$l(w):st[0]!="noop"&&w.l&&w.l.qa(st),w.A=0)}}Bi(4)}catch{}}var Ut=class{constructor(g,S){this.g=g,this.map=S}};function Pl(g){this.l=g||10,u.PerformanceNavigationTiming?(g=u.performance.getEntriesByType("navigation"),g=g.length>0&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function kl(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function Yi(g){return g.h?1:g.g?g.g.size:0}function Wi(g,S){return g.h?g.h==S:g.g?g.g.has(S):!1}function Vl(g,S){g.g?g.g.add(S):g.h=S}function Ul(g,S){g.h&&g.h==S?g.h=null:g.g&&g.g.has(S)&&g.g.delete(S)}Pl.prototype.cancel=function(){if(this.i=Ll(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function Ll(g){if(g.h!=null)return g.i.concat(g.h.G);if(g.g!=null&&g.g.size!==0){let S=g.i;for(const w of g.g.values())S=S.concat(w.G);return S}return C(g.i)}var zc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ea(g,S){if(g){g=g.split("&");for(let w=0;w<g.length;w++){const R=g[w].indexOf("=");let J,ee=null;R>=0?(J=g[w].substring(0,R),ee=g[w].substring(R+1)):J=g[w],S(J,ee?decodeURIComponent(ee.replace(/\+/g," ")):"")}}}function Bn(g){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let S;g instanceof Bn?(this.l=g.l,jt(this,g.j),this.o=g.o,this.g=g.g,er(this,g.u),this.h=g.h,Ol(this,Yc(g.i)),this.m=g.m):g&&(S=String(g).match(zc))?(this.l=!1,jt(this,S[1]||"",!0),this.o=Qi(S[2]||""),this.g=Qi(S[3]||"",!0),er(this,S[4]),this.h=Qi(S[5]||"",!0),Ol(this,S[6]||"",!0),this.m=Qi(S[7]||"")):(this.l=!1,this.i=new nr(null,this.l))}Bn.prototype.toString=function(){const g=[];var S=this.j;S&&g.push(so(S,ta,!0),":");var w=this.g;return(w||S=="file")&&(g.push("//"),(S=this.o)&&g.push(so(S,ta,!0),"@"),g.push(vs(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&g.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&g.push("/"),g.push(so(w,w.charAt(0)=="/"?Fl:$c,!0))),(w=this.i.toString())&&g.push("?",w),(w=this.m)&&g.push("#",so(w,Jc)),g.join("")},Bn.prototype.resolve=function(g){const S=Lt(this);let w=!!g.j;w?jt(S,g.j):w=!!g.o,w?S.o=g.o:w=!!g.g,w?S.g=g.g:w=g.u!=null;var R=g.h;if(w)er(S,g.u);else if(w=!!g.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var J=S.h.lastIndexOf("/");J!=-1&&(R=S.h.slice(0,J+1)+R)}if(J=R,J==".."||J==".")R="";else if(J.indexOf("./")!=-1||J.indexOf("/.")!=-1){R=J.lastIndexOf("/",0)==0,J=J.split("/");const ee=[];for(let de=0;de<J.length;){const Fe=J[de++];Fe=="."?R&&de==J.length&&ee.push(""):Fe==".."?((ee.length>1||ee.length==1&&ee[0]!="")&&ee.pop(),R&&de==J.length&&ee.push("")):(ee.push(Fe),R=!0)}R=ee.join("/")}else R=J}return w?S.h=R:w=g.i.toString()!=="",w?Ol(S,Yc(g.i)):w=!!g.m,w&&(S.m=g.m),S};function Lt(g){return new Bn(g)}function jt(g,S,w){g.j=w?Qi(S,!0):S,g.j&&(g.j=g.j.replace(/:$/,""))}function er(g,S){if(S){if(S=Number(S),isNaN(S)||S<0)throw Error("Bad port number "+S);g.u=S}else g.u=null}function Ol(g,S,w){S instanceof nr?(g.i=S,ia(g.i,g.l)):(w||(S=so(S,tr)),g.i=new nr(S,g.l))}function at(g,S,w){g.i.set(S,w)}function io(g){return at(g,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),g}function Qi(g,S){return g?S?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function so(g,S,w){return typeof g=="string"?(g=encodeURI(g).replace(S,bn),w&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function bn(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var ta=/[#\/\?@]/g,$c=/[#\?:]/g,Fl=/[#\?]/g,tr=/[#\?@]/g,Jc=/#/g;function nr(g,S){this.h=this.g=null,this.i=g||null,this.j=!!S}function Rn(g){g.g||(g.g=new Map,g.h=0,g.i&&ea(g.i,function(S,w){g.add(decodeURIComponent(S.replace(/\+/g," ")),w)}))}n=nr.prototype,n.add=function(g,S){Rn(this),this.i=null,g=ir(this,g);let w=this.g.get(g);return w||this.g.set(g,w=[]),w.push(S),this.h+=1,this};function Kc(g,S){Rn(g),S=ir(g,S),g.g.has(S)&&(g.i=null,g.h-=g.g.get(S).length,g.g.delete(S))}function Bl(g,S){return Rn(g),S=ir(g,S),g.g.has(S)}n.forEach=function(g,S){Rn(this),this.g.forEach(function(w,R){w.forEach(function(J){g.call(S,J,R,this)},this)},this)};function ql(g,S){Rn(g);let w=[];if(typeof S=="string")Bl(g,S)&&(w=w.concat(g.g.get(ir(g,S))));else for(g=Array.from(g.g.values()),S=0;S<g.length;S++)w=w.concat(g[S]);return w}n.set=function(g,S){return Rn(this),this.i=null,g=ir(this,g),Bl(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[S]),this.h+=1,this},n.get=function(g,S){return g?(g=ql(this,g),g.length>0?String(g[0]):S):S};function na(g,S,w){Kc(g,S),w.length>0&&(g.i=null,g.g.set(ir(g,S),C(w)),g.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],S=Array.from(this.g.keys());for(let R=0;R<S.length;R++){var w=S[R];const J=vs(w);w=ql(this,w);for(let ee=0;ee<w.length;ee++){let de=J;w[ee]!==""&&(de+="="+vs(w[ee])),g.push(de)}}return this.i=g.join("&")};function Yc(g){const S=new nr;return S.i=g.i,g.g&&(S.g=new Map(g.g),S.h=g.h),S}function ir(g,S){return S=String(S),g.j&&(S=S.toLowerCase()),S}function ia(g,S){S&&!g.j&&(Rn(g),g.i=null,g.g.forEach(function(w,R){const J=R.toLowerCase();R!=J&&(Kc(this,R),na(this,J,w))},g)),g.j=S}function Ti(g,S){const w=new yi;if(u.Image){const R=new Image;R.onload=_(ei,w,"TestLoadImage: loaded",!0,S,R),R.onerror=_(ei,w,"TestLoadImage: error",!1,S,R),R.onabort=_(ei,w,"TestLoadImage: abort",!1,S,R),R.ontimeout=_(ei,w,"TestLoadImage: timeout",!1,S,R),u.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=g}else S(!1)}function Gl(g,S){const w=new yi,R=new AbortController,J=setTimeout(()=>{R.abort(),ei(w,"TestPingServer: timeout",!1,S)},1e4);fetch(g,{signal:R.signal}).then(ee=>{clearTimeout(J),ee.ok?ei(w,"TestPingServer: ok",!0,S):ei(w,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(J),ei(w,"TestPingServer: error",!1,S)})}function ei(g,S,w,R,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),R(w)}catch{}}function sr(){this.g=new Vc}function Xi(g){this.i=g.Sb||null,this.h=g.ab||!1}T(Xi,Uc),Xi.prototype.g=function(){return new ro(this.i,this.h)};function ro(g,S){Pt.call(this),this.H=g,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(ro,Pt),n=ro.prototype,n.open=function(g,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=g,this.D=S,this.readyState=1,Ei(this)},n.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const S={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};g&&(S.body=g),(this.H||u).fetch(new Request(this.D,S)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,rr(this)),this.readyState=0},n.Pa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,Ei(this)),this.g&&(this.readyState=3,Ei(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;sa(this)}else g.text().then(this.Oa.bind(this),this.ga.bind(this))};function sa(g){g.j.read().then(g.Ma.bind(g)).catch(g.ga.bind(g))}n.Ma=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var S=g.value?g.value:new Uint8Array(0);(S=this.B.decode(S,{stream:!g.done}))&&(this.response=this.responseText+=S)}g.done?rr(this):Ei(this),this.readyState==3&&sa(this)}},n.Oa=function(g){this.g&&(this.response=this.responseText=g,rr(this))},n.Na=function(g){this.g&&(this.response=g,rr(this))},n.ga=function(){this.g&&rr(this)};function rr(g){g.readyState=4,g.l=null,g.j=null,g.B=null,Ei(g)}n.setRequestHeader=function(g,S){this.A.append(g,S)},n.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],S=this.h.entries();for(var w=S.next();!w.done;)w=w.value,g.push(w[0]+": "+w[1]),w=S.next();return g.join(`\r
`)};function Ei(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(ro.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function ti(g){let S="";return be(g,function(w,R){S+=R,S+=":",S+=w,S+=`\r
`}),S}function oo(g,S,w){e:{for(R in w){var R=!1;break e}R=!0}R||(w=ti(w),typeof g=="string"?w!=null&&vs(w):at(g,S,w))}function ct(g){Pt.call(this),this.headers=new Map,this.L=g||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(ct,Pt);var ji=/^https?$/i,Hl=["POST","PUT"];n=ct.prototype,n.Fa=function(g){this.H=g},n.ea=function(g,S,w,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);S=S?S.toUpperCase():"GET",this.D=g,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Dl.g(),this.g.onreadystatechange=E(h(this.Ca,this));try{this.B=!0,this.g.open(S,String(g),!0),this.B=!1}catch(ee){ao(this,ee);return}if(g=w||"",w=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var J in R)w.set(J,R[J]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const ee of R.keys())w.set(ee,R.get(ee));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(w.keys()).find(ee=>ee.toLowerCase()=="content-type"),J=u.FormData&&g instanceof u.FormData,!(Array.prototype.indexOf.call(Hl,S,void 0)>=0)||R||J||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ee,de]of w)this.g.setRequestHeader(ee,de);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(g),this.v=!1}catch(ee){ao(this,ee)}};function ao(g,S){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=S,g.o=5,zl(g),Ts(g)}function zl(g){g.A||(g.A=!0,Jt(g,"complete"),Jt(g,"error"))}n.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=g||7,Jt(this,"complete"),Jt(this,"abort"),Ts(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ts(this,!0)),ct.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?lo(this):this.Xa())},n.Xa=function(){lo(this)};function lo(g){if(g.h&&typeof a<"u"){if(g.v&&Si(g)==4)setTimeout(g.Ca.bind(g),0);else if(Jt(g,"readystatechange"),Si(g)==4){g.h=!1;try{const ee=g.ca();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var w;if(!(w=S)){var R;if(R=ee===0){let de=String(g.D).match(zc)[1]||null;!de&&u.self&&u.self.location&&(de=u.self.location.protocol.slice(0,-1)),R=!ji.test(de?de.toLowerCase():"")}w=R}if(w)Jt(g,"complete"),Jt(g,"success");else{g.o=6;try{var J=Si(g)>2?g.g.statusText:""}catch{J=""}g.l=J+" ["+g.ca()+"]",zl(g)}}finally{Ts(g)}}}}function Ts(g,S){if(g.g){g.m&&(clearTimeout(g.m),g.m=null);const w=g.g;g.g=null,S||Jt(g,"ready");try{w.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Si(g){return g.g?g.g.readyState:0}n.ca=function(){try{return Si(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(g){if(this.g){var S=this.g.responseText;return g&&S.indexOf(g)==0&&(S=S.substring(g.length)),hp(S)}};function on(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.F){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function Es(g){const S={};g=(g.g&&Si(g)>=2&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<g.length;R++){if(V(g[R]))continue;var w=qc(g[R]);const J=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const ee=S[J]||[];S[J]=ee,ee.push(w)}ze(S,function(R){return R.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Zi(g,S,w){return w&&w.internalChannelParams&&w.internalChannelParams[g]||S}function or(g){this.za=0,this.i=[],this.j=new yi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Zi("failFast",!1,g),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Zi("baseRetryDelayMs",5e3,g),this.Za=Zi("retryDelaySeedMs",1e4,g),this.Ta=Zi("forwardChannelMaxRetries",2,g),this.va=Zi("forwardChannelRequestTimeoutMs",2e4,g),this.ma=g&&g.xmlHttpFactory||void 0,this.Ua=g&&g.Rb||void 0,this.Aa=g&&g.useFetchStreams||!1,this.O=void 0,this.L=g&&g.supportsCrossDomainXhr||!1,this.M="",this.h=new Pl(g&&g.concurrentRequestLimit),this.Ba=new sr,this.S=g&&g.fastHandshake||!1,this.R=g&&g.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=g&&g.Pb||!1,g&&g.ua&&this.j.ua(),g&&g.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&g&&g.detectBufferingProxy||!1,this.ia=void 0,g&&g.longPollingTimeout&&g.longPollingTimeout>0&&(this.ia=g.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=or.prototype,n.ka=8,n.I=1,n.connect=function(g,S,w,R){kt(0),this.W=g,this.H=S||{},w&&R!==void 0&&(this.H.OSID=w,this.H.OAID=R),this.F=this.X,this.J=td(this,null,this.W),es(this)};function $l(g){if(ra(g),g.I==3){var S=g.V++,w=Lt(g.J);if(at(w,"SID",g.M),at(w,"RID",S),at(w,"TYPE","terminate"),uo(g,w),S=new _i(g,g.j,S),S.M=2,S.A=io(Lt(w)),w=!1,u.navigator&&u.navigator.sendBeacon)try{w=u.navigator.sendBeacon(S.A.toString(),"")}catch{}!w&&u.Image&&(new Image().src=S.A,w=!0),w||(S.g=nd(S.j,null),S.g.ea(S.A)),S.F=Date.now(),$i(S)}ed(g)}function ar(g){g.g&&(Kl(g),g.g.cancel(),g.g=null)}function ra(g){ar(g),g.v&&(u.clearTimeout(g.v),g.v=null),aa(g),g.h.cancel(),g.m&&(typeof g.m=="number"&&u.clearTimeout(g.m),g.m=null)}function es(g){if(!kl(g.h)&&!g.m){g.m=!0;var S=g.Ea;ue||D(),W||(ue(),W=!0),N.add(S,g),g.D=0}}function oa(g,S){return Yi(g.h)>=g.h.j-(g.m?1:0)?!1:g.m?(g.i=S.G.concat(g.i),!0):g.I==1||g.I==2||g.D>=(g.Sa?0:g.Ta)?!1:(g.m=Gi(h(g.Ea,g,S),Zc(g,g.D)),g.D++,!0)}n.Ea=function(g){if(this.m)if(this.m=null,this.I==1){if(!g){this.V=Math.floor(Math.random()*1e5),g=this.V++;const J=new _i(this,this.j,g);let ee=this.o;if(this.U&&(ee?(ee=F(ee),he(ee,this.U)):ee=this.U),this.u!==null||this.R||(J.J=ee,ee=null),this.S)e:{for(var S=0,w=0;w<this.i.length;w++){t:{var R=this.i[w];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(S+=R,S>4096){S=w;break e}if(S===4096||w===this.i.length-1){S=w+1;break e}}S=1e3}else S=1e3;S=Wc(this,J,S),w=Lt(this.J),at(w,"RID",g),at(w,"CVER",22),this.G&&at(w,"X-HTTP-Session-Id",this.G),uo(this,w),ee&&(this.R?S="headers="+vs(ti(ee))+"&"+S:this.u&&oo(w,this.u,ee)),Vl(this.h,J),this.Ra&&at(w,"TYPE","init"),this.S?(at(w,"$req",S),at(w,"SID","null"),J.U=!0,zi(J,w,null)):zi(J,w,S),this.I=2}}else this.I==3&&(g?Jl(this,g):this.i.length==0||kl(this.h)||Jl(this))};function Jl(g,S){var w;S?w=S.l:w=g.V++;const R=Lt(g.J);at(R,"SID",g.M),at(R,"RID",w),at(R,"AID",g.K),uo(g,R),g.u&&g.o&&oo(R,g.u,g.o),w=new _i(g,g.j,w,g.D+1),g.u===null&&(w.J=g.o),S&&(g.i=S.G.concat(g.i)),S=Wc(g,w,1e3),w.H=Math.round(g.va*.5)+Math.round(g.va*.5*Math.random()),Vl(g.h,w),zi(w,R,S)}function uo(g,S){g.H&&be(g.H,function(w,R){at(S,R,w)}),g.l&&be({},function(w,R){at(S,R,w)})}function Wc(g,S,w){w=Math.min(g.i.length,w);const R=g.l?h(g.l.Ka,g.l,g):null;e:{var J=g.i;let Fe=-1;for(;;){const xt=["count="+w];Fe==-1?w>0?(Fe=J[0].g,xt.push("ofs="+Fe)):Fe=0:xt.push("ofs="+Fe);let st=!0;for(let vt=0;vt<w;vt++){var ee=J[vt].g;const ni=J[vt].map;if(ee-=Fe,ee<0)Fe=Math.max(0,J[vt].g-100),st=!1;else try{ee="req"+ee+"_"||"";try{var de=ni instanceof Map?ni:Object.entries(ni);for(const[ns,Ai]of de){let wi=Ai;d(Ai)&&(wi=Zs(Ai)),xt.push(ee+ns+"="+encodeURIComponent(wi))}}catch(ns){throw xt.push(ee+"type="+encodeURIComponent("_badmap")),ns}}catch{R&&R(ni)}}if(st){de=xt.join("&");break e}}de=void 0}return g=g.i.splice(0,w),S.G=g,de}function Qc(g){if(!g.g&&!g.v){g.Y=1;var S=g.Da;ue||D(),W||(ue(),W=!0),N.add(S,g),g.A=0}}function co(g){return g.g||g.v||g.A>=3?!1:(g.Y++,g.v=Gi(h(g.Da,g),Zc(g,g.A)),g.A++,!0)}n.Da=function(){if(this.v=null,Xc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var g=4*this.T;this.j.info("BP detection timer enabled: "+g),this.B=Gi(h(this.Wa,this),g)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,kt(10),ar(this),Xc(this))};function Kl(g){g.B!=null&&(u.clearTimeout(g.B),g.B=null)}function Xc(g){g.g=new _i(g,g.j,"rpc",g.Y),g.u===null&&(g.g.J=g.o),g.g.P=0;var S=Lt(g.na);at(S,"RID","rpc"),at(S,"SID",g.M),at(S,"AID",g.K),at(S,"CI",g.F?"0":"1"),!g.F&&g.ia&&at(S,"TO",g.ia),at(S,"TYPE","xmlhttp"),uo(g,S),g.u&&g.o&&oo(S,g.u,g.o),g.O&&(g.g.H=g.O);var w=g.g;g=g.ba,w.M=1,w.A=io(Lt(S)),w.u=null,w.R=!0,jo(w,g)}n.Va=function(){this.C!=null&&(this.C=null,ar(this),co(this),kt(19))};function aa(g){g.C!=null&&(u.clearTimeout(g.C),g.C=null)}function jc(g,S){var w=null;if(g.g==S){aa(g),Kl(g),g.g=null;var R=2}else if(Wi(g.h,S))w=S.G,Ul(g.h,S),R=1;else return;if(g.I!=0){if(S.o)if(R==1){w=S.u?S.u.length:0,S=Date.now()-S.F;var J=g.D;R=Xo(),Jt(R,new qi(R,w)),es(g)}else Qc(g);else if(J=S.m,J==3||J==0&&S.X>0||!(R==1&&oa(g,S)||R==2&&co(g)))switch(w&&w.length>0&&(S=g.h,S.i=S.i.concat(w)),J){case 1:ts(g,5);break;case 4:ts(g,10);break;case 3:ts(g,6);break;default:ts(g,2)}}}function Zc(g,S){let w=g.Qa+Math.floor(Math.random()*g.Za);return g.isActive()||(w*=2),w*S}function ts(g,S){if(g.j.info("Error code "+S),S==2){var w=h(g.bb,g),R=g.Ua;const J=!R;R=new Bn(R||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||jt(R,"https"),io(R),J?Ti(R.toString(),w):Gl(R.toString(),w)}else kt(2);g.I=0,g.l&&g.l.pa(S),ed(g),ra(g)}n.bb=function(g){g?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function ed(g){if(g.I=0,g.ja=[],g.l){const S=Ll(g.h);(S.length!=0||g.i.length!=0)&&(M(g.ja,S),M(g.ja,g.i),g.h.i.length=0,C(g.i),g.i.length=0),g.l.oa()}}function td(g,S,w){var R=w instanceof Bn?Lt(w):new Bn(w);if(R.g!="")S&&(R.g=S+"."+R.g),er(R,R.u);else{var J=u.location;R=J.protocol,S=S?S+"."+J.hostname:J.hostname,J=+J.port;const ee=new Bn(null);R&&jt(ee,R),S&&(ee.g=S),J&&er(ee,J),w&&(ee.h=w),R=ee}return w=g.G,S=g.wa,w&&S&&at(R,w,S),at(R,"VER",g.ka),uo(g,R),R}function nd(g,S,w){if(S&&!g.L)throw Error("Can't create secondary domain capable XhrIo object.");return S=g.Aa&&!g.ma?new ct(new Xi({ab:w})):new ct(g.ma),S.Fa(g.L),S}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function id(){}n=id.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function lr(){}lr.prototype.g=function(g,S){return new An(g,S)};function An(g,S){Pt.call(this),this.g=new or(S),this.l=g,this.h=S&&S.messageUrlParams||null,g=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(g?g["X-WebChannel-Content-Type"]=S.messageContentType:g={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.sa&&(g?g["X-WebChannel-Client-Profile"]=S.sa:g={"X-WebChannel-Client-Profile":S.sa}),this.g.U=g,(g=S&&S.Qb)&&!V(g)&&(this.g.u=g),this.A=S&&S.supportsCrossDomainXhr||!1,this.v=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!V(S)&&(this.g.G=S,g=this.h,g!==null&&S in g&&(g=this.h,S in g&&delete g[S])),this.j=new Ss(this)}T(An,Pt),An.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},An.prototype.close=function(){$l(this.g)},An.prototype.o=function(g){var S=this.g;if(typeof g=="string"){var w={};w.__data__=g,g=w}else this.v&&(w={},w.__data__=Zs(g),g=w);S.i.push(new Ut(S.Ya++,g)),S.I==3&&es(S)},An.prototype.N=function(){this.g.l=null,delete this.j,$l(this.g),delete this.g,An.Z.N.call(this)};function sd(g){rn.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var S=g.__sm__;if(S){e:{for(const w in S){g=w;break e}g=void 0}(this.i=g)&&(g=this.i,S=S!==null&&g in S?S[g]:void 0),this.data=S}else this.data=g}T(sd,rn);function rd(){jn.call(this),this.status=1}T(rd,jn);function Ss(g){this.g=g}T(Ss,id),Ss.prototype.ra=function(){Jt(this.g,"a")},Ss.prototype.qa=function(g){Jt(this.g,new sd(g))},Ss.prototype.pa=function(g){Jt(this.g,new rd)},Ss.prototype.oa=function(){Jt(this.g,"b")},lr.prototype.createWebChannel=lr.prototype.g,An.prototype.send=An.prototype.o,An.prototype.open=An.prototype.m,An.prototype.close=An.prototype.close,ax=function(){return new lr},ox=function(){return Xo()},rx=Rt,xy={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},to.NO_ERROR=0,to.TIMEOUT=8,to.HTTP_ERROR=6,Hf=to,Ml.COMPLETE="complete",sx=Ml,Lc.EventType=gi,gi.OPEN="a",gi.CLOSE="b",gi.ERROR="c",gi.MESSAGE="d",Pt.prototype.listen=Pt.prototype.J,Yu=Lc,ct.prototype.listenOnce=ct.prototype.K,ct.prototype.getLastError=ct.prototype.Ha,ct.prototype.getLastErrorCode=ct.prototype.ya,ct.prototype.getStatus=ct.prototype.ca,ct.prototype.getResponseJson=ct.prototype.La,ct.prototype.getResponseText=ct.prototype.la,ct.prototype.send=ct.prototype.ea,ct.prototype.setWithCredentials=ct.prototype.Fa,ix=ct}).apply(typeof Af<"u"?Af:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vn.UNAUTHENTICATED=new vn(null),vn.GOOGLE_CREDENTIALS=new vn("google-credentials-uid"),vn.FIRST_PARTY=new vn("first-party-uid"),vn.MOCK_USER=new vn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let El="12.9.0";function pB(n){El=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo=new R_("@firebase/firestore");function $a(){return qo.logLevel}function ye(n,...e){if(qo.logLevel<=Qe.DEBUG){const t=e.map(q_);qo.debug(`Firestore (${El}): ${n}`,...t)}}function Ks(n,...e){if(qo.logLevel<=Qe.ERROR){const t=e.map(q_);qo.error(`Firestore (${El}): ${n}`,...t)}}function Go(n,...e){if(qo.logLevel<=Qe.WARN){const t=e.map(q_);qo.warn(`Firestore (${El}): ${n}`,...t)}}function q_(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,lx(n,i,t)}function lx(n,e,t){let i=`FIRESTORE (${El}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Ks(i),new Error(i)}function ot(n,e,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,n||lx(e,r,i)}function Oe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends Xs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mB{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(vn.UNAUTHENTICATED)))}shutdown(){}}class gB{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class yB{constructor(e){this.t=e,this.currentUser=vn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ot(this.o===void 0,42304);let i=this.i;const r=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let a=new Hs;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Hs,e.enqueueRetryable((()=>r(this.currentUser)))};const u=()=>{const p=a;e.enqueueRetryable((async()=>{await p.promise,await r(this.currentUser)}))},d=p=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Hs)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ot(typeof i.accessToken=="string",31837,{l:i}),new ux(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ot(e===null||typeof e=="string",2055,{h:e}),new vn(e)}}class _B{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=vn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class vB{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new _B(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(vn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ow{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class TB{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ot(this.o===void 0,3512);const i=a=>{a.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,ye("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const r=a=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>r(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?r(a):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Ow(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ot(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Ow(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EB(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=EB(40);for(let a=0;a<r.length;++a)i.length<20&&r[a]<t&&(i+=e.charAt(r[a]%62))}return i}}function Xe(n,e){return n<e?-1:n>e?1:0}function Ny(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const r=n.charAt(i),a=e.charAt(i);if(r!==a)return Bg(r)===Bg(a)?Xe(r,a):Bg(r)?1:-1}return Xe(n.length,e.length)}const SB=55296,AB=57343;function Bg(n){const e=n.charCodeAt(0);return e>=SB&&e<=AB}function ll(n,e,t){return n.length===e.length&&n.every(((i,r)=>t(i,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw="__name__";class us{constructor(e,t,i){t===void 0?t=0:t>e.length&&Re(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Re(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return us.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof us?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const a=us.compareSegments(e.get(r),t.get(r));if(a!==0)return a}return Xe(e.length,t.length)}static compareSegments(e,t){const i=us.isNumericId(e),r=us.isNumericId(t);return i&&!r?-1:!i&&r?1:i&&r?us.extractNumericId(e).compare(us.extractNumericId(t)):Ny(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return qr.fromString(e.substring(4,e.length-2))}}class mt extends us{construct(e,t,i){return new mt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ge(oe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((r=>r.length>0)))}return new mt(t)}static emptyPath(){return new mt([])}}const wB=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pn extends us{construct(e,t,i){return new pn(e,t,i)}static isValidIdentifier(e){return wB.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Fw}static keyField(){return new pn([Fw])}static fromServerFormat(e){const t=[];let i="",r=0;const a=()=>{if(i.length===0)throw new ge(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;r<e.length;){const d=e[r];if(d==="\\"){if(r+1===e.length)throw new ge(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[r+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ge(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,r+=2}else d==="`"?(u=!u,r++):d!=="."||u?(i+=d,r++):(a(),r++)}if(a(),u)throw new ge(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pn(t)}static emptyPath(){return new pn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.path=e}static fromPath(e){return new we(mt.fromString(e))}static fromName(e){return new we(mt.fromString(e).popFirst(5))}static empty(){return new we(mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&mt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return mt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new mt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cx(n,e,t){if(!t)throw new ge(oe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function CB(n,e,t,i){if(e===!0&&i===!0)throw new ge(oe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Bw(n){if(!we.isDocumentKey(n))throw new ge(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function qw(n){if(we.isDocumentKey(n))throw new ge(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function dx(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function jh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Re(12329,{type:typeof n})}function Hr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ge(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=jh(n);throw new ge(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(n,e){const t={typeString:n};return e&&(t.value=e),t}function bc(n,e){if(!dx(n))throw new ge(oe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const r=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const u=n[i];if(r&&typeof u!==r){t=`JSON field '${i}' must be a ${r}.`;break}if(a!==void 0&&u!==a.value){t=`Expected '${i}' field to equal '${a.value}'`;break}}if(t)throw new ge(oe.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw=-62135596800,Hw=1e6;class _t{static now(){return _t.fromMillis(Date.now())}static fromDate(e){return _t.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Hw);return new _t(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Gw)throw new ge(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Hw}_compareTo(e){return this.seconds===e.seconds?Xe(this.nanoseconds,e.nanoseconds):Xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:_t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(bc(e,_t._jsonSchema))return new _t(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Gw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}_t._jsonSchemaVersion="firestore/timestamp/1.0",_t._jsonSchema={type:zt("string",_t._jsonSchemaVersion),seconds:zt("number"),nanoseconds:zt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{static fromTimestamp(e){return new Ue(e)}static min(){return new Ue(new _t(0,0))}static max(){return new Ue(new _t(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fc=-1;function IB(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Ue.fromTimestamp(i===1e9?new _t(t+1,0):new _t(t,i));return new zr(r,we.empty(),e)}function bB(n){return new zr(n.readTime,n.key,fc)}class zr{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new zr(Ue.min(),we.empty(),fc)}static max(){return new zr(Ue.max(),we.empty(),fc)}}function RB(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=we.comparator(n.documentKey,e.documentKey),t!==0?t:Xe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class NB{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sl(n){if(n.code!==oe.FAILED_PRECONDITION||n.message!==xB)throw n;ye("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ae(((i,r)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,r)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ae?t:ae.resolve(t)}catch(t){return ae.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ae.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ae.reject(t)}static resolve(e){return new ae(((t,i)=>{t(e)}))}static reject(e){return new ae(((t,i)=>{i(e)}))}static waitFor(e){return new ae(((t,i)=>{let r=0,a=0,u=!1;e.forEach((d=>{++r,d.next((()=>{++a,u&&a===r&&t()}),(p=>i(p)))})),u=!0,a===r&&t()}))}static or(e){let t=ae.resolve(!1);for(const i of e)t=t.next((r=>r?ae.resolve(r):i()));return t}static forEach(e,t){const i=[];return e.forEach(((r,a)=>{i.push(t.call(this,r,a))})),this.waitFor(i)}static mapArray(e,t){return new ae(((i,r)=>{const a=e.length,u=new Array(a);let d=0;for(let p=0;p<a;p++){const h=p;t(e[h]).next((_=>{u[h]=_,++d,d===a&&i(u)}),(_=>r(_)))}}))}static doWhile(e,t){return new ae(((i,r)=>{const a=()=>{e()===!0?t().next((()=>{a()}),r):i()};a()}))}}function MB(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Al(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Zh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_=-1;function ep(n){return n==null}function vh(n){return n===0&&1/n==-1/0}function DB(n){return typeof n=="number"&&Number.isInteger(n)&&!vh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx="";function PB(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=zw(e)),e=kB(n.get(t),e);return zw(e)}function kB(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const a=n.charAt(r);switch(a){case"\0":t+="";break;case fx:t+="";break;default:t+=a}}return t}function zw(n){return n+fx+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $w(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function $o(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function hx(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,t){this.comparator=e,this.root=t||hn.EMPTY}insert(e,t){return new At(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,hn.BLACK,null,null))}remove(e){return new At(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wf(this.root,e,this.comparator,!1)}getReverseIterator(){return new wf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wf(this.root,e,this.comparator,!0)}}class wf{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&r&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class hn{constructor(e,t,i,r,a){this.key=e,this.value=t,this.color=i??hn.RED,this.left=r??hn.EMPTY,this.right=a??hn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,a){return new hn(e??this.key,t??this.value,i??this.color,r??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const a=i(e,r.key);return r=a<0?r.copy(null,null,null,r.left.insert(e,t,i),null):a===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return hn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return hn.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,hn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,hn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Re(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Re(27949);return e+(this.isRed()?0:1)}}hn.EMPTY=null,hn.RED=!0,hn.BLACK=!1;hn.EMPTY=new class{constructor(){this.size=0}get key(){throw Re(57766)}get value(){throw Re(16141)}get color(){throw Re(16727)}get left(){throw Re(29726)}get right(){throw Re(36894)}copy(e,t,i,r,a){return this}insert(e,t,i){return new hn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.comparator=e,this.data=new At(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Jw(this.data.getIterator())}getIteratorFrom(e){return new Jw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Qt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,a=i.getNext().key;if(this.comparator(r,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Qt(this.comparator);return t.data=e,t}}class Jw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e){this.fields=e,e.sort(pn.comparator)}static empty(){return new Mi([])}unionWith(e){let t=new Qt(pn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Mi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ll(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new px("Invalid base64 string: "+a):a}})(e);return new gn(t)}static fromUint8Array(e){const t=(function(r){let a="";for(let u=0;u<r.length;++u)a+=String.fromCharCode(r[u]);return a})(e);return new gn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gn.EMPTY_BYTE_STRING=new gn("");const VB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $r(n){if(ot(!!n,39018),typeof n=="string"){let e=0;const t=VB.exec(n);if(ot(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Dt(n.seconds),nanos:Dt(n.nanos)}}function Dt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Jr(n){return typeof n=="string"?gn.fromBase64String(n):gn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx="server_timestamp",gx="__type__",yx="__previous_value__",_x="__local_write_time__";function z_(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[gx])==null?void 0:i.stringValue)===mx}function tp(n){const e=n.mapValue.fields[yx];return z_(e)?tp(e):e}function hc(n){const e=$r(n.mapValue.fields[_x].timestampValue);return new _t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UB{constructor(e,t,i,r,a,u,d,p,h,_,T){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=h,this.isUsingEmulator=_,this.apiKey=T}}const Th="(default)";class pc{constructor(e,t){this.projectId=e,this.database=t||Th}static empty(){return new pc("","")}get isDefaultDatabase(){return this.database===Th}isEqual(e){return e instanceof pc&&e.projectId===this.projectId&&e.database===this.database}}function LB(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new ge(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pc(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx="__type__",OB="__max__",Cf={mapValue:{}},Tx="__vector__",Eh="value";function Kr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?z_(n)?4:BB(n)?9007199254740991:FB(n)?10:11:Re(28295,{value:n})}function _s(n,e){if(n===e)return!0;const t=Kr(n);if(t!==Kr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return hc(n).isEqual(hc(e));case 3:return(function(r,a){if(typeof r.timestampValue=="string"&&typeof a.timestampValue=="string"&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;const u=$r(r.timestampValue),d=$r(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,a){return Jr(r.bytesValue).isEqual(Jr(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,a){return Dt(r.geoPointValue.latitude)===Dt(a.geoPointValue.latitude)&&Dt(r.geoPointValue.longitude)===Dt(a.geoPointValue.longitude)})(n,e);case 2:return(function(r,a){if("integerValue"in r&&"integerValue"in a)return Dt(r.integerValue)===Dt(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){const u=Dt(r.doubleValue),d=Dt(a.doubleValue);return u===d?vh(u)===vh(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return ll(n.arrayValue.values||[],e.arrayValue.values||[],_s);case 10:case 11:return(function(r,a){const u=r.mapValue.fields||{},d=a.mapValue.fields||{};if($w(u)!==$w(d))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(d[p]===void 0||!_s(u[p],d[p])))return!1;return!0})(n,e);default:return Re(52216,{left:n})}}function mc(n,e){return(n.values||[]).find((t=>_s(t,e)))!==void 0}function ul(n,e){if(n===e)return 0;const t=Kr(n),i=Kr(e);if(t!==i)return Xe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Xe(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const d=Dt(a.integerValue||a.doubleValue),p=Dt(u.integerValue||u.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(n,e);case 3:return Kw(n.timestampValue,e.timestampValue);case 4:return Kw(hc(n),hc(e));case 5:return Ny(n.stringValue,e.stringValue);case 6:return(function(a,u){const d=Jr(a),p=Jr(u);return d.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const d=a.split("/"),p=u.split("/");for(let h=0;h<d.length&&h<p.length;h++){const _=Xe(d[h],p[h]);if(_!==0)return _}return Xe(d.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const d=Xe(Dt(a.latitude),Dt(u.latitude));return d!==0?d:Xe(Dt(a.longitude),Dt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Yw(n.arrayValue,e.arrayValue);case 10:return(function(a,u){var E,C,M,U;const d=a.fields||{},p=u.fields||{},h=(E=d[Eh])==null?void 0:E.arrayValue,_=(C=p[Eh])==null?void 0:C.arrayValue,T=Xe(((M=h==null?void 0:h.values)==null?void 0:M.length)||0,((U=_==null?void 0:_.values)==null?void 0:U.length)||0);return T!==0?T:Yw(h,_)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===Cf.mapValue&&u===Cf.mapValue)return 0;if(a===Cf.mapValue)return 1;if(u===Cf.mapValue)return-1;const d=a.fields||{},p=Object.keys(d),h=u.fields||{},_=Object.keys(h);p.sort(),_.sort();for(let T=0;T<p.length&&T<_.length;++T){const E=Ny(p[T],_[T]);if(E!==0)return E;const C=ul(d[p[T]],h[_[T]]);if(C!==0)return C}return Xe(p.length,_.length)})(n.mapValue,e.mapValue);default:throw Re(23264,{he:t})}}function Kw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Xe(n,e);const t=$r(n),i=$r(e),r=Xe(t.seconds,i.seconds);return r!==0?r:Xe(t.nanos,i.nanos)}function Yw(n,e){const t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){const a=ul(t[r],i[r]);if(a)return a}return Xe(t.length,i.length)}function cl(n){return My(n)}function My(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=$r(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Jr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return we.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",r=!0;for(const a of t.values||[])r?r=!1:i+=",",i+=My(a);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let r="{",a=!0;for(const u of i)a?a=!1:r+=",",r+=`${u}:${My(t.fields[u])}`;return r+"}"})(n.mapValue):Re(61005,{value:n})}function zf(n){switch(Kr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=tp(n);return e?16+zf(e):16;case 5:return 2*n.stringValue.length;case 6:return Jr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((r,a)=>r+zf(a)),0)})(n.arrayValue);case 10:case 11:return(function(i){let r=0;return $o(i.fields,((a,u)=>{r+=a.length+zf(u)})),r})(n.mapValue);default:throw Re(13486,{value:n})}}function Ww(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Dy(n){return!!n&&"integerValue"in n}function $_(n){return!!n&&"arrayValue"in n}function Qw(n){return!!n&&"nullValue"in n}function Xw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function $f(n){return!!n&&"mapValue"in n}function FB(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[vx])==null?void 0:i.stringValue)===Tx}function ic(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return $o(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=ic(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ic(n.arrayValue.values[t]);return e}return{...n}}function BB(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===OB}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this.value=e}static empty(){return new di({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!$f(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ic(t)}setAll(e){let t=pn.emptyPath(),i={},r=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,i,r),i={},r=[],t=d.popLast()}u?i[d.lastSegment()]=ic(u):r.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,i,r)}delete(e){const t=this.field(e.popLast());$f(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return _s(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];$f(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){$o(t,((r,a)=>e[r]=a));for(const r of i)delete e[r]}clone(){return new di(ic(this.value))}}function Ex(n){const e=[];return $o(n.fields,((t,i)=>{const r=new pn([t]);if($f(i)){const a=Ex(i.mapValue).fields;if(a.length===0)e.push(r);else for(const u of a)e.push(r.child(u))}else e.push(r)})),new Mi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e,t,i,r,a,u,d){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new Tn(e,0,Ue.min(),Ue.min(),Ue.min(),di.empty(),0)}static newFoundDocument(e,t,i,r){return new Tn(e,1,t,Ue.min(),i,r,0)}static newNoDocument(e,t){return new Tn(e,2,t,Ue.min(),Ue.min(),di.empty(),0)}static newUnknownDocument(e,t){return new Tn(e,3,t,Ue.min(),Ue.min(),di.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=di.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=di.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e,t){this.position=e,this.inclusive=t}}function jw(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const a=e[r],u=n.position[r];if(a.field.isKeyField()?i=we.comparator(we.fromName(u.referenceValue),t.key):i=ul(u,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function Zw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!_s(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e,t="asc"){this.field=e,this.dir=t}}function qB(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{}class Ht extends Sx{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new HB(e,t,i):t==="array-contains"?new JB(e,i):t==="in"?new KB(e,i):t==="not-in"?new YB(e,i):t==="array-contains-any"?new WB(e,i):new Ht(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new zB(e,i):new $B(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ul(t,this.value)):t!==null&&Kr(this.value)===Kr(t)&&this.matchesComparison(ul(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ui extends Sx{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ui(e,t)}matches(e){return Ax(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Ax(n){return n.op==="and"}function wx(n){return GB(n)&&Ax(n)}function GB(n){for(const e of n.filters)if(e instanceof Ui)return!1;return!0}function Py(n){if(n instanceof Ht)return n.field.canonicalString()+n.op.toString()+cl(n.value);if(wx(n))return n.filters.map((e=>Py(e))).join(",");{const e=n.filters.map((t=>Py(t))).join(",");return`${n.op}(${e})`}}function Cx(n,e){return n instanceof Ht?(function(i,r){return r instanceof Ht&&i.op===r.op&&i.field.isEqual(r.field)&&_s(i.value,r.value)})(n,e):n instanceof Ui?(function(i,r){return r instanceof Ui&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce(((a,u,d)=>a&&Cx(u,r.filters[d])),!0):!1})(n,e):void Re(19439)}function Ix(n){return n instanceof Ht?(function(t){return`${t.field.canonicalString()} ${t.op} ${cl(t.value)}`})(n):n instanceof Ui?(function(t){return t.op.toString()+" {"+t.getFilters().map(Ix).join(" ,")+"}"})(n):"Filter"}class HB extends Ht{constructor(e,t,i){super(e,t,i),this.key=we.fromName(i.referenceValue)}matches(e){const t=we.comparator(e.key,this.key);return this.matchesComparison(t)}}class zB extends Ht{constructor(e,t){super(e,"in",t),this.keys=bx("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class $B extends Ht{constructor(e,t){super(e,"not-in",t),this.keys=bx("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function bx(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>we.fromName(i.referenceValue)))}class JB extends Ht{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return $_(t)&&mc(t.arrayValue,this.value)}}class KB extends Ht{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&mc(this.value.arrayValue,t)}}class YB extends Ht{constructor(e,t){super(e,"not-in",t)}matches(e){if(mc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!mc(this.value.arrayValue,t)}}class WB extends Ht{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!$_(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>mc(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QB{constructor(e,t=null,i=[],r=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=a,this.startAt=u,this.endAt=d,this.Te=null}}function eC(n,e=null,t=[],i=[],r=null,a=null,u=null){return new QB(n,e,t,i,r,a,u)}function J_(n){const e=Oe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Py(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),ep(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>cl(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>cl(i))).join(",")),e.Te=t}return e.Te}function K_(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!qB(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Cx(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Zw(n.startAt,e.startAt)&&Zw(n.endAt,e.endAt)}function ky(n){return we.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,t=null,i=[],r=[],a=null,u="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=p,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function XB(n,e,t,i,r,a,u,d){return new Rc(n,e,t,i,r,a,u,d)}function Y_(n){return new Rc(n)}function tC(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function jB(n){return we.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Rx(n){return n.collectionGroup!==null}function sc(n){const e=Oe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Qt(pn.comparator);return u.filters.forEach((p=>{p.getFlattenedFilters().forEach((h=>{h.isInequality()&&(d=d.add(h.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Ah(a,i))})),t.has(pn.keyField().canonicalString())||e.Ie.push(new Ah(pn.keyField(),i))}return e.Ie}function fs(n){const e=Oe(n);return e.Ee||(e.Ee=ZB(e,sc(n))),e.Ee}function ZB(n,e){if(n.limitType==="F")return eC(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((r=>{const a=r.dir==="desc"?"asc":"desc";return new Ah(r.field,a)}));const t=n.endAt?new Sh(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Sh(n.startAt.position,n.startAt.inclusive):null;return eC(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Vy(n,e){const t=n.filters.concat([e]);return new Rc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Uy(n,e,t){return new Rc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function np(n,e){return K_(fs(n),fs(e))&&n.limitType===e.limitType}function xx(n){return`${J_(fs(n))}|lt:${n.limitType}`}function Ja(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((r=>Ix(r))).join(", ")}]`),ep(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((r=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(r))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((r=>cl(r))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((r=>cl(r))).join(",")),`Target(${i})`})(fs(n))}; limitType=${n.limitType})`}function ip(n,e){return e.isFoundDocument()&&(function(i,r){const a=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):we.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(n,e)&&(function(i,r){for(const a of sc(i))if(!a.field.isKeyField()&&r.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(i,r){for(const a of i.filters)if(!a.matches(r))return!1;return!0})(n,e)&&(function(i,r){return!(i.startAt&&!(function(u,d,p){const h=jw(u,d,p);return u.inclusive?h<=0:h<0})(i.startAt,sc(i),r)||i.endAt&&!(function(u,d,p){const h=jw(u,d,p);return u.inclusive?h>=0:h>0})(i.endAt,sc(i),r))})(n,e)}function eq(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Nx(n){return(e,t)=>{let i=!1;for(const r of sc(n)){const a=tq(r,e,t);if(a!==0)return a;i=i||r.field.isKeyField()}return 0}}function tq(n,e,t){const i=n.field.isKeyField()?we.comparator(e.key,t.key):(function(a,u,d){const p=u.data.field(a),h=d.data.field(a);return p!==null&&h!==null?ul(p,h):Re(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Re(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[r,a]of i)if(this.equalsFn(r,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return void(r[a]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){$o(this.inner,((t,i)=>{for(const[r,a]of i)e(r,a)}))}isEmpty(){return hx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nq=new At(we.comparator);function Ys(){return nq}const Mx=new At(we.comparator);function Wu(...n){let e=Mx;for(const t of n)e=e.insert(t.key,t);return e}function Dx(n){let e=Mx;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Vo(){return rc()}function Px(){return rc()}function rc(){return new Jo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const iq=new At(we.comparator),sq=new Qt(we.comparator);function je(...n){let e=sq;for(const t of n)e=e.add(t);return e}const rq=new Qt(Xe);function oq(){return rq}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vh(e)?"-0":e}}function kx(n){return{integerValue:""+n}}function aq(n,e){return DB(e)?kx(e):W_(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(){this._=void 0}}function lq(n,e,t){return n instanceof wh?(function(r,a){const u={fields:{[gx]:{stringValue:mx},[_x]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return a&&z_(a)&&(a=tp(a)),a&&(u.fields[yx]=a),{mapValue:u}})(t,e):n instanceof gc?Ux(n,e):n instanceof yc?Lx(n,e):(function(r,a){const u=Vx(r,a),d=nC(u)+nC(r.Ae);return Dy(u)&&Dy(r.Ae)?kx(d):W_(r.serializer,d)})(n,e)}function uq(n,e,t){return n instanceof gc?Ux(n,e):n instanceof yc?Lx(n,e):t}function Vx(n,e){return n instanceof Ch?(function(i){return Dy(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class wh extends sp{}class gc extends sp{constructor(e){super(),this.elements=e}}function Ux(n,e){const t=Ox(e);for(const i of n.elements)t.some((r=>_s(r,i)))||t.push(i);return{arrayValue:{values:t}}}class yc extends sp{constructor(e){super(),this.elements=e}}function Lx(n,e){let t=Ox(e);for(const i of n.elements)t=t.filter((r=>!_s(r,i)));return{arrayValue:{values:t}}}class Ch extends sp{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function nC(n){return Dt(n.integerValue||n.doubleValue)}function Ox(n){return $_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function cq(n,e){return n.field.isEqual(e.field)&&(function(i,r){return i instanceof gc&&r instanceof gc||i instanceof yc&&r instanceof yc?ll(i.elements,r.elements,_s):i instanceof Ch&&r instanceof Ch?_s(i.Ae,r.Ae):i instanceof wh&&r instanceof wh})(n.transform,e.transform)}class dq{constructor(e,t){this.version=e,this.transformResults=t}}class hs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new hs}static exists(e){return new hs(void 0,e)}static updateTime(e){return new hs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Jf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class rp{}function Fx(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new qx(n.key,hs.none()):new xc(n.key,n.data,hs.none());{const t=n.data,i=di.empty();let r=new Qt(pn.comparator);for(let a of e.fields)if(!r.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?i.delete(a):i.set(a,u),r=r.add(a)}return new Ko(n.key,i,new Mi(r.toArray()),hs.none())}}function fq(n,e,t){n instanceof xc?(function(r,a,u){const d=r.value.clone(),p=sC(r.fieldTransforms,a,u.transformResults);d.setAll(p),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Ko?(function(r,a,u){if(!Jf(r.precondition,a))return void a.convertToUnknownDocument(u.version);const d=sC(r.fieldTransforms,a,u.transformResults),p=a.data;p.setAll(Bx(r)),p.setAll(d),a.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(n,e,t):(function(r,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function oc(n,e,t,i){return n instanceof xc?(function(a,u,d,p){if(!Jf(a.precondition,u))return d;const h=a.value.clone(),_=rC(a.fieldTransforms,p,u);return h.setAll(_),u.convertToFoundDocument(u.version,h).setHasLocalMutations(),null})(n,e,t,i):n instanceof Ko?(function(a,u,d,p){if(!Jf(a.precondition,u))return d;const h=rC(a.fieldTransforms,p,u),_=u.data;return _.setAll(Bx(a)),_.setAll(h),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((T=>T.field)))})(n,e,t,i):(function(a,u,d){return Jf(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function hq(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),a=Vx(i.transform,r||null);a!=null&&(t===null&&(t=di.empty()),t.set(i.field,a))}return t||null}function iC(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&ll(i,r,((a,u)=>cq(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class xc extends rp{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Ko extends rp{constructor(e,t,i,r,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Bx(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function sC(n,e,t){const i=new Map;ot(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let r=0;r<t.length;r++){const a=n[r],u=a.transform,d=e.data.field(a.field);i.set(a.field,uq(u,d,t[r]))}return i}function rC(n,e,t){const i=new Map;for(const r of n){const a=r.transform,u=t.data.field(r.field);i.set(r.field,lq(a,u,e))}return i}class qx extends rp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class pq extends rp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mq{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const a=this.mutations[r];a.key.isEqual(e.key)&&fq(a,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=oc(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=oc(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Px();return this.mutations.forEach((r=>{const a=e.get(r.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=t.has(r.key)?null:d;const p=Fx(u,d);p!==null&&i.set(r.key,p),u.isValidDocument()||u.convertToNoDocument(Ue.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),je())}isEqual(e){return this.batchId===e.batchId&&ll(this.mutations,e.mutations,((t,i)=>iC(t,i)))&&ll(this.baseMutations,e.baseMutations,((t,i)=>iC(t,i)))}}class Q_{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){ot(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=(function(){return iq})();const a=e.mutations;for(let u=0;u<a.length;u++)r=r.insert(a[u].key,i[u].version);return new Q_(e,t,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gq{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yq{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gt,et;function _q(n){switch(n){case oe.OK:return Re(64938);case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0;default:return Re(15467,{code:n})}}function Gx(n){if(n===void 0)return Ks("GRPC error has no .code"),oe.UNKNOWN;switch(n){case Gt.OK:return oe.OK;case Gt.CANCELLED:return oe.CANCELLED;case Gt.UNKNOWN:return oe.UNKNOWN;case Gt.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case Gt.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case Gt.INTERNAL:return oe.INTERNAL;case Gt.UNAVAILABLE:return oe.UNAVAILABLE;case Gt.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case Gt.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case Gt.NOT_FOUND:return oe.NOT_FOUND;case Gt.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case Gt.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case Gt.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case Gt.ABORTED:return oe.ABORTED;case Gt.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case Gt.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case Gt.DATA_LOSS:return oe.DATA_LOSS;default:return Re(39323,{code:n})}}(et=Gt||(Gt={}))[et.OK=0]="OK",et[et.CANCELLED=1]="CANCELLED",et[et.UNKNOWN=2]="UNKNOWN",et[et.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",et[et.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",et[et.NOT_FOUND=5]="NOT_FOUND",et[et.ALREADY_EXISTS=6]="ALREADY_EXISTS",et[et.PERMISSION_DENIED=7]="PERMISSION_DENIED",et[et.UNAUTHENTICATED=16]="UNAUTHENTICATED",et[et.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",et[et.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",et[et.ABORTED=10]="ABORTED",et[et.OUT_OF_RANGE=11]="OUT_OF_RANGE",et[et.UNIMPLEMENTED=12]="UNIMPLEMENTED",et[et.INTERNAL=13]="INTERNAL",et[et.UNAVAILABLE=14]="UNAVAILABLE",et[et.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vq(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tq=new qr([4294967295,4294967295],0);function oC(n){const e=vq().encode(n),t=new nx;return t.update(e),new Uint8Array(t.digest())}function aC(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new qr([t,i],0),new qr([r,a],0)]}class X_{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Qu(`Invalid padding: ${t}`);if(i<0)throw new Qu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Qu(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Qu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=qr.fromNumber(this.ge)}ye(e,t,i){let r=e.add(t.multiply(qr.fromNumber(i)));return r.compare(Tq)===1&&(r=new qr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=oC(e),[i,r]=aC(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,r,a);if(!this.we(u))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new X_(a,r,t);return i.forEach((d=>u.insert(d))),u}insert(e){if(this.ge===0)return;const t=oC(e),[i,r]=aC(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,r,a);this.be(u)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Qu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e,t,i,r,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,Nc.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new op(Ue.min(),r,new At(Xe),Ys(),je())}}class Nc{constructor(e,t,i,r,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Nc(i,t,je(),je(),je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e,t,i,r){this.Se=e,this.removedTargetIds=t,this.key=i,this.De=r}}class Hx{constructor(e,t){this.targetId=e,this.Ce=t}}class zx{constructor(e,t,i=gn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class lC{constructor(){this.ve=0,this.Fe=uC(),this.Me=gn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=je(),t=je(),i=je();return this.Fe.forEach(((r,a)=>{switch(a){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:Re(38017,{changeType:a})}})),new Nc(this.Me,this.xe,e,t,i)}Ke(){this.Oe=!1,this.Fe=uC()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,ot(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class Eq{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ys(),this.He=If(),this.Je=If(),this.Ze=new At(Xe)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Re(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,i=e.Ce.count,r=this.ot(t);if(r){const a=r.target;if(ky(a))if(i===0){const u=new we(a.path);this.et(t,u,Tn.newNoDocument(u,Ue.min()))}else ot(i===1,20013,{expectedCount:i});else{const u=this._t(t);if(u!==i){const d=this.ut(e),p=d?this.ct(d,e,u):1;if(p!==0){this.it(t);const h=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:a=0}=t;let u,d;try{u=Jr(i).toUint8Array()}catch(p){if(p instanceof px)return Go("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new X_(u,r,a)}catch(p){return Go(p instanceof Qu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.ge===0?null:d}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let r=0;return i.forEach((a=>{const u=this.Ge.ht(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.et(t,a,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((a,u)=>{const d=this.ot(u);if(d){if(a.current&&ky(d.target)){const p=new we(d.target.path);this.It(p).has(u)||this.Et(u,p)||this.et(u,p,Tn.newNoDocument(p,e))}a.Be&&(t.set(u,a.ke()),a.Ke())}}));let i=je();this.Je.forEach(((a,u)=>{let d=!0;u.forEachWhile((p=>{const h=this.ot(p);return!h||h.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(a))})),this.je.forEach(((a,u)=>u.setReadTime(e)));const r=new op(e,t,this.Ze,this.je,i);return this.je=Ys(),this.He=If(),this.Je=If(),this.Ze=new At(Xe),r}Ye(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,i),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.qe(t,1):r.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new lC,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Qt(Xe),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Qt(Xe),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ye("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new lC),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function If(){return new At(we.comparator)}function uC(){return new At(we.comparator)}const Sq={asc:"ASCENDING",desc:"DESCENDING"},Aq={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wq={and:"AND",or:"OR"};class Cq{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ly(n,e){return n.useProto3Json||ep(e)?e:{value:e}}function Ih(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $x(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Iq(n,e){return Ih(n,e.toTimestamp())}function ps(n){return ot(!!n,49232),Ue.fromTimestamp((function(t){const i=$r(t);return new _t(i.seconds,i.nanos)})(n))}function j_(n,e){return Oy(n,e).canonicalString()}function Oy(n,e){const t=(function(r){return new mt(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Jx(n){const e=mt.fromString(n);return ot(Xx(e),10190,{key:e.toString()}),e}function Fy(n,e){return j_(n.databaseId,e.path)}function qg(n,e){const t=Jx(e);if(t.get(1)!==n.databaseId.projectId)throw new ge(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ge(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new we(Yx(t))}function Kx(n,e){return j_(n.databaseId,e)}function bq(n){const e=Jx(n);return e.length===4?mt.emptyPath():Yx(e)}function By(n){return new mt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Yx(n){return ot(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function cC(n,e,t){return{name:Fy(n,e),fields:t.value.mapValue.fields}}function Rq(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Re(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],a=(function(h,_){return h.useProto3Json?(ot(_===void 0||typeof _=="string",58123),gn.fromBase64String(_||"")):(ot(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),gn.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(h){const _=h.code===void 0?oe.UNKNOWN:Gx(h.code);return new ge(_,h.message||"")})(u);t=new zx(i,r,a,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=qg(n,i.document.name),a=ps(i.document.updateTime),u=i.document.createTime?ps(i.document.createTime):Ue.min(),d=new di({mapValue:{fields:i.document.fields}}),p=Tn.newFoundDocument(r,a,u,d),h=i.targetIds||[],_=i.removedTargetIds||[];t=new Kf(h,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=qg(n,i.document),a=i.readTime?ps(i.readTime):Ue.min(),u=Tn.newNoDocument(r,a),d=i.removedTargetIds||[];t=new Kf([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=qg(n,i.document),a=i.removedTargetIds||[];t=new Kf([],a,r,null)}else{if(!("filter"in e))return Re(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:a}=i,u=new yq(r,a),d=i.targetId;t=new Hx(d,u)}}return t}function xq(n,e){let t;if(e instanceof xc)t={update:cC(n,e.key,e.value)};else if(e instanceof qx)t={delete:Fy(n,e.key)};else if(e instanceof Ko)t={update:cC(n,e.key,e.data),updateMask:Oq(e.fieldMask)};else{if(!(e instanceof pq))return Re(16599,{dt:e.type});t={verify:Fy(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(a,u){const d=u.transform;if(d instanceof wh)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof gc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof yc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Ch)return{fieldPath:u.field.canonicalString(),increment:d.Ae};throw Re(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(r,a){return a.updateTime!==void 0?{updateTime:Iq(r,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Re(27497)})(n,e.precondition)),t}function Nq(n,e){return n&&n.length>0?(ot(e!==void 0,14353),n.map((t=>(function(r,a){let u=r.updateTime?ps(r.updateTime):ps(a);return u.isEqual(Ue.min())&&(u=ps(a)),new dq(u,r.transformResults||[])})(t,e)))):[]}function Mq(n,e){return{documents:[Kx(n,e.path)]}}function Dq(n,e){const t={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=Kx(n,r);const a=(function(h){if(h.length!==0)return Qx(Ui.create(h,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(h){if(h.length!==0)return h.map((_=>(function(E){return{field:Ka(E.field),direction:Vq(E.dir)}})(_)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=Ly(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:r}}function Pq(n){let e=bq(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){ot(i===1,65062);const _=t.from[0];_.allDescendants?r=_.collectionId:e=e.child(_.collectionId)}let a=[];t.where&&(a=(function(T){const E=Wx(T);return E instanceof Ui&&wx(E)?E.getFilters():[E]})(t.where));let u=[];t.orderBy&&(u=(function(T){return T.map((E=>(function(M){return new Ah(Ya(M.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(M.direction))})(E)))})(t.orderBy));let d=null;t.limit&&(d=(function(T){let E;return E=typeof T=="object"?T.value:T,ep(E)?null:E})(t.limit));let p=null;t.startAt&&(p=(function(T){const E=!!T.before,C=T.values||[];return new Sh(C,E)})(t.startAt));let h=null;return t.endAt&&(h=(function(T){const E=!T.before,C=T.values||[];return new Sh(C,E)})(t.endAt)),XB(e,r,u,a,d,"F",p,h)}function kq(n,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Wx(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Ya(t.unaryFilter.field);return Ht.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Ya(t.unaryFilter.field);return Ht.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Ya(t.unaryFilter.field);return Ht.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Ya(t.unaryFilter.field);return Ht.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Re(61313);default:return Re(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ht.create(Ya(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Re(58110);default:return Re(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ui.create(t.compositeFilter.filters.map((i=>Wx(i))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Re(1026)}})(t.compositeFilter.op))})(n):Re(30097,{filter:n})}function Vq(n){return Sq[n]}function Uq(n){return Aq[n]}function Lq(n){return wq[n]}function Ka(n){return{fieldPath:n.canonicalString()}}function Ya(n){return pn.fromServerFormat(n.fieldPath)}function Qx(n){return n instanceof Ht?(function(t){if(t.op==="=="){if(Xw(t.value))return{unaryFilter:{field:Ka(t.field),op:"IS_NAN"}};if(Qw(t.value))return{unaryFilter:{field:Ka(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Xw(t.value))return{unaryFilter:{field:Ka(t.field),op:"IS_NOT_NAN"}};if(Qw(t.value))return{unaryFilter:{field:Ka(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ka(t.field),op:Uq(t.op),value:t.value}}})(n):n instanceof Ui?(function(t){const i=t.getFilters().map((r=>Qx(r)));return i.length===1?i[0]:{compositeFilter:{op:Lq(t.op),filters:i}}})(n):Re(54877,{filter:n})}function Oq(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Xx(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function jx(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e,t,i,r,a=Ue.min(),u=Ue.min(),d=gn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new Lr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Lr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fq{constructor(e){this.yt=e}}function Bq(n){const e=Pq({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Uy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qq{constructor(){this.Sn=new Gq}addToCollectionParentIndex(e,t){return this.Sn.add(t),ae.resolve()}getCollectionParents(e,t){return ae.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return ae.resolve()}deleteFieldIndex(e,t){return ae.resolve()}deleteAllFieldIndexes(e){return ae.resolve()}createTargetIndexes(e,t){return ae.resolve()}getDocumentsMatchingTarget(e,t){return ae.resolve(null)}getIndexType(e,t){return ae.resolve(0)}getFieldIndexes(e,t){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,t){return ae.resolve(zr.min())}getMinOffsetFromCollectionGroup(e,t){return ae.resolve(zr.min())}updateCollectionGroup(e,t,i){return ae.resolve()}updateIndexEntries(e,t){return ae.resolve()}}class Gq{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new Qt(mt.comparator),a=!r.has(i);return this.index[t]=r.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Qt(mt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Zx=41943040;class kn{static withCacheSize(e){return new kn(e,kn.DEFAULT_COLLECTION_PERCENTILE,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kn.DEFAULT_COLLECTION_PERCENTILE=10,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kn.DEFAULT=new kn(Zx,kn.DEFAULT_COLLECTION_PERCENTILE,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kn.DISABLED=new kn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new dl(0)}static ar(){return new dl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC="LruGarbageCollector",Hq=1048576;function hC([n,e],[t,i]){const r=Xe(n,t);return r===0?Xe(e,i):r}class zq{constructor(e){this.Pr=e,this.buffer=new Qt(hC),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();hC(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class $q{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){ye(fC,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Al(t)?ye(fC,"Ignoring IndexedDB error during garbage collection: ",t):await Sl(t)}await this.Ar(3e5)}))}}class Jq{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return ae.resolve(Zh.ce);const i=new zq(t);return this.Vr.forEachTarget(e,(r=>i.Er(r.sequenceNumber))).next((()=>this.Vr.mr(e,(r=>i.Er(r))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ye("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(dC)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dC):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let i,r,a,u,d,p,h;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),r=this.params.maximumSequenceNumbersToCollect):r=T,u=Date.now(),this.nthSequenceNumber(e,r)))).next((T=>(i=T,d=Date.now(),this.removeTargets(e,i,t)))).next((T=>(a=T,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(h=Date.now(),$a()<=Qe.DEBUG&&ye("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-_}ms
	Determined least recently used ${r} in `+(d-u)+`ms
	Removed ${a} targets in `+(p-d)+`ms
	Removed ${T} documents in `+(h-p)+`ms
Total Duration: ${h-_}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:a,documentsRemoved:T}))))}}function Kq(n,e){return new Jq(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yq{constructor(){this.changes=new Jo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Tn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ae.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wq{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qq{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(i=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(i!==null&&oc(i.mutation,r,Mi.empty(),_t.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,je()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=je()){const r=Vo();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,i).next((a=>{let u=Wu();return a.forEach(((d,p)=>{u=u.insert(d,p.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=Vo();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,je())))}populateOverlays(e,t,i){const r=[];return i.forEach((a=>{t.has(a)||r.push(a)})),this.documentOverlayCache.getOverlays(e,r).next((a=>{a.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,i,r){let a=Ys();const u=rc(),d=(function(){return rc()})();return t.forEach(((p,h)=>{const _=i.get(h.key);r.has(h.key)&&(_===void 0||_.mutation instanceof Ko)?a=a.insert(h.key,h):_!==void 0?(u.set(h.key,_.mutation.getFieldMask()),oc(_.mutation,h,_.mutation.getFieldMask(),_t.now())):u.set(h.key,Mi.empty())})),this.recalculateAndSaveOverlays(e,a).next((p=>(p.forEach(((h,_)=>u.set(h,_))),t.forEach(((h,_)=>d.set(h,new Wq(_,u.get(h)??null)))),d)))}recalculateAndSaveOverlays(e,t){const i=rc();let r=new At(((u,d)=>u-d)),a=je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((p=>{const h=t.get(p);if(h===null)return;let _=i.get(p)||Mi.empty();_=d.applyToLocalView(h,_),i.set(p,_);const T=(r.get(d.batchId)||je()).add(p);r=r.insert(d.batchId,T)}))})).next((()=>{const u=[],d=r.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),h=p.key,_=p.value,T=Px();_.forEach((E=>{if(!a.has(E)){const C=Fx(t.get(E),i.get(E));C!==null&&T.set(E,C),a=a.add(E)}})),u.push(this.documentOverlayCache.saveOverlays(e,h,T))}return ae.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,r){return jB(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Rx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next((a=>{const u=r-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-a.size):ae.resolve(Vo());let d=fc,p=a;return u.next((h=>ae.forEach(h,((_,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),a.get(_)?ae.resolve():this.remoteDocumentCache.getEntry(e,_).next((E=>{p=p.insert(_,E)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,p,h,je()))).next((_=>({batchId:d,changes:Dx(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new we(t)).next((i=>{let r=Wu();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){const a=t.collectionGroup;let u=Wu();return this.indexManager.getCollectionParents(e,a).next((d=>ae.forEach(d,(p=>{const h=(function(T,E){return new Rc(E,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,p.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,i,r).next((_=>{_.forEach(((T,E)=>{u=u.insert(T,E)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,r){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,r)))).next((u=>{a.forEach(((p,h)=>{const _=h.getKey();u.get(_)===null&&(u=u.insert(_,Tn.newInvalidDocument(_)))}));let d=Wu();return u.forEach(((p,h)=>{const _=a.get(p);_!==void 0&&oc(_.mutation,h,Mi.empty(),_t.now()),ip(t,h)&&(d=d.insert(p,h))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xq{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return ae.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:ps(r.createTime)}})(t)),ae.resolve()}getNamedQuery(e,t){return ae.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(r){return{name:r.name,query:Bq(r.bundledQuery),readTime:ps(r.readTime)}})(t)),ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jq{constructor(){this.overlays=new At(we.comparator),this.Lr=new Map}getOverlay(e,t){return ae.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Vo();return ae.forEach(t,(r=>this.getOverlay(e,r).next((a=>{a!==null&&i.set(r,a)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((r,a)=>{this.bt(e,t,a)})),ae.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.Lr.get(i);return r!==void 0&&(r.forEach((a=>this.overlays=this.overlays.remove(a))),this.Lr.delete(i)),ae.resolve()}getOverlaysForCollection(e,t,i){const r=Vo(),a=t.length+1,u=new we(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const p=d.getNext().value,h=p.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===a&&p.largestBatchId>i&&r.set(p.getKey(),p)}return ae.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let a=new At(((h,_)=>h-_));const u=this.overlays.getIterator();for(;u.hasNext();){const h=u.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>i){let _=a.get(h.largestBatchId);_===null&&(_=Vo(),a=a.insert(h.largestBatchId,_)),_.set(h.getKey(),h)}}const d=Vo(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((h,_)=>d.set(h,_))),!(d.size()>=r)););return ae.resolve(d)}bt(e,t,i){const r=this.overlays.get(i.key);if(r!==null){const u=this.Lr.get(r.largestBatchId).delete(i.key);this.Lr.set(r.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new gq(t,i));let a=this.Lr.get(t);a===void 0&&(a=je(),this.Lr.set(t,a)),this.Lr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zq{constructor(){this.sessionToken=gn.EMPTY_BYTE_STRING}getSessionToken(e){return ae.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ae.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(){this.kr=new Qt(tn.Kr),this.qr=new Qt(tn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const i=new tn(e,t);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new tn(e,t))}Qr(e,t){e.forEach((i=>this.removeReference(i,t)))}Gr(e){const t=new we(new mt([])),i=new tn(t,e),r=new tn(t,e+1),a=[];return this.qr.forEachInRange([i,r],(u=>{this.Wr(u),a.push(u.key)})),a}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new we(new mt([])),i=new tn(t,e),r=new tn(t,e+1);let a=je();return this.qr.forEachInRange([i,r],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new tn(e,0),i=this.kr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class tn{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return we.comparator(e.key,t.key)||Xe(e.Hr,t.Hr)}static Ur(e,t){return Xe(e.Hr,t.Hr)||we.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e5{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Qt(tn.Kr)}checkEmpty(e){return ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){const a=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new mq(a,t,i,r);this.mutationQueue.push(u);for(const d of r)this.Jr=this.Jr.add(new tn(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ae.resolve(u)}lookupMutationBatch(e,t){return ae.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=this.Xr(i),a=r<0?0:r;return ae.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(this.mutationQueue.length===0?H_:this.Yn-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new tn(t,0),r=new tn(t,Number.POSITIVE_INFINITY),a=[];return this.Jr.forEachInRange([i,r],(u=>{const d=this.Zr(u.Hr);a.push(d)})),ae.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Qt(Xe);return t.forEach((r=>{const a=new tn(r,0),u=new tn(r,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([a,u],(d=>{i=i.add(d.Hr)}))})),ae.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let a=i;we.isDocumentKey(a)||(a=a.child(""));const u=new tn(new we(a),0);let d=new Qt(Xe);return this.Jr.forEachWhile((p=>{const h=p.key.path;return!!i.isPrefixOf(h)&&(h.length===r&&(d=d.add(p.Hr)),!0)}),u),ae.resolve(this.Yr(d))}Yr(e){const t=[];return e.forEach((i=>{const r=this.Zr(i);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){ot(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return ae.forEach(t.mutations,(r=>{const a=new tn(r.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,t){const i=new tn(t,0),r=this.Jr.firstAfterOrEqual(i);return ae.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ae.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5{constructor(e){this.ti=e,this.docs=(function(){return new At(we.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),a=r?r.size:0,u=this.ti(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ae.resolve(i?i.document.mutableCopy():Tn.newInvalidDocument(t))}getEntries(e,t){let i=Ys();return t.forEach((r=>{const a=this.docs.get(r);i=i.insert(r,a?a.document.mutableCopy():Tn.newInvalidDocument(r))})),ae.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let a=Ys();const u=t.path,d=new we(u.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:h,value:{document:_}}=p.getNext();if(!u.isPrefixOf(h.path))break;h.path.length>u.length+1||RB(bB(_),i)<=0||(r.has(_.key)||ip(t,_))&&(a=a.insert(_.key,_.mutableCopy()))}return ae.resolve(a)}getAllFromCollectionGroup(e,t,i,r){Re(9500)}ni(e,t){return ae.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new n5(this)}getSize(e){return ae.resolve(this.size)}}class n5 extends Yq{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,r)=>{r.isValidDocument()?t.push(this.Mr.addEntry(e,r)):this.Mr.removeEntry(i)})),ae.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i5{constructor(e){this.persistence=e,this.ri=new Jo((t=>J_(t)),K_),this.lastRemoteSnapshotVersion=Ue.min(),this.highestTargetId=0,this.ii=0,this.si=new Z_,this.targetCount=0,this.oi=dl._r()}forEachTarget(e,t){return this.ri.forEach(((i,r)=>t(r))),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ii&&(this.ii=t),ae.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new dl(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,ae.resolve()}updateTargetData(e,t){return this.lr(t),ae.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,t,i){let r=0;const a=[];return this.ri.forEach(((u,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.ri.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),r++)})),ae.waitFor(a).next((()=>r))}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,t){const i=this.ri.get(t)||null;return ae.resolve(i)}addMatchingKeys(e,t,i){return this.si.$r(t,i),ae.resolve()}removeMatchingKeys(e,t,i){this.si.Qr(t,i);const r=this.persistence.referenceDelegate,a=[];return r&&t.forEach((u=>{a.push(r.markPotentiallyOrphaned(e,u))})),ae.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),ae.resolve()}getMatchingKeysForTargetId(e,t){const i=this.si.jr(t);return ae.resolve(i)}containsKey(e,t){return ae.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e,t){this._i={},this.overlays={},this.ai=new Zh(0),this.ui=!1,this.ui=!0,this.ci=new Zq,this.referenceDelegate=e(this),this.li=new i5(this),this.indexManager=new qq,this.remoteDocumentCache=(function(r){return new t5(r)})((i=>this.referenceDelegate.hi(i))),this.serializer=new Fq(t),this.Pi=new Xq(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new jq,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this._i[e.toKey()];return i||(i=new e5(t,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,i){ye("MemoryPersistence","Starting transaction:",e);const r=new s5(this.ai.next());return this.referenceDelegate.Ti(),i(r).next((a=>this.referenceDelegate.Ii(r).next((()=>a)))).toPromise().then((a=>(r.raiseOnCommittedEvent(),a)))}Ei(e,t){return ae.or(Object.values(this._i).map((i=>()=>i.containsKey(e,t))))}}class s5 extends NB{constructor(e){super(),this.currentSequenceNumber=e}}class ev{constructor(e){this.persistence=e,this.Ri=new Z_,this.Ai=null}static Vi(e){return new ev(e)}get di(){if(this.Ai)return this.Ai;throw Re(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.di.delete(i.toString()),ae.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.di.add(i.toString()),ae.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),ae.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((r=>this.di.add(r.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((a=>this.di.add(a.toString())))})).next((()=>i.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.di,(i=>{const r=we.fromPath(i);return this.mi(e,r).next((a=>{a||t.removeEntry(r,Ue.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return ae.or([()=>ae.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class bh{constructor(e,t){this.persistence=e,this.fi=new Jo((i=>PB(i.path)),((i,r)=>i.isEqual(r))),this.garbageCollector=Kq(this,t)}static Vi(e,t){return new bh(e,t)}Ti(){}Ii(e){return ae.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((r=>i+r))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}mr(e,t){return ae.forEach(this.fi,((i,r)=>this.wr(e,i,r).next((a=>a?ae.resolve():t(r)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const r=this.persistence.getRemoteDocumentCache(),a=r.newChangeBuffer();return r.ni(e,(u=>this.wr(e,u,t).next((d=>{d||(i++,a.removeEntry(u,Ue.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),ae.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),ae.resolve()}removeReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),ae.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),ae.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=zf(e.data.value)),t}wr(e,t,i){return ae.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.fi.get(t);return ae.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Ts=i,this.Is=r}static Es(e,t){let i=je(),r=je();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}return new tv(e,t.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return K4()?8:MB(En())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,r){const a={result:null};return this.gs(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ps(e,t,r,i).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new r5;return this.ys(e,t,u).next((d=>{if(a.result=d,this.As)return this.ws(e,t,u,d.size)}))})).next((()=>a.result))}ws(e,t,i,r){return i.documentReadCount<this.Vs?($a()<=Qe.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",Ja(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ae.resolve()):($a()<=Qe.DEBUG&&ye("QueryEngine","Query:",Ja(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.ds*r?($a()<=Qe.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",Ja(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,fs(t))):ae.resolve())}gs(e,t){if(tC(t))return ae.resolve(null);let i=fs(t);return this.indexManager.getIndexType(e,i).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=Uy(t,null,"F"),i=fs(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const u=je(...a);return this.fs.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,i).next((p=>{const h=this.bs(t,d);return this.Ss(t,h,u,p.readTime)?this.gs(e,Uy(t,null,"F")):this.Ds(e,h,t,p)}))))})))))}ps(e,t,i,r){return tC(t)||r.isEqual(Ue.min())?ae.resolve(null):this.fs.getDocuments(e,i).next((a=>{const u=this.bs(t,a);return this.Ss(t,u,i,r)?ae.resolve(null):($a()<=Qe.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ja(t)),this.Ds(e,u,t,IB(r,fc)).next((d=>d)))}))}bs(e,t){let i=new Qt(Nx(e));return t.forEach(((r,a)=>{ip(e,a)&&(i=i.add(a))})),i}Ss(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}ys(e,t,i){return $a()<=Qe.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",Ja(t)),this.fs.getDocumentsMatchingQuery(e,t,zr.min(),i)}Ds(e,t,i,r){return this.fs.getDocumentsMatchingQuery(e,i,r).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv="LocalStore",a5=3e8;class l5{constructor(e,t,i,r){this.persistence=e,this.Cs=t,this.serializer=r,this.vs=new At(Xe),this.Fs=new Jo((a=>J_(a)),K_),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Qq(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function u5(n,e,t,i){return new l5(n,e,t,i)}async function tN(n,e){const t=Oe(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next((a=>(r=a,t.Os(e),t.mutationQueue.getAllMutationBatches(i)))).next((a=>{const u=[],d=[];let p=je();for(const h of r){u.push(h.batchId);for(const _ of h.mutations)p=p.add(_.key)}for(const h of a){d.push(h.batchId);for(const _ of h.mutations)p=p.add(_.key)}return t.localDocuments.getDocuments(i,p).next((h=>({Ns:h,removedBatchIds:u,addedBatchIds:d})))}))}))}function c5(n,e){const t=Oe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const r=e.batch.keys(),a=t.xs.newChangeBuffer({trackRemovals:!0});return(function(d,p,h,_){const T=h.batch,E=T.keys();let C=ae.resolve();return E.forEach((M=>{C=C.next((()=>_.getEntry(p,M))).next((U=>{const P=h.docVersions.get(M);ot(P!==null,48541),U.version.compareTo(P)<0&&(T.applyToRemoteDocument(U,h),U.isValidDocument()&&(U.setReadTime(h.commitVersion),_.addEntry(U)))}))})),C.next((()=>d.mutationQueue.removeMutationBatch(p,T)))})(t,i,e,a).next((()=>a.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let p=je();for(let h=0;h<d.mutationResults.length;++h)d.mutationResults[h].transformResults.length>0&&(p=p.add(d.batch.mutations[h].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(i,r)))}))}function nN(n){const e=Oe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function d5(n,e){const t=Oe(n),i=e.snapshotVersion;let r=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.xs.newChangeBuffer({trackRemovals:!0});r=t.vs;const d=[];e.targetChanges.forEach(((_,T)=>{const E=r.get(T);if(!E)return;d.push(t.li.removeMatchingKeys(a,_.removedDocuments,T).next((()=>t.li.addMatchingKeys(a,_.addedDocuments,T))));let C=E.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(T)!==null?C=C.withResumeToken(gn.EMPTY_BYTE_STRING,Ue.min()).withLastLimboFreeSnapshotVersion(Ue.min()):_.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(_.resumeToken,i)),r=r.insert(T,C),(function(U,P,$){return U.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=a5?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0})(E,C,_)&&d.push(t.li.updateTargetData(a,C))}));let p=Ys(),h=je();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,_))})),d.push(f5(a,u,e.documentUpdates).next((_=>{p=_.Bs,h=_.Ls}))),!i.isEqual(Ue.min())){const _=t.li.getLastRemoteSnapshotVersion(a).next((T=>t.li.setTargetsMetadata(a,a.currentSequenceNumber,i)));d.push(_)}return ae.waitFor(d).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,p,h))).next((()=>p))})).then((a=>(t.vs=r,a)))}function f5(n,e,t){let i=je(),r=je();return t.forEach((a=>i=i.add(a))),e.getEntries(n,i).next((a=>{let u=Ys();return t.forEach(((d,p)=>{const h=a.get(d);p.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(d)),p.isNoDocument()&&p.version.isEqual(Ue.min())?(e.removeEntry(d,p.readTime),u=u.insert(d,p)):!h.isValidDocument()||p.version.compareTo(h.version)>0||p.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(p),u=u.insert(d,p)):ye(nv,"Ignoring outdated watch update for ",d,". Current version:",h.version," Watch version:",p.version)})),{Bs:u,Ls:r}}))}function h5(n,e){const t=Oe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=H_),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function p5(n,e){const t=Oe(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let r;return t.li.getTargetData(i,e).next((a=>a?(r=a,ae.resolve(r)):t.li.allocateTargetId(i).next((u=>(r=new Lr(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.li.addTargetData(i,r).next((()=>r)))))))})).then((i=>{const r=t.vs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.vs=t.vs.insert(i.targetId,i),t.Fs.set(e,i.targetId)),i}))}async function qy(n,e,t){const i=Oe(n),r=i.vs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,(u=>i.persistence.referenceDelegate.removeTarget(u,r)))}catch(u){if(!Al(u))throw u;ye(nv,`Failed to update sequence numbers for target ${e}: ${u}`)}i.vs=i.vs.remove(e),i.Fs.delete(r.target)}function pC(n,e,t){const i=Oe(n);let r=Ue.min(),a=je();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(p,h,_){const T=Oe(p),E=T.Fs.get(_);return E!==void 0?ae.resolve(T.vs.get(E)):T.li.getTargetData(h,_)})(i,u,fs(e)).next((d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(u,d.targetId).next((p=>{a=p}))})).next((()=>i.Cs.getDocumentsMatchingQuery(u,e,t?r:Ue.min(),t?a:je()))).next((d=>(m5(i,eq(e),d),{documents:d,ks:a})))))}function m5(n,e,t){let i=n.Ms.get(e)||Ue.min();t.forEach(((r,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),n.Ms.set(e,i)}class mC{constructor(){this.activeTargetIds=oq()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class g5{constructor(){this.vo=new mC,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,i){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new mC,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y5{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC="ConnectivityMonitor";class yC{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ye(gC,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){ye(gC,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bf=null;function Gy(){return bf===null?bf=(function(){return 268435456+Math.round(2147483648*Math.random())})():bf++,"0x"+bf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gg="RestConnection",_5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class v5{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${i}/databases/${r}`,this.$o=this.databaseId.database===Th?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Wo(e,t,i,r,a){const u=Gy(),d=this.Qo(e,t.toUriEncodedString());ye(Gg,`Sending RPC '${e}' ${u}:`,d,i);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(p,r,a);const{host:h}=new URL(d),_=_l(h);return this.zo(e,d,p,i,_).then((T=>(ye(Gg,`Received RPC '${e}' ${u}: `,T),T)),(T=>{throw Go(Gg,`RPC '${e}' ${u} failed with error: `,T,"url: ",d,"request:",i),T}))}jo(e,t,i,r,a,u){return this.Wo(e,t,i,r,a)}Go(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+El})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,a)=>e[a]=r)),i&&i.headers.forEach(((r,a)=>e[a]=r))}Qo(e,t){const i=_5[e];let r=`${this.qo}/v1/${t}:${i}`;return this.databaseInfo.apiKey&&(r=`${r}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),r}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T5{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _n="WebChannelConnection",Uu=(n,e,t)=>{n.listen(e,(i=>{try{t(i)}catch(r){setTimeout((()=>{throw r}),0)}}))};class nl extends v5{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!nl.c_){const e=ox();Uu(e,rx.STAT_EVENT,(t=>{t.stat===xy.PROXY?ye(_n,"STAT_EVENT: detected buffering proxy"):t.stat===xy.NOPROXY&&ye(_n,"STAT_EVENT: detected no buffering proxy")})),nl.c_=!0}}zo(e,t,i,r,a){const u=Gy();return new Promise(((d,p)=>{const h=new ix;h.setWithCredentials(!0),h.listenOnce(sx.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Hf.NO_ERROR:const T=h.getResponseJson();ye(_n,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(T)),d(T);break;case Hf.TIMEOUT:ye(_n,`RPC '${e}' ${u} timed out`),p(new ge(oe.DEADLINE_EXCEEDED,"Request time out"));break;case Hf.HTTP_ERROR:const E=h.getStatus();if(ye(_n,`RPC '${e}' ${u} failed with status:`,E,"response text:",h.getResponseText()),E>0){let C=h.getResponseJson();Array.isArray(C)&&(C=C[0]);const M=C==null?void 0:C.error;if(M&&M.status&&M.message){const U=(function($){const H=$.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(H)>=0?H:oe.UNKNOWN})(M.status);p(new ge(U,M.message))}else p(new ge(oe.UNKNOWN,"Server responded with status "+h.getStatus()))}else p(new ge(oe.UNAVAILABLE,"Connection failed."));break;default:Re(9055,{l_:e,streamId:u,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{ye(_n,`RPC '${e}' ${u} completed.`)}}));const _=JSON.stringify(r);ye(_n,`RPC '${e}' ${u} sending request:`,r),h.send(t,"POST",_,i,15)}))}T_(e,t,i){const r=Gy(),a=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=this.createWebChannelTransport(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Go(d.initMessageHeaders,t,i),d.encodeInitMessageHeaders=!0;const h=a.join("");ye(_n,`Creating RPC '${e}' stream ${r}: ${h}`,d);const _=u.createWebChannel(h,d);this.I_(_);let T=!1,E=!1;const C=new T5({Ho:M=>{E?ye(_n,`Not sending because RPC '${e}' stream ${r} is closed:`,M):(T||(ye(_n,`Opening RPC '${e}' stream ${r} transport.`),_.open(),T=!0),ye(_n,`RPC '${e}' stream ${r} sending:`,M),_.send(M))},Jo:()=>_.close()});return Uu(_,Yu.EventType.OPEN,(()=>{E||(ye(_n,`RPC '${e}' stream ${r} transport opened.`),C.i_())})),Uu(_,Yu.EventType.CLOSE,(()=>{E||(E=!0,ye(_n,`RPC '${e}' stream ${r} transport closed`),C.o_(),this.E_(_))})),Uu(_,Yu.EventType.ERROR,(M=>{E||(E=!0,Go(_n,`RPC '${e}' stream ${r} transport errored. Name:`,M.name,"Message:",M.message),C.o_(new ge(oe.UNAVAILABLE,"The operation could not be completed")))})),Uu(_,Yu.EventType.MESSAGE,(M=>{var U;if(!E){const P=M.data[0];ot(!!P,16349);const $=P,H=($==null?void 0:$.error)||((U=$[0])==null?void 0:U.error);if(H){ye(_n,`RPC '${e}' stream ${r} received error:`,H);const z=H.status;let X=(function(N){const D=Gt[N];if(D!==void 0)return Gx(D)})(z),ue=H.message;z==="NOT_FOUND"&&ue.includes("database")&&ue.includes("does not exist")&&ue.includes(this.databaseId.database)&&Go(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),X===void 0&&(X=oe.INTERNAL,ue="Unknown error status: "+z+" with message "+H.message),E=!0,C.o_(new ge(X,ue)),_.close()}else ye(_n,`RPC '${e}' stream ${r} received:`,P),C.__(P)}})),nl.u_(),setTimeout((()=>{C.s_()}),0),C}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,i){super.Go(e,t,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return ax()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E5(n){return new nl(n)}function Hg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ap(n){return new Cq(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nl.c_=!1;class iN{constructor(e,t,i=1e3,r=1.5,a=6e4){this.Ci=e,this.timerId=t,this.R_=i,this.A_=r,this.V_=a,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-i);r>0&&ye("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C="PersistentStream";class sN{constructor(e,t,i,r,a,u,d,p){this.Ci=e,this.b_=i,this.S_=r,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new iN(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===oe.RESOURCE_EXHAUSTED?(Ks(t.toString()),Ks("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,r])=>{this.D_===t&&this.G_(i,r)}),(i=>{e((()=>{const r=new ge(oe.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)}))}))}G_(e,t){const i=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((r=>{i((()=>this.z_(r)))})),this.stream.onMessage((r=>{i((()=>++this.F_==1?this.H_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ye(_C,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(ye(_C,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class S5 extends sN{constructor(e,t,i,r,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,u),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=Rq(this.serializer,e),i=(function(a){if(!("targetChange"in a))return Ue.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Ue.min():u.readTime?ps(u.readTime):Ue.min()})(e);return this.listener.J_(t,i)}Z_(e){const t={};t.database=By(this.serializer),t.addTarget=(function(a,u){let d;const p=u.target;if(d=ky(p)?{documents:Mq(a,p)}:{query:Dq(a,p).ft},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=$x(a,u.resumeToken);const h=Ly(a,u.expectedCount);h!==null&&(d.expectedCount=h)}else if(u.snapshotVersion.compareTo(Ue.min())>0){d.readTime=Ih(a,u.snapshotVersion.toTimestamp());const h=Ly(a,u.expectedCount);h!==null&&(d.expectedCount=h)}return d})(this.serializer,e);const i=kq(this.serializer,e);i&&(t.labels=i),this.K_(t)}X_(e){const t={};t.database=By(this.serializer),t.removeTarget=e,this.K_(t)}}class A5 extends sN{constructor(e,t,i,r,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,u),this.serializer=a}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return ot(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ot(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ot(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=Nq(e.writeResults,e.commitTime),i=ps(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=By(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>xq(this.serializer,i)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w5{}class C5 extends w5{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new ge(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Wo(e,Oy(t,i),r,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ge(oe.UNKNOWN,a.toString())}))}jo(e,t,i,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.jo(e,Oy(t,i),r,u,d,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ge(oe.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function I5(n,e,t,i){return new C5(n,e,t,i)}class b5{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ks(t),this.aa=!1):ye("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho="RemoteStore";class R5{constructor(e,t,i,r,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=a,this.Aa.Mo((u=>{i.enqueueAndForget((async()=>{Yo(this)&&(ye(Ho,"Restarting streams for network reachability change."),await(async function(p){const h=Oe(p);h.Ea.add(4),await Mc(h),h.Va.set("Unknown"),h.Ea.delete(4),await lp(h)})(this))}))})),this.Va=new b5(i,r)}}async function lp(n){if(Yo(n))for(const e of n.Ra)await e(!0)}async function Mc(n){for(const e of n.Ra)await e(!1)}function rN(n,e){const t=Oe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),ov(t)?rv(t):wl(t).O_()&&sv(t,e))}function iv(n,e){const t=Oe(n),i=wl(t);t.Ia.delete(e),i.O_()&&oN(t,e),t.Ia.size===0&&(i.O_()?i.L_():Yo(t)&&t.Va.set("Unknown"))}function sv(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ue.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}wl(n).Z_(e)}function oN(n,e){n.da.$e(e),wl(n).X_(e)}function rv(n){n.da=new Eq({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),wl(n).start(),n.Va.ua()}function ov(n){return Yo(n)&&!wl(n).x_()&&n.Ia.size>0}function Yo(n){return Oe(n).Ea.size===0}function aN(n){n.da=void 0}async function x5(n){n.Va.set("Online")}async function N5(n){n.Ia.forEach(((e,t)=>{sv(n,e)}))}async function M5(n,e){aN(n),ov(n)?(n.Va.ha(e),rv(n)):n.Va.set("Unknown")}async function D5(n,e,t){if(n.Va.set("Online"),e instanceof zx&&e.state===2&&e.cause)try{await(async function(r,a){const u=a.cause;for(const d of a.targetIds)r.Ia.has(d)&&(await r.remoteSyncer.rejectListen(d,u),r.Ia.delete(d),r.da.removeTarget(d))})(n,e)}catch(i){ye(Ho,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Rh(n,i)}else if(e instanceof Kf?n.da.Xe(e):e instanceof Hx?n.da.st(e):n.da.tt(e),!t.isEqual(Ue.min()))try{const i=await nN(n.localStore);t.compareTo(i)>=0&&await(function(a,u){const d=a.da.Tt(u);return d.targetChanges.forEach(((p,h)=>{if(p.resumeToken.approximateByteSize()>0){const _=a.Ia.get(h);_&&a.Ia.set(h,_.withResumeToken(p.resumeToken,u))}})),d.targetMismatches.forEach(((p,h)=>{const _=a.Ia.get(p);if(!_)return;a.Ia.set(p,_.withResumeToken(gn.EMPTY_BYTE_STRING,_.snapshotVersion)),oN(a,p);const T=new Lr(_.target,p,h,_.sequenceNumber);sv(a,T)})),a.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(i){ye(Ho,"Failed to raise snapshot:",i),await Rh(n,i)}}async function Rh(n,e,t){if(!Al(e))throw e;n.Ea.add(1),await Mc(n),n.Va.set("Offline"),t||(t=()=>nN(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ye(Ho,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await lp(n)}))}function lN(n,e){return e().catch((t=>Rh(n,t,e)))}async function up(n){const e=Oe(n),t=Yr(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:H_;for(;P5(e);)try{const r=await h5(e.localStore,i);if(r===null){e.Ta.length===0&&t.L_();break}i=r.batchId,k5(e,r)}catch(r){await Rh(e,r)}uN(e)&&cN(e)}function P5(n){return Yo(n)&&n.Ta.length<10}function k5(n,e){n.Ta.push(e);const t=Yr(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function uN(n){return Yo(n)&&!Yr(n).x_()&&n.Ta.length>0}function cN(n){Yr(n).start()}async function V5(n){Yr(n).ra()}async function U5(n){const e=Yr(n);for(const t of n.Ta)e.ea(t.mutations)}async function L5(n,e,t){const i=n.Ta.shift(),r=Q_.from(i,e,t);await lN(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await up(n)}async function O5(n,e){e&&Yr(n).Y_&&await(async function(i,r){if((function(u){return _q(u)&&u!==oe.ABORTED})(r.code)){const a=i.Ta.shift();Yr(i).B_(),await lN(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,r))),await up(i)}})(n,e),uN(n)&&cN(n)}async function vC(n,e){const t=Oe(n);t.asyncQueue.verifyOperationInProgress(),ye(Ho,"RemoteStore received new credentials");const i=Yo(t);t.Ea.add(3),await Mc(t),i&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await lp(t)}async function F5(n,e){const t=Oe(n);e?(t.Ea.delete(2),await lp(t)):e||(t.Ea.add(2),await Mc(t),t.Va.set("Unknown"))}function wl(n){return n.ma||(n.ma=(function(t,i,r){const a=Oe(t);return a.sa(),new S5(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)})(n.datastore,n.asyncQueue,{Zo:x5.bind(null,n),Yo:N5.bind(null,n),t_:M5.bind(null,n),J_:D5.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),ov(n)?rv(n):n.Va.set("Unknown")):(await n.ma.stop(),aN(n))}))),n.ma}function Yr(n){return n.fa||(n.fa=(function(t,i,r){const a=Oe(t);return a.sa(),new A5(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:V5.bind(null,n),t_:O5.bind(null,n),ta:U5.bind(null,n),na:L5.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await up(n)):(await n.fa.stop(),n.Ta.length>0&&(ye(Ho,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e,t,i,r,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=a,this.deferred=new Hs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,a){const u=Date.now()+i,d=new av(e,t,u,r,a);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function lv(n,e){if(Ks("AsyncQueue",`${e}: ${n}`),Al(n))return new ge(oe.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{static emptySet(e){return new il(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||we.comparator(t.key,i.key):(t,i)=>we.comparator(t.key,i.key),this.keyedMap=Wu(),this.sortedSet=new At(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof il)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,a=i.getNext().key;if(!r.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new il;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(){this.ga=new At(we.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Re(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class fl{constructor(e,t,i,r,a,u,d,p,h){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=h}static fromInitialDocuments(e,t,i,r,a){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new fl(e,t,il.emptySet(t),u,i,r,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&np(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B5{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class q5{constructor(){this.queries=EC(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const r=Oe(t),a=r.queries;r.queries=EC(),a.forEach(((u,d)=>{for(const p of d.ba)p.onError(i)}))})(this,new ge(oe.ABORTED,"Firestore shutting down"))}}function EC(){return new Jo((n=>xx(n)),np)}async function dN(n,e){const t=Oe(n);let i=3;const r=e.query;let a=t.queries.get(r);a?!a.Sa()&&e.Da()&&(i=2):(a=new B5,i=e.Da()?0:1);try{switch(i){case 0:a.wa=await t.onListen(r,!0);break;case 1:a.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(u){const d=lv(u,`Initialization of query '${Ja(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,a),a.ba.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&uv(t)}async function fN(n,e){const t=Oe(n),i=e.query;let r=3;const a=t.queries.get(i);if(a){const u=a.ba.indexOf(e);u>=0&&(a.ba.splice(u,1),a.ba.length===0?r=e.Da()?0:1:!a.Sa()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function G5(n,e){const t=Oe(n);let i=!1;for(const r of e){const a=r.query,u=t.queries.get(a);if(u){for(const d of u.ba)d.Fa(r)&&(i=!0);u.wa=r}}i&&uv(t)}function H5(n,e,t){const i=Oe(n),r=i.queries.get(e);if(r)for(const a of r.ba)a.onError(t);i.queries.delete(e)}function uv(n){n.Ca.forEach((e=>{e.next()}))}var Hy,SC;(SC=Hy||(Hy={})).Ma="default",SC.Cache="cache";class hN{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new fl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=fl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Hy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e){this.key=e}}class mN{constructor(e){this.key=e}}class z5{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=je(),this.mutatedKeys=je(),this.eu=Nx(e),this.tu=new il(this.eu)}get nu(){return this.Za}ru(e,t){const i=t?t.iu:new TC,r=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,u=r,d=!1;const p=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((_,T)=>{const E=r.get(_),C=ip(this.query,T)?T:null,M=!!E&&this.mutatedKeys.has(E.key),U=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let P=!1;E&&C?E.data.isEqual(C.data)?M!==U&&(i.track({type:3,doc:C}),P=!0):this.su(E,C)||(i.track({type:2,doc:C}),P=!0,(p&&this.eu(C,p)>0||h&&this.eu(C,h)<0)&&(d=!0)):!E&&C?(i.track({type:0,doc:C}),P=!0):E&&!C&&(i.track({type:1,doc:E}),P=!0,(p||h)&&(d=!0)),P&&(C?(u=u.add(C),a=U?a.add(_):a.delete(_)):(u=u.delete(_),a=a.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),a=a.delete(_.key),i.track({type:1,doc:_})}return{tu:u,iu:i,Ss:d,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((_,T)=>(function(C,M){const U=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re(20277,{Vt:P})}};return U(C)-U(M)})(_.type,T.type)||this.eu(_.doc,T.doc))),this.ou(i),r=r??!1;const d=t&&!r?this._u():[],p=this.Ya.size===0&&this.current&&!r?1:0,h=p!==this.Xa;return this.Xa=p,u.length!==0||h?{snapshot:new fl(this.query,e.tu,a,u,e.mutatedKeys,p===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new TC,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=je(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const t=[];return e.forEach((i=>{this.Ya.has(i)||t.push(new mN(i))})),this.Ya.forEach((i=>{e.has(i)||t.push(new pN(i))})),t}cu(e){this.Za=e.ks,this.Ya=je();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return fl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const cv="SyncEngine";class $5{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class J5{constructor(e){this.key=e,this.hu=!1}}class K5{constructor(e,t,i,r,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Jo((d=>xx(d)),np),this.Iu=new Map,this.Eu=new Set,this.Ru=new At(we.comparator),this.Au=new Map,this.Vu=new Z_,this.du={},this.mu=new Map,this.fu=dl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Y5(n,e,t=!0){const i=EN(n);let r;const a=i.Tu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),r=a.view.lu()):r=await gN(i,e,t,!0),r}async function W5(n,e){const t=EN(n);await gN(t,e,!0,!1)}async function gN(n,e,t,i){const r=await p5(n.localStore,fs(e)),a=r.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let d;return i&&(d=await Q5(n,e,a,u==="current",r.resumeToken)),n.isPrimaryClient&&t&&rN(n.remoteStore,r),d}async function Q5(n,e,t,i,r){n.pu=(T,E,C)=>(async function(U,P,$,H){let z=P.view.ru($);z.Ss&&(z=await pC(U.localStore,P.query,!1).then((({documents:N})=>P.view.ru(N,z))));const X=H&&H.targetChanges.get(P.targetId),ue=H&&H.targetMismatches.get(P.targetId)!=null,W=P.view.applyChanges(z,U.isPrimaryClient,X,ue);return wC(U,P.targetId,W.au),W.snapshot})(n,T,E,C);const a=await pC(n.localStore,e,!0),u=new z5(e,a.ks),d=u.ru(a.documents),p=Nc.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),h=u.applyChanges(d,n.isPrimaryClient,p);wC(n,t,h.au);const _=new $5(e,t,u);return n.Tu.set(e,_),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),h.snapshot}async function X5(n,e,t){const i=Oe(n),r=i.Tu.get(e),a=i.Iu.get(r.targetId);if(a.length>1)return i.Iu.set(r.targetId,a.filter((u=>!np(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await qy(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),t&&iv(i.remoteStore,r.targetId),zy(i,r.targetId)})).catch(Sl)):(zy(i,r.targetId),await qy(i.localStore,r.targetId,!0))}async function j5(n,e){const t=Oe(n),i=t.Tu.get(e),r=t.Iu.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),iv(t.remoteStore,i.targetId))}async function Z5(n,e,t){const i=oG(n);try{const r=await(function(u,d){const p=Oe(u),h=_t.now(),_=d.reduce(((C,M)=>C.add(M.key)),je());let T,E;return p.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let M=Ys(),U=je();return p.xs.getEntries(C,_).next((P=>{M=P,M.forEach((($,H)=>{H.isValidDocument()||(U=U.add($))}))})).next((()=>p.localDocuments.getOverlayedDocuments(C,M))).next((P=>{T=P;const $=[];for(const H of d){const z=hq(H,T.get(H.key).overlayedDocument);z!=null&&$.push(new Ko(H.key,z,Ex(z.value.mapValue),hs.exists(!0)))}return p.mutationQueue.addMutationBatch(C,h,$,d)})).next((P=>{E=P;const $=P.applyToLocalDocumentSet(T,U);return p.documentOverlayCache.saveOverlays(C,P.batchId,$)}))})).then((()=>({batchId:E.batchId,changes:Dx(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),(function(u,d,p){let h=u.du[u.currentUser.toKey()];h||(h=new At(Xe)),h=h.insert(d,p),u.du[u.currentUser.toKey()]=h})(i,r.batchId,t),await Dc(i,r.changes),await up(i.remoteStore)}catch(r){const a=lv(r,"Failed to persist write");t.reject(a)}}async function yN(n,e){const t=Oe(n);try{const i=await d5(t.localStore,e);e.targetChanges.forEach(((r,a)=>{const u=t.Au.get(a);u&&(ot(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?u.hu=!0:r.modifiedDocuments.size>0?ot(u.hu,14607):r.removedDocuments.size>0&&(ot(u.hu,42227),u.hu=!1))})),await Dc(t,i,e)}catch(i){await Sl(i)}}function AC(n,e,t){const i=Oe(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const r=[];i.Tu.forEach(((a,u)=>{const d=u.view.va(e);d.snapshot&&r.push(d.snapshot)})),(function(u,d){const p=Oe(u);p.onlineState=d;let h=!1;p.queries.forEach(((_,T)=>{for(const E of T.ba)E.va(d)&&(h=!0)})),h&&uv(p)})(i.eventManager,e),r.length&&i.Pu.J_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function eG(n,e,t){const i=Oe(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.Au.get(e),a=r&&r.key;if(a){let u=new At(we.comparator);u=u.insert(a,Tn.newNoDocument(a,Ue.min()));const d=je().add(a),p=new op(Ue.min(),new Map,new At(Xe),u,d);await yN(i,p),i.Ru=i.Ru.remove(a),i.Au.delete(e),dv(i)}else await qy(i.localStore,e,!1).then((()=>zy(i,e,t))).catch(Sl)}async function tG(n,e){const t=Oe(n),i=e.batch.batchId;try{const r=await c5(t.localStore,e);vN(t,i,null),_N(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Dc(t,r)}catch(r){await Sl(r)}}async function nG(n,e,t){const i=Oe(n);try{const r=await(function(u,d){const p=Oe(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let _;return p.mutationQueue.lookupMutationBatch(h,d).next((T=>(ot(T!==null,37113),_=T.keys(),p.mutationQueue.removeMutationBatch(h,T)))).next((()=>p.mutationQueue.performConsistencyCheck(h))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(h,_,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,_))).next((()=>p.localDocuments.getDocuments(h,_)))}))})(i.localStore,e);vN(i,e,t),_N(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Dc(i,r)}catch(r){await Sl(r)}}function _N(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function vN(n,e,t){const i=Oe(n);let r=i.du[i.currentUser.toKey()];if(r){const a=r.get(e);a&&(t?a.reject(t):a.resolve(),r=r.remove(e)),i.du[i.currentUser.toKey()]=r}}function zy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((i=>{n.Vu.containsKey(i)||TN(n,i)}))}function TN(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(iv(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),dv(n))}function wC(n,e,t){for(const i of t)i instanceof pN?(n.Vu.addReference(i.key,e),iG(n,i)):i instanceof mN?(ye(cv,"Document no longer in limbo: "+i.key),n.Vu.removeReference(i.key,e),n.Vu.containsKey(i.key)||TN(n,i.key)):Re(19791,{wu:i})}function iG(n,e){const t=e.key,i=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(i)||(ye(cv,"New document in limbo: "+t),n.Eu.add(i),dv(n))}function dv(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new we(mt.fromString(e)),i=n.fu.next();n.Au.set(i,new J5(t)),n.Ru=n.Ru.insert(t,i),rN(n.remoteStore,new Lr(fs(Y_(t.path)),i,"TargetPurposeLimboResolution",Zh.ce))}}async function Dc(n,e,t){const i=Oe(n),r=[],a=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((d,p)=>{u.push(i.pu(p,e,t).then((h=>{var _;if((h||t)&&i.isPrimaryClient){const T=h?!h.fromCache:(_=t==null?void 0:t.targetChanges.get(p.targetId))==null?void 0:_.current;i.sharedClientState.updateQueryState(p.targetId,T?"current":"not-current")}if(h){r.push(h);const T=tv.Es(p.targetId,h);a.push(T)}})))})),await Promise.all(u),i.Pu.J_(r),await(async function(p,h){const _=Oe(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>ae.forEach(h,(E=>ae.forEach(E.Ts,(C=>_.persistence.referenceDelegate.addReference(T,E.targetId,C))).next((()=>ae.forEach(E.Is,(C=>_.persistence.referenceDelegate.removeReference(T,E.targetId,C)))))))))}catch(T){if(!Al(T))throw T;ye(nv,"Failed to update sequence numbers: "+T)}for(const T of h){const E=T.targetId;if(!T.fromCache){const C=_.vs.get(E),M=C.snapshotVersion,U=C.withLastLimboFreeSnapshotVersion(M);_.vs=_.vs.insert(E,U)}}})(i.localStore,a))}async function sG(n,e){const t=Oe(n);if(!t.currentUser.isEqual(e)){ye(cv,"User change. New user:",e.toKey());const i=await tN(t.localStore,e);t.currentUser=e,(function(a,u){a.mu.forEach((d=>{d.forEach((p=>{p.reject(new ge(oe.CANCELLED,u))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Dc(t,i.Ns)}}function rG(n,e){const t=Oe(n),i=t.Au.get(e);if(i&&i.hu)return je().add(i.key);{let r=je();const a=t.Iu.get(e);if(!a)return r;for(const u of a){const d=t.Tu.get(u);r=r.unionWith(d.view.nu)}return r}}function EN(n){const e=Oe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=yN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=eG.bind(null,e),e.Pu.J_=G5.bind(null,e.eventManager),e.Pu.yu=H5.bind(null,e.eventManager),e}function oG(n){const e=Oe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=tG.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=nG.bind(null,e),e}class xh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ap(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return u5(this.persistence,new o5,e.initialUser,this.serializer)}Cu(e){return new eN(ev.Vi,this.serializer)}Du(e){return new g5}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}xh.provider={build:()=>new xh};class aG extends xh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ot(this.persistence.referenceDelegate instanceof bh,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new $q(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?kn.withCacheSize(this.cacheSizeBytes):kn.DEFAULT;return new eN((i=>bh.Vi(i,t)),this.serializer)}}class $y{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>AC(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=sG.bind(null,this.syncEngine),await F5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new q5})()}createDatastore(e){const t=ap(e.databaseInfo.databaseId),i=E5(e.databaseInfo);return I5(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,r,a,u,d){return new R5(i,r,a,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>AC(this.syncEngine,t,0)),(function(){return yC.v()?new yC:new y5})())}createSyncEngine(e,t){return(function(r,a,u,d,p,h,_){const T=new K5(r,a,u,d,p,h);return _&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(r){const a=Oe(r);ye(Ho,"RemoteStore shutting down."),a.Ea.add(5),await Mc(a),a.Aa.shutdown(),a.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}$y.provider={build:()=>new $y};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ks("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr="FirestoreClient";class lG{constructor(e,t,i,r,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this._databaseInfo=r,this.user=vn.UNAUTHENTICATED,this.clientId=G_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async u=>{ye(Wr,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(ye(Wr,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Hs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=lv(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function zg(n,e){n.asyncQueue.verifyOperationInProgress(),ye(Wr,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async r=>{i.isEqual(r)||(await tN(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function CC(n,e){n.asyncQueue.verifyOperationInProgress();const t=await uG(n);ye(Wr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>vC(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,r)=>vC(e.remoteStore,r))),n._onlineComponents=e}async function uG(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ye(Wr,"Using user provided OfflineComponentProvider");try{await zg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===oe.FAILED_PRECONDITION||r.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;Go("Error using user provided cache. Falling back to memory cache: "+t),await zg(n,new xh)}}else ye(Wr,"Using default OfflineComponentProvider"),await zg(n,new aG(void 0));return n._offlineComponents}async function AN(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ye(Wr,"Using user provided OnlineComponentProvider"),await CC(n,n._uninitializedComponentsProvider._online)):(ye(Wr,"Using default OnlineComponentProvider"),await CC(n,new $y))),n._onlineComponents}function cG(n){return AN(n).then((e=>e.syncEngine))}async function wN(n){const e=await AN(n),t=e.eventManager;return t.onListen=Y5.bind(null,e.syncEngine),t.onUnlisten=X5.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=W5.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=j5.bind(null,e.syncEngine),t}function dG(n,e,t={}){const i=new Hs;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,p,h){const _=new SN({next:E=>{_.Nu(),u.enqueueAndForget((()=>fN(a,T)));const C=E.docs.has(d);!C&&E.fromCache?h.reject(new ge(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&E.fromCache&&p&&p.source==="server"?h.reject(new ge(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(E)},error:E=>h.reject(E)}),T=new hN(Y_(d.path),_,{includeMetadataChanges:!0,Ka:!0});return dN(a,T)})(await wN(n),n.asyncQueue,e,t,i))),i.promise}function fG(n,e,t={}){const i=new Hs;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,p,h){const _=new SN({next:E=>{_.Nu(),u.enqueueAndForget((()=>fN(a,T))),E.fromCache&&p.source==="server"?h.reject(new ge(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(E)},error:E=>h.reject(E)}),T=new hN(d,_,{includeMetadataChanges:!0,Ka:!0});return dN(a,T)})(await wN(n),n.asyncQueue,e,t,i))),i.promise}function hG(n,e){const t=new Hs;return n.asyncQueue.enqueueAndForget((async()=>Z5(await cG(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pG="ComponentProvider",IC=new Map;function mG(n,e,t,i,r){return new UB(n,e,t,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,CN(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN="firestore.googleapis.com",bC=!0;class RC{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ge(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=IN,this.ssl=bC}else this.host=e.host,this.ssl=e.ssl??bC;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Zx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Hq)throw new ge(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}CB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=CN(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ge(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ge(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ge(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cp{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new RC({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new RC(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new mB;switch(i.type){case"firstParty":return new vB(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ge(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=IC.get(t);i&&(ye(pG,"Removing Datastore"),IC.delete(t),i.terminate())})(this),Promise.resolve()}}function gG(n,e,t,i={}){var h;n=Hr(n,cp);const r=_l(e),a=n._getSettings(),u={...a,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;r&&(_R(`https://${d}`),vR("Firestore",!0)),a.host!==IN&&a.host!==d&&Go("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...a,host:d,ssl:r,emulatorOptions:i};if(!Oo(p,u)&&(n._setSettings(p),i.mockUserToken)){let _,T;if(typeof i.mockUserToken=="string")_=i.mockUserToken,T=vn.MOCK_USER;else{_=O4(i.mockUserToken,(h=n._app)==null?void 0:h.options.projectId);const E=i.mockUserToken.sub||i.mockUserToken.user_id;if(!E)throw new ge(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new vn(E)}n._authCredentials=new gB(new ux(_,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Cl(this.firestore,e,this._query)}}class $t{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $t(this.firestore,e,this._key)}toJSON(){return{type:$t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(bc(t,$t._jsonSchema))return new $t(e,i||null,new we(mt.fromString(t.referencePath)))}}$t._jsonSchemaVersion="firestore/documentReference/1.0",$t._jsonSchema={type:zt("string",$t._jsonSchemaVersion),referencePath:zt("string")};class Gr extends Cl{constructor(e,t,i){super(e,t,Y_(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $t(this.firestore,null,new we(e))}withConverter(e){return new Gr(this.firestore,e,this._path)}}function bN(n,e,...t){if(n=Ln(n),cx("collection","path",e),n instanceof cp){const i=mt.fromString(e,...t);return qw(i),new Gr(n,null,i)}{if(!(n instanceof $t||n instanceof Gr))throw new ge(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(mt.fromString(e,...t));return qw(i),new Gr(n.firestore,null,i)}}function fv(n,e,...t){if(n=Ln(n),arguments.length===1&&(e=G_.newId()),cx("doc","path",e),n instanceof cp){const i=mt.fromString(e,...t);return Bw(i),new $t(n,null,new we(i))}{if(!(n instanceof $t||n instanceof Gr))throw new ge(oe.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(mt.fromString(e,...t));return Bw(i),new $t(n.firestore,n instanceof Gr?n.converter:null,new we(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC="AsyncQueue";class NC{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new iN(this,"async_queue_retry"),this._c=()=>{const i=Hg();i&&ye(xC,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Hg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Hg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Hs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Al(e))throw e;ye(xC,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Ks("INTERNAL UNHANDLED ERROR: ",MC(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=av.createAndSchedule(this,e,t,i,(a=>this.hc(a)));return this.tc.push(r),r}uc(){this.nc&&Re(47125,{Pc:MC(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function MC(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Pc extends cp{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new NC,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new NC(e),this._firestoreClient=void 0,await e}}}function yG(n,e){const t=typeof n=="object"?n:AR(),i=typeof n=="string"?n:Th,r=N_(t,"firestore").getImmediate({identifier:i});if(!r._initialized){const a=U4("firestore");a&&gG(r,...a)}return r}function hv(n){if(n._terminated)throw new ge(oe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||_G(n),n._firestoreClient}function _G(n){var i,r,a,u;const e=n._freezeSettings(),t=mG(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,(r=n._app)==null?void 0:r.options.apiKey,e);n._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new lG(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(p){const h=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(h),_online:h}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fi(gn.fromBase64String(e))}catch(t){throw new ge(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new fi(gn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:fi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(bc(e,fi._jsonSchema))return fi.fromBase64String(e.bytes)}}fi._jsonSchemaVersion="firestore/bytes/1.0",fi._jsonSchema={type:zt("string",fi._jsonSchemaVersion),bytes:zt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ge(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Xe(this._lat,e._lat)||Xe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ms._jsonSchemaVersion}}static fromJSON(e){if(bc(e,ms._jsonSchema))return new ms(e.latitude,e.longitude)}}ms._jsonSchemaVersion="firestore/geoPoint/1.0",ms._jsonSchema={type:zt("string",ms._jsonSchemaVersion),latitude:zt("number"),longitude:zt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,r){if(i.length!==r.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==r[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Vi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(bc(e,Vi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Vi(e.vectorValues);throw new ge(oe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Vi._jsonSchemaVersion="firestore/vectorValue/1.0",Vi._jsonSchema={type:zt("string",Vi._jsonSchemaVersion),vectorValues:zt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vG=/^__.*__$/;class TG{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Ko(e,this.data,this.fieldMask,t,this.fieldTransforms):new xc(e,this.data,t,this.fieldTransforms)}}function NN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re(40011,{dataSource:n})}}class pv{constructor(e,t,i,r,a,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,a===void 0&&this.validatePath(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new pv({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var r;const t=(r=this.path)==null?void 0:r.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var r;const t=(r=this.path)==null?void 0:r.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Nh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(NN(this.dataSource)&&vG.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class EG{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||ap(e)}createContext(e,t,i,r=!1){return new pv({dataSource:e,methodName:t,targetDoc:i,path:pn.emptyPath(),arrayElement:!1,hasConverter:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function mv(n){const e=n._freezeSettings(),t=ap(n._databaseId);return new EG(n._databaseId,!!e.ignoreUndefinedProperties,t)}function MN(n,e,t,i,r,a={}){const u=n.createContext(a.merge||a.mergeFields?2:0,e,t,r);kN("Data must be an object, but it was:",u,i);const d=DN(i,u);let p,h;if(a.merge)p=new Mi(u.fieldMask),h=u.fieldTransforms;else if(a.mergeFields){const _=[];for(const T of a.mergeFields){const E=yv(e,T,t);if(!u.contains(E))throw new ge(oe.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);CG(_,E)||_.push(E)}p=new Mi(_),h=u.fieldTransforms.filter((T=>p.covers(T.field)))}else p=null,h=u.fieldTransforms;return new TG(new di(d),p,h)}function SG(n,e,t,i=!1){return gv(t,n.createContext(i?4:3,e))}function gv(n,e){if(PN(n=Ln(n)))return kN("Unsupported field value:",e,n),DN(n,e);if(n instanceof xN)return(function(i,r){if(!NN(r.dataSource))throw r.createError(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.createError(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(r);a&&r.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,r){const a=[];let u=0;for(const d of i){let p=gv(d,r.childContextForArray(u));p==null&&(p={nullValue:"NULL_VALUE"}),a.push(p),u++}return{arrayValue:{values:a}}})(n,e)}return(function(i,r){if((i=Ln(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return aq(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=_t.fromDate(i);return{timestampValue:Ih(r.serializer,a)}}if(i instanceof _t){const a=new _t(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ih(r.serializer,a)}}if(i instanceof ms)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof fi)return{bytesValue:$x(r.serializer,i._byteString)};if(i instanceof $t){const a=r.databaseId,u=i.firestore._databaseId;if(!u.isEqual(a))throw r.createError(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:j_(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Vi)return(function(u,d){const p=u instanceof Vi?u.toArray():u;return{mapValue:{fields:{[vx]:{stringValue:Tx},[Eh]:{arrayValue:{values:p.map((_=>{if(typeof _!="number")throw d.createError("VectorValues must only contain numeric values.");return W_(d.serializer,_)}))}}}}}})(i,r);if(jx(i))return i._toProto(r.serializer);throw r.createError(`Unsupported field value: ${jh(i)}`)})(n,e)}function DN(n,e){const t={};return hx(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$o(n,((i,r)=>{const a=gv(r,e.childContextForField(i));a!=null&&(t[i]=a)})),{mapValue:{fields:t}}}function PN(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof _t||n instanceof ms||n instanceof fi||n instanceof $t||n instanceof xN||n instanceof Vi||jx(n))}function kN(n,e,t){if(!PN(t)||!dx(t)){const i=jh(t);throw i==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+i)}}function yv(n,e,t){if((e=Ln(e))instanceof RN)return e._internalPath;if(typeof e=="string")return wG(n,e);throw Nh("Field path arguments must be of type string or ",n,!1,void 0,t)}const AG=new RegExp("[~\\*/\\[\\]]");function wG(n,e,t){if(e.search(AG)>=0)throw Nh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new RN(...e.split("."))._internalPath}catch{throw Nh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Nh(n,e,t,i,r){const a=i&&!i.isEmpty(),u=r!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(a||u)&&(p+=" (found",a&&(p+=` in field ${i}`),u&&(p+=` in document ${r}`),p+=")"),new ge(oe.INVALID_ARGUMENT,d+n+p)}function CG(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IG{convertValue(e,t="none"){switch(Kr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Jr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Re(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return $o(e,((r,a)=>{i[r]=this.convertValue(a,t)})),i}convertVectorValue(e){var i,r,a;const t=(a=(r=(i=e.fields)==null?void 0:i[Eh].arrayValue)==null?void 0:r.values)==null?void 0:a.map((u=>Dt(u.doubleValue)));return new Vi(t)}convertGeoPoint(e){return new ms(Dt(e.latitude),Dt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=tp(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(hc(e));default:return null}}convertTimestamp(e){const t=$r(e);return new _t(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=mt.fromString(e);ot(Xx(i),9688,{name:e});const r=new pc(i.get(1),i.get(3)),a=new we(i.popFirst(5));return r.isEqual(t)||Ks(`Document ${a} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN extends IG{constructor(e){super(),this.firestore=e}convertBytes(e){return new fi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $t(this.firestore,null,t)}}const DC="@firebase/firestore",PC="4.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e,t,i,r,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new $t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new bG(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(yv("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class bG extends UN{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RG(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ge(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _v{}class xG extends _v{}function NG(n,e,...t){let i=[];e instanceof _v&&i.push(e),i=i.concat(t),(function(a){const u=a.filter((p=>p instanceof Tv)).length,d=a.filter((p=>p instanceof vv)).length;if(u>1||u>0&&d>0)throw new ge(oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const r of i)n=r._apply(n);return n}class vv extends xG{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new vv(e,t,i)}_apply(e){const t=this._parse(e);return LN(e._query,t),new Cl(e.firestore,e.converter,Vy(e._query,t))}_parse(e){const t=mv(e.firestore);return(function(a,u,d,p,h,_,T){let E;if(h.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ge(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){VC(T,_);const M=[];for(const U of T)M.push(kC(p,a,U));E={arrayValue:{values:M}}}else E=kC(p,a,T)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||VC(T,_),E=SG(d,u,T,_==="in"||_==="not-in");return Ht.create(h,_,E)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class Tv extends _v{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Tv(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Ui.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(r,a){let u=r;const d=a.getFlattenedFilters();for(const p of d)LN(u,p),u=Vy(u,p)})(e._query,t),new Cl(e.firestore,e.converter,Vy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function kC(n,e,t){if(typeof(t=Ln(t))=="string"){if(t==="")throw new ge(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Rx(e)&&t.indexOf("/")!==-1)throw new ge(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(mt.fromString(t));if(!we.isDocumentKey(i))throw new ge(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Ww(n,new we(i))}if(t instanceof $t)return Ww(n,t._key);throw new ge(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jh(t)}.`)}function VC(n,e){if(!Array.isArray(n)||n.length===0)throw new ge(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function LN(n,e){const t=(function(r,a){for(const u of r)for(const d of u.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ge(oe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ge(oe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function ON(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class Xu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Lo extends UN{constructor(e,t,i,r,a,u){super(e,t,i,r,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Yf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(yv("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(oe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Lo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Lo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Lo._jsonSchema={type:zt("string",Lo._jsonSchemaVersion),bundleSource:zt("string","DocumentSnapshot"),bundleName:zt("string"),bundle:zt("string")};class Yf extends Lo{data(e={}){return super.data(e)}}class sl{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Xu(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Yf(this._firestore,this._userDataWriter,i.key,i,new Xu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,a){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map((d=>{const p=new Yf(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Xu(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const p=new Yf(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Xu(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,_=-1;return d.type!==0&&(h=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),_=u.indexOf(d.doc.key)),{type:MG(d.type),doc:p,oldIndex:h,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(oe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=sl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=G_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],r=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),r.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function MG(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sl._jsonSchemaVersion="firestore/querySnapshot/1.0",sl._jsonSchema={type:zt("string",sl._jsonSchemaVersion),bundleSource:zt("string","QuerySnapshot"),bundleName:zt("string"),bundle:zt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DG(n){n=Hr(n,$t);const e=Hr(n.firestore,Pc),t=hv(e);return dG(t,n._key).then((i=>UG(e,n,i)))}function PG(n){n=Hr(n,Cl);const e=Hr(n.firestore,Pc),t=hv(e),i=new VN(e);return RG(n._query),fG(t,n._query).then((r=>new sl(e,i,n,r)))}function kG(n,e,t){n=Hr(n,$t);const i=Hr(n.firestore,Pc),r=ON(n.converter,e,t),a=mv(i);return FN(i,[MN(a,"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,hs.none())])}function VG(n,e){const t=Hr(n.firestore,Pc),i=fv(n),r=ON(n.converter,e),a=mv(n.firestore);return FN(t,[MN(a,"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,hs.exists(!1))]).then((()=>i))}function FN(n,e){const t=hv(n);return hG(t,e)}function UG(n,e,t){const i=t.docs.get(e._key),r=new VN(n);return new Lo(n,r,e._key,i,new Xu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){pB(vl),ol(new Fo("firestore",((i,{instanceIdentifier:r,options:a})=>{const u=i.getProvider("app").getImmediate(),d=new Pc(new yB(i.getProvider("auth-internal")),new TB(u,i.getProvider("app-check-internal")),LB(u,r),u);return a={useFetchStreams:t,...a},d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),Br(DC,PC,e),Br(DC,PC,"esm2020")})();const LG={apiKey:"AIzaSyAOifhW06Co4FoqrKWqW43hVKqF-43EoD0",authDomain:"kisan-mitra-ai-a362f.firebaseapp.com",projectId:"kisan-mitra-ai-a362f",storageBucket:"kisan-mitra-ai-a362f.firebasestorage.app",messagingSenderId:"483867268048",appId:"1:483867268048:web:2da049c9ba94e0cf339fd5",measurementId:"G-E47146W11C"},BN=SR(LG),Ev=fB(BN),dp=yG(BN),OG=new Bs,FG=async()=>{try{const e=(await EF(Ev,OG)).user;return await qN({uid:e.uid,name:e.displayName||"Farmer",email:e.email||"",photoURL:e.photoURL||"",onboarded:!1,aiProvider:0,language:"en",address:"",farmSize:0,crops:[],phone:e.phoneNumber||""}),e}catch(n){throw console.error("Google Sign-In Error:",n),n}},BG=async()=>{try{await tF(Ev)}catch(n){throw console.error("Sign Out Error:",n),n}},qG=n=>eF(Ev,n),qN=async n=>{try{if(!n.uid){console.warn("No user ID provided");return}const e=fv(dp,"users",n.uid);await kG(e,{...n,updatedAt:new Date().toISOString(),createdAt:n.createdAt||new Date().toISOString()},{merge:!0})}catch(e){throw console.error("Error saving user profile:",e),e}},GG=async n=>{try{const e=fv(dp,"users",n),t=await DG(e);return t.exists()?t.data():null}catch(e){return console.error("Error getting user profile:",e),null}},HG=async(n,e)=>{try{const t=bN(dp,"users",n,"history");return(await VG(t,{...e,timestamp:new Date().toISOString()})).id}catch(t){throw console.error("Error saving diagnosis result:",t),t}},zG=async n=>{try{const e=bN(dp,"users",n,"history"),t=NG(e),i=await PG(t),r=[];return i.forEach(a=>{r.push({id:a.id,...a.data()})}),r.sort((a,u)=>{const d=new Date(a.timestamp||0).getTime();return new Date(u.timestamp||0).getTime()-d})}catch(e){return console.error("Error getting user history:",e),[]}},$G=({onLoginSuccess:n})=>{const[e,t]=He.useState(!1),[i,r]=He.useState(null),a=async()=>{t(!0),r(null);try{await FG(),n()}catch(u){r(u.message||"Failed to sign in with Google"),console.error("Login error:",u)}finally{t(!1)}};return I.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-green-900 via-green-950 to-black flex flex-col items-center justify-center gap-8 p-6",children:[I.jsxs("div",{className:"text-center mb-8",children:[I.jsx("h1",{className:"text-5xl font-black text-lime-400 tracking-[0.3em] uppercase",children:"Kisan Mitra AI"}),I.jsx("p",{className:"text-white/60 text-sm mt-2 tracking-widest",children:"SMART FARMER ASSISTANT"}),I.jsx("p",{className:"text-white/40 text-xs mt-1",children:"By Onkar Mahamuni"})]}),I.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-lime-500/20 rounded-2xl p-8 w-full max-w-md shadow-2xl",children:[I.jsx("h2",{className:"text-white text-2xl font-bold mb-2 text-center",children:"Welcome to the Farm"}),I.jsx("p",{className:"text-white/60 text-center text-sm mb-8",children:"Sign in to access your personalized farming AI assistant and save your data securely."}),I.jsx("button",{onClick:a,disabled:e,className:"w-full bg-white hover:bg-white/90 disabled:bg-white/50 text-gray-900 font-bold py-3 px-6 rounded-lg flex items-center justify-center gap-3 transition-all active:scale-95 shadow-lg",children:e?I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"w-5 h-5 border-2 border-lime-500 border-t-transparent rounded-full animate-spin"}),I.jsx("span",{children:"Signing in..."})]}):I.jsxs(I.Fragment,{children:[I.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[I.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),I.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),I.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),I.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),I.jsx("span",{children:"Sign in with Google"})]})}),i&&I.jsx("div",{className:"mt-4 p-3 bg-red-500/20 border border-red-500/50 rounded-lg text-red-400 text-sm text-center",children:i}),I.jsxs("p",{className:"text-white/40 text-xs mt-6 text-center leading-relaxed",children:[" One-click sign in with your Google account",I.jsx("br",{})," Your data is saved securely in the cloud",I.jsx("br",{})," Access from any device",I.jsx("br",{})," 100% Free - No credit card needed"]})]}),I.jsxs("div",{className:"w-full max-w-md mt-8 grid grid-cols-3 gap-4",children:[I.jsxs("div",{className:"bg-lime-500/10 border border-lime-500/30 rounded-lg p-4 text-center",children:[I.jsx("div",{className:"text-2xl mb-2",children:""}),I.jsx("p",{className:"text-white/70 text-xs font-semibold",children:"AI Diagnosis"})]}),I.jsxs("div",{className:"bg-lime-500/10 border border-lime-500/30 rounded-lg p-4 text-center",children:[I.jsx("div",{className:"text-2xl mb-2",children:""}),I.jsx("p",{className:"text-white/70 text-xs font-semibold",children:"Cloud Storage"})]}),I.jsxs("div",{className:"bg-lime-500/10 border border-lime-500/30 rounded-lg p-4 text-center",children:[I.jsx("div",{className:"text-2xl mb-2",children:""}),I.jsx("p",{className:"text-white/70 text-xs font-semibold",children:"Multi-Device"})]})]})]})},JG=()=>{const[n,e]=He.useState(St.DASHBOARD),[t,i]=He.useState(null),[r,a]=He.useState([]),[u,d]=He.useState(!0),[p,h]=He.useState(!1),[_,T]=He.useState(null);He.useEffect(()=>{const $=qG(async H=>{if(H){h(!0),T(H.uid);const z=await GG(H.uid);if(z){i(z);const X=await zG(H.uid);a(X)}else i(null)}else h(!1),T(null),i(null),a([]);d(!1)});return()=>$()},[]);const E=()=>{},C=async $=>{if(!_)return;const H={...$,uid:_,onboarded:!0};i(H);try{await qN(H)}catch(z){console.error("Error saving profile:",z)}},M=async $=>{if(_)try{const H=await HG(_,$),z=[{...$,id:H},...r];a(z)}catch(H){console.error("Error saving diagnosis:",H)}},U=async()=>{if(confirm("Sign out? You will need to sign in again."))try{await BG(),i(null),a([]),T(null),h(!1),e(St.DASHBOARD)}catch($){console.error("Error signing out:",$)}};if(u)return I.jsxs("div",{className:"min-h-screen bg-green-950 flex flex-col items-center justify-center gap-6",children:[I.jsxs("div",{className:"relative",children:[I.jsx("div",{className:"w-24 h-24 border-8 border-lime-500/20 rounded-full"}),I.jsx("div",{className:"absolute inset-0 w-24 h-24 border-8 border-lime-500 border-t-transparent rounded-full animate-spin"})]}),I.jsxs("div",{className:"text-center",children:[I.jsx("p",{className:"text-lime-400 font-black tracking-[0.3em] text-xs uppercase animate-pulse",children:"Kisan Mitra AI"}),I.jsx("p",{className:"text-white/20 text-[8px] font-black uppercase tracking-[0.5em] mt-2",children:"By Onkar Mahamuni"})]})]});if(!p)return I.jsx($G,{onLoginSuccess:E});if(!(t!=null&&t.onboarded))return I.jsx(w4,{onComplete:C});const P=()=>{switch(n){case St.DASHBOARD:return I.jsx(lw,{userProfile:t,setView:e});case St.DIAGNOSTIC:return I.jsx(T4,{userProfile:t,onSaveHistory:M});case St.ADVISOR:return I.jsx(E4,{userProfile:t});case St.RAJIV_WISDOM:return I.jsx(A4,{});case St.HISTORY:return I.jsx(C4,{history:r});case St.PROFILE:return I.jsx(I4,{userProfile:t,onUpdate:C,onLogout:U});case St.LIVE_VOICE:return I.jsx(b4,{userProfile:t});default:return I.jsx(lw,{userProfile:t,setView:e})}};return I.jsxs(NM,{currentView:n,setView:e,userProfile:t,children:[P(),n!==St.LIVE_VOICE&&I.jsx("button",{onClick:()=>e(St.LIVE_VOICE),className:"fixed bottom-8 right-8 w-16 h-16 bg-green-700 text-white rounded-full shadow-2xl flex items-center justify-center text-3xl hover:bg-green-800 transition-all active:scale-90 z-40 border-4 border-white",children:""})]})};xM.createRoot(document.getElementById("root")).render(I.jsx(EM.StrictMode,{children:I.jsx(JG,{})}));
